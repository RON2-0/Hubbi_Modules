(function(E,b){typeof exports=="object"&&typeof module<"u"?b(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],b):(E=typeof globalThis<"u"?globalThis:E||self,b((E.com=E.com||{},E.com.hubbi=E.com.hubbi||{},E.com.hubbi.inventory={}),E.React))})(this,function(E,b){"use strict";function Ln(e){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,n.get?n:{enumerable:!0,get:()=>e[t]})}}return i.default=e,Object.freeze(i)}const Je=Ln(b);var Xe={exports:{}},Se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At;function Vn(){if(At)return Se;At=1;var e=b,i=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(u,c,p){var f,m={},d=null,l=null;p!==void 0&&(d=""+p),c.key!==void 0&&(d=""+c.key),c.ref!==void 0&&(l=c.ref);for(f in c)n.call(c,f)&&!r.hasOwnProperty(f)&&(m[f]=c[f]);if(u&&u.defaultProps)for(f in c=u.defaultProps,c)m[f]===void 0&&(m[f]=c[f]);return{$$typeof:i,type:u,key:d,ref:l,props:m,_owner:s.current}}return Se.Fragment=t,Se.jsx=a,Se.jsxs=a,Se}var we={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt;function Hn(){return Pt||(Pt=1,process.env.NODE_ENV!=="production"&&function(){var e=b,i=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),l=Symbol.for("react.offscreen"),h=Symbol.iterator,x="@@iterator";function v(g){if(g===null||typeof g!="object")return null;var _=h&&g[h]||g[x];return typeof _=="function"?_:null}var S=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C(g){{for(var _=arguments.length,j=new Array(_>1?_-1:0),T=1;T<_;T++)j[T-1]=arguments[T];w("error",g,j)}}function w(g,_,j){{var T=S.ReactDebugCurrentFrame,$=T.getStackAddendum();$!==""&&(_+="%s",j=j.concat([$]));var H=j.map(function(D){return String(D)});H.unshift("Warning: "+_),Function.prototype.apply.call(console[g],console,H)}}var F=!1,N=!1,O=!1,K=!1,G=!1,M;M=Symbol.for("react.module.reference");function q(g){return!!(typeof g=="string"||typeof g=="function"||g===n||g===r||G||g===s||g===p||g===f||K||g===l||F||N||O||typeof g=="object"&&g!==null&&(g.$$typeof===d||g.$$typeof===m||g.$$typeof===a||g.$$typeof===u||g.$$typeof===c||g.$$typeof===M||g.getModuleId!==void 0))}function X(g,_,j){var T=g.displayName;if(T)return T;var $=_.displayName||_.name||"";return $!==""?j+"("+$+")":j}function z(g){return g.displayName||"Context"}function Y(g){if(g==null)return null;if(typeof g.tag=="number"&&C("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case n:return"Fragment";case t:return"Portal";case r:return"Profiler";case s:return"StrictMode";case p:return"Suspense";case f:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case u:var _=g;return z(_)+".Consumer";case a:var j=g;return z(j._context)+".Provider";case c:return X(g,g.render,"ForwardRef");case m:var T=g.displayName||null;return T!==null?T:Y(g.type)||"Memo";case d:{var $=g,H=$._payload,D=$._init;try{return Y(D(H))}catch{return null}}}return null}var J=Object.assign,Z=0,L,oe,R,ie,V,ae,ge;function ke(){}ke.__reactDisabledLog=!0;function ze(){{if(Z===0){L=console.log,oe=console.info,R=console.warn,ie=console.error,V=console.group,ae=console.groupCollapsed,ge=console.groupEnd;var g={configurable:!0,enumerable:!0,value:ke,writable:!0};Object.defineProperties(console,{info:g,log:g,warn:g,error:g,group:g,groupCollapsed:g,groupEnd:g})}Z++}}function Ue(){{if(Z--,Z===0){var g={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:J({},g,{value:L}),info:J({},g,{value:oe}),warn:J({},g,{value:R}),error:J({},g,{value:ie}),group:J({},g,{value:V}),groupCollapsed:J({},g,{value:ae}),groupEnd:J({},g,{value:ge})})}Z<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ge=S.ReactCurrentDispatcher,Nt;function Be(g,_,j){{if(Nt===void 0)try{throw Error()}catch($){var T=$.stack.trim().match(/\n( *(at )?)/);Nt=T&&T[1]||""}return`
`+Nt+g}}var Rt=!1,We;{var Fo=typeof WeakMap=="function"?WeakMap:Map;We=new Fo}function Cn(g,_){if(!g||Rt)return"";{var j=We.get(g);if(j!==void 0)return j}var T;Rt=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var H;H=Ge.current,Ge.current=null,ze();try{if(_){var D=function(){throw Error()};if(Object.defineProperty(D.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(D,[])}catch(te){T=te}Reflect.construct(g,[],D)}else{try{D.call()}catch(te){T=te}g.call(D.prototype)}}else{try{throw Error()}catch(te){T=te}g()}}catch(te){if(te&&T&&typeof te.stack=="string"){for(var P=te.stack.split(`
`),ee=T.stack.split(`
`),U=P.length-1,B=ee.length-1;U>=1&&B>=0&&P[U]!==ee[B];)B--;for(;U>=1&&B>=0;U--,B--)if(P[U]!==ee[B]){if(U!==1||B!==1)do if(U--,B--,B<0||P[U]!==ee[B]){var se=`
`+P[U].replace(" at new "," at ");return g.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",g.displayName)),typeof g=="function"&&We.set(g,se),se}while(U>=1&&B>=0);break}}}finally{Rt=!1,Ge.current=H,Ue(),Error.prepareStackTrace=$}var _e=g?g.displayName||g.name:"",me=_e?Be(_e):"";return typeof g=="function"&&We.set(g,me),me}function Mo(g,_,j){return Cn(g,!1)}function Ao(g){var _=g.prototype;return!!(_&&_.isReactComponent)}function Ke(g,_,j){if(g==null)return"";if(typeof g=="function")return Cn(g,Ao(g));if(typeof g=="string")return Be(g);switch(g){case p:return Be("Suspense");case f:return Be("SuspenseList")}if(typeof g=="object")switch(g.$$typeof){case c:return Mo(g.render);case m:return Ke(g.type,_,j);case d:{var T=g,$=T._payload,H=T._init;try{return Ke(H($),_,j)}catch{}}}return""}var Te=Object.prototype.hasOwnProperty,En={},jn=S.ReactDebugCurrentFrame;function Ye(g){if(g){var _=g._owner,j=Ke(g.type,g._source,_?_.type:null);jn.setExtraStackFrame(j)}else jn.setExtraStackFrame(null)}function Po(g,_,j,T,$){{var H=Function.call.bind(Te);for(var D in g)if(H(g,D)){var P=void 0;try{if(typeof g[D]!="function"){var ee=Error((T||"React class")+": "+j+" type `"+D+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof g[D]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ee.name="Invariant Violation",ee}P=g[D](_,D,T,j,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(U){P=U}P&&!(P instanceof Error)&&(Ye($),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",T||"React class",j,D,typeof P),Ye(null)),P instanceof Error&&!(P.message in En)&&(En[P.message]=!0,Ye($),C("Failed %s type: %s",j,P.message),Ye(null))}}}var Do=Array.isArray;function It(g){return Do(g)}function Oo(g){{var _=typeof Symbol=="function"&&Symbol.toStringTag,j=_&&g[Symbol.toStringTag]||g.constructor.name||"Object";return j}}function $o(g){try{return Nn(g),!1}catch{return!0}}function Nn(g){return""+g}function Rn(g){if($o(g))return C("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Oo(g)),Nn(g)}var In=S.ReactCurrentOwner,Lo={key:!0,ref:!0,__self:!0,__source:!0},kn,Tn;function Vo(g){if(Te.call(g,"ref")){var _=Object.getOwnPropertyDescriptor(g,"ref").get;if(_&&_.isReactWarning)return!1}return g.ref!==void 0}function Ho(g){if(Te.call(g,"key")){var _=Object.getOwnPropertyDescriptor(g,"key").get;if(_&&_.isReactWarning)return!1}return g.key!==void 0}function qo(g,_){typeof g.ref=="string"&&In.current}function zo(g,_){{var j=function(){kn||(kn=!0,C("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_))};j.isReactWarning=!0,Object.defineProperty(g,"key",{get:j,configurable:!0})}}function Uo(g,_){{var j=function(){Tn||(Tn=!0,C("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_))};j.isReactWarning=!0,Object.defineProperty(g,"ref",{get:j,configurable:!0})}}var Go=function(g,_,j,T,$,H,D){var P={$$typeof:i,type:g,key:_,ref:j,props:D,_owner:H};return P._store={},Object.defineProperty(P._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(P,"_self",{configurable:!1,enumerable:!1,writable:!1,value:T}),Object.defineProperty(P,"_source",{configurable:!1,enumerable:!1,writable:!1,value:$}),Object.freeze&&(Object.freeze(P.props),Object.freeze(P)),P};function Bo(g,_,j,T,$){{var H,D={},P=null,ee=null;j!==void 0&&(Rn(j),P=""+j),Ho(_)&&(Rn(_.key),P=""+_.key),Vo(_)&&(ee=_.ref,qo(_,$));for(H in _)Te.call(_,H)&&!Lo.hasOwnProperty(H)&&(D[H]=_[H]);if(g&&g.defaultProps){var U=g.defaultProps;for(H in U)D[H]===void 0&&(D[H]=U[H])}if(P||ee){var B=typeof g=="function"?g.displayName||g.name||"Unknown":g;P&&zo(D,B),ee&&Uo(D,B)}return Go(g,P,ee,$,T,In.current,D)}}var kt=S.ReactCurrentOwner,Fn=S.ReactDebugCurrentFrame;function ve(g){if(g){var _=g._owner,j=Ke(g.type,g._source,_?_.type:null);Fn.setExtraStackFrame(j)}else Fn.setExtraStackFrame(null)}var Tt;Tt=!1;function Ft(g){return typeof g=="object"&&g!==null&&g.$$typeof===i}function Mn(){{if(kt.current){var g=Y(kt.current.type);if(g)return`

Check the render method of \``+g+"`."}return""}}function Wo(g){return""}var An={};function Ko(g){{var _=Mn();if(!_){var j=typeof g=="string"?g:g.displayName||g.name;j&&(_=`

Check the top-level render call using <`+j+">.")}return _}}function Pn(g,_){{if(!g._store||g._store.validated||g.key!=null)return;g._store.validated=!0;var j=Ko(_);if(An[j])return;An[j]=!0;var T="";g&&g._owner&&g._owner!==kt.current&&(T=" It was passed a child from "+Y(g._owner.type)+"."),ve(g),C('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',j,T),ve(null)}}function Dn(g,_){{if(typeof g!="object")return;if(It(g))for(var j=0;j<g.length;j++){var T=g[j];Ft(T)&&Pn(T,_)}else if(Ft(g))g._store&&(g._store.validated=!0);else if(g){var $=v(g);if(typeof $=="function"&&$!==g.entries)for(var H=$.call(g),D;!(D=H.next()).done;)Ft(D.value)&&Pn(D.value,_)}}}function Yo(g){{var _=g.type;if(_==null||typeof _=="string")return;var j;if(typeof _=="function")j=_.propTypes;else if(typeof _=="object"&&(_.$$typeof===c||_.$$typeof===m))j=_.propTypes;else return;if(j){var T=Y(_);Po(j,g.props,"prop",T,g)}else if(_.PropTypes!==void 0&&!Tt){Tt=!0;var $=Y(_);C("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",$||"Unknown")}typeof _.getDefaultProps=="function"&&!_.getDefaultProps.isReactClassApproved&&C("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Jo(g){{for(var _=Object.keys(g.props),j=0;j<_.length;j++){var T=_[j];if(T!=="children"&&T!=="key"){ve(g),C("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",T),ve(null);break}}g.ref!==null&&(ve(g),C("Invalid attribute `ref` supplied to `React.Fragment`."),ve(null))}}var On={};function $n(g,_,j,T,$,H){{var D=q(g);if(!D){var P="";(g===void 0||typeof g=="object"&&g!==null&&Object.keys(g).length===0)&&(P+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var ee=Wo();ee?P+=ee:P+=Mn();var U;g===null?U="null":It(g)?U="array":g!==void 0&&g.$$typeof===i?(U="<"+(Y(g.type)||"Unknown")+" />",P=" Did you accidentally export a JSX literal instead of a component?"):U=typeof g,C("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",U,P)}var B=Bo(g,_,j,$,H);if(B==null)return B;if(D){var se=_.children;if(se!==void 0)if(T)if(It(se)){for(var _e=0;_e<se.length;_e++)Dn(se[_e],g);Object.freeze&&Object.freeze(se)}else C("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Dn(se,g)}if(Te.call(_,"key")){var me=Y(g),te=Object.keys(_).filter(function(ns){return ns!=="key"}),Mt=te.length>0?"{key: someKey, "+te.join(": ..., ")+": ...}":"{key: someKey}";if(!On[me+Mt]){var ts=te.length>0?"{"+te.join(": ..., ")+": ...}":"{}";C(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Mt,me,ts,me),On[me+Mt]=!0}}return g===n?Jo(B):Yo(B),B}}function Xo(g,_,j){return $n(g,_,j,!0)}function Zo(g,_,j){return $n(g,_,j,!1)}var Qo=Zo,es=Xo;we.Fragment=n,we.jsx=Qo,we.jsxs=es}()),we}process.env.NODE_ENV==="production"?Xe.exports=Vn():Xe.exports=Hn();var o=Xe.exports;const y=window.hubbi;/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ze(){return{accessor:(e,i)=>typeof e=="function"?{...i,accessorFn:e}:{...i,accessorKey:e},display:e=>e,group:e=>e}}function de(e,i){return typeof e=="function"?e(i):e}function ne(e,i){return t=>{i.setState(n=>({...n,[e]:de(t,n[e])}))}}function Fe(e){return e instanceof Function}function qn(e){return Array.isArray(e)&&e.every(i=>typeof i=="number")}function zn(e,i){const t=[],n=s=>{s.forEach(r=>{t.push(r);const a=i(r);a!=null&&a.length&&n(a)})};return n(e),t}function I(e,i,t){let n=[],s;return r=>{let a;t.key&&t.debug&&(a=Date.now());const u=e(r);if(!(u.length!==n.length||u.some((f,m)=>n[m]!==f)))return s;n=u;let p;if(t.key&&t.debug&&(p=Date.now()),s=i(...u),t==null||t.onChange==null||t.onChange(s),t.key&&t.debug&&t!=null&&t.debug()){const f=Math.round((Date.now()-a)*100)/100,m=Math.round((Date.now()-p)*100)/100,d=m/16,l=(h,x)=>{for(h=String(h);h.length<x;)h=" "+h;return h};console.info(`%câ± ${l(m,5)} /${l(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,t==null?void 0:t.key)}return s}}function k(e,i,t,n){return{debug:()=>{var s;return(s=e==null?void 0:e.debugAll)!=null?s:e[i]},key:process.env.NODE_ENV==="development"&&t,onChange:n}}function Un(e,i,t,n){const s=()=>{var a;return(a=r.getValue())!=null?a:e.options.renderFallbackValue},r={id:`${i.id}_${t.id}`,row:i,column:t,getValue:()=>i.getValue(n),renderValue:s,getContext:I(()=>[e,t,i,r],(a,u,c,p)=>({table:a,column:u,row:c,cell:p,getValue:p.getValue,renderValue:p.renderValue}),k(e.options,"debugCells","cell.getContext"))};return e._features.forEach(a=>{a.createCell==null||a.createCell(r,t,i,e)},{}),r}function Gn(e,i,t,n){var s,r;const u={...e._getDefaultColumnDef(),...i},c=u.accessorKey;let p=(s=(r=u.id)!=null?r:c?typeof String.prototype.replaceAll=="function"?c.replaceAll(".","_"):c.replace(/\./g,"_"):void 0)!=null?s:typeof u.header=="string"?u.header:void 0,f;if(u.accessorFn?f=u.accessorFn:c&&(c.includes(".")?f=d=>{let l=d;for(const x of c.split(".")){var h;l=(h=l)==null?void 0:h[x],process.env.NODE_ENV!=="production"&&l===void 0&&console.warn(`"${x}" in deeply nested key "${c}" returned undefined.`)}return l}:f=d=>d[u.accessorKey]),!p)throw process.env.NODE_ENV!=="production"?new Error(u.accessorFn?"Columns require an id when using an accessorFn":"Columns require an id when using a non-string header"):new Error;let m={id:`${String(p)}`,accessorFn:f,parent:n,depth:t,columnDef:u,columns:[],getFlatColumns:I(()=>[!0],()=>{var d;return[m,...(d=m.columns)==null?void 0:d.flatMap(l=>l.getFlatColumns())]},k(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:I(()=>[e._getOrderColumnsFn()],d=>{var l;if((l=m.columns)!=null&&l.length){let h=m.columns.flatMap(x=>x.getLeafColumns());return d(h)}return[m]},k(e.options,"debugColumns","column.getLeafColumns"))};for(const d of e._features)d.createColumn==null||d.createColumn(m,e);return m}const Q="debugHeaders";function Dt(e,i,t){var n;let r={id:(n=t.id)!=null?n:i.id,column:i,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],u=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(u),a.push(c)};return u(r),a},getContext:()=>({table:e,header:r,column:i})};return e._features.forEach(a=>{a.createHeader==null||a.createHeader(r,e)}),r}const Bn={createTable:e=>{e.getHeaderGroups=I(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(i,t,n,s)=>{var r,a;const u=(r=n==null?void 0:n.map(m=>t.find(d=>d.id===m)).filter(Boolean))!=null?r:[],c=(a=s==null?void 0:s.map(m=>t.find(d=>d.id===m)).filter(Boolean))!=null?a:[],p=t.filter(m=>!(n!=null&&n.includes(m.id))&&!(s!=null&&s.includes(m.id)));return Me(i,[...u,...p,...c],e)},k(e.options,Q,"getHeaderGroups")),e.getCenterHeaderGroups=I(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(i,t,n,s)=>(t=t.filter(r=>!(n!=null&&n.includes(r.id))&&!(s!=null&&s.includes(r.id))),Me(i,t,e,"center")),k(e.options,Q,"getCenterHeaderGroups")),e.getLeftHeaderGroups=I(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(i,t,n)=>{var s;const r=(s=n==null?void 0:n.map(a=>t.find(u=>u.id===a)).filter(Boolean))!=null?s:[];return Me(i,r,e,"left")},k(e.options,Q,"getLeftHeaderGroups")),e.getRightHeaderGroups=I(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(i,t,n)=>{var s;const r=(s=n==null?void 0:n.map(a=>t.find(u=>u.id===a)).filter(Boolean))!=null?s:[];return Me(i,r,e,"right")},k(e.options,Q,"getRightHeaderGroups")),e.getFooterGroups=I(()=>[e.getHeaderGroups()],i=>[...i].reverse(),k(e.options,Q,"getFooterGroups")),e.getLeftFooterGroups=I(()=>[e.getLeftHeaderGroups()],i=>[...i].reverse(),k(e.options,Q,"getLeftFooterGroups")),e.getCenterFooterGroups=I(()=>[e.getCenterHeaderGroups()],i=>[...i].reverse(),k(e.options,Q,"getCenterFooterGroups")),e.getRightFooterGroups=I(()=>[e.getRightHeaderGroups()],i=>[...i].reverse(),k(e.options,Q,"getRightFooterGroups")),e.getFlatHeaders=I(()=>[e.getHeaderGroups()],i=>i.map(t=>t.headers).flat(),k(e.options,Q,"getFlatHeaders")),e.getLeftFlatHeaders=I(()=>[e.getLeftHeaderGroups()],i=>i.map(t=>t.headers).flat(),k(e.options,Q,"getLeftFlatHeaders")),e.getCenterFlatHeaders=I(()=>[e.getCenterHeaderGroups()],i=>i.map(t=>t.headers).flat(),k(e.options,Q,"getCenterFlatHeaders")),e.getRightFlatHeaders=I(()=>[e.getRightHeaderGroups()],i=>i.map(t=>t.headers).flat(),k(e.options,Q,"getRightFlatHeaders")),e.getCenterLeafHeaders=I(()=>[e.getCenterFlatHeaders()],i=>i.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),k(e.options,Q,"getCenterLeafHeaders")),e.getLeftLeafHeaders=I(()=>[e.getLeftFlatHeaders()],i=>i.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),k(e.options,Q,"getLeftLeafHeaders")),e.getRightLeafHeaders=I(()=>[e.getRightFlatHeaders()],i=>i.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),k(e.options,Q,"getRightLeafHeaders")),e.getLeafHeaders=I(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(i,t,n)=>{var s,r,a,u,c,p;return[...(s=(r=i[0])==null?void 0:r.headers)!=null?s:[],...(a=(u=t[0])==null?void 0:u.headers)!=null?a:[],...(c=(p=n[0])==null?void 0:p.headers)!=null?c:[]].map(f=>f.getLeafHeaders()).flat()},k(e.options,Q,"getLeafHeaders"))}};function Me(e,i,t,n){var s,r;let a=0;const u=function(d,l){l===void 0&&(l=1),a=Math.max(a,l),d.filter(h=>h.getIsVisible()).forEach(h=>{var x;(x=h.columns)!=null&&x.length&&u(h.columns,l+1)},0)};u(e);let c=[];const p=(d,l)=>{const h={depth:l,id:[n,`${l}`].filter(Boolean).join("_"),headers:[]},x=[];d.forEach(v=>{const S=[...x].reverse()[0],C=v.column.depth===h.depth;let w,F=!1;if(C&&v.column.parent?w=v.column.parent:(w=v.column,F=!0),S&&(S==null?void 0:S.column)===w)S.subHeaders.push(v);else{const N=Dt(t,w,{id:[n,l,w.id,v==null?void 0:v.id].filter(Boolean).join("_"),isPlaceholder:F,placeholderId:F?`${x.filter(O=>O.column===w).length}`:void 0,depth:l,index:x.length});N.subHeaders.push(v),x.push(N)}h.headers.push(v),v.headerGroup=h}),c.push(h),l>0&&p(x,l-1)},f=i.map((d,l)=>Dt(t,d,{depth:a,index:l}));p(f,a-1),c.reverse();const m=d=>d.filter(h=>h.column.getIsVisible()).map(h=>{let x=0,v=0,S=[0];h.subHeaders&&h.subHeaders.length?(S=[],m(h.subHeaders).forEach(w=>{let{colSpan:F,rowSpan:N}=w;x+=F,S.push(N)})):x=1;const C=Math.min(...S);return v=v+C,h.colSpan=x,h.rowSpan=v,{colSpan:x,rowSpan:v}});return m((s=(r=c[0])==null?void 0:r.headers)!=null?s:[]),c}const Qe=(e,i,t,n,s,r,a)=>{let u={id:i,index:n,original:t,depth:s,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:c=>{if(u._valuesCache.hasOwnProperty(c))return u._valuesCache[c];const p=e.getColumn(c);if(p!=null&&p.accessorFn)return u._valuesCache[c]=p.accessorFn(u.original,n),u._valuesCache[c]},getUniqueValues:c=>{if(u._uniqueValuesCache.hasOwnProperty(c))return u._uniqueValuesCache[c];const p=e.getColumn(c);if(p!=null&&p.accessorFn)return p.columnDef.getUniqueValues?(u._uniqueValuesCache[c]=p.columnDef.getUniqueValues(u.original,n),u._uniqueValuesCache[c]):(u._uniqueValuesCache[c]=[u.getValue(c)],u._uniqueValuesCache[c])},renderValue:c=>{var p;return(p=u.getValue(c))!=null?p:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>zn(u.subRows,c=>c.subRows),getParentRow:()=>u.parentId?e.getRow(u.parentId,!0):void 0,getParentRows:()=>{let c=[],p=u;for(;;){const f=p.getParentRow();if(!f)break;c.push(f),p=f}return c.reverse()},getAllCells:I(()=>[e.getAllLeafColumns()],c=>c.map(p=>Un(e,u,p,p.id)),k(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:I(()=>[u.getAllCells()],c=>c.reduce((p,f)=>(p[f.column.id]=f,p),{}),k(e.options,"debugRows","getAllCellsByColumnId"))};for(let c=0;c<e._features.length;c++){const p=e._features[c];p==null||p.createRow==null||p.createRow(u,e)}return u},Wn={createColumn:(e,i)=>{e._getFacetedRowModel=i.options.getFacetedRowModel&&i.options.getFacetedRowModel(i,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():i.getPreFilteredRowModel(),e._getFacetedUniqueValues=i.options.getFacetedUniqueValues&&i.options.getFacetedUniqueValues(i,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=i.options.getFacetedMinMaxValues&&i.options.getFacetedMinMaxValues(i,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Ot=(e,i,t)=>{var n,s;const r=t==null||(n=t.toString())==null?void 0:n.toLowerCase();return!!(!((s=e.getValue(i))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(r))};Ot.autoRemove=e=>re(e);const $t=(e,i,t)=>{var n;return!!(!((n=e.getValue(i))==null||(n=n.toString())==null)&&n.includes(t))};$t.autoRemove=e=>re(e);const Lt=(e,i,t)=>{var n;return((n=e.getValue(i))==null||(n=n.toString())==null?void 0:n.toLowerCase())===(t==null?void 0:t.toLowerCase())};Lt.autoRemove=e=>re(e);const Vt=(e,i,t)=>{var n;return(n=e.getValue(i))==null?void 0:n.includes(t)};Vt.autoRemove=e=>re(e);const Ht=(e,i,t)=>!t.some(n=>{var s;return!((s=e.getValue(i))!=null&&s.includes(n))});Ht.autoRemove=e=>re(e)||!(e!=null&&e.length);const qt=(e,i,t)=>t.some(n=>{var s;return(s=e.getValue(i))==null?void 0:s.includes(n)});qt.autoRemove=e=>re(e)||!(e!=null&&e.length);const zt=(e,i,t)=>e.getValue(i)===t;zt.autoRemove=e=>re(e);const Ut=(e,i,t)=>e.getValue(i)==t;Ut.autoRemove=e=>re(e);const et=(e,i,t)=>{let[n,s]=t;const r=e.getValue(i);return r>=n&&r<=s};et.resolveFilterValue=e=>{let[i,t]=e,n=typeof i!="number"?parseFloat(i):i,s=typeof t!="number"?parseFloat(t):t,r=i===null||Number.isNaN(n)?-1/0:n,a=t===null||Number.isNaN(s)?1/0:s;if(r>a){const u=r;r=a,a=u}return[r,a]},et.autoRemove=e=>re(e)||re(e[0])&&re(e[1]);const le={includesString:Ot,includesStringSensitive:$t,equalsString:Lt,arrIncludes:Vt,arrIncludesAll:Ht,arrIncludesSome:qt,equals:zt,weakEquals:Ut,inNumberRange:et};function re(e){return e==null||e===""}const Kn={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ne("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,i)=>{e.getAutoFilterFn=()=>{const t=i.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(e.id);return typeof n=="string"?le.includesString:typeof n=="number"?le.inNumberRange:typeof n=="boolean"||n!==null&&typeof n=="object"?le.equals:Array.isArray(n)?le.arrIncludes:le.weakEquals},e.getFilterFn=()=>{var t,n;return Fe(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(t=(n=i.options.filterFns)==null?void 0:n[e.columnDef.filterFn])!=null?t:le[e.columnDef.filterFn]},e.getCanFilter=()=>{var t,n,s;return((t=e.columnDef.enableColumnFilter)!=null?t:!0)&&((n=i.options.enableColumnFilters)!=null?n:!0)&&((s=i.options.enableFilters)!=null?s:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var t;return(t=i.getState().columnFilters)==null||(t=t.find(n=>n.id===e.id))==null?void 0:t.value},e.getFilterIndex=()=>{var t,n;return(t=(n=i.getState().columnFilters)==null?void 0:n.findIndex(s=>s.id===e.id))!=null?t:-1},e.setFilterValue=t=>{i.setColumnFilters(n=>{const s=e.getFilterFn(),r=n==null?void 0:n.find(f=>f.id===e.id),a=de(t,r?r.value:void 0);if(Gt(s,a,e)){var u;return(u=n==null?void 0:n.filter(f=>f.id!==e.id))!=null?u:[]}const c={id:e.id,value:a};if(r){var p;return(p=n==null?void 0:n.map(f=>f.id===e.id?c:f))!=null?p:[]}return n!=null&&n.length?[...n,c]:[c]})}},createRow:(e,i)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=i=>{const t=e.getAllLeafColumns(),n=s=>{var r;return(r=de(i,s))==null?void 0:r.filter(a=>{const u=t.find(c=>c.id===a.id);if(u){const c=u.getFilterFn();if(Gt(c,a.value,u))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(n)},e.resetColumnFilters=i=>{var t,n;e.setColumnFilters(i?[]:(t=(n=e.initialState)==null?void 0:n.columnFilters)!=null?t:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Gt(e,i,t){return(e&&e.autoRemove?e.autoRemove(i,t):!1)||typeof i>"u"||typeof i=="string"&&!i}const tt={sum:(e,i,t)=>t.reduce((n,s)=>{const r=s.getValue(e);return n+(typeof r=="number"?r:0)},0),min:(e,i,t)=>{let n;return t.forEach(s=>{const r=s.getValue(e);r!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}),n},max:(e,i,t)=>{let n;return t.forEach(s=>{const r=s.getValue(e);r!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}),n},extent:(e,i,t)=>{let n,s;return t.forEach(r=>{const a=r.getValue(e);a!=null&&(n===void 0?a>=a&&(n=s=a):(n>a&&(n=a),s<a&&(s=a)))}),[n,s]},mean:(e,i)=>{let t=0,n=0;if(i.forEach(s=>{let r=s.getValue(e);r!=null&&(r=+r)>=r&&(++t,n+=r)}),t)return n/t},median:(e,i)=>{if(!i.length)return;const t=i.map(r=>r.getValue(e));if(!qn(t))return;if(t.length===1)return t[0];const n=Math.floor(t.length/2),s=t.sort((r,a)=>r-a);return t.length%2!==0?s[n]:(s[n-1]+s[n])/2},unique:(e,i)=>Array.from(new Set(i.map(t=>t.getValue(e))).values()),uniqueCount:(e,i)=>new Set(i.map(t=>t.getValue(e))).size,count:(e,i)=>i.length},Yn={getDefaultColumnDef:()=>({aggregatedCell:e=>{var i,t;return(i=(t=e.getValue())==null||t.toString==null?void 0:t.toString())!=null?i:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ne("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,i)=>{e.toggleGrouping=()=>{i.setGrouping(t=>t!=null&&t.includes(e.id)?t.filter(n=>n!==e.id):[...t??[],e.id])},e.getCanGroup=()=>{var t,n;return((t=e.columnDef.enableGrouping)!=null?t:!0)&&((n=i.options.enableGrouping)!=null?n:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var t;return(t=i.getState().grouping)==null?void 0:t.includes(e.id)},e.getGroupedIndex=()=>{var t;return(t=i.getState().grouping)==null?void 0:t.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const t=i.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(e.id);if(typeof n=="number")return tt.sum;if(Object.prototype.toString.call(n)==="[object Date]")return tt.extent},e.getAggregationFn=()=>{var t,n;if(!e)throw new Error;return Fe(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(t=(n=i.options.aggregationFns)==null?void 0:n[e.columnDef.aggregationFn])!=null?t:tt[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=i=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(i),e.resetGrouping=i=>{var t,n;e.setGrouping(i?[]:(t=(n=e.initialState)==null?void 0:n.grouping)!=null?t:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,i)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=t=>{if(e._groupingValuesCache.hasOwnProperty(t))return e._groupingValuesCache[t];const n=i.getColumn(t);return n!=null&&n.columnDef.getGroupingValue?(e._groupingValuesCache[t]=n.columnDef.getGroupingValue(e.original),e._groupingValuesCache[t]):e.getValue(t)},e._groupingValuesCache={}},createCell:(e,i,t,n)=>{e.getIsGrouped=()=>i.getIsGrouped()&&i.id===t.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&i.getIsGrouped(),e.getIsAggregated=()=>{var s;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((s=t.subRows)!=null&&s.length)}}};function Jn(e,i,t){if(!(i!=null&&i.length)||!t)return e;const n=e.filter(r=>!i.includes(r.id));return t==="remove"?n:[...i.map(r=>e.find(a=>a.id===r)).filter(Boolean),...n]}const Xn={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ne("columnOrder",e)}),createColumn:(e,i)=>{e.getIndex=I(t=>[Ce(i,t)],t=>t.findIndex(n=>n.id===e.id),k(i.options,"debugColumns","getIndex")),e.getIsFirstColumn=t=>{var n;return((n=Ce(i,t)[0])==null?void 0:n.id)===e.id},e.getIsLastColumn=t=>{var n;const s=Ce(i,t);return((n=s[s.length-1])==null?void 0:n.id)===e.id}},createTable:e=>{e.setColumnOrder=i=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(i),e.resetColumnOrder=i=>{var t;e.setColumnOrder(i?[]:(t=e.initialState.columnOrder)!=null?t:[])},e._getOrderColumnsFn=I(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(i,t,n)=>s=>{let r=[];if(!(i!=null&&i.length))r=s;else{const a=[...i],u=[...s];for(;u.length&&a.length;){const c=a.shift(),p=u.findIndex(f=>f.id===c);p>-1&&r.push(u.splice(p,1)[0])}r=[...r,...u]}return Jn(r,t,n)},k(e.options,"debugTable","_getOrderColumnsFn"))}},nt=()=>({left:[],right:[]}),Zn={getInitialState:e=>({columnPinning:nt(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ne("columnPinning",e)}),createColumn:(e,i)=>{e.pin=t=>{const n=e.getLeafColumns().map(s=>s.id).filter(Boolean);i.setColumnPinning(s=>{var r,a;if(t==="right"){var u,c;return{left:((u=s==null?void 0:s.left)!=null?u:[]).filter(m=>!(n!=null&&n.includes(m))),right:[...((c=s==null?void 0:s.right)!=null?c:[]).filter(m=>!(n!=null&&n.includes(m))),...n]}}if(t==="left"){var p,f;return{left:[...((p=s==null?void 0:s.left)!=null?p:[]).filter(m=>!(n!=null&&n.includes(m))),...n],right:((f=s==null?void 0:s.right)!=null?f:[]).filter(m=>!(n!=null&&n.includes(m)))}}return{left:((r=s==null?void 0:s.left)!=null?r:[]).filter(m=>!(n!=null&&n.includes(m))),right:((a=s==null?void 0:s.right)!=null?a:[]).filter(m=>!(n!=null&&n.includes(m)))}})},e.getCanPin=()=>e.getLeafColumns().some(n=>{var s,r,a;return((s=n.columnDef.enablePinning)!=null?s:!0)&&((r=(a=i.options.enableColumnPinning)!=null?a:i.options.enablePinning)!=null?r:!0)}),e.getIsPinned=()=>{const t=e.getLeafColumns().map(u=>u.id),{left:n,right:s}=i.getState().columnPinning,r=t.some(u=>n==null?void 0:n.includes(u)),a=t.some(u=>s==null?void 0:s.includes(u));return r?"left":a?"right":!1},e.getPinnedIndex=()=>{var t,n;const s=e.getIsPinned();return s?(t=(n=i.getState().columnPinning)==null||(n=n[s])==null?void 0:n.indexOf(e.id))!=null?t:-1:0}},createRow:(e,i)=>{e.getCenterVisibleCells=I(()=>[e._getAllVisibleCells(),i.getState().columnPinning.left,i.getState().columnPinning.right],(t,n,s)=>{const r=[...n??[],...s??[]];return t.filter(a=>!r.includes(a.column.id))},k(i.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=I(()=>[e._getAllVisibleCells(),i.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(a=>a.column.id===r)).filter(Boolean).map(r=>({...r,position:"left"})),k(i.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=I(()=>[e._getAllVisibleCells(),i.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(a=>a.column.id===r)).filter(Boolean).map(r=>({...r,position:"right"})),k(i.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=i=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(i),e.resetColumnPinning=i=>{var t,n;return e.setColumnPinning(i?nt():(t=(n=e.initialState)==null?void 0:n.columnPinning)!=null?t:nt())},e.getIsSomeColumnsPinned=i=>{var t;const n=e.getState().columnPinning;if(!i){var s,r;return!!((s=n.left)!=null&&s.length||(r=n.right)!=null&&r.length)}return!!((t=n[i])!=null&&t.length)},e.getLeftLeafColumns=I(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(i,t)=>(t??[]).map(n=>i.find(s=>s.id===n)).filter(Boolean),k(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=I(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(i,t)=>(t??[]).map(n=>i.find(s=>s.id===n)).filter(Boolean),k(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=I(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(i,t,n)=>{const s=[...t??[],...n??[]];return i.filter(r=>!s.includes(r.id))},k(e.options,"debugColumns","getCenterLeafColumns"))}};function Qn(e){return e||(typeof document<"u"?document:null)}const Ae={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},it=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),ei={getDefaultColumnDef:()=>Ae,getInitialState:e=>({columnSizing:{},columnSizingInfo:it(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ne("columnSizing",e),onColumnSizingInfoChange:ne("columnSizingInfo",e)}),createColumn:(e,i)=>{e.getSize=()=>{var t,n,s;const r=i.getState().columnSizing[e.id];return Math.min(Math.max((t=e.columnDef.minSize)!=null?t:Ae.minSize,(n=r??e.columnDef.size)!=null?n:Ae.size),(s=e.columnDef.maxSize)!=null?s:Ae.maxSize)},e.getStart=I(t=>[t,Ce(i,t),i.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((s,r)=>s+r.getSize(),0),k(i.options,"debugColumns","getStart")),e.getAfter=I(t=>[t,Ce(i,t),i.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((s,r)=>s+r.getSize(),0),k(i.options,"debugColumns","getAfter")),e.resetSize=()=>{i.setColumnSizing(t=>{let{[e.id]:n,...s}=t;return s})},e.getCanResize=()=>{var t,n;return((t=e.columnDef.enableResizing)!=null?t:!0)&&((n=i.options.enableColumnResizing)!=null?n:!0)},e.getIsResizing=()=>i.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,i)=>{e.getSize=()=>{let t=0;const n=s=>{if(s.subHeaders.length)s.subHeaders.forEach(n);else{var r;t+=(r=s.column.getSize())!=null?r:0}};return n(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=t=>{const n=i.getColumn(e.column.id),s=n==null?void 0:n.getCanResize();return r=>{if(!n||!s||(r.persist==null||r.persist(),ot(r)&&r.touches&&r.touches.length>1))return;const a=e.getSize(),u=e?e.getLeafHeaders().map(S=>[S.column.id,S.column.getSize()]):[[n.id,n.getSize()]],c=ot(r)?Math.round(r.touches[0].clientX):r.clientX,p={},f=(S,C)=>{typeof C=="number"&&(i.setColumnSizingInfo(w=>{var F,N;const O=i.options.columnResizeDirection==="rtl"?-1:1,K=(C-((F=w==null?void 0:w.startOffset)!=null?F:0))*O,G=Math.max(K/((N=w==null?void 0:w.startSize)!=null?N:0),-.999999);return w.columnSizingStart.forEach(M=>{let[q,X]=M;p[q]=Math.round(Math.max(X+X*G,0)*100)/100}),{...w,deltaOffset:K,deltaPercentage:G}}),(i.options.columnResizeMode==="onChange"||S==="end")&&i.setColumnSizing(w=>({...w,...p})))},m=S=>f("move",S),d=S=>{f("end",S),i.setColumnSizingInfo(C=>({...C,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},l=Qn(t),h={moveHandler:S=>m(S.clientX),upHandler:S=>{l==null||l.removeEventListener("mousemove",h.moveHandler),l==null||l.removeEventListener("mouseup",h.upHandler),d(S.clientX)}},x={moveHandler:S=>(S.cancelable&&(S.preventDefault(),S.stopPropagation()),m(S.touches[0].clientX),!1),upHandler:S=>{var C;l==null||l.removeEventListener("touchmove",x.moveHandler),l==null||l.removeEventListener("touchend",x.upHandler),S.cancelable&&(S.preventDefault(),S.stopPropagation()),d((C=S.touches[0])==null?void 0:C.clientX)}},v=ti()?{passive:!1}:!1;ot(r)?(l==null||l.addEventListener("touchmove",x.moveHandler,v),l==null||l.addEventListener("touchend",x.upHandler,v)):(l==null||l.addEventListener("mousemove",h.moveHandler,v),l==null||l.addEventListener("mouseup",h.upHandler,v)),i.setColumnSizingInfo(S=>({...S,startOffset:c,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:u,isResizingColumn:n.id}))}}},createTable:e=>{e.setColumnSizing=i=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(i),e.setColumnSizingInfo=i=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(i),e.resetColumnSizing=i=>{var t;e.setColumnSizing(i?{}:(t=e.initialState.columnSizing)!=null?t:{})},e.resetHeaderSizeInfo=i=>{var t;e.setColumnSizingInfo(i?it():(t=e.initialState.columnSizingInfo)!=null?t:it())},e.getTotalSize=()=>{var i,t;return(i=(t=e.getHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?i:0},e.getLeftTotalSize=()=>{var i,t;return(i=(t=e.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?i:0},e.getCenterTotalSize=()=>{var i,t;return(i=(t=e.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?i:0},e.getRightTotalSize=()=>{var i,t;return(i=(t=e.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((n,s)=>n+s.getSize(),0))!=null?i:0}}};let Pe=null;function ti(){if(typeof Pe=="boolean")return Pe;let e=!1;try{const i={get passive(){return e=!0,!1}},t=()=>{};window.addEventListener("test",t,i),window.removeEventListener("test",t)}catch{e=!1}return Pe=e,Pe}function ot(e){return e.type==="touchstart"}const ni={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ne("columnVisibility",e)}),createColumn:(e,i)=>{e.toggleVisibility=t=>{e.getCanHide()&&i.setColumnVisibility(n=>({...n,[e.id]:t??!e.getIsVisible()}))},e.getIsVisible=()=>{var t,n;const s=e.columns;return(t=s.length?s.some(r=>r.getIsVisible()):(n=i.getState().columnVisibility)==null?void 0:n[e.id])!=null?t:!0},e.getCanHide=()=>{var t,n;return((t=e.columnDef.enableHiding)!=null?t:!0)&&((n=i.options.enableHiding)!=null?n:!0)},e.getToggleVisibilityHandler=()=>t=>{e.toggleVisibility==null||e.toggleVisibility(t.target.checked)}},createRow:(e,i)=>{e._getAllVisibleCells=I(()=>[e.getAllCells(),i.getState().columnVisibility],t=>t.filter(n=>n.column.getIsVisible()),k(i.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=I(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(t,n,s)=>[...t,...n,...s],k(i.options,"debugRows","getVisibleCells"))},createTable:e=>{const i=(t,n)=>I(()=>[n(),n().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(r=>r.getIsVisible==null?void 0:r.getIsVisible()),k(e.options,"debugColumns",t));e.getVisibleFlatColumns=i("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=i("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=i("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=i("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=i("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:(n=e.initialState.columnVisibility)!=null?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=(n=t)!=null?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((s,r)=>({...s,[r.id]:t||!(r.getCanHide!=null&&r.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible((n=t.target)==null?void 0:n.checked)}}};function Ce(e,i){return i?i==="center"?e.getCenterVisibleLeafColumns():i==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const ii={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},oi={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ne("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:i=>{var t;const n=(t=e.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[i.id])==null?void 0:t.getValue();return typeof n=="string"||typeof n=="number"}}),createColumn:(e,i)=>{e.getCanGlobalFilter=()=>{var t,n,s,r;return((t=e.columnDef.enableGlobalFilter)!=null?t:!0)&&((n=i.options.enableGlobalFilter)!=null?n:!0)&&((s=i.options.enableFilters)!=null?s:!0)&&((r=i.options.getColumnCanGlobalFilter==null?void 0:i.options.getColumnCanGlobalFilter(e))!=null?r:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>le.includesString,e.getGlobalFilterFn=()=>{var i,t;const{globalFilterFn:n}=e.options;return Fe(n)?n:n==="auto"?e.getGlobalAutoFilterFn():(i=(t=e.options.filterFns)==null?void 0:t[n])!=null?i:le[n]},e.setGlobalFilter=i=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(i)},e.resetGlobalFilter=i=>{e.setGlobalFilter(i?void 0:e.initialState.globalFilter)}}},si={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ne("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let i=!1,t=!1;e._autoResetExpanded=()=>{var n,s;if(!i){e._queue(()=>{i=!0});return}if((n=(s=e.options.autoResetAll)!=null?s:e.options.autoResetExpanded)!=null?n:!e.options.manualExpanding){if(t)return;t=!0,e._queue(()=>{e.resetExpanded(),t=!1})}},e.setExpanded=n=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(n),e.toggleAllRowsExpanded=n=>{n??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=n=>{var s,r;e.setExpanded(n?{}:(s=(r=e.initialState)==null?void 0:r.expanded)!=null?s:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(n=>n.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>n=>{n.persist==null||n.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const n=e.getState().expanded;return n===!0||Object.values(n).some(Boolean)},e.getIsAllRowsExpanded=()=>{const n=e.getState().expanded;return typeof n=="boolean"?n===!0:!(!Object.keys(n).length||e.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},e.getExpandedDepth=()=>{let n=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(r=>{const a=r.split(".");n=Math.max(n,a.length)}),n},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,i)=>{e.toggleExpanded=t=>{i.setExpanded(n=>{var s;const r=n===!0?!0:!!(n!=null&&n[e.id]);let a={};if(n===!0?Object.keys(i.getRowModel().rowsById).forEach(u=>{a[u]=!0}):a=n,t=(s=t)!=null?s:!r,!r&&t)return{...a,[e.id]:!0};if(r&&!t){const{[e.id]:u,...c}=a;return c}return n})},e.getIsExpanded=()=>{var t;const n=i.getState().expanded;return!!((t=i.options.getIsRowExpanded==null?void 0:i.options.getIsRowExpanded(e))!=null?t:n===!0||n!=null&&n[e.id])},e.getCanExpand=()=>{var t,n,s;return(t=i.options.getRowCanExpand==null?void 0:i.options.getRowCanExpand(e))!=null?t:((n=i.options.enableExpanding)!=null?n:!0)&&!!((s=e.subRows)!=null&&s.length)},e.getIsAllParentsExpanded=()=>{let t=!0,n=e;for(;t&&n.parentId;)n=i.getRow(n.parentId,!0),t=n.getIsExpanded();return t},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},st=0,rt=10,at=()=>({pageIndex:st,pageSize:rt}),ri={getInitialState:e=>({...e,pagination:{...at(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:ne("pagination",e)}),createTable:e=>{let i=!1,t=!1;e._autoResetPageIndex=()=>{var n,s;if(!i){e._queue(()=>{i=!0});return}if((n=(s=e.options.autoResetAll)!=null?s:e.options.autoResetPageIndex)!=null?n:!e.options.manualPagination){if(t)return;t=!0,e._queue(()=>{e.resetPageIndex(),t=!1})}},e.setPagination=n=>{const s=r=>de(n,r);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(s)},e.resetPagination=n=>{var s;e.setPagination(n?at():(s=e.initialState.pagination)!=null?s:at())},e.setPageIndex=n=>{e.setPagination(s=>{let r=de(n,s.pageIndex);const a=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return r=Math.max(0,Math.min(r,a)),{...s,pageIndex:r}})},e.resetPageIndex=n=>{var s,r;e.setPageIndex(n?st:(s=(r=e.initialState)==null||(r=r.pagination)==null?void 0:r.pageIndex)!=null?s:st)},e.resetPageSize=n=>{var s,r;e.setPageSize(n?rt:(s=(r=e.initialState)==null||(r=r.pagination)==null?void 0:r.pageSize)!=null?s:rt)},e.setPageSize=n=>{e.setPagination(s=>{const r=Math.max(1,de(n,s.pageSize)),a=s.pageSize*s.pageIndex,u=Math.floor(a/r);return{...s,pageIndex:u,pageSize:r}})},e.setPageCount=n=>e.setPagination(s=>{var r;let a=de(n,(r=e.options.pageCount)!=null?r:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...s,pageCount:a}}),e.getPageOptions=I(()=>[e.getPageCount()],n=>{let s=[];return n&&n>0&&(s=[...new Array(n)].fill(null).map((r,a)=>a)),s},k(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:n}=e.getState().pagination,s=e.getPageCount();return s===-1?!0:s===0?!1:n<s-1},e.previousPage=()=>e.setPageIndex(n=>n-1),e.nextPage=()=>e.setPageIndex(n=>n+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var n;return(n=e.options.pageCount)!=null?n:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var n;return(n=e.options.rowCount)!=null?n:e.getPrePaginationRowModel().rows.length}}},lt=()=>({top:[],bottom:[]}),ai={getInitialState:e=>({rowPinning:lt(),...e}),getDefaultOptions:e=>({onRowPinningChange:ne("rowPinning",e)}),createRow:(e,i)=>{e.pin=(t,n,s)=>{const r=n?e.getLeafRows().map(c=>{let{id:p}=c;return p}):[],a=s?e.getParentRows().map(c=>{let{id:p}=c;return p}):[],u=new Set([...a,e.id,...r]);i.setRowPinning(c=>{var p,f;if(t==="bottom"){var m,d;return{top:((m=c==null?void 0:c.top)!=null?m:[]).filter(x=>!(u!=null&&u.has(x))),bottom:[...((d=c==null?void 0:c.bottom)!=null?d:[]).filter(x=>!(u!=null&&u.has(x))),...Array.from(u)]}}if(t==="top"){var l,h;return{top:[...((l=c==null?void 0:c.top)!=null?l:[]).filter(x=>!(u!=null&&u.has(x))),...Array.from(u)],bottom:((h=c==null?void 0:c.bottom)!=null?h:[]).filter(x=>!(u!=null&&u.has(x)))}}return{top:((p=c==null?void 0:c.top)!=null?p:[]).filter(x=>!(u!=null&&u.has(x))),bottom:((f=c==null?void 0:c.bottom)!=null?f:[]).filter(x=>!(u!=null&&u.has(x)))}})},e.getCanPin=()=>{var t;const{enableRowPinning:n,enablePinning:s}=i.options;return typeof n=="function"?n(e):(t=n??s)!=null?t:!0},e.getIsPinned=()=>{const t=[e.id],{top:n,bottom:s}=i.getState().rowPinning,r=t.some(u=>n==null?void 0:n.includes(u)),a=t.some(u=>s==null?void 0:s.includes(u));return r?"top":a?"bottom":!1},e.getPinnedIndex=()=>{var t,n;const s=e.getIsPinned();if(!s)return-1;const r=(t=s==="top"?i.getTopRows():i.getBottomRows())==null?void 0:t.map(a=>{let{id:u}=a;return u});return(n=r==null?void 0:r.indexOf(e.id))!=null?n:-1}},createTable:e=>{e.setRowPinning=i=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(i),e.resetRowPinning=i=>{var t,n;return e.setRowPinning(i?lt():(t=(n=e.initialState)==null?void 0:n.rowPinning)!=null?t:lt())},e.getIsSomeRowsPinned=i=>{var t;const n=e.getState().rowPinning;if(!i){var s,r;return!!((s=n.top)!=null&&s.length||(r=n.bottom)!=null&&r.length)}return!!((t=n[i])!=null&&t.length)},e._getPinnedRows=(i,t,n)=>{var s;return((s=e.options.keepPinnedRows)==null||s?(t??[]).map(a=>{const u=e.getRow(a,!0);return u.getIsAllParentsExpanded()?u:null}):(t??[]).map(a=>i.find(u=>u.id===a))).filter(Boolean).map(a=>({...a,position:n}))},e.getTopRows=I(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(i,t)=>e._getPinnedRows(i,t,"top"),k(e.options,"debugRows","getTopRows")),e.getBottomRows=I(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(i,t)=>e._getPinnedRows(i,t,"bottom"),k(e.options,"debugRows","getBottomRows")),e.getCenterRows=I(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(i,t,n)=>{const s=new Set([...t??[],...n??[]]);return i.filter(r=>!s.has(r.id))},k(e.options,"debugRows","getCenterRows"))}},li={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ne("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=i=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(i),e.resetRowSelection=i=>{var t;return e.setRowSelection(i?{}:(t=e.initialState.rowSelection)!=null?t:{})},e.toggleAllRowsSelected=i=>{e.setRowSelection(t=>{i=typeof i<"u"?i:!e.getIsAllRowsSelected();const n={...t},s=e.getPreGroupedRowModel().flatRows;return i?s.forEach(r=>{r.getCanSelect()&&(n[r.id]=!0)}):s.forEach(r=>{delete n[r.id]}),n})},e.toggleAllPageRowsSelected=i=>e.setRowSelection(t=>{const n=typeof i<"u"?i:!e.getIsAllPageRowsSelected(),s={...t};return e.getRowModel().rows.forEach(r=>{dt(s,r.id,n,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=I(()=>[e.getState().rowSelection,e.getCoreRowModel()],(i,t)=>Object.keys(i).length?ut(e,t):{rows:[],flatRows:[],rowsById:{}},k(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=I(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(i,t)=>Object.keys(i).length?ut(e,t):{rows:[],flatRows:[],rowsById:{}},k(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=I(()=>[e.getState().rowSelection,e.getSortedRowModel()],(i,t)=>Object.keys(i).length?ut(e,t):{rows:[],flatRows:[],rowsById:{}},k(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{const i=e.getFilteredRowModel().flatRows,{rowSelection:t}=e.getState();let n=!!(i.length&&Object.keys(t).length);return n&&i.some(s=>s.getCanSelect()&&!t[s.id])&&(n=!1),n},e.getIsAllPageRowsSelected=()=>{const i=e.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:t}=e.getState();let n=!!i.length;return n&&i.some(s=>!t[s.id])&&(n=!1),n},e.getIsSomeRowsSelected=()=>{var i;const t=Object.keys((i=e.getState().rowSelection)!=null?i:{}).length;return t>0&&t<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const i=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:i.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>i=>{e.toggleAllRowsSelected(i.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>i=>{e.toggleAllPageRowsSelected(i.target.checked)}},createRow:(e,i)=>{e.toggleSelected=(t,n)=>{const s=e.getIsSelected();i.setRowSelection(r=>{var a;if(t=typeof t<"u"?t:!s,e.getCanSelect()&&s===t)return r;const u={...r};return dt(u,e.id,t,(a=n==null?void 0:n.selectChildren)!=null?a:!0,i),u})},e.getIsSelected=()=>{const{rowSelection:t}=i.getState();return ct(e,t)},e.getIsSomeSelected=()=>{const{rowSelection:t}=i.getState();return gt(e,t)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=i.getState();return gt(e,t)==="all"},e.getCanSelect=()=>{var t;return typeof i.options.enableRowSelection=="function"?i.options.enableRowSelection(e):(t=i.options.enableRowSelection)!=null?t:!0},e.getCanSelectSubRows=()=>{var t;return typeof i.options.enableSubRowSelection=="function"?i.options.enableSubRowSelection(e):(t=i.options.enableSubRowSelection)!=null?t:!0},e.getCanMultiSelect=()=>{var t;return typeof i.options.enableMultiRowSelection=="function"?i.options.enableMultiRowSelection(e):(t=i.options.enableMultiRowSelection)!=null?t:!0},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return n=>{var s;t&&e.toggleSelected((s=n.target)==null?void 0:s.checked)}}}},dt=(e,i,t,n,s)=>{var r;const a=s.getRow(i,!0);t?(a.getCanMultiSelect()||Object.keys(e).forEach(u=>delete e[u]),a.getCanSelect()&&(e[i]=!0)):delete e[i],n&&(r=a.subRows)!=null&&r.length&&a.getCanSelectSubRows()&&a.subRows.forEach(u=>dt(e,u.id,t,n,s))};function ut(e,i){const t=e.getState().rowSelection,n=[],s={},r=function(a,u){return a.map(c=>{var p;const f=ct(c,t);if(f&&(n.push(c),s[c.id]=c),(p=c.subRows)!=null&&p.length&&(c={...c,subRows:r(c.subRows)}),f)return c}).filter(Boolean)};return{rows:r(i.rows),flatRows:n,rowsById:s}}function ct(e,i){var t;return(t=i[e.id])!=null?t:!1}function gt(e,i,t){var n;if(!((n=e.subRows)!=null&&n.length))return!1;let s=!0,r=!1;return e.subRows.forEach(a=>{if(!(r&&!s)&&(a.getCanSelect()&&(ct(a,i)?r=!0:s=!1),a.subRows&&a.subRows.length)){const u=gt(a,i);u==="all"?r=!0:(u==="some"&&(r=!0),s=!1)}}),s?"all":r?"some":!1}const mt=/([0-9]+)/gm,di=(e,i,t)=>Bt(ue(e.getValue(t)).toLowerCase(),ue(i.getValue(t)).toLowerCase()),ui=(e,i,t)=>Bt(ue(e.getValue(t)),ue(i.getValue(t))),ci=(e,i,t)=>ft(ue(e.getValue(t)).toLowerCase(),ue(i.getValue(t)).toLowerCase()),gi=(e,i,t)=>ft(ue(e.getValue(t)),ue(i.getValue(t))),mi=(e,i,t)=>{const n=e.getValue(t),s=i.getValue(t);return n>s?1:n<s?-1:0},fi=(e,i,t)=>ft(e.getValue(t),i.getValue(t));function ft(e,i){return e===i?0:e>i?1:-1}function ue(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Bt(e,i){const t=e.split(mt).filter(Boolean),n=i.split(mt).filter(Boolean);for(;t.length&&n.length;){const s=t.shift(),r=n.shift(),a=parseInt(s,10),u=parseInt(r,10),c=[a,u].sort();if(isNaN(c[0])){if(s>r)return 1;if(r>s)return-1;continue}if(isNaN(c[1]))return isNaN(a)?-1:1;if(a>u)return 1;if(u>a)return-1}return t.length-n.length}const Ee={alphanumeric:di,alphanumericCaseSensitive:ui,text:ci,textCaseSensitive:gi,datetime:mi,basic:fi},pi=[Bn,ni,Xn,Zn,Wn,Kn,ii,oi,{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ne("sorting",e),isMultiSortEvent:i=>i.shiftKey}),createColumn:(e,i)=>{e.getAutoSortingFn=()=>{const t=i.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const s of t){const r=s==null?void 0:s.getValue(e.id);if(Object.prototype.toString.call(r)==="[object Date]")return Ee.datetime;if(typeof r=="string"&&(n=!0,r.split(mt).length>1))return Ee.alphanumeric}return n?Ee.text:Ee.basic},e.getAutoSortDir=()=>{const t=i.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var t,n;if(!e)throw new Error;return Fe(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(t=(n=i.options.sortingFns)==null?void 0:n[e.columnDef.sortingFn])!=null?t:Ee[e.columnDef.sortingFn]},e.toggleSorting=(t,n)=>{const s=e.getNextSortingOrder(),r=typeof t<"u"&&t!==null;i.setSorting(a=>{const u=a==null?void 0:a.find(l=>l.id===e.id),c=a==null?void 0:a.findIndex(l=>l.id===e.id);let p=[],f,m=r?t:s==="desc";if(a!=null&&a.length&&e.getCanMultiSort()&&n?u?f="toggle":f="add":a!=null&&a.length&&c!==a.length-1?f="replace":u?f="toggle":f="replace",f==="toggle"&&(r||s||(f="remove")),f==="add"){var d;p=[...a,{id:e.id,desc:m}],p.splice(0,p.length-((d=i.options.maxMultiSortColCount)!=null?d:Number.MAX_SAFE_INTEGER))}else f==="toggle"?p=a.map(l=>l.id===e.id?{...l,desc:m}:l):f==="remove"?p=a.filter(l=>l.id!==e.id):p=[{id:e.id,desc:m}];return p})},e.getFirstSortDir=()=>{var t,n;return((t=(n=e.columnDef.sortDescFirst)!=null?n:i.options.sortDescFirst)!=null?t:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=t=>{var n,s;const r=e.getFirstSortDir(),a=e.getIsSorted();return a?a!==r&&((n=i.options.enableSortingRemoval)==null||n)&&(!(t&&(s=i.options.enableMultiRemove)!=null)||s)?!1:a==="desc"?"asc":"desc":r},e.getCanSort=()=>{var t,n;return((t=e.columnDef.enableSorting)!=null?t:!0)&&((n=i.options.enableSorting)!=null?n:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var t,n;return(t=(n=e.columnDef.enableMultiSort)!=null?n:i.options.enableMultiSort)!=null?t:!!e.accessorFn},e.getIsSorted=()=>{var t;const n=(t=i.getState().sorting)==null?void 0:t.find(s=>s.id===e.id);return n?n.desc?"desc":"asc":!1},e.getSortIndex=()=>{var t,n;return(t=(n=i.getState().sorting)==null?void 0:n.findIndex(s=>s.id===e.id))!=null?t:-1},e.clearSorting=()=>{i.setSorting(t=>t!=null&&t.length?t.filter(n=>n.id!==e.id):[])},e.getToggleSortingHandler=()=>{const t=e.getCanSort();return n=>{t&&(n.persist==null||n.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?i.options.isMultiSortEvent==null?void 0:i.options.isMultiSortEvent(n):!1))}}},createTable:e=>{e.setSorting=i=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(i),e.resetSorting=i=>{var t,n;e.setSorting(i?[]:(t=(n=e.initialState)==null?void 0:n.sorting)!=null?t:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Yn,si,ri,ai,li,ei];function hi(e){var i,t;process.env.NODE_ENV!=="production"&&(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");const n=[...pi,...(i=e._features)!=null?i:[]];let s={_features:n};const r=s._features.reduce((d,l)=>Object.assign(d,l.getDefaultOptions==null?void 0:l.getDefaultOptions(s)),{}),a=d=>s.options.mergeOptions?s.options.mergeOptions(r,d):{...r,...d};let c={...{},...(t=e.initialState)!=null?t:{}};s._features.forEach(d=>{var l;c=(l=d.getInitialState==null?void 0:d.getInitialState(c))!=null?l:c});const p=[];let f=!1;const m={_features:n,options:{...r,...e},initialState:c,_queue:d=>{p.push(d),f||(f=!0,Promise.resolve().then(()=>{for(;p.length;)p.shift()();f=!1}).catch(l=>setTimeout(()=>{throw l})))},reset:()=>{s.setState(s.initialState)},setOptions:d=>{const l=de(d,s.options);s.options=a(l)},getState:()=>s.options.state,setState:d=>{s.options.onStateChange==null||s.options.onStateChange(d)},_getRowId:(d,l,h)=>{var x;return(x=s.options.getRowId==null?void 0:s.options.getRowId(d,l,h))!=null?x:`${h?[h.id,l].join("."):l}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(d,l)=>{let h=(l?s.getPrePaginationRowModel():s.getRowModel()).rowsById[d];if(!h&&(h=s.getCoreRowModel().rowsById[d],!h))throw process.env.NODE_ENV!=="production"?new Error(`getRow could not find row with ID: ${d}`):new Error;return h},_getDefaultColumnDef:I(()=>[s.options.defaultColumn],d=>{var l;return d=(l=d)!=null?l:{},{header:h=>{const x=h.header.column.columnDef;return x.accessorKey?x.accessorKey:x.accessorFn?x.id:null},cell:h=>{var x,v;return(x=(v=h.renderValue())==null||v.toString==null?void 0:v.toString())!=null?x:null},...s._features.reduce((h,x)=>Object.assign(h,x.getDefaultColumnDef==null?void 0:x.getDefaultColumnDef()),{}),...d}},k(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>s.options.columns,getAllColumns:I(()=>[s._getColumnDefs()],d=>{const l=function(h,x,v){return v===void 0&&(v=0),h.map(S=>{const C=Gn(s,S,v,x),w=S;return C.columns=w.columns?l(w.columns,C,v+1):[],C})};return l(d)},k(e,"debugColumns","getAllColumns")),getAllFlatColumns:I(()=>[s.getAllColumns()],d=>d.flatMap(l=>l.getFlatColumns()),k(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:I(()=>[s.getAllFlatColumns()],d=>d.reduce((l,h)=>(l[h.id]=h,l),{}),k(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:I(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(d,l)=>{let h=d.flatMap(x=>x.getLeafColumns());return l(h)},k(e,"debugColumns","getAllLeafColumns")),getColumn:d=>{const l=s._getAllFlatColumnsById()[d];return process.env.NODE_ENV!=="production"&&!l&&console.error(`[Table] Column with id '${d}' does not exist.`),l}};Object.assign(s,m);for(let d=0;d<s._features.length;d++){const l=s._features[d];l==null||l.createTable==null||l.createTable(s)}return s}function pt(){return e=>I(()=>[e.options.data],i=>{const t={rows:[],flatRows:[],rowsById:{}},n=function(s,r,a){r===void 0&&(r=0);const u=[];for(let p=0;p<s.length;p++){const f=Qe(e,e._getRowId(s[p],p,a),s[p],p,r,void 0,a==null?void 0:a.id);if(t.flatRows.push(f),t.rowsById[f.id]=f,u.push(f),e.options.getSubRows){var c;f.originalSubRows=e.options.getSubRows(s[p],p),(c=f.originalSubRows)!=null&&c.length&&(f.subRows=n(f.originalSubRows,r+1,f))}}return u};return t.rows=n(i),t},k(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function xi(e){const i=[],t=n=>{var s;i.push(n),(s=n.subRows)!=null&&s.length&&n.getIsExpanded()&&n.subRows.forEach(t)};return e.rows.forEach(t),{rows:i,flatRows:e.flatRows,rowsById:e.rowsById}}function yi(e,i,t){return t.options.filterFromLeafRows?bi(e,i,t):vi(e,i,t)}function bi(e,i,t){var n;const s=[],r={},a=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,u=function(c,p){p===void 0&&(p=0);const f=[];for(let d=0;d<c.length;d++){var m;let l=c[d];const h=Qe(t,l.id,l.original,l.index,l.depth,void 0,l.parentId);if(h.columnFilters=l.columnFilters,(m=l.subRows)!=null&&m.length&&p<a){if(h.subRows=u(l.subRows,p+1),l=h,i(l)&&!h.subRows.length){f.push(l),r[l.id]=l,s.push(l);continue}if(i(l)||h.subRows.length){f.push(l),r[l.id]=l,s.push(l);continue}}else l=h,i(l)&&(f.push(l),r[l.id]=l,s.push(l))}return f};return{rows:u(e),flatRows:s,rowsById:r}}function vi(e,i,t){var n;const s=[],r={},a=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,u=function(c,p){p===void 0&&(p=0);const f=[];for(let d=0;d<c.length;d++){let l=c[d];if(i(l)){var m;if((m=l.subRows)!=null&&m.length&&p<a){const x=Qe(t,l.id,l.original,l.index,l.depth,void 0,l.parentId);x.subRows=u(l.subRows,p+1),l=x}f.push(l),s.push(l),r[l.id]=l}}return f};return{rows:u(e),flatRows:s,rowsById:r}}function ht(){return e=>I(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(i,t,n)=>{if(!i.rows.length||!(t!=null&&t.length)&&!n){for(let d=0;d<i.flatRows.length;d++)i.flatRows[d].columnFilters={},i.flatRows[d].columnFiltersMeta={};return i}const s=[],r=[];(t??[]).forEach(d=>{var l;const h=e.getColumn(d.id);if(!h)return;const x=h.getFilterFn();if(!x){process.env.NODE_ENV!=="production"&&console.warn(`Could not find a valid 'column.filterFn' for column with the ID: ${h.id}.`);return}s.push({id:d.id,filterFn:x,resolvedValue:(l=x.resolveFilterValue==null?void 0:x.resolveFilterValue(d.value))!=null?l:d.value})});const a=(t??[]).map(d=>d.id),u=e.getGlobalFilterFn(),c=e.getAllLeafColumns().filter(d=>d.getCanGlobalFilter());n&&u&&c.length&&(a.push("__global__"),c.forEach(d=>{var l;r.push({id:d.id,filterFn:u,resolvedValue:(l=u.resolveFilterValue==null?void 0:u.resolveFilterValue(n))!=null?l:n})}));let p,f;for(let d=0;d<i.flatRows.length;d++){const l=i.flatRows[d];if(l.columnFilters={},s.length)for(let h=0;h<s.length;h++){p=s[h];const x=p.id;l.columnFilters[x]=p.filterFn(l,x,p.resolvedValue,v=>{l.columnFiltersMeta[x]=v})}if(r.length){for(let h=0;h<r.length;h++){f=r[h];const x=f.id;if(f.filterFn(l,x,f.resolvedValue,v=>{l.columnFiltersMeta[x]=v})){l.columnFilters.__global__=!0;break}}l.columnFilters.__global__!==!0&&(l.columnFilters.__global__=!1)}}const m=d=>{for(let l=0;l<a.length;l++)if(d.columnFilters[a[l]]===!1)return!1;return!0};return yi(i.rows,m,e)},k(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Wt(e){return i=>I(()=>[i.getState().pagination,i.getPrePaginationRowModel(),i.options.paginateExpandedRows?void 0:i.getState().expanded],(t,n)=>{if(!n.rows.length)return n;const{pageSize:s,pageIndex:r}=t;let{rows:a,flatRows:u,rowsById:c}=n;const p=s*r,f=p+s;a=a.slice(p,f);let m;i.options.paginateExpandedRows?m={rows:a,flatRows:u,rowsById:c}:m=xi({rows:a,flatRows:u,rowsById:c}),m.flatRows=[];const d=l=>{m.flatRows.push(l),l.subRows.length&&l.subRows.forEach(d)};return m.rows.forEach(d),m},k(i.options,"debugTable","getPaginationRowModel"))}function xt(){return e=>I(()=>[e.getState().sorting,e.getPreSortedRowModel()],(i,t)=>{if(!t.rows.length||!(i!=null&&i.length))return t;const n=e.getState().sorting,s=[],r=n.filter(c=>{var p;return(p=e.getColumn(c.id))==null?void 0:p.getCanSort()}),a={};r.forEach(c=>{const p=e.getColumn(c.id);p&&(a[c.id]={sortUndefined:p.columnDef.sortUndefined,invertSorting:p.columnDef.invertSorting,sortingFn:p.getSortingFn()})});const u=c=>{const p=c.map(f=>({...f}));return p.sort((f,m)=>{for(let l=0;l<r.length;l+=1){var d;const h=r[l],x=a[h.id],v=x.sortUndefined,S=(d=h==null?void 0:h.desc)!=null?d:!1;let C=0;if(v){const w=f.getValue(h.id),F=m.getValue(h.id),N=w===void 0,O=F===void 0;if(N||O){if(v==="first")return N?-1:1;if(v==="last")return N?1:-1;C=N&&O?0:N?v:-v}}if(C===0&&(C=x.sortingFn(f,m,h.id)),C!==0)return S&&(C*=-1),x.invertSorting&&(C*=-1),C}return f.index-m.index}),p.forEach(f=>{var m;s.push(f),(m=f.subRows)!=null&&m.length&&(f.subRows=u(f.subRows))}),p};return{rows:u(t.rows),flatRows:s,rowsById:t.rowsById}},k(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function fe(e,i){return e?_i(e)?Je.createElement(e,i):e:null}function _i(e){return Si(e)||typeof e=="function"||wi(e)}function Si(e){return typeof e=="function"&&(()=>{const i=Object.getPrototypeOf(e);return i.prototype&&i.prototype.isReactComponent})()}function wi(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function yt(e){const i={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[t]=Je.useState(()=>({current:hi(i)})),[n,s]=Je.useState(()=>t.current.initialState);return t.current.setOptions(r=>({...r,...e,state:{...n,...e.state},onStateChange:a=>{s(a),e.onStateChange==null||e.onStateChange(a)}})),t.current}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ci={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),A=(e,i)=>{const t=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:u="",children:c,...p},f)=>b.createElement("svg",{ref:f,...Ci,width:s,height:s,stroke:n,strokeWidth:a?Number(r)*24/Number(s):r,className:["lucide",`lucide-${Ei(e)}`,u].join(" "),...p},[...i.map(([m,d])=>b.createElement(m,d)),...Array.isArray(c)?c:[c]]));return t.displayName=`${e}`,t};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=A("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=A("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=A("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=A("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=A("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=A("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=A("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=A("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=A("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=A("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=A("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=A("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=A("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=A("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=A("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=A("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=A("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=A("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=A("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=A("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=A("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=A("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=A("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=A("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=A("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=A("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=A("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=A("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=A("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=A("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=A("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=A("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=A("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=A("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=A("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=A("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=A("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),he=Ze(),zi=()=>{const[e,i]=b.useState([]),[t,n]=b.useState(!0),[s,r]=b.useState([]),[a,u]=b.useState(""),[c,p]=b.useState([]);b.useEffect(()=>{(async()=>{n(!0);const{data:h,error:x}=await y.data.list({table:"com_hubbi_inventory_items",options:{strategy:"cache_first"}});h?i(h):x&&(console.error(x),y.notify.error("Error al cargar inventario")),n(!1)})()},[]);const f=l=>{switch(l){case"kit":return o.jsx(Ne,{size:18,className:"text-blue-500"});case"serialized":return o.jsx(Kt,{size:18,className:"text-purple-500"});case"asset":return o.jsx(Le,{size:18,className:"text-orange-500"});default:return o.jsx(vt,{size:18,className:"text-gray-500"})}},m=b.useMemo(()=>[he.accessor("name",{header:"Producto",cell:l=>o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-medium text-gray-900",children:l.getValue()}),l.row.original.description&&o.jsx("span",{className:"text-xs text-gray-400 truncate max-w-xs",children:l.row.original.description})]})}),he.accessor("sku",{header:"SKU",cell:l=>o.jsx("span",{className:"font-mono text-gray-600",children:l.getValue()})}),he.accessor("type",{header:"Tipo",cell:l=>o.jsxs("div",{className:"flex items-center gap-2",title:l.getValue(),children:[f(l.getValue()),o.jsx("span",{className:"text-sm capitalize text-gray-600",children:l.getValue()})]})}),he.accessor("weighted_average_cost",{header:()=>o.jsx("div",{className:"text-right",children:"Costo Prom."}),cell:l=>o.jsxs("div",{className:"text-right font-mono",children:["$",l.getValue().toFixed(2)]})}),he.accessor("is_active",{header:()=>o.jsx("div",{className:"text-center",children:"Estado"}),cell:l=>o.jsx("div",{className:"text-center",children:o.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${l.getValue()?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:l.getValue()?"Activo":"Inactivo"})})}),he.display({id:"actions",header:()=>o.jsx("div",{className:"text-right",children:"Acciones"}),cell:()=>o.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-blue-600",children:o.jsx(Oi,{size:16})}),o.jsx("button",{className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-red-600",children:o.jsx(nn,{size:16})})]})})],[]),d=yt({data:e,columns:m,state:{sorting:s,globalFilter:a,columnFilters:c},onSortingChange:r,onGlobalFilterChange:u,onColumnFiltersChange:p,getCoreRowModel:pt(),getSortedRowModel:xt(),getFilteredRowModel:ht(),getPaginationRowModel:Wt()});return o.jsxs("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),o.jsx("input",{type:"text",placeholder:"Buscar por SKU o Nombre...",className:"pl-10 pr-4 py-2 border rounded-lg text-sm w-64 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",value:a,onChange:l=>u(l.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[o.jsx(Ai,{size:18,className:"text-gray-400"}),o.jsxs("select",{className:"text-sm border-none bg-transparent focus:ring-0 cursor-pointer text-gray-600 font-medium",onChange:l=>{var x;const h=l.target.value;(x=d.getColumn("type"))==null||x.setFilterValue(h==="all"?void 0:h)},children:[o.jsx("option",{value:"all",children:"Todos los tipos"}),o.jsx("option",{value:"simple",children:"Simples"}),o.jsx("option",{value:"kit",children:"Kits"}),o.jsx("option",{value:"serialized",children:"Serializados"}),o.jsx("option",{value:"asset",children:"Activos (Camiones)"})]})]})]}),o.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[o.jsx(St,{size:18}),"Nuevo Producto"]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:d.getHeaderGroups().map(l=>o.jsx("tr",{children:l.headers.map(h=>o.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:h.column.getToggleSortingHandler(),children:o.jsxs("div",{className:"flex items-center gap-1",children:[fe(h.column.columnDef.header,h.getContext()),h.column.getCanSort()&&o.jsx(ce,{size:12,className:"text-gray-400"})]})},h.id))},l.id))}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:t?o.jsx("tr",{children:o.jsx("td",{colSpan:m.length,className:"text-center py-12 text-gray-400",children:"Cargando inventario..."})}):d.getRowModel().rows.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:m.length,className:"text-center py-12 text-gray-400",children:"No se encontraron productos"})}):d.getRowModel().rows.map(l=>o.jsx("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:l.getVisibleCells().map(h=>o.jsx("td",{className:"px-6 py-3 text-sm",children:fe(h.column.columnDef.cell,h.getContext())},h.id))},l.id))})]})}),d.getPageCount()>1&&o.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[o.jsxs("div",{className:"text-xs text-gray-500",children:["PÃ¡gina ",d.getState().pagination.pageIndex+1," de ",d.getPageCount()]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 border rounded text-xs disabled:opacity-50",onClick:()=>d.previousPage(),disabled:!d.getCanPreviousPage(),children:"Anterior"}),o.jsx("button",{className:"px-3 py-1 border rounded text-xs disabled:opacity-50",onClick:()=>d.nextPage(),disabled:!d.getCanNextPage(),children:"Siguiente"})]})]})]})},sn=()=>{const[e,i]=b.useState(!1);return{createItem:async n=>{i(!0);try{const s={...n,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},r=window.hubbi,a=await r.data.create({table:"com_hubbi_inventory_items",data:s,options:{strategy:"online_first"}});if(a.error)throw a.error;return a.offline?r.notify.warning("Guardado localmente. Se sincronizarÃ¡ al recuperar conexiÃ³n."):r.notify.success("Producto creado exitosamente."),{success:!0,data:s}}catch(s){return console.error("Error creating item:",s),window.hubbi&&window.hubbi.notify.error("Error al crear el producto: "+(s instanceof Error?s.message:String(s))),{success:!1,error:s}}finally{i(!1)}},loading:e}},Ui=({onClose:e,onSuccess:i,initialData:t})=>{const{createItem:n,loading:s}=sn(),[r,a]=b.useState({type:"simple",is_active:!0,is_internal_use_only:!1,attributes:{},...t}),[u,c]=b.useState(r.attributes||{}),p=async m=>{if(m.preventDefault(),!r.sku||!r.name)return;(await n({...r,attributes:u})).success&&(i==null||i(),e())},f=()=>{switch(r.type){case"asset":return o.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"col-span-2 flex items-center gap-2 text-orange-600 mb-2",children:[o.jsx(Le,{size:18}),o.jsx("span",{className:"font-semibold text-sm",children:"Mascarilla de Activo (CamiÃ³n)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"VIN (NÃºmero Chasis)"}),o.jsx("input",{className:"w-full border rounded px-3 py-2 text-sm",placeholder:"1HGCM82633...",value:u.vin||"",onChange:m=>c({...u,vin:m.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Placa / MatrÃ­cula"}),o.jsx("input",{className:"w-full border rounded px-3 py-2 text-sm",placeholder:"C-123456",value:u.plate||"",onChange:m=>c({...u,plate:m.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Kilometraje Inicial"}),o.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2 text-sm",value:u.mileage||"",onChange:m=>c({...u,mileage:m.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"AÃ±o"}),o.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2 text-sm",value:u.year||"",onChange:m=>c({...u,year:m.target.value})})]})]});case"serialized":return o.jsxs("div",{className:"grid grid-cols-1 gap-4 border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-2",children:[o.jsx(Kt,{size:18}),o.jsx("span",{className:"font-semibold text-sm",children:"Control Serializado"})]}),o.jsxs("div",{className:"bg-purple-50 p-3 rounded text-xs text-purple-700",children:[o.jsx(tn,{size:14,className:"inline mr-1"}),"Este producto requerirÃ¡ escanear o ingresar un nÃºmero de serie Ãºnico para cada unidad que entre al inventario."]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"require_qc",checked:u.require_qc||!1,onChange:m=>c({...u,require_qc:m.target.checked})}),o.jsx("label",{htmlFor:"require_qc",className:"text-sm text-gray-700",children:"Requerir Control de Calidad al ingreso"})]})]});case"kit":return o.jsxs("div",{className:"grid grid-cols-1 gap-4 border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-2",children:[o.jsx(Ne,{size:18}),o.jsx("span",{className:"font-semibold text-sm",children:"DefiniciÃ³n de Kit"})]}),o.jsxs("div",{className:"bg-blue-50 p-3 rounded text-xs text-blue-700",children:[o.jsx(tn,{size:14,className:"inline mr-1"}),'Los componentes del kit se definirÃ¡n en la pestaÃ±a "ComposiciÃ³n" despuÃ©s de crear el producto.']})]});default:return null}};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-in fade-in duration-200",children:o.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:o.jsxs("form",{onSubmit:p,children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t!=null&&t.id?"Editar Producto":"Nuevo Producto"}),o.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Re,{size:24})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"col-span-1",children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-2",children:"Tipo de Producto"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:["simple","asset","serialized","kit"].map(m=>o.jsx("button",{type:"button",onClick:()=>a({...r,type:m}),className:`px-3 py-2 rounded text-sm font-medium border text-left capitalize transition-all ${r.type===m?"border-blue-500 bg-blue-50 text-blue-700 ring-1 ring-blue-500":"border-gray-200 text-gray-600 hover:border-gray-300"}`,children:m},m))})]}),o.jsxs("div",{className:"col-span-1 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"SKU (CÃ³digo Ãšnico)"}),o.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"FIL-ACE-001",value:r.sku||"",onChange:m=>a({...r,sku:m.target.value.toUpperCase()})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Nombre del Producto"}),o.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Filtro de Aceite GenÃ©rico",value:r.name||"",onChange:m=>a({...r,name:m.target.value})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"DescripciÃ³n"}),o.jsx("textarea",{rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",value:r.description||"",onChange:m=>a({...r,description:m.target.value})})]}),f(),o.jsxs("div",{className:"flex items-center gap-6 pt-4 border-t border-gray-100",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-blue-600 focus:ring-blue-500",checked:r.is_active,onChange:m=>a({...r,is_active:m.target.checked})}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Activo"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-blue-600 focus:ring-blue-500",checked:r.is_internal_use_only,onChange:m=>a({...r,is_internal_use_only:m.target.checked})}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Uso Interno Exclusivo"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:s,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium shadow-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Guardando...":o.jsxs(o.Fragment,{children:[o.jsx(Oe,{size:18}),"Guardar Producto"]})})]})]})})})},Gi=({parentItem:e,onClose:i})=>{const[t,n]=b.useState([]),[s,r]=b.useState(""),[a,u]=b.useState([]),[c,p]=b.useState(!1);b.useEffect(()=>{(async()=>{const h=await y.data.query(`SELECT k.child_item_id, k.quantity, i.sku as child_sku, i.name as child_name
                  FROM com_hubbi_inventory_kits k
                  JOIN com_hubbi_inventory_items i ON k.child_item_id = i.id
                  WHERE k.parent_item_id = ?`,[e.id]);h&&Array.isArray(h)&&n(h)})()},[e.id]),b.useEffect(()=>{if(!s){u([]);return}const l=setTimeout(async()=>{const{data:h}=await y.data.list({table:"com_hubbi_inventory_items",query:{filter:s}});if(h){const x=h.filter(v=>v.id!==e.id&&v.type!=="kit"&&(v.name.toLowerCase().includes(s.toLowerCase())||v.sku.toLowerCase().includes(s.toLowerCase())));u(x.slice(0,5))}},300);return()=>clearTimeout(l)},[s,e.id]);const f=async l=>{const h={child_item_id:l.id,child_sku:l.sku,child_name:l.name,quantity:1};n([...t,h]),r(""),u([]),await y.data.create({table:"com_hubbi_inventory_kits",data:{parent_item_id:e.id,child_item_id:l.id,quantity:1},options:{strategy:"online_first"}})},m=async(l,h)=>{h<=0||(n(t.map(x=>x.child_item_id===l?{...x,quantity:h}:x)),await y.data.execute("UPDATE com_hubbi_inventory_kits SET quantity = ? WHERE parent_item_id = ? AND child_item_id = ?",[h,e.id,l]))},d=async l=>{n(t.filter(h=>h.child_item_id!==l)),await y.data.execute("DELETE FROM com_hubbi_inventory_kits WHERE parent_item_id = ? AND child_item_id = ?",[e.id,l])};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg h-[80vh] flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 text-blue-600 mb-1",children:[o.jsx(Ne,{size:24}),o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Configurar Kit"})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Definiendo contenido para: ",o.jsx("span",{className:"font-semibold text-gray-800",children:e.name})]})]}),o.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase block mb-2",children:"Agregar Componente"}),o.jsxs("div",{className:"relative",children:[o.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),o.jsx("input",{className:"w-full pl-9 pr-4 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Buscar Ã­tem...",value:s,onChange:l=>r(l.target.value)}),a.length>0&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-xl border border-gray-100 overflow-hidden z-20",children:a.map(l=>o.jsxs("button",{onClick:()=>f(l),className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-gray-50 last:border-0 flex items-center justify-between group",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800 text-sm",children:l.name}),o.jsx("div",{className:"text-xs text-gray-400 font-mono",children:l.sku})]}),o.jsx(St,{size:16,className:"text-blue-500 opacity-0 group-hover:opacity-100"})]},l.id))})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(Ne,{size:48,className:"mx-auto mb-3 opacity-20"}),o.jsx("p",{children:"Este kit estÃ¡ vacÃ­o."}),o.jsx("p",{className:"text-xs",children:"Agrega productos usando el buscador superior."})]}):t.map(l=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg shadow-sm",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm text-gray-900",children:l.child_name}),o.jsx("div",{className:"text-xs text-gray-500 font-mono",children:l.child_sku})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center border rounded-md",children:[o.jsx("input",{type:"number",className:"w-16 text-center text-sm py-1 border-none focus:ring-0",value:l.quantity,onChange:h=>m(l.child_item_id,parseInt(h.target.value)||0),min:"1"}),o.jsx("span",{className:"text-xs text-gray-400 pr-2",children:"unds"})]}),o.jsx("button",{onClick:()=>d(l.child_item_id),className:"text-gray-400 hover:text-red-500 p-1",children:o.jsx(nn,{size:16})})]})]},l.child_item_id))}),o.jsx("div",{className:"p-4 border-t border-gray-100 flex justify-end",children:o.jsx("button",{onClick:i,className:"px-6 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:"Terminar"})})]})})},xe=Ze(),Bi=({item:e})=>{const[i,t]=b.useState([]),[n,s]=b.useState(!0),[r,a]=b.useState([]),[u,c]=b.useState("");b.useEffect(()=>{(async()=>{s(!0);let l="SELECT * FROM com_hubbi_inventory_movements ORDER BY created_at DESC LIMIT 500",h=[];e&&(l="SELECT * FROM com_hubbi_inventory_movements WHERE item_id = ? ORDER BY created_at DESC LIMIT 500",h=[e.id]);const x=await y.data.query(l,h);x&&Array.isArray(x)&&t(x),s(!1)})()},[e]);const p=d=>{switch(d){case"IN":return o.jsx(Ni,{className:"text-green-600",size:16});case"OUT":return o.jsx(ki,{className:"text-red-600",size:16});case"ADJUST":return o.jsx(Mi,{className:"text-gray-600",size:16});default:return o.jsx(Ri,{className:"text-blue-600",size:16})}},f=b.useMemo(()=>[xe.accessor("type",{header:({column:d})=>o.jsxs("button",{onClick:()=>d.toggleSorting(),className:"flex items-center gap-1",children:["Tipo ",o.jsx(ce,{size:14})]}),cell:d=>o.jsxs("div",{className:"flex items-center gap-2",children:[p(d.getValue()),o.jsx("span",{className:"font-medium",children:d.getValue()})]})}),xe.accessor("created_at",{header:({column:d})=>o.jsxs("button",{onClick:()=>d.toggleSorting(),className:"flex items-center gap-1",children:["Fecha ",o.jsx(ce,{size:14})]}),cell:d=>new Date(d.getValue()).toLocaleString()}),xe.accessor("reason",{header:"Motivo",cell:d=>o.jsx("div",{className:"max-w-xs truncate",title:d.getValue()||"",children:d.getValue()||"-"})}),xe.accessor("quantity",{header:({column:d})=>o.jsxs("button",{onClick:()=>d.toggleSorting(),className:"flex items-center gap-1 ml-auto",children:["Cantidad ",o.jsx(ce,{size:14})]}),cell:d=>{const h=d.row.original.type==="OUT";return o.jsxs("span",{className:`font-mono font-medium ${h?"text-red-600":"text-green-600"}`,children:[h?"-":"+",d.getValue()]})}}),xe.accessor("cost_at_moment",{header:"Costo Unit.",cell:d=>o.jsxs("span",{className:"font-mono",children:["$",d.getValue().toFixed(2)]})}),xe.accessor("total_value",{header:({column:d})=>o.jsxs("button",{onClick:()=>d.toggleSorting(),className:"flex items-center gap-1 ml-auto",children:["Total ",o.jsx(ce,{size:14})]}),cell:d=>o.jsxs("span",{className:"font-mono font-medium",children:["$",d.getValue().toFixed(2)]})})],[]),m=yt({data:i,columns:f,state:{sorting:r,globalFilter:u},onSortingChange:a,onGlobalFilterChange:c,getCoreRowModel:pt(),getSortedRowModel:xt(),getFilteredRowModel:ht(),getPaginationRowModel:Wt(),initialState:{pagination:{pageSize:20}}});return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(Zt,{size:16}),"Historial de Movimientos"]}),o.jsx("input",{type:"text",placeholder:"Buscar...",value:u,onChange:d=>c(d.target.value),className:"px-3 py-1.5 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-500",children:m.getHeaderGroups().map(d=>o.jsx("tr",{children:d.headers.map(l=>o.jsx("th",{className:"px-4 py-2 font-medium",children:fe(l.column.columnDef.header,l.getContext())},l.id))},d.id))}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:n?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-400",children:"Cargando..."})}):m.getRowModel().rows.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-400",children:"No hay movimientos registrados"})}):m.getRowModel().rows.map(d=>o.jsx("tr",{className:"hover:bg-gray-50",children:d.getVisibleCells().map(l=>o.jsx("td",{className:"px-4 py-3",children:fe(l.column.columnDef.cell,l.getContext())},l.id))},d.id))})]})}),o.jsxs("div",{className:"p-4 border-t border-gray-100 flex items-center justify-between text-sm text-gray-600",children:[o.jsxs("span",{children:["Mostrando ",m.getState().pagination.pageIndex*m.getState().pagination.pageSize+1," - ",Math.min((m.getState().pagination.pageIndex+1)*m.getState().pagination.pageSize,i.length)," de ",i.length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>m.previousPage(),disabled:!m.getCanPreviousPage(),className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",children:o.jsx(Ti,{size:18})}),o.jsxs("span",{children:["PÃ¡gina ",m.getState().pagination.pageIndex+1," de ",m.getPageCount()]}),o.jsx("button",{onClick:()=>m.nextPage(),disabled:!m.getCanNextPage(),className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",children:o.jsx(Fi,{size:18})})]})]})]})},Wi=()=>{const[e,i]=b.useState([]),t=async()=>{const r=await y.data.query("SELECT * FROM com_hubbi_inventory_transfer_requests ORDER BY created_at DESC");if(r&&Array.isArray(r)){const a=r.map(u=>({...u,items:typeof u.items=="string"?JSON.parse(u.items):u.items}));i(a)}};b.useEffect(()=>{t()},[]);const n=async(r,a)=>{await y.data.update({table:"com_hubbi_inventory_transfer_requests",id:r,data:{status:a,updated_at:new Date().toISOString()},options:{strategy:"online_first"}}),y.notify.success(`Solicitud ${a}`),t()},s=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"in_transit":return"bg-purple-100 text-purple-800";case"received":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(Vi,{size:18,className:"text-blue-600"}),"GestiÃ³n de Traslados"]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500",children:o.jsx(Zt,{size:16})})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:e.length===0?o.jsx("div",{className:"text-center py-10 text-gray-400",children:"No hay solicitudes de traslado activas"}):e.map(r=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 flex flex-col gap-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsxs("span",{className:"font-medium text-gray-900",children:["#",r.source_location_id.substring(0,4),"..."]}),o.jsx(Ii,{size:14}),o.jsxs("span",{className:"font-medium text-gray-900",children:["#",r.target_location_id.substring(0,4),"..."]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium uppercase ${s(r.status)}`,children:r.status.replace("_"," ")})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600 space-y-1",children:r.items.map((a,u)=>o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Item ID: ",a.item_id.substring(0,8),"..."]}),o.jsxs("span",{className:"font-mono font-medium",children:["x",a.quantity]})]},u))}),r.status==="pending"&&o.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100",children:[o.jsxs("button",{onClick:()=>n(r.id,"rejected"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 rounded bg-white border border-red-200",children:[o.jsx(Re,{size:14})," Rechazar"]}),o.jsxs("button",{onClick:()=>n(r.id,"approved"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-green-600 hover:bg-green-50 rounded bg-white border border-green-200",children:[o.jsx(pe,{size:14})," Aprobar"]})]}),r.status==="approved"&&o.jsx("div",{className:"flex justify-end gap-2 pt-2",children:o.jsxs("button",{onClick:()=>n(r.id,"in_transit"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-purple-600 hover:bg-purple-50 rounded bg-white border border-purple-200",children:[o.jsx(Le,{size:14})," Despachar (Enviar)"]})})]},r.id))})]})},Ki=({data:e,companyName:i="MI EMPRESA S.A. DE C.V."})=>o.jsxs("div",{className:"bg-white p-8 max-w-2xl mx-auto border border-gray-200 shadow-sm print:shadow-none print:border-0",id:"printable-remission",children:[o.jsxs("div",{className:"flex justify-between items-start border-b border-gray-800 pb-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900 uppercase tracking-widest",children:i}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Giro: Venta de Repuestos y Servicios"}),o.jsx("p",{className:"text-xs text-gray-500",children:"San Salvador, El Salvador"})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 border-2 border-gray-900 px-3 py-1 rounded",children:[o.jsx(Le,{size:20,className:"text-gray-900"}),o.jsx("span",{className:"font-bold text-lg",children:"NOTA DE REMISIÃ“N"})]}),o.jsxs("p",{className:"text-sm font-mono mt-2 text-gray-600",children:["REF: ",e.id.substring(0,8).toUpperCase()]}),o.jsx("p",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8 text-sm",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-1 border-b border-gray-300 inline-block",children:"ORIGEN (BODEGA)"}),o.jsx("p",{className:"font-mono text-gray-600 mt-1",children:e.source_location_id})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-1 border-b border-gray-300 inline-block",children:"DESTINO (SUCURSAL)"}),o.jsx("p",{className:"font-mono text-gray-600 mt-1",children:e.target_location_id})]})]}),o.jsxs("table",{className:"w-full text-left text-sm mb-8",children:[o.jsx("thead",{className:"border-b-2 border-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"py-2 font-bold text-gray-900",children:"CODIGO"}),o.jsx("th",{className:"py-2 font-bold text-gray-900",children:"DESCRIPCION"}),o.jsx("th",{className:"py-2 font-bold text-gray-900 text-right",children:"CANTIDAD"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:e.items.map((t,n)=>o.jsxs("tr",{children:[o.jsx("td",{className:"py-2 text-gray-600 font-mono",children:t.sku||t.item_id.substring(0,6)}),o.jsx("td",{className:"py-2 text-gray-900",children:t.item_name||"Item "+t.item_id}),o.jsx("td",{className:"py-2 text-gray-900 text-right font-medium",children:t.quantity})]},n))})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-12 pt-8 border-t border-gray-200",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 border-b border-gray-300 mb-2"}),o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Solicitado Por"}),o.jsx("p",{className:"text-xs text-gray-400",children:e.requested_by})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 border-b border-gray-300 mb-2"}),o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Despachado Por"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 border-b border-gray-300 mb-2"}),o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Recibido Por (Sello)"})]})]}),o.jsx("div",{className:"mt-8 text-center text-[10px] text-gray-400",children:"Documento interno de traslado. No vÃ¡lido como comprobante fiscal de venta. Generado por Hubbi Inventory Module."})]}),Yi=()=>{var p;const e=b.useRef(null),i=b.useRef(null),[t,n]=b.useState([]),[s,r]=b.useState(1),[a,u]=b.useState(null);b.useEffect(()=>{n([{id:"1",x:50,y:50,w:100,h:200,color:"#e0e7ff",label:"Estante A"},{id:"2",x:200,y:50,w:100,h:200,color:"#e0e7ff",label:"Estante B"},{id:"3",x:50,y:300,w:250,h:100,color:"#fee2e2",label:"Zona de Carga"}])},[]),b.useEffect(()=>{const f=e.current;if(!f)return;const m=f.getContext("2d");if(m){m.clearRect(0,0,f.width,f.height),m.save(),m.scale(s,s),m.strokeStyle="#f0f0f0",m.lineWidth=1;for(let d=0;d<f.width/s;d+=20)m.beginPath(),m.moveTo(d,0),m.lineTo(d,f.height/s),m.stroke();for(let d=0;d<f.height/s;d+=20)m.beginPath(),m.moveTo(0,d),m.lineTo(f.width/s,d),m.stroke();t.forEach(d=>{m.fillStyle=d.color,m.fillRect(d.x,d.y,d.w,d.h),m.strokeStyle=a===d.id?"#2563eb":"#94a3b8",m.lineWidth=a===d.id?2:1,m.strokeRect(d.x,d.y,d.w,d.h),m.fillStyle="#1e293b",m.font="12px sans-serif",m.textAlign="center",m.fillText(d.label,d.x+d.w/2,d.y+d.h/2)}),m.restore()}},[t,s,a]);const c=f=>{const m=e.current;if(!m)return;const d=m.getBoundingClientRect(),l=(f.clientX-d.left)/s,h=(f.clientY-d.top)/s,x=t.find(v=>l>=v.x&&l<=v.x+v.w&&h>=v.y&&h<=v.y+v.h);u(x?x.id:null)};return o.jsxs("div",{className:"flex h-full bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[o.jsxs("div",{className:"w-64 border-r border-gray-200 p-4 bg-gray-50 flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-bold border-b border-gray-200 pb-2",children:[o.jsx(vt,{size:20,className:"text-blue-600"}),o.jsx("h2",{children:"DiseÃ±ador de Bodega"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Herramientas"}),o.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-colors",children:[o.jsx(vt,{size:16})," Nuevo Estante"]}),o.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-colors",children:[o.jsx(Pi,{size:16})," Zona de Piso"]})]}),a&&o.jsxs("div",{className:"mt-auto bg-white p-3 rounded border border-gray-200 shadow-sm animate-in slide-in-from-bottom-5",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Propiedades"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Etiqueta"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-sm",value:(p=t.find(f=>f.id===a))==null?void 0:p.label,onChange:f=>n(t.map(m=>m.id===a?{...m,label:f.target.value}:m))})]})]})]}),o.jsxs("div",{className:"flex-1 relative bg-gray-100 overflow-hidden",ref:i,children:[o.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 bg-white shadow-md rounded-lg p-1 z-10",children:[o.jsx("button",{onClick:()=>r(f=>Math.max(.5,f-.1)),className:"p-2 hover:bg-gray-100 rounded",children:o.jsx(qi,{size:18,className:"text-gray-600"})}),o.jsxs("span",{className:"flex items-center text-xs font-mono text-gray-500 px-2 min-w-[3rem] justify-center",children:[Math.round(s*100),"%"]}),o.jsx("button",{onClick:()=>r(f=>Math.min(2,f+.1)),className:"p-2 hover:bg-gray-100 rounded",children:o.jsx(Hi,{size:18,className:"text-gray-600"})}),o.jsx("div",{className:"w-px bg-gray-200 my-1 mx-1"}),o.jsx("button",{className:"p-2 hover:bg-blue-50 text-blue-600 rounded",children:o.jsx(Oe,{size:18})})]}),o.jsx("div",{className:"overflow-auto w-full h-full flex justify-center items-center p-8",children:o.jsx("canvas",{ref:e,width:800,height:600,className:"bg-white shadow-xl cursor-crosshair",onMouseDown:c})})]})]})},Ji=()=>{const[e,i]=b.useState(!1),[t,n]=b.useState(null),s=r=>{i(!1),setTimeout(()=>{n({name:"Filtro Aceite Toyota",sku:r,stock:15,location:"Estante A-02"})},500)};return o.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[o.jsx("div",{className:"bg-blue-600 text-white p-4 pt-8 shadow-lg sticky top-0 z-20",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-lg font-bold",children:"Scanner Hubbi"}),o.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})})]})}),o.jsxs("div",{className:"flex-1 p-4 flex flex-col gap-6",children:[e?o.jsxs("div",{className:"bg-gray-900 rounded-2xl aspect-[4/3] flex items-center justify-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 border-2 border-red-500/50 animate-pulse"}),o.jsx("p",{className:"text-white/50 text-sm",children:"CÃ¡mara activa (Simulada)"}),o.jsxs("div",{className:"absolute bottom-4 flex gap-4",children:[o.jsx("button",{onClick:()=>s("SKU-123"),className:"bg-white text-black text-xs px-3 py-1 rounded",children:"Simular CÃ³digo 1"}),o.jsx("button",{onClick:()=>i(!1),className:"bg-white/20 text-white text-xs px-3 py-1 rounded",children:"Cancelar"})]})]}):o.jsxs("button",{onClick:()=>i(!0),className:"w-full aspect-square max-w-[200px] mx-auto bg-white rounded-3xl shadow-sm border-2 border-blue-100 flex flex-col items-center justify-center gap-4 hover:shadow-md transition-all active:scale-95",children:[o.jsx("div",{className:"bg-blue-600 p-4 rounded-full shadow-lg shadow-blue-600/30",children:o.jsx(Li,{size:32,className:"text-white"})}),o.jsx("span",{className:"font-bold text-gray-600",children:"Escanear"})]}),t&&o.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 animate-in slide-in-from-bottom-10 fade-in",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-xl text-gray-900",children:t.name}),o.jsx("p",{className:"text-gray-400 font-mono text-sm",children:t.sku})]}),o.jsx("div",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold",children:"Activo"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("span",{className:"text-xs text-gray-500 uppercase block mb-1",children:"Stock"}),o.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t.stock})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("span",{className:"text-xs text-gray-500 uppercase block mb-1",children:"UbicaciÃ³n"}),o.jsx("span",{className:"text-lg font-semibold text-blue-600",children:t.location})]})]}),o.jsxs("div",{className:"mt-6 flex gap-3",children:[o.jsx("button",{className:"flex-1 bg-blue-600 text-white py-3 rounded-xl font-medium shadow-lg shadow-blue-600/20 active:bg-blue-700",children:"Ver Detalles"}),o.jsx("button",{className:"flex-1 bg-white border border-gray-200 text-gray-700 py-3 rounded-xl font-medium active:bg-gray-50",children:"Inventariar"})]})]})]})]})},Ve=Ze(),Xi=()=>{const[e,i]=b.useState([]),[t,n]=b.useState(null),[s,r]=b.useState(!1),[a,u]=b.useState([]),[c,p]=b.useState("");b.useEffect(()=>{(async()=>{const v=await y.data.query("SELECT * FROM com_hubbi_inventory_audits ORDER BY started_at DESC LIMIT 10");v&&Array.isArray(v)&&i(v.map(S=>({...S,lines:[]})))})()},[]);const f=async x=>{r(!0);const v=crypto.randomUUID(),S=await y.data.query(`SELECT s.item_id, s.quantity, i.name, i.sku 
             FROM com_hubbi_inventory_stock s 
             JOIN com_hubbi_inventory_items i ON s.item_id = i.id
             WHERE s.location_id = ?`,[x]);await y.data.execute("INSERT INTO com_hubbi_inventory_audits (id, location_id, status, started_at) VALUES (?, ?, 'open', ?)",[v,x,new Date().toISOString()]);for(const w of S||[])await y.data.execute("INSERT INTO com_hubbi_inventory_audit_lines (audit_id, item_id, expected_qty) VALUES (?, ?, ?)",[v,w.item_id,w.quantity]);const C={id:v,location_id:x,status:"open",started_at:new Date().toISOString(),lines:(S||[]).map(w=>({item_id:w.item_id,item_name:w.name,item_sku:w.sku,expected_qty:w.quantity,counted_qty:null,difference:null,notes:""}))};n(C),i([C,...e]),r(!1),y.notify.success("AuditorÃ­a iniciada")},m=b.useCallback((x,v,S)=>{t&&n({...t,lines:t.lines.map(C=>C.item_id===x?{...C,counted_qty:v,difference:v-C.expected_qty,notes:S||C.notes}:C)})},[t]),d=async()=>{if(t){r(!0);for(const x of t.lines)if(x.counted_qty!==null&&(await y.data.execute(`UPDATE com_hubbi_inventory_audit_lines 
                     SET counted_qty = ?, difference = ?, notes = ? 
                     WHERE audit_id = ? AND item_id = ?`,[x.counted_qty,x.difference,x.notes,t.id,x.item_id]),x.difference!==0)){const v=crypto.randomUUID();await y.data.execute(`INSERT INTO com_hubbi_inventory_movements (id, item_id, location_id, type, reason, quantity, created_by, created_at)
                         VALUES (?, ?, ?, 'ADJUST', 'Ajuste por auditorÃ­a fÃ­sica', ?, 'audit_system', ?)`,[v,x.item_id,t.location_id,Math.abs(x.difference),new Date().toISOString()]),await y.data.execute("UPDATE com_hubbi_inventory_stock SET quantity = ? WHERE item_id = ? AND location_id = ?",[x.counted_qty,x.item_id,t.location_id])}await y.data.execute("UPDATE com_hubbi_inventory_audits SET status = 'closed', closed_at = ? WHERE id = ?",[new Date().toISOString(),t.id]),y.notify.success("AuditorÃ­a finalizada. Ajustes aplicados."),n(null),r(!1)}},l=b.useMemo(()=>[Ve.accessor("item_name",{header:({column:x})=>o.jsxs("button",{onClick:()=>x.toggleSorting(),className:"flex items-center gap-1",children:["Producto ",o.jsx(ce,{size:14})]}),cell:x=>o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:x.getValue()}),o.jsx("div",{className:"text-xs text-gray-400 font-mono",children:x.row.original.item_sku})]})}),Ve.accessor("expected_qty",{header:({column:x})=>o.jsxs("button",{onClick:()=>x.toggleSorting(),className:"flex items-center gap-1",children:["Esperado ",o.jsx(ce,{size:14})]}),cell:x=>o.jsx("span",{className:"font-mono",children:x.getValue()})}),Ve.display({id:"counted",header:"Contado",cell:({row:x})=>{const v=x.original;return o.jsx("input",{type:"number",className:"w-20 text-center border rounded-lg py-1 font-mono",value:v.counted_qty??"",onChange:S=>m(v.item_id,parseInt(S.target.value)||0),disabled:(t==null?void 0:t.status)!=="open"})}}),Ve.accessor("difference",{header:"Diferencia",cell:x=>{const v=x.getValue();if(v===null)return null;const S=v===0?"bg-green-100 text-green-700":v>0?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700";return o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${S}`,children:[v===0?o.jsx(pe,{size:12}):o.jsx(bt,{size:12}),v>0?"+":"",v]})}})],[t,m]),h=yt({data:(t==null?void 0:t.lines)||[],columns:l,state:{sorting:a,globalFilter:c},onSortingChange:u,onGlobalFilterChange:p,getCoreRowModel:pt(),getSortedRowModel:xt(),getFilteredRowModel:ht()});return o.jsxs("div",{className:"flex h-full bg-white rounded-lg shadow-sm overflow-hidden",children:[o.jsxs("div",{className:"w-72 border-r border-gray-200 bg-gray-50 flex flex-col",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("h2",{className:"font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(Xt,{size:20,className:"text-blue-600"}),"AuditorÃ­as FÃ­sicas"]})}),o.jsx("div",{className:"p-4",children:o.jsx("button",{onClick:()=>f("default-location"),disabled:s,className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50",children:"+ Nueva AuditorÃ­a"})}),o.jsx("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:e.map(x=>o.jsxs("button",{onClick:()=>n(x),className:`w-full text-left p-3 rounded-lg border transition-colors ${(t==null?void 0:t.id)===x.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(x.started_at).toLocaleDateString()}),o.jsx("div",{className:"text-xs text-gray-500",children:x.status==="open"?"ðŸŸ¡ Abierta":"ðŸŸ¢ Cerrada"})]},x.id))})]}),o.jsx("div",{className:"flex-1 flex flex-col",children:t?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Conteo en Progreso"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t.lines.length," productos"]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),o.jsx("input",{type:"text",placeholder:"Buscar...",value:c,onChange:x=>p(x.target.value),className:"pl-9 pr-4 py-1.5 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.status==="open"&&o.jsxs("button",{onClick:d,disabled:s,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50",children:[o.jsx(Oe,{size:18})," Finalizar"]})]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:h.getHeaderGroups().map(x=>o.jsx("tr",{children:x.headers.map(v=>o.jsx("th",{className:"text-left p-3 font-semibold text-gray-600",children:fe(v.column.columnDef.header,v.getContext())},v.id))},x.id))}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:h.getRowModel().rows.map(x=>o.jsx("tr",{className:"hover:bg-gray-50",children:x.getVisibleCells().map(v=>o.jsx("td",{className:"p-3",children:fe(v.column.columnDef.cell,v.getContext())},v.id))},x.id))})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{size:48,className:"mx-auto mb-4 opacity-30"}),o.jsx("p",{children:"Selecciona o crea una auditorÃ­a"})]})})})]})},rn=()=>{const[e,i]=b.useState([]),[t,n]=b.useState(!0),[s,r]=b.useState(null),a=b.useCallback(async()=>{n(!0);const p=await y.data.query(`
            SELECT 
                s.item_id,
                s.location_id,
                s.quantity as current_qty,
                s.min_stock,
                s.reorder_point,
                i.name as item_name,
                i.sku as item_sku,
                l.name as location_name
            FROM com_hubbi_inventory_stock s
            JOIN com_hubbi_inventory_items i ON s.item_id = i.id
            LEFT JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
            WHERE s.quantity <= s.reorder_point OR s.quantity <= s.min_stock
            ORDER BY (s.min_stock - s.quantity) DESC
        `);if(p&&Array.isArray(p)){const f=p.map(m=>({...m,severity:m.current_qty<=m.min_stock?"critical":m.current_qty<=m.reorder_point?"warning":"ok"}));i(f)}r(new Date),n(!1)},[]);b.useEffect(()=>{a()},[a]);const u=e.filter(p=>p.severity==="critical").length,c=e.filter(p=>p.severity==="warning").length;return{alerts:e,criticalCount:u,warningCount:c,loading:t,lastCheck:s,refresh:a}},an=({compact:e=!1})=>{const{alerts:i,criticalCount:t,warningCount:n,loading:s,lastCheck:r,refresh:a}=rn(),u=e?i.slice(0,3):i;return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yt,{size:20,className:"text-orange-500"}),o.jsx("h3",{className:"font-semibold text-gray-900",children:"Alertas de Stock"}),t>0&&o.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:t}),n>0&&o.jsx("span",{className:"bg-yellow-500 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:n})]}),o.jsx("button",{onClick:a,disabled:s,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 disabled:opacity-50",children:o.jsx($i,{size:16,className:s?"animate-spin":""})})]}),o.jsx("div",{className:`${e?"max-h-32":"max-h-64"} overflow-auto`,children:u.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(Yt,{size:32,className:"mx-auto mb-2 opacity-30"}),o.jsx("p",{children:"No hay alertas de stock"})]}):o.jsx("div",{className:"divide-y divide-gray-100",children:u.map((c,p)=>o.jsxs("div",{className:`p-3 flex items-center gap-3 ${c.severity==="critical"?"bg-red-50":c.severity==="warning"?"bg-yellow-50":""}`,children:[o.jsx(bt,{size:18,className:c.severity==="critical"?"text-red-500":"text-yellow-500"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-gray-900 truncate",children:c.item_name}),o.jsxs("div",{className:"text-xs text-gray-500",children:[c.location_name||"Sin ubicaciÃ³n"," â€¢ Stock: ",c.current_qty," / MÃ­nimo: ",c.min_stock]})]}),o.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded ${c.severity==="critical"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:c.severity==="critical"?"CRÃTICO":"BAJO"})]},p))})}),r&&o.jsxs("div",{className:"p-2 border-t border-gray-100 text-xs text-gray-400 text-center",children:["Ãšltima verificaciÃ³n: ",r.toLocaleTimeString()]})]})},W="com.hubbi.inventory",Zi="com.hubbi.accounting";function Ie(){const[e,i]=b.useState([]),[t,n]=b.useState(null),[s,r]=b.useState(null),[a,u]=b.useState(!0),[c,p]=b.useState(null);b.useEffect(()=>{f()},[]);const f=async()=>{var N;u(!0),await m();const w=await y.db.query("SELECT * FROM hubbi_fiscal_config WHERE id = 'default'",[],{moduleId:W});w&&w.length>0&&r(w[0]),!await y.modules.isInstalled(Zi)&&((N=w[0])==null?void 0:N.managed_by)!==W&&await y.db.execute("UPDATE hubbi_fiscal_config SET managed_by = ? WHERE id = 'default'",[W],{moduleId:W}),await d(),await l(),u(!1)},m=async()=>{await y.db.execute(`
      CREATE TABLE IF NOT EXISTS hubbi_fiscal_config (
        id TEXT PRIMARY KEY DEFAULT 'default',
        lock_after_periods INTEGER DEFAULT 2,
        auto_close BOOLEAN DEFAULT FALSE,
        period_type TEXT DEFAULT 'monthly',
        fiscal_year_start_month INTEGER DEFAULT 1,
        managed_by TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `,[],{moduleId:W}),await y.db.execute(`
      INSERT OR IGNORE INTO hubbi_fiscal_config (id, lock_after_periods, period_type)
      VALUES ('default', 2, 'monthly')
    `,[],{moduleId:W}),await y.db.execute(`
      CREATE TABLE IF NOT EXISTS hubbi_fiscal_periods (
        id TEXT PRIMARY KEY,
        year INTEGER NOT NULL,
        month INTEGER NOT NULL,
        quarter INTEGER,
        start_date DATE NOT NULL,
        end_date DATE NOT NULL,
        status TEXT DEFAULT 'open',
        is_current BOOLEAN DEFAULT FALSE,
        created_by_module TEXT,
        closed_by TEXT,
        closed_at DATETIME,
        locked_at DATETIME,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        UNIQUE(year, month)
      )
    `,[],{moduleId:W})},d=async()=>{const w=await y.db.query("SELECT * FROM hubbi_fiscal_periods WHERE is_current = TRUE",[],{moduleId:W});if(!w||w.length===0){const F=new Date,N=F.getFullYear(),O=F.getMonth()+1,K=`${N}-${String(O).padStart(2,"0")}`,G=new Date(N,O-1,1).toISOString().split("T")[0],M=new Date(N,O,0).toISOString().split("T")[0];await y.db.execute(`
        INSERT OR IGNORE INTO hubbi_fiscal_periods 
          (id, year, month, start_date, end_date, status, is_current, created_by_module)
        VALUES (?, ?, ?, ?, ?, 'open', TRUE, ?)
      `,[K,N,O,G,M,W],{moduleId:W})}},l=async()=>{const w=await y.db.query("SELECT * FROM hubbi_fiscal_periods ORDER BY year DESC, month DESC",[],{moduleId:W});if(w){i(w);const F=w.find(N=>N.is_current);n(F||null),!c&&F&&p(F.id)}},h=b.useCallback(w=>{if(!s||!t)return!1;const F=e.find(G=>G.id===w);if(!F||F.status==="closed"||F.status==="locked")return!1;const N=t.year*12+t.month,O=F.year*12+F.month;return N-O<=s.lock_after_periods},[s,t,e]);return{periods:e,currentPeriod:t,config:s,loading:a,selectedPeriodId:c,selectPeriod:w=>{p(w)},getSelectedPeriod:()=>e.find(w=>w.id===c)||t,isPeriodEditable:h,closePeriod:async(w,F)=>{const N=e.find(O=>O.id===w);if(!N||N.status!=="open")return!1;if(await y.db.execute(`UPDATE hubbi_fiscal_periods 
       SET status = 'closed', closed_by = ?, closed_at = ? 
       WHERE id = ?`,[F,new Date().toISOString(),w],{moduleId:W}),N.is_current){const O=N.month===12?1:N.month+1,K=N.month===12?N.year+1:N.year,G=`${K}-${String(O).padStart(2,"0")}`,M=new Date(K,O-1,1).toISOString().split("T")[0],q=new Date(K,O,0).toISOString().split("T")[0];await y.db.execute("UPDATE hubbi_fiscal_periods SET is_current = FALSE WHERE id = ?",[w],{moduleId:W}),await y.db.execute(`
        INSERT OR IGNORE INTO hubbi_fiscal_periods 
          (id, year, month, start_date, end_date, status, is_current, created_by_module)
        VALUES (?, ?, ?, ?, ?, 'open', TRUE, ?)
      `,[G,K,O,M,q,W],{moduleId:W})}return await l(),!0},updateConfig:async w=>{const F=[],N=[];w.lock_after_periods!==void 0&&(F.push("lock_after_periods = ?"),N.push(w.lock_after_periods)),w.auto_close!==void 0&&(F.push("auto_close = ?"),N.push(w.auto_close)),w.period_type!==void 0&&(F.push("period_type = ?"),N.push(w.period_type)),F.length>0&&(F.push("updated_at = ?"),N.push(new Date().toISOString()),N.push("default"),await y.db.execute(`UPDATE hubbi_fiscal_config SET ${F.join(", ")} WHERE id = ?`,N,{moduleId:W}),await f())},refreshPeriods:l}}async function He(){const e=await y.db.query("SELECT * FROM hubbi_fiscal_periods WHERE is_current = TRUE",[],{moduleId:W});return e&&e.length>0?e[0]:null}async function ln(e){const i=await y.db.query("SELECT * FROM hubbi_fiscal_periods WHERE id = ?",[e],{moduleId:W});return i&&i.length>0?i[0]:null}async function wt(e){const[i,t,n]=await Promise.all([ln(e),He(),y.db.query("SELECT * FROM hubbi_fiscal_config WHERE id = 'default'",[],{moduleId:W})]);if(!i||!t||!n||n.length===0)return!1;const s=n[0];if(i.status==="closed"||i.status==="locked")return!1;const r=t.year*12+t.month,a=i.year*12+i.month;return r-a<=s.lock_after_periods}const dn=["","Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Qi=({onChange:e,className:i=""})=>{const{periods:t,currentPeriod:n,selectedPeriodId:s,selectPeriod:r,isPeriodEditable:a,loading:u}=Ie(),c=d=>{r(d),e==null||e(d)},p=d=>`${dn[d.month]} ${d.year}`,f=d=>d.is_current?o.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:"Actual"}):d.status==="closed"?o.jsx("span",{className:"ml-2 text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:"Cerrado"}):d.status==="locked"?o.jsx("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-1.5 py-0.5 rounded",children:"Bloqueado"}):null,m=t.find(d=>d.id===s)||n;return u?o.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm ${i}`,children:[o.jsx(_t,{size:16,className:"text-gray-400"}),o.jsx("span",{className:"text-gray-400",children:"Cargando..."})]}):o.jsx("div",{className:`relative inline-block ${i}`,children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[o.jsx(_t,{size:16,className:"text-blue-600"}),o.jsx("span",{className:"font-medium text-gray-900",children:m?p(m):"Seleccionar perÃ­odo"}),m&&!a(m.id)&&o.jsx("span",{title:"Solo lectura",children:o.jsx(De,{size:14,className:"text-amber-500"})}),o.jsx(Jt,{size:16,className:"text-gray-400 group-open:rotate-180 transition-transform"})]}),o.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-xl z-50 max-h-80 overflow-auto",children:[t.map(d=>{const l=d.id===s,h=a(d.id);return o.jsxs("button",{onClick:()=>c(d.id),className:`w-full text-left px-4 py-3 flex items-center justify-between hover:bg-gray-50 border-b border-gray-50 last:border-0 ${l?"bg-blue-50":""}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[l&&o.jsx(pe,{size:16,className:"text-blue-600"}),o.jsx("span",{className:`${l?"font-semibold text-blue-900":"text-gray-700"}`,children:p(d)}),f(d)]}),!h&&o.jsx(De,{size:14,className:"text-gray-400"})]},d.id)}),t.length===0&&o.jsx("div",{className:"px-4 py-6 text-center text-gray-400 text-sm",children:"No hay perÃ­odos disponibles"})]})]})})},eo=({className:e=""})=>{const{currentPeriod:i,loading:t}=Ie();return t||!i?null:o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium ${e}`,children:[o.jsx(_t,{size:12}),dn[i.month]," ",i.year]})};function ye(){const[e,i]=b.useState({assignedSubHubId:null,activeSubHubId:null,subHubs:[],canViewAll:!1,canEditOwn:!0,canEditAll:!1,canSwitchActive:!1}),[t,n]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{n(!0);const f=y.getContext(),m=(f==null?void 0:f.subHubId)||null,d=y.permissions.has("inventory.view_all_subhubs"),l=y.permissions.has("inventory.edit_own_subhub"),h=y.permissions.has("inventory.edit_all_subhubs"),x=y.permissions.has("inventory.switch_active_subhub");let v=[];try{v=await y.subHubs.list()||[]}catch{v=[]}let S=m;if(x){const C=await y.settings.get("active_subhub_id");C&&v.some(w=>w.id===C)&&(S=C)}i({assignedSubHubId:m,activeSubHubId:S,subHubs:v,canViewAll:d,canEditOwn:l,canEditAll:h,canSwitchActive:x}),n(!1)},r=b.useCallback(async f=>e.canSwitchActive?(await y.settings.set("active_subhub_id",f),i(m=>({...m,activeSubHubId:f})),y.notify("Sucursal activa cambiada","success"),!0):(y.notify("No tienes permiso para cambiar de sucursal","error"),!1),[e.canSwitchActive]),a=b.useCallback(f=>!!(e.canEditAll||e.canEditOwn&&f===e.assignedSubHubId),[e.canEditAll,e.canEditOwn,e.assignedSubHubId]),u=b.useCallback((f="sub_hub_id")=>e.canViewAll?e.activeSubHubId?` AND ${f} = '${e.activeSubHubId}'`:"":e.assignedSubHubId?` AND ${f} = '${e.assignedSubHubId}'`:" AND 1=0",[e.canViewAll,e.activeSubHubId,e.assignedSubHubId]),c=b.useCallback(()=>e.canSwitchActive&&e.activeSubHubId?e.activeSubHubId:e.assignedSubHubId,[e.canSwitchActive,e.activeSubHubId,e.assignedSubHubId]),p=b.useCallback(()=>{const f=e.activeSubHubId||e.assignedSubHubId,m=e.subHubs.find(d=>d.id===f);return(m==null?void 0:m.name)||"Sin Sucursal"},[e.activeSubHubId,e.assignedSubHubId,e.subHubs]);return{...e,loading:t,setActiveSubHub:r,canEditSubHub:a,getSubHubWhereClause:u,getEffectiveSubHubId:c,getActiveSubHubName:p,refreshContext:s}}function to(){const e=y.getContext();return(e==null?void 0:e.subHubId)||null}async function no(e,i){const t=y.getContext(),n=(t==null?void 0:t.subHubId)||null;return i==="view"?y.permissions.has("inventory.view_all_subhubs")?!0:e===n:i==="edit"?!!(y.permissions.has("inventory.edit_all_subhubs")||y.permissions.has("inventory.edit_own_subhub")&&e===n):!1}const io=({onChange:e,className:i="",compact:t=!1})=>{const{subHubs:n,activeSubHubId:s,assignedSubHubId:r,canSwitchActive:a,canEditSubHub:u,setActiveSubHub:c,getActiveSubHubName:p,loading:f}=ye(),m=async d=>{await c(d)&&(e==null||e(d))};return a?f?o.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm ${i}`,children:[o.jsx(je,{size:16,className:"text-gray-400"}),o.jsx("span",{className:"text-gray-400",children:"Cargando..."})]}):n.length===0?o.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm ${i}`,children:[o.jsx(je,{size:16,className:"text-gray-500"}),o.jsx("span",{className:"text-gray-500",children:"Sin Sucursales"})]}):o.jsx("div",{className:`relative inline-block ${i}`,children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[o.jsx(je,{size:16,className:"text-indigo-600"}),o.jsx("span",{className:`font-medium text-gray-900 ${t?"hidden sm:inline":""}`,children:p()}),o.jsx(Jt,{size:16,className:"text-gray-400 group-open:rotate-180 transition-transform"})]}),o.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-xl z-50 max-h-80 overflow-auto",children:n.map(d=>{const l=d.id===s,h=d.id===r,x=u(d.id);return o.jsxs("button",{onClick:()=>m(d.id),className:`w-full text-left px-4 py-3 flex items-center justify-between hover:bg-gray-50 border-b border-gray-50 last:border-0 ${l?"bg-indigo-50":""}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[l&&o.jsx(pe,{size:16,className:"text-indigo-600"}),o.jsxs("div",{children:[o.jsx("span",{className:`block ${l?"font-semibold text-indigo-900":"text-gray-700"}`,children:d.name}),h&&o.jsx("span",{className:"text-xs text-gray-400",children:"Tu sucursal asignada"})]})]}),o.jsx("div",{className:"flex items-center gap-1",children:!x&&o.jsx("span",{className:"text-xs bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded",children:"Solo lectura"})})]},d.id)})})]})}):o.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm ${i}`,children:[o.jsx(je,{size:16,className:"text-gray-500"}),o.jsx("span",{className:"text-gray-700",children:p()}),o.jsx("span",{title:"No puedes cambiar de sucursal",children:o.jsx(De,{size:14,className:"text-gray-400"})})]})},oo=({className:e=""})=>{const{getActiveSubHubName:i,loading:t,canEditSubHub:n,activeSubHubId:s}=ye();if(t)return null;const r=s?n(s):!1;return o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium ${r?"bg-indigo-50 text-indigo-700":"bg-gray-100 text-gray-600"} ${e}`,children:[o.jsx(je,{size:12}),i(),!r&&o.jsx(De,{size:10})]})},so=[{value:"correction",label:"CorrecciÃ³n de inventario"},{value:"damage",label:"Producto daÃ±ado"},{value:"expired",label:"Producto vencido"},{value:"internal_use",label:"Uso interno"},{value:"found",label:"Producto encontrado"},{value:"other",label:"Otro"}],ro=({onClose:e,onSuccess:i})=>{var oe;const[t,n]=b.useState(""),[s,r]=b.useState([]),[a,u]=b.useState(null),[c,p]=b.useState([]),[f,m]=b.useState(""),[d,l]=b.useState("add"),[h,x]=b.useState(0),[v,S]=b.useState("correction"),[C,w]=b.useState(""),[F,N]=b.useState(!1),[O,K]=b.useState(!1),{currentPeriod:G,isPeriodEditable:M}=Ie(),{canEditSubHub:q,getEffectiveSubHubId:X}=ye(),z=b.useCallback(async()=>{if(!t.trim()){r([]);return}N(!0);const R=await y.db.query(`SELECT * FROM com_hubbi_inventory_items 
       WHERE (name LIKE ? OR sku LIKE ? OR barcode LIKE ?)
       AND is_active = TRUE
       LIMIT 10`,[`%${t}%`,`%${t}%`,`%${t}%`],{moduleId:"com.hubbi.inventory"});r(R),N(!1)},[t]),Y=async R=>{u(R),r([]),n(R.name);const ie=await y.db.query(`SELECT s.location_id as locationId, l.name as locationName, s.quantity as currentStock
       FROM com_hubbi_inventory_stock s
       JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
       WHERE s.item_id = ?`,[R.id],{moduleId:"com.hubbi.inventory"});p(ie),ie.length>0&&m(ie[0].locationId)},J=async()=>{var ke,ze,Ue;if(!a||!f||h<=0){y.notify("Completa todos los campos","warning");return}if(G&&!M(G.id)){y.notify("El perÃ­odo actual estÃ¡ cerrado. No se puede ajustar.","error");return}const R=X();if(R&&!q(R)){y.notify("No tienes permiso para editar esta sucursal.","error");return}if(h>100&&!await((ze=(ke=y.auth).requireRevalidation)==null?void 0:ze.call(ke,"Ajuste de inventario mayor a 100 unidades"))){y.notify("RevalidaciÃ³n de identidad cancelada","warning");return}K(!0);const ie=crypto.randomUUID(),V=d==="add"?h:-h,ae=d==="add"?"IN":"OUT",ge=a.weighted_average_cost||0;await y.db.execute(`
      INSERT INTO com_hubbi_inventory_movements 
        (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value, created_by, period_id, sub_hub_id)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `,[ie,a.id,f,ae,v+(C?`: ${C}`:""),Math.abs(V),ge,Math.abs(V)*ge,((Ue=y.getContext())==null?void 0:Ue.userId)||"system",(G==null?void 0:G.id)||null,R],{moduleId:"com.hubbi.inventory"}),await y.db.execute(`
      INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
      VALUES (?, ?, ?)
      ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = quantity + ?
    `,[a.id,f,V,V],{moduleId:"com.hubbi.inventory"}),K(!1),y.notify(`Ajuste registrado: ${d==="add"?"+":"-"}${h} ${a.name}`,"success"),i==null||i(),e()},Z=((oe=c.find(R=>R.locationId===f))==null?void 0:oe.currentStock)||0,L=d==="add"?Z+h:Z-h;return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(Ne,{className:"text-indigo-600",size:20}),"Ajuste RÃ¡pido"]}),o.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",children:o.jsx(Re,{size:20,className:"text-gray-500"})})]}),o.jsxs("div",{className:"p-6 space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar Producto"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",value:t,onChange:R=>n(R.target.value),onKeyDown:R=>R.key==="Enter"&&z(),placeholder:"CÃ³digo, SKU o nombre...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),o.jsx($e,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),o.jsx("button",{onClick:z,disabled:F,className:"absolute right-2 top-1.5 px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700",children:"Buscar"})]}),s.length>0&&o.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-auto",children:s.map(R=>o.jsxs("button",{onClick:()=>Y(R),className:"w-full text-left px-4 py-2 hover:bg-gray-50 border-b last:border-0",children:[o.jsx("div",{className:"font-medium",children:R.name}),o.jsxs("div",{className:"text-xs text-gray-500",children:["SKU: ",R.sku]})]},R.id))})]}),a&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg",children:[o.jsx("div",{className:"font-medium text-indigo-900",children:a.name}),o.jsxs("div",{className:"text-sm text-indigo-700",children:["SKU: ",a.sku]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bodega"}),o.jsx("select",{value:f,onChange:R=>m(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:c.map(R=>o.jsxs("option",{value:R.locationId,children:[R.locationName," (Stock: ",R.currentStock,")"]},R.locationId))})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>l("add"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 ${d==="add"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(St,{size:18})," Entrada"]}),o.jsxs("button",{onClick:()=>l("subtract"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 ${d==="subtract"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(Di,{size:18})," Salida"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad"}),o.jsx("input",{type:"number",value:h,onChange:R=>x(Math.max(0,parseInt(R.target.value)||0)),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RazÃ³n"}),o.jsx("select",{value:v,onChange:R=>S(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:so.map(R=>o.jsx("option",{value:R.value,children:R.label},R.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),o.jsx("input",{type:"text",value:C,onChange:R=>w(R.target.value),placeholder:"Detalles adicionales...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Stock resultante:"}),o.jsxs("span",{className:`font-bold ${L<0?"text-red-600":"text-gray-900"}`,children:[Z," â†’ ",L]})]}),L<0&&o.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm",children:[o.jsx(bt,{size:16}),"El stock resultante serÃ¡ negativo"]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50 rounded-b-xl",children:[o.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg",children:"Cancelar"}),o.jsxs("button",{onClick:J,disabled:!a||!f||h<=0||O,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:[o.jsx(Oe,{size:16}),O?"Guardando...":"Guardar Ajuste"]})]})]})})},ao=[{value:"initial",label:"Carga Inicial",description:"Crear productos y establecer stock inicial"},{value:"adjust",label:"Ajuste Masivo",description:"Ajustar cantidades existentes (+/-)"},{value:"sync",label:"SincronizaciÃ³n",description:"Reemplazar stock actual con valores del Excel"}],lo=({onClose:e,onSuccess:i})=>{const[t,n]=b.useState(null),[s,r]=b.useState("initial"),[a,u]=b.useState(""),[c,p]=b.useState([]),[f,m]=b.useState([]),[d,l]=b.useState(!1),[h,x]=b.useState("upload"),[v,S]=b.useState({success:0,errors:0}),{currentPeriod:C,isPeriodEditable:w}=Ie(),{getEffectiveSubHubId:F,canEditSubHub:N}=ye();b.useState(()=>{(async()=>{const q=await y.db.query("SELECT id, name FROM com_hubbi_inventory_locations WHERE is_active = TRUE",[],{moduleId:"com.hubbi.inventory"});p(q),q.length>0&&u(q[0].id)})()});const O=b.useCallback(async M=>{var ie;const q=(ie=M.target.files)==null?void 0:ie[0];if(!q)return;n(q);const z=(await q.text()).split(`
`),Y=z[0].toLowerCase().split(",").map(V=>V.trim()),J=Y.findIndex(V=>V.includes("sku")||V.includes("codigo")),Z=Y.findIndex(V=>V.includes("name")||V.includes("nombre")),L=Y.findIndex(V=>V.includes("qty")||V.includes("quantity")||V.includes("cantidad")),oe=Y.findIndex(V=>V.includes("cost")||V.includes("costo")||V.includes("precio"));if(J===-1||L===-1){y.notify("El archivo debe tener columnas SKU y Cantidad","error");return}const R=[];for(let V=1;V<z.length;V++){const ae=z[V].split(",").map(ge=>ge.trim());ae[J]&&R.push({sku:ae[J],name:Z>=0?ae[Z]:void 0,quantity:parseFloat(ae[L])||0,cost:oe>=0?parseFloat(ae[oe]):void 0})}m(R),x("preview")},[]),K=async()=>{var Y,J,Z;if(C&&!w(C.id)){y.notify("El perÃ­odo actual estÃ¡ cerrado","error");return}const M=F();if(M&&!N(M)){y.notify("No tienes permiso para editar esta sucursal","error");return}if(!await((J=(Y=y.auth).requireRevalidation)==null?void 0:J.call(Y,"ImportaciÃ³n masiva de inventario"))){y.notify("RevalidaciÃ³n de identidad cancelada","warning");return}l(!0);let X=0,z=0;for(const L of f)try{const oe=await y.db.query("SELECT id FROM com_hubbi_inventory_items WHERE sku = ?",[L.sku],{moduleId:"com.hubbi.inventory"});let R;if(oe.length===0&&s==="initial"&&L.name)R=crypto.randomUUID(),await y.db.execute(`
            INSERT INTO com_hubbi_inventory_items (id, sku, name, weighted_average_cost, is_active)
            VALUES (?, ?, ?, ?, TRUE)
          `,[R,L.sku,L.name,L.cost||0],{moduleId:"com.hubbi.inventory"});else if(oe.length>0)R=oe[0].id;else{L.error="Producto no encontrado",z++;continue}if(s==="initial")await y.db.execute(`
            INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
            VALUES (?, ?, ?)
            ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = ?
          `,[R,a,L.quantity,L.quantity],{moduleId:"com.hubbi.inventory"});else if(s==="adjust"){const ie=crypto.randomUUID();await y.db.execute(`
            INSERT INTO com_hubbi_inventory_movements 
              (id, item_id, location_id, type, reason, quantity, created_by, period_id)
            VALUES (?, ?, ?, 'ADJUST', 'excel_import', ?, ?, ?)
          `,[ie,R,a,L.quantity,(Z=y.getContext())==null?void 0:Z.userId,C==null?void 0:C.id],{moduleId:"com.hubbi.inventory"}),await y.db.execute(`
            INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
            VALUES (?, ?, ?)
            ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = quantity + ?
          `,[R,a,L.quantity,L.quantity],{moduleId:"com.hubbi.inventory"})}else s==="sync"&&await y.db.execute(`
            INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
            VALUES (?, ?, ?)
            ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = ?
          `,[R,a,L.quantity,L.quantity],{moduleId:"com.hubbi.inventory"});X++}catch{L.error="Error al procesar",z++}S({success:X,errors:z}),x("result"),l(!1),X>0&&(i==null||i(X))},G=()=>{const M=`SKU,Nombre,Cantidad,Costo
PROD-001,Producto Ejemplo,100,25.50
`,q=new Blob([M],{type:"text/csv"}),X=URL.createObjectURL(q),z=document.createElement("a");z.href=X,z.download="plantilla_inventario.csv",z.click()};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(en,{className:"text-green-600",size:20}),"Importar desde Excel"]}),o.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",children:o.jsx(Re,{size:20,className:"text-gray-500"})})]}),o.jsxs("div",{className:"p-6 flex-1 overflow-auto",children:[h==="upload"&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modo de importaciÃ³n"}),o.jsx("div",{className:"space-y-2",children:ao.map(M=>o.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer ${s===M.value?"border-green-500 bg-green-50":"border-gray-200 hover:bg-gray-50"}`,children:[o.jsx("input",{type:"radio",name:"mode",value:M.value,checked:s===M.value,onChange:()=>r(M.value),className:"mt-1"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:M.label}),o.jsx("div",{className:"text-sm text-gray-500",children:M.description})]})]},M.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bodega destino"}),o.jsx("select",{value:a,onChange:M=>u(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:c.map(M=>o.jsx("option",{value:M.id,children:M.name},M.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Archivo"}),o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-green-500 transition-colors",children:[o.jsx(on,{size:40,className:"mx-auto text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-600 mb-2",children:"Arrastra tu archivo Excel o CSV aquÃ­"}),o.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:O,className:"hidden",id:"excel-input"}),o.jsx("label",{htmlFor:"excel-input",className:"inline-block px-4 py-2 bg-green-600 text-white rounded-lg cursor-pointer hover:bg-green-700",children:"Seleccionar archivo"})]})]}),o.jsxs("button",{onClick:G,className:"flex items-center gap-2 text-green-600 hover:text-green-700 text-sm",children:[o.jsx(Qt,{size:16}),"Descargar plantilla de ejemplo"]})]}),h==="preview"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-sm text-gray-600",children:[f.length," productos encontrados en ",t==null?void 0:t.name]}),o.jsx("button",{onClick:()=>x("upload"),className:"text-sm text-blue-600 hover:underline",children:"Cambiar archivo"})]}),o.jsx("div",{className:"border rounded-lg overflow-hidden max-h-64 overflow-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"SKU"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Nombre"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Cantidad"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Costo"})]})}),o.jsx("tbody",{children:f.slice(0,50).map((M,q)=>o.jsxs("tr",{className:M.error?"bg-red-50":"hover:bg-gray-50",children:[o.jsx("td",{className:"px-3 py-2 font-mono",children:M.sku}),o.jsx("td",{className:"px-3 py-2",children:M.name||"-"}),o.jsx("td",{className:"px-3 py-2 text-right",children:M.quantity}),o.jsx("td",{className:"px-3 py-2 text-right",children:M.cost??"-"})]},q))})]})}),f.length>50&&o.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Mostrando 50 de ",f.length," productos"]})]}),h==="result"&&o.jsxs("div",{className:"text-center py-8",children:[v.errors===0?o.jsx(pe,{size:48,className:"mx-auto text-green-600 mb-4"}):o.jsx(ji,{size:48,className:"mx-auto text-amber-500 mb-4"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ImportaciÃ³n completada"}),o.jsxs("p",{className:"text-gray-600",children:[v.success," productos importados exitosamente",v.errors>0&&`, ${v.errors} errores`]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[o.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg",children:h==="result"?"Cerrar":"Cancelar"}),h==="preview"&&o.jsxs("button",{onClick:K,disabled:d||f.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:[o.jsx(on,{size:16}),d?"Importando...":`Importar ${f.length} productos`]})]})]})})},uo=[{value:"stock",label:"Reporte de Stock",description:"Stock actual por bodega y producto"},{value:"kardex",label:"Kardex",description:"Historial de movimientos por producto"},{value:"valuation",label:"ValorizaciÃ³n",description:"Stock con costos y valor total"},{value:"low_stock",label:"Stock Bajo",description:"Productos por debajo del punto de reorden"}],co=({onClose:e})=>{const[i,t]=b.useState("stock"),[n,s]=b.useState("all"),[r,a]=b.useState([]),[u,c]=b.useState(""),[p,f]=b.useState(""),[m,d]=b.useState(!1),[l,h]=b.useState(!1),{getEffectiveSubHubId:x}=ye();b.useState(()=>{(async()=>{const C=await y.db.query("SELECT id, name FROM com_hubbi_inventory_locations WHERE is_active = TRUE",[],{moduleId:"com.hubbi.inventory"});a(C)})()});const v=async()=>{var X;d(!0);let S=[],C="",w=[];const F=x(),N=F?`AND l.sub_hub_id = '${F}'`:"",O=n!=="all"?`AND s.location_id = '${n}'`:"";if(i==="stock")C="stock_report",w=["SKU","Producto","Bodega","Stock","Unidad","MÃ­nimo","Reorden"],S=await y.db.query(`
        SELECT 
          i.sku, i.name as producto, l.name as bodega, 
          s.quantity as stock, i.primary_unit as unidad,
          s.min_stock as minimo, s.reorder_point as reorden
        FROM com_hubbi_inventory_stock s
        JOIN com_hubbi_inventory_items i ON s.item_id = i.id
        JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
        WHERE i.is_active = TRUE ${O} ${N}
        ORDER BY i.name
      `,[],{moduleId:"com.hubbi.inventory"});else if(i==="kardex"){C="kardex",w=["Fecha","SKU","Producto","Bodega","Tipo","RazÃ³n","Cantidad","Costo","Total"];const z=u&&p?`AND m.created_at BETWEEN '${u}' AND '${p}'`:"";S=await y.db.query(`
        SELECT 
          m.created_at as fecha, i.sku, i.name as producto, l.name as bodega,
          m.type as tipo, m.reason as razon, m.quantity as cantidad,
          m.cost_at_moment as costo, m.total_value as total
        FROM com_hubbi_inventory_movements m
        JOIN com_hubbi_inventory_items i ON m.item_id = i.id
        JOIN com_hubbi_inventory_locations l ON m.location_id = l.id
        WHERE 1=1 ${O} ${N} ${z}
        ORDER BY m.created_at DESC
        LIMIT 5000
      `,[],{moduleId:"com.hubbi.inventory"})}else i==="valuation"?(C="valorizacion",w=["SKU","Producto","Bodega","Stock","Costo Unitario","Valor Total"],S=await y.db.query(`
        SELECT 
          i.sku, i.name as producto, l.name as bodega, s.quantity as stock,
          i.weighted_average_cost as costo_unitario,
          (s.quantity * i.weighted_average_cost) as valor_total
        FROM com_hubbi_inventory_stock s
        JOIN com_hubbi_inventory_items i ON s.item_id = i.id
        JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
        WHERE i.is_active = TRUE ${O} ${N}
        ORDER BY valor_total DESC
      `,[],{moduleId:"com.hubbi.inventory"})):i==="low_stock"&&(C="stock_bajo",w=["SKU","Producto","Bodega","Stock Actual","Punto Reorden","DÃ©ficit"],S=await y.db.query(`
        SELECT 
          i.sku, i.name as producto, l.name as bodega, s.quantity as stock_actual,
          s.reorder_point as punto_reorden,
          (s.reorder_point - s.quantity) as deficit
        FROM com_hubbi_inventory_stock s
        JOIN com_hubbi_inventory_items i ON s.item_id = i.id
        JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
        WHERE i.is_active = TRUE 
          AND s.quantity <= s.reorder_point 
          ${O} ${N}
        ORDER BY deficit DESC
      `,[],{moduleId:"com.hubbi.inventory"}));const K=[w.join(","),...S.map(z=>w.map((Y,J)=>{const Z=Object.keys(z)[J],L=z[Z];return typeof L=="string"&&L.includes(",")?`"${L}"`:L}).join(","))].join(`
`),G=new Blob(["\uFEFF"+K],{type:"text/csv;charset=utf-8"}),M=URL.createObjectURL(G),q=document.createElement("a");q.href=M,q.download=`${C}_${new Date().toISOString().split("T")[0]}.csv`,q.click(),URL.revokeObjectURL(M),await y.db.execute(`
      INSERT INTO com_hubbi_inventory_export_logs (id, export_type, record_count, exported_by, exported_at)
      VALUES (?, ?, ?, ?, ?)
    `,[crypto.randomUUID(),i,S.length,((X=y.getContext())==null?void 0:X.userId)||"system",new Date().toISOString()],{moduleId:"com.hubbi.inventory"}),d(!1),h(!0),y.notify(`Exportados ${S.length} registros`,"success")};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(en,{className:"text-blue-600",size:20}),"Exportar a Excel"]}),o.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",children:o.jsx(Re,{size:20,className:"text-gray-500"})})]}),o.jsx("div",{className:"p-6 space-y-5",children:l?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(pe,{size:48,className:"mx-auto text-green-600 mb-4"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ExportaciÃ³n completada"}),o.jsx("p",{className:"text-gray-600",children:"El archivo se ha descargado a tu computadora"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de reporte"}),o.jsx("div",{className:"space-y-2",children:uo.map(S=>o.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer ${i===S.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"}`,children:[o.jsx("input",{type:"radio",name:"exportType",value:S.value,checked:i===S.value,onChange:()=>t(S.value),className:"mt-1"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:S.label}),o.jsx("div",{className:"text-sm text-gray-500",children:S.description})]})]},S.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bodega"}),o.jsxs("select",{value:n,onChange:S=>s(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[o.jsx("option",{value:"all",children:"Todas las bodegas"}),r.map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))]})]}),i==="kardex"&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),o.jsx("input",{type:"date",value:u,onChange:S=>c(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),o.jsx("input",{type:"date",value:p,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]})}),o.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50 rounded-b-xl",children:[o.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg",children:l?"Cerrar":"Cancelar"}),!l&&o.jsxs("button",{onClick:v,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[o.jsx(Qt,{size:16}),m?"Exportando...":"Exportar"]})]})]})})};class Ct{static calculateNewWeightedAverageCost(i,t,n,s){if(i+n===0)return 0;const r=Math.max(0,i),a=r*t+n*s,u=r+n;return u>0?parseFloat((a/u).toFixed(4)):0}static validateStockAvailability(i,t,n=!1){return t<=0?{allowed:!1,message:"La cantidad debe ser mayor a 0"}:!n&&i<t?{allowed:!1,message:`Stock insuficiente. Disponible: ${i}, Solicitado: ${t}`}:{allowed:!0}}static determineOutCost(i,t){return t!==void 0&&(i.type==="serialized"||i.type==="asset")?t:i.weighted_average_cost}}const go=()=>{const[e,i]=b.useState(!1);return{registerMovement:async n=>{var s,r,a,u;i(!0);try{const c=await y.data.query("SELECT quantity FROM com_hubbi_inventory_stock WHERE item_id = ? AND location_id = ?",[n.item.id,n.location_id]),p=((s=c==null?void 0:c[0])==null?void 0:s.quantity)||0;if(n.type==="OUT"||n.type==="TRANSFER_OUT"){const x=Ct.validateStockAvailability(p,n.quantity);if(!x.allowed)throw new Error(x.message)}let f=n.item.weighted_average_cost,m=n.unit_cost||n.item.weighted_average_cost;if(n.type==="IN"||n.type==="ADJUST"&&n.quantity>0){if(n.unit_cost===void 0)throw new Error("Costo unitario requerido para entradas.");const x=await y.data.query("SELECT SUM(quantity) as total FROM com_hubbi_inventory_stock WHERE item_id = ?",[n.item.id]),v=((r=x==null?void 0:x[0])==null?void 0:r.total)||0;f=Ct.calculateNewWeightedAverageCost(v,n.item.weighted_average_cost,n.quantity,n.unit_cost),m=n.unit_cost}else m=n.item.weighted_average_cost;const d=crypto.randomUUID();await y.data.create({table:"com_hubbi_inventory_movements",data:{id:d,item_id:n.item.id,location_id:n.location_id,type:n.type,quantity:n.quantity,reason:n.reason,cost_at_moment:m,total_value:m*n.quantity,document_type:(a=n.reference)==null?void 0:a.type,document_number:(u=n.reference)==null?void 0:u.id,created_by:"current_user",created_at:new Date().toISOString()},options:{strategy:"online_first"}});const l=n.type==="IN"||n.type==="TRANSFER_IN"||n.type==="ADJUST"&&n.quantity>0?n.quantity:-n.quantity,h=p+l;return c&&c.length>0?await y.data.execute("UPDATE com_hubbi_inventory_stock SET quantity = ? WHERE item_id = ? AND location_id = ?",[h,n.item.id,n.location_id]):await y.data.execute("INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity) VALUES (?, ?, ?)",[n.item.id,n.location_id,h]),f!==n.item.weighted_average_cost&&await y.data.update({table:"com_hubbi_inventory_items",id:n.item.id,data:{weighted_average_cost:f,last_cost:n.unit_cost||n.item.last_cost},options:{strategy:"online_first"}}),y.notify.success("Movimiento registrado exitosamente"),{success:!0,movementId:d}}catch(c){return console.error(c),y.notify.error((c instanceof Error?c.message:String(c))||"Error al registrar movimiento"),{success:!1,error:c}}finally{i(!1)}},processing:e}},mo=async e=>{const i=crypto.randomUUID();await y.data.execute(`
        INSERT INTO com_hubbi_inventory_dte_events (id, event_type, movement_id, payload, status, created_at)
        VALUES (?, ?, ?, ?, 'pending', ?)
    `,[i,e.eventType,e.movement.id,JSON.stringify(e),new Date().toISOString()]),console.log(`[DTE Integration] Event emitted: ${e.eventType} for movement ${e.movement.id}`)},fo=async(e,i)=>{await y.data.execute(`
        UPDATE com_hubbi_inventory_movements 
        SET document_type = ?, document_number = ?, document_uuid = ?
        WHERE id = ?
    `,[i.documentType,i.documentNumber,i.documentUUID,e]),y.notify.success(`Movimiento vinculado a ${i.documentType} #${i.documentNumber}`)},po=async()=>(await y.data.query(`
        SELECT payload FROM com_hubbi_inventory_dte_events 
        WHERE status = 'pending' 
        ORDER BY created_at ASC
        LIMIT 50
    `)||[]).map(i=>JSON.parse(i.payload)),ho=async e=>{await y.data.execute(`
        UPDATE com_hubbi_inventory_dte_events 
        SET status = 'processed' 
        WHERE movement_id = ?
    `,[e])};async function Et(e){const{itemId:i,locationId:t}=e;let n=`
    SELECT 
      s.item_id as itemId,
      s.location_id as locationId,
      s.quantity as totalStock,
      COALESCE((
        SELECT SUM(r.quantity) 
        FROM com_hubbi_inventory_reservations r 
        WHERE r.item_id = s.item_id 
          AND r.location_id = s.location_id 
          AND r.status = 'active'
      ), 0) as reservedStock,
      s.min_stock as minStock,
      s.reorder_point as reorderPoint
    FROM com_hubbi_inventory_stock s
    WHERE s.item_id = ?
  `;const s=[i];return t&&(n+=" AND s.location_id = ?",s.push(t)),(await y.db.query(n,s,{moduleId:"com.hubbi.inventory"})).map(a=>({itemId:a.itemId,locationId:a.locationId,totalStock:a.totalStock,reservedStock:a.reservedStock,availableStock:a.totalStock-a.reservedStock,minStock:a.minStock,reorderPoint:a.reorderPoint}))}async function qe(e){const i=await Et({itemId:e.itemId,locationId:e.locationId});if(i.length===0)return{available:!1,currentStock:0,requestedQuantity:e.quantity};const t=i[0];return{available:t.availableStock>=e.quantity,currentStock:t.availableStock,requestedQuantity:e.quantity}}async function un(e){let i=`
    SELECT 
      i.id as itemId,
      i.name as itemName,
      i.sku,
      s.location_id as locationId,
      s.quantity as currentStock,
      s.reorder_point as reorderPoint,
      (s.reorder_point - s.quantity) as deficit
    FROM com_hubbi_inventory_stock s
    JOIN com_hubbi_inventory_items i ON s.item_id = i.id
    WHERE s.quantity <= s.reorder_point
      AND i.is_active = TRUE
  `;const t=[];return e!=null&&e.locationId&&(i+=" AND s.location_id = ?",t.push(e.locationId)),i+=" ORDER BY deficit DESC",await y.db.query(i,t,{moduleId:"com.hubbi.inventory"})}async function cn(e){var n;const i=await qe({itemId:e.itemId,locationId:e.locationId,quantity:e.quantity});if(!i.available)return{success:!1,error:`Stock insuficiente. Disponible: ${i.currentStock}, Solicitado: ${e.quantity}`};const t=crypto.randomUUID();return await y.db.execute(`
    INSERT INTO com_hubbi_inventory_reservations 
      (id, item_id, location_id, quantity, reference_type, reference_id, created_by, expires_at, status)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'active')
  `,[t,e.itemId,e.locationId,e.quantity,e.referenceType,e.referenceId,e.createdBy,e.expiresAt||null],{moduleId:"com.hubbi.inventory"}),be("reservation:created",{reservationId:t,itemId:e.itemId,quantity:e.quantity,referenceType:e.referenceType,referenceId:e.referenceId}),(n=y.audit)==null||n.call(y,{action:"reservation_created",entity:"inventory_reservation",entityId:t,description:`Reserva de ${e.quantity} unidades para ${e.referenceType}:${e.referenceId}`}),{success:!0,reservationId:t}}async function gn(e){const i=await y.db.query("SELECT * FROM com_hubbi_inventory_reservations WHERE id = ? AND status = 'active'",[e.reservationId],{moduleId:"com.hubbi.inventory"});if(i.length===0)return{success:!1,error:"Reserva no encontrada o ya consumida"};const t=i[0],n=crypto.randomUUID(),s=await y.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ?",[t.item_id],{moduleId:"com.hubbi.inventory"}),r=s.length>0?s[0].weighted_average_cost:0,a=t.quantity;return await y.db.execute(`
    INSERT INTO com_hubbi_inventory_movements 
      (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value, created_by)
    VALUES (?, ?, ?, 'OUT', 'internal_use', ?, ?, ?, ?)
  `,[n,t.item_id,t.location_id,a,r,a*r,e.consumedBy],{moduleId:"com.hubbi.inventory"}),await y.db.execute(`
    UPDATE com_hubbi_inventory_stock 
    SET quantity = quantity - ? 
    WHERE item_id = ? AND location_id = ?
  `,[a,t.item_id,t.location_id],{moduleId:"com.hubbi.inventory"}),await y.db.execute(`
    UPDATE com_hubbi_inventory_reservations SET status = 'consumed' WHERE id = ?
  `,[e.reservationId],{moduleId:"com.hubbi.inventory"}),be("reservation:consumed",{reservationId:e.reservationId,movementId:n,itemId:t.item_id,quantity:a}),be("stock:decreased",{itemId:t.item_id,locationId:t.location_id,quantity:a,reason:"internal_use",movementId:n}),{success:!0,movementId:n}}async function mn(e){return await y.db.execute(`
    UPDATE com_hubbi_inventory_reservations SET status = 'cancelled' WHERE id = ?
  `,[e.reservationId],{moduleId:"com.hubbi.inventory"}),be("reservation:cancelled",{reservationId:e.reservationId,reason:e.reason}),{success:!0}}async function fn(e){var u;if(e.type==="OUT"&&e.reason!=="correction"){const c=await qe({itemId:e.itemId,locationId:e.locationId,quantity:e.quantity});if(!c.available)return{success:!1,error:`Stock insuficiente. Disponible: ${c.currentStock}, Solicitado: ${e.quantity}`}}let i=e.periodId;if(!i){const c=await He();i=c==null?void 0:c.id}if(i&&!await wt(i))return{success:!1,error:`El perÃ­odo ${i} estÃ¡ cerrado o bloqueado. No se pueden registrar movimientos.`};if(e.subHubId){const c=y.permissions.has("inventory.edit_all_subhubs"),p=y.getContext(),f=e.subHubId===(p==null?void 0:p.subHubId),m=y.permissions.has("inventory.edit_own_subhub")&&f;if(!c&&!m)return{success:!1,error:"No tienes permiso para modificar inventario de esta sucursal."}}const t=crypto.randomUUID();let n=e.unitCost||0;if(!e.unitCost){const c=await y.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ? ",[e.itemId],{moduleId:"com.hubbi.inventory"});n=c.length>0?c[0].weighted_average_cost:0}await y.db.execute(`
    INSERT INTO com_hubbi_inventory_movements
                (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value,
                    document_type, document_number, document_uuid, created_by, sub_hub_id, period_id)
            VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
                `,[t,e.itemId,e.locationId,e.type,e.reason,e.quantity,n,e.quantity*n,e.documentType||null,e.documentNumber||null,e.documentUuid||null,e.createdBy,e.subHubId||null,i||null],{moduleId:"com.hubbi.inventory"});const s=e.type==="IN"?e.quantity:e.type==="OUT"?-e.quantity:e.quantity;await y.db.execute(`
    INSERT INTO com_hubbi_inventory_stock(item_id, location_id, quantity)
            VALUES(?, ?, ?)
    ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = quantity + ?
                `,[e.itemId,e.locationId,s,s],{moduleId:"com.hubbi.inventory"}),e.type==="IN"&&e.unitCost&&await xo(e.itemId,e.quantity,e.unitCost);const r=await y.db.query("SELECT quantity FROM com_hubbi_inventory_stock WHERE item_id = ? AND location_id = ? ",[e.itemId,e.locationId],{moduleId:"com.hubbi.inventory"}),a=r.length>0?r[0].quantity:0;return be(e.type==="IN"?"stock:increased":"stock:decreased",{itemId:e.itemId,locationId:e.locationId,quantity:e.quantity,reason:e.reason,movementId:t,newStock:a}),(u=y.audit)==null||u.call(y,{action:`stock_${e.type.toLowerCase()}`,entity:"inventory_movement",entityId:t,description:`${e.type==="IN"?"Entrada":"Salida"} de ${e.quantity} unidades - ${e.reason}`}),{success:!0,movementId:t,newStock:a}}async function xo(e,i,t){const n=await y.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ? ",[e],{moduleId:"com.hubbi.inventory"}),s=await y.db.query("SELECT SUM(quantity) as total FROM com_hubbi_inventory_stock WHERE item_id = ? ",[e],{moduleId:"com.hubbi.inventory"}),r=n.length>0?n[0].weighted_average_cost:0,a=s.length>0?s[0].total-i:0,u=a*r,c=i*t,p=a+i,f=p>0?(u+c)/p:t;await y.db.execute("UPDATE com_hubbi_inventory_items SET weighted_average_cost = ?, last_cost = ? WHERE id = ? ",[f,t,e],{moduleId:"com.hubbi.inventory"})}async function pn(e){let i="SELECT * FROM com_hubbi_inventory_items WHERE ";const t=[];if(e.id)i+="id = ? ",t.push(e.id);else if(e.sku)i+="sku = ? ",t.push(e.sku);else return null;const n=await y.db.query(i,t,{moduleId:"com.hubbi.inventory"});return n.length>0?n[0]:null}async function hn(e){let i=`
    SELECT * FROM com_hubbi_inventory_items 
    WHERE is_active = TRUE AND is_internal_use_only = FALSE
                `;const t=[];return e!=null&&e.categoryId&&(i+=" AND category_id = ? ",t.push(e.categoryId)),e!=null&&e.search&&(i+=" AND(name LIKE ? OR sku LIKE ?)",t.push(`% ${e.search}% `,` % ${e.search}% `)),i+=" ORDER BY name LIMIT ? ",t.push((e==null?void 0:e.limit)||100),await y.db.query(i,t,{moduleId:"com.hubbi.inventory"})}async function xn(e){return await y.db.query(`
    SELECT
            k.child_item_id as componentId,
                i.name as componentName,
                i.sku as componentSku,
                k.quantity
    FROM com_hubbi_inventory_kits k
    JOIN com_hubbi_inventory_items i ON k.child_item_id = i.id
    WHERE k.parent_item_id = ?
                `,[e],{moduleId:"com.hubbi.inventory"})}function be(e,i){window.dispatchEvent(new CustomEvent(`inventory:${e} `,{detail:{moduleId:"com.hubbi.inventory",timestamp:new Date().toISOString(),...i}}))}function yn(){var e,i;(i=(e=window.hubbi)==null?void 0:e.modules)!=null&&i.expose&&(window.hubbi.modules.expose("getStock",Et),window.hubbi.modules.expose("checkAvailability",qe),window.hubbi.modules.expose("getLowStockItems",un),window.hubbi.modules.expose("createReservation",cn),window.hubbi.modules.expose("consumeReservation",gn),window.hubbi.modules.expose("cancelReservation",mn),window.hubbi.modules.expose("recordMovement",fn),window.hubbi.modules.expose("getItem",pn),window.hubbi.modules.expose("getSellableItems",hn),window.hubbi.modules.expose("getKitComponents",xn),window.hubbi.modules.expose("getCurrentPeriod",He),window.hubbi.modules.expose("isPeriodEditable",wt))}const yo=[{id:"simple",label:"Producto Simple",icon:"Box",description:"Repuestos, consumibles, productos estÃ¡ndar"},{id:"serialized",label:"Serializado",icon:"Barcode",description:"Equipos con nÃºmero de serie Ãºnico"},{id:"kit",label:"Kit / Combo",icon:"Package",description:"Conjunto de productos que se venden juntos"},{id:"asset",label:"Activo Fijo",icon:"Truck",description:"VehÃ­culos, maquinaria, equipos de alto valor"},{id:"service",label:"Servicio",icon:"Wrench",description:"Mano de obra, servicios sin stock fÃ­sico"}],bo=[{id:"available",label:"Disponible",color:"green"},{id:"reserved",label:"Reservado",color:"yellow"},{id:"damaged",label:"DaÃ±ado",color:"red"},{id:"expired",label:"Vencido",color:"orange"},{id:"discontinued",label:"Descontinuado",color:"gray"}],jt={simple:[{key:"location_rack",label:"UbicaciÃ³n (Estante)",type:"text",placeholder:"Ej: Pasillo A-2"},{key:"min_stock_alert",label:"Alerta Stock MÃ­nimo",type:"number",placeholder:"0"},{key:"weight",label:"Peso (kg)",type:"number",placeholder:"0.00"},{key:"dimensions",label:"Dimensiones (LxAxH cm)",type:"text",placeholder:"Ej: 10x5x3"}],serialized:[{key:"serial_number",label:"NÃºmero de Serie",type:"text",required:!0},{key:"warranty_months",label:"Meses de GarantÃ­a",type:"number",placeholder:"12"},{key:"warranty_expiry",label:"Vencimiento GarantÃ­a",type:"date"},{key:"manufacturer",label:"Fabricante",type:"text"},{key:"model_number",label:"NÃºmero de Modelo",type:"text"}],asset:[{key:"vin",label:"VIN / NÃºmero de Chasis",type:"text",required:!0,placeholder:"17 caracteres"},{key:"engine_number",label:"NÃºmero de Motor",type:"text",required:!0},{key:"license_plate",label:"Placa",type:"text"},{key:"year",label:"AÃ±o",type:"number",placeholder:"2024"},{key:"color",label:"Color",type:"text"},{key:"fuel_type",label:"Combustible",type:"select",options:["Diesel","Gasolina","ElÃ©ctrico","HÃ­brido","GLP"]},{key:"mileage",label:"Kilometraje",type:"number",placeholder:"0"},{key:"import_policy",label:"PÃ³liza de ImportaciÃ³n",type:"text"},{key:"acquisition_date",label:"Fecha de AdquisiciÃ³n",type:"date"},{key:"last_maintenance",label:"Ãšltimo Mantenimiento",type:"date"},{key:"notes",label:"Notas Adicionales",type:"textarea"}],kit:[{key:"is_preassembled",label:"Â¿Pre-ensamblado?",type:"boolean"},{key:"compatibility",label:"Compatibilidad",type:"text",placeholder:"Ej: Motores Cummins ISX"},{key:"assembly_time",label:"Tiempo de Ensamblaje (min)",type:"number"},{key:"instructions",label:"Instrucciones",type:"textarea"}],medicine:[{key:"batch_number",label:"NÃºmero de Lote",type:"text",required:!0},{key:"expiry_date",label:"Fecha de Vencimiento",type:"date",required:!0},{key:"active_ingredient",label:"Componente Activo",type:"text"},{key:"dosage",label:"Dosis",type:"text",placeholder:"Ej: 500mg"},{key:"storage_temp",label:"Temperatura de Almacenamiento",type:"select",options:["Ambiente","Refrigerado (2-8Â°C)","Congelado (-20Â°C)"]},{key:"requires_prescription",label:"Requiere Receta",type:"boolean"}],service:[{key:"duration_hours",label:"DuraciÃ³n Estimada (horas)",type:"number"},{key:"requires_appointment",label:"Requiere Cita",type:"boolean"},{key:"technician_level",label:"Nivel de TÃ©cnico",type:"select",options:["BÃ¡sico","Intermedio","Avanzado","Especialista"]}]},vo=[{id:"unit",label:"Unidad",abbreviation:"ud"},{id:"box",label:"Caja",abbreviation:"caja"},{id:"pack",label:"Paquete",abbreviation:"paq"},{id:"kg",label:"Kilogramo",abbreviation:"kg"},{id:"g",label:"Gramo",abbreviation:"g"},{id:"lb",label:"Libra",abbreviation:"lb"},{id:"l",label:"Litro",abbreviation:"L"},{id:"ml",label:"Mililitro",abbreviation:"mL"},{id:"gal",label:"GalÃ³n",abbreviation:"gal"},{id:"m",label:"Metro",abbreviation:"m"},{id:"cm",label:"CentÃ­metro",abbreviation:"cm"},{id:"ft",label:"Pie",abbreviation:"ft"},{id:"pair",label:"Par",abbreviation:"par"},{id:"dozen",label:"Docena",abbreviation:"doc"},{id:"set",label:"Juego",abbreviation:"jgo"}],_o=[{id:"daily",label:"Diario",days:1},{id:"weekly",label:"Semanal",days:7},{id:"biweekly",label:"Quincenal",days:14},{id:"monthly",label:"Mensual",days:30},{id:"quarterly",label:"Trimestral",days:90},{id:"biannual",label:"Semestral",days:180},{id:"annual",label:"Anual",days:365}],So=[{id:"parts",label:"Repuestos",icon:"Cog"},{id:"consumables",label:"Consumibles",icon:"Droplet"},{id:"tools",label:"Herramientas",icon:"Wrench"},{id:"vehicles",label:"VehÃ­culos",icon:"Truck"},{id:"electronics",label:"ElectrÃ³nicos",icon:"Cpu"},{id:"office",label:"Oficina",icon:"FileText"},{id:"maintenance",label:"Mantenimiento",icon:"Tool"},{id:"safety",label:"Seguridad",icon:"Shield"}];function bn(e){return jt[e]||jt.simple}function wo(e,i){const t=bn(e),n=[];for(const s of t)s.required&&!i[s.key]&&n.push(`${s.label} es requerido`);return{valid:n.length===0,errors:n}}async function Co(e,i){try{let t=`
      SELECT 
        m.created_at as fecha,
        i.sku,
        i.name as producto,
        m.type as tipo,
        m.reason as motivo,
        m.quantity as cantidad,
        m.cost_at_moment as costo_unitario,
        m.total_value as valor_total,
        m.document_type as tipo_documento,
        m.document_number as numero_documento,
        l.name as ubicacion
      FROM com_hubbi_inventory_movements m
      JOIN com_hubbi_inventory_items i ON m.item_id = i.id
      LEFT JOIN com_hubbi_inventory_locations l ON m.location_id = l.id
      WHERE 1=1
    `;const n=[];e&&(t+=" AND m.item_id = ?",n.push(e)),i!=null&&i.startDate&&(t+=" AND m.created_at >= ?",n.push(i.startDate)),i!=null&&i.endDate&&(t+=" AND m.created_at <= ?",n.push(i.endDate)),i!=null&&i.locationId&&(t+=" AND m.location_id = ?",n.push(i.locationId)),t+=" ORDER BY m.created_at DESC";const s=await y.db.query(t,n,{moduleId:"com.hubbi.inventory"});return{success:!0,data:vn(s),rowCount:s.length}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Error al exportar Kardex"}}}async function Eo(e){try{let i=`
      SELECT 
        i.sku,
        i.name as producto,
        i.category_id as categoria,
        i.type as tipo,
        i.weighted_average_cost as costo_promedio,
        s.quantity as cantidad,
        (s.quantity * i.weighted_average_cost) as valor_total,
        l.name as ubicacion
      FROM com_hubbi_inventory_items i
      JOIN com_hubbi_inventory_stock s ON i.id = s.item_id
      LEFT JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
      WHERE i.is_active = TRUE
    `;const t=[];e!=null&&e.locationId&&(i+=" AND s.location_id = ?",t.push(e.locationId)),e!=null&&e.categoryId&&(i+=" AND i.category_id = ?",t.push(e.categoryId)),e!=null&&e.itemType&&(i+=" AND i.type = ?",t.push(e.itemType)),i+=" ORDER BY i.name";const n=await y.db.query(i,t,{moduleId:"com.hubbi.inventory"}),s=n.reduce((r,a)=>r+(a.valor_total||0),0);return{success:!0,data:vn(n,{footer:`TOTAL VALORIZACIÃ“N: ${s.toFixed(2)}`}),rowCount:n.length}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Error al exportar valorizaciÃ³n"}}}async function jo(e,i){try{const{startDate:t,endDate:n}=Ro(e,i),r=await y.db.query(`
      SELECT 
        m.type,
        m.reason,
        COUNT(*) as cantidad_movimientos,
        SUM(m.quantity) as unidades_totales,
        SUM(m.total_value) as valor_total
      FROM com_hubbi_inventory_movements m
      WHERE m.created_at >= ? AND m.created_at <= ?
      GROUP BY m.type, m.reason
      ORDER BY m.type, m.reason
    `,[t,n],{moduleId:"com.hubbi.inventory"}),u=await y.db.query(`
      SELECT 
        i.type,
        COUNT(DISTINCT i.id) as productos,
        SUM(s.quantity) as unidades,
        SUM(s.quantity * i.weighted_average_cost) as valor
      FROM com_hubbi_inventory_items i
      JOIN com_hubbi_inventory_stock s ON i.id = s.item_id
      WHERE i.is_active = TRUE
      GROUP BY i.type
    `,[],{moduleId:"com.hubbi.inventory"}),c={periodo:`${i} ${e}`,fecha_inicio:t,fecha_fin:n,resumen_movimientos:r,stock_al_cierre:u};return{success:!0,data:JSON.stringify(c,null,2),rowCount:r.length+u.length}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Error al generar resumen fiscal"}}}async function No(e){const i=crypto.randomUUID();await y.db.execute(`
    INSERT INTO com_hubbi_inventory_export_logs 
      (id, report_type, format, period_start, period_end, filters, row_count, generated_by, file_path, file_size)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
  `,[i,e.reportType,e.format,e.periodStart||null,e.periodEnd||null,e.filters?JSON.stringify(e.filters):null,e.rowCount,e.userId,e.filePath||null,e.fileSize||null],{moduleId:"com.hubbi.inventory"})}function vn(e,i){if(e.length===0)return"";const t=Object.keys(e[0]),n=[];n.push(t.join(","));for(const s of e){const r=t.map(a=>{const u=s[a];return u==null?"":typeof u=="string"&&(u.includes(",")||u.includes('"'))?`"${u.replace(/"/g,'""')}"`:String(u)});n.push(r.join(","))}return i!=null&&i.footer&&(n.push(""),n.push(i.footer)),n.join(`
`)}function Ro(e,i){switch(i){case"Q1":return{startDate:`${e}-01-01`,endDate:`${e}-03-31`};case"Q2":return{startDate:`${e}-04-01`,endDate:`${e}-06-30`};case"Q3":return{startDate:`${e}-07-01`,endDate:`${e}-09-30`};case"Q4":return{startDate:`${e}-10-01`,endDate:`${e}-12-31`};case"annual":default:return{startDate:`${e}-01-01`,endDate:`${e}-12-31`}}}const _n=()=>o.jsxs("div",{className:"inventory-settings p-4",children:[o.jsx("h2",{className:"text-lg font-bold",children:"ConfiguraciÃ³n de Inventario"}),o.jsx("p",{className:"text-gray-500",children:"PrÃ³ximamente: Ajustes de costos, prefijos y permisos."})]}),Sn=()=>o.jsx(an,{compact:!0}),wn=()=>{const e=()=>{var i,t;return(t=(i=window.hubbi)==null?void 0:i.navigate)==null?void 0:t.call(i,"/inventory")};return o.jsxs("button",{onClick:e,className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-lg flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),o.jsx("span",{children:"Inventario"})]})},Io=async()=>{var e,i;(i=(e=window.hubbi)==null?void 0:e.widgets)!=null&&i.register&&(window.hubbi.widgets.register({slotName:"settings_tab",moduleId:"com.hubbi.inventory",component:_n,priority:10}),window.hubbi.widgets.register({slotName:"dashboard_widget",moduleId:"com.hubbi.inventory",component:Sn,priority:20}),window.hubbi.widgets.register({slotName:"sidebar_item",moduleId:"com.hubbi.inventory",component:wn,priority:30})),yn(),ko()};async function ko(){var e,i,t;if(!(!((i=(e=window.hubbi)==null?void 0:e.db)!=null&&i.query)||!((t=window.hubbi)!=null&&t.sendNotification)))try{const n=await window.hubbi.db.query(`
      SELECT i.name, s.quantity, s.reorder_point, l.name as location_name
      FROM com_hubbi_inventory_stock s
      JOIN com_hubbi_inventory_items i ON s.item_id = i.id
      JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
      WHERE s.quantity <= s.min_stock AND i.is_active = TRUE
      LIMIT 5
    `,[],{moduleId:"com.hubbi.inventory"});n.length>0&&await window.hubbi.sendNotification({title:"âš ï¸ Stock CrÃ­tico",message:`${n.length} productos requieren reabastecimiento urgente`,category:"inventory",severity:"warning",actionUrl:"/inventory/alerts"})}catch{}}const To={id:"com.hubbi.inventory",name:"Hubbi Inventory & WMS",version:"1.0.0",emittedEvents:["inventory:stock:increased","inventory:stock:decreased","inventory:reservation:created","inventory:reservation:consumed","inventory:reservation:cancelled","inventory:item:created","inventory:item:updated","inventory:transfer:requested","inventory:transfer:approved","inventory:transfer:received"],exposedMethods:["getStock","checkAvailability","getLowStockItems","createReservation","consumeReservation","cancelReservation","recordMovement","getItem","getSellableItems","getKitComponents","getCurrentPeriod","isPeriodEditable"]};E.CYCLIC_COUNT_FREQUENCIES=_o,E.DEFAULT_CATEGORIES=So,E.ExcelExport=co,E.ExcelImport=lo,E.InventoryCore=Ct,E.InventoryDashboardWidget=Sn,E.InventorySettingsTab=_n,E.InventorySidebar=wn,E.KitsManager=Gi,E.MobileScanner=Ji,E.MovementsHistory=Bi,E.PRODUCT_SCHEMAS=jt,E.PRODUCT_STATUS=bo,E.PRODUCT_TYPES=yo,E.PeriodBadge=eo,E.PeriodSelector=Qi,E.PhysicalAudit=Xi,E.ProductForm=Ui,E.ProductsTable=zi,E.QuickAdjust=ro,E.RemissionNote=Ki,E.StockAlertsPanel=an,E.SubHubBadge=oo,E.SubHubSelector=io,E.TransferDashboard=Wi,E.UNITS_OF_MEASURE=vo,E.VisualWarehouse=Yi,E.cancelReservation=mn,E.checkAvailability=qe,E.consumeReservation=gn,E.createReservation=cn,E.emitDTEEvent=mo,E.emitInventoryEvent=be,E.exportFiscalSummary=jo,E.exportKardex=Co,E.exportStockValuation=Eo,E.getCurrentPeriod=He,E.getItem=pn,E.getKitComponents=xn,E.getLowStockItems=un,E.getPendingDTEEvents=po,E.getPeriodById=ln,E.getSchemaForType=bn,E.getSellableItems=hn,E.getStock=Et,E.getSubHubIdFromContext=to,E.isPeriodEditableById=wt,E.linkMovementToDTE=fo,E.logExport=No,E.markDTEEventProcessed=ho,E.moduleInfo=To,E.onActivate=Io,E.recordMovement=fn,E.registerInventoryAPI=yn,E.useFiscalPeriods=Ie,E.useInventoryActions=sn,E.useInventoryMovements=go,E.useStockAlerts=rn,E.useSubHubFilter=ye,E.validateAttributes=wo,E.validateSubHubPermission=no,Object.defineProperty(E,Symbol.toStringTag,{value:"Module"})});
