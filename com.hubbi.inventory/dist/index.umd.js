(function(a,_){typeof exports=="object"&&typeof module<"u"?module.exports=_(require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["react/jsx-runtime","react"],_):(a=typeof globalThis<"u"?globalThis:a||self,a.com=a.com||{},a.com.hubbi=a.com.hubbi||{},a.com.hubbi.inventory=_(a.HubbiJSX,a.React))})(this,function(a,_){"use strict";function Te(e){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(o,t,n.get?n:{enumerable:!0,get:()=>e[t]})}}return o.default=e,Object.freeze(o)}const W=Te(_),v=window.hubbi;var V={};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function fe(){return{accessor:(e,o)=>typeof e=="function"?{...o,accessorFn:e}:{...o,accessorKey:e},display:e=>e,group:e=>e}}function N(e,o){return typeof e=="function"?e(o):e}function F(e,o){return t=>{o.setState(n=>({...n,[e]:N(t,n[e])}))}}function T(e){return e instanceof Function}function Ge(e){return Array.isArray(e)&&e.every(o=>typeof o=="number")}function Be(e,o){const t=[],n=i=>{i.forEach(r=>{t.push(r);const s=o(r);s!=null&&s.length&&n(s)})};return n(e),t}function y(e,o,t){let n=[],i;return r=>{let s;t.key&&t.debug&&(s=Date.now());const u=e(r);if(!(u.length!==n.length||u.some((p,m)=>n[m]!==p)))return i;n=u;let c;if(t.key&&t.debug&&(c=Date.now()),i=o(...u),t==null||t.onChange==null||t.onChange(i),t.key&&t.debug&&t!=null&&t.debug()){const p=Math.round((Date.now()-s)*100)/100,m=Math.round((Date.now()-c)*100)/100,f=m/16,l=(g,h)=>{for(g=String(g);g.length<h;)g=" "+g;return g};console.info(`%câ± ${l(m,5)} /${l(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,t==null?void 0:t.key)}return i}}function w(e,o,t,n){return{debug:()=>{var i;return(i=e==null?void 0:e.debugAll)!=null?i:e[o]},key:V.NODE_ENV==="development"&&t,onChange:n}}function Ue(e,o,t,n){const i=()=>{var s;return(s=r.getValue())!=null?s:e.options.renderFallbackValue},r={id:`${o.id}_${t.id}`,row:o,column:t,getValue:()=>o.getValue(n),renderValue:i,getContext:y(()=>[e,t,o,r],(s,u,d,c)=>({table:s,column:u,row:d,cell:c,getValue:c.getValue,renderValue:c.renderValue}),w(e.options,"debugCells","cell.getContext"))};return e._features.forEach(s=>{s.createCell==null||s.createCell(r,t,o,e)},{}),r}function je(e,o,t,n){var i,r;const u={...e._getDefaultColumnDef(),...o},d=u.accessorKey;let c=(i=(r=u.id)!=null?r:d?typeof String.prototype.replaceAll=="function"?d.replaceAll(".","_"):d.replace(/\./g,"_"):void 0)!=null?i:typeof u.header=="string"?u.header:void 0,p;if(u.accessorFn?p=u.accessorFn:d&&(d.includes(".")?p=f=>{let l=f;for(const h of d.split(".")){var g;l=(g=l)==null?void 0:g[h],V.NODE_ENV!=="production"&&l===void 0&&console.warn(`"${h}" in deeply nested key "${d}" returned undefined.`)}return l}:p=f=>f[u.accessorKey]),!c)throw V.NODE_ENV!=="production"?new Error(u.accessorFn?"Columns require an id when using an accessorFn":"Columns require an id when using a non-string header"):new Error;let m={id:`${String(c)}`,accessorFn:p,parent:n,depth:t,columnDef:u,columns:[],getFlatColumns:y(()=>[!0],()=>{var f;return[m,...(f=m.columns)==null?void 0:f.flatMap(l=>l.getFlatColumns())]},w(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:y(()=>[e._getOrderColumnsFn()],f=>{var l;if((l=m.columns)!=null&&l.length){let g=m.columns.flatMap(h=>h.getLeafColumns());return f(g)}return[m]},w(e.options,"debugColumns","column.getLeafColumns"))};for(const f of e._features)f.createColumn==null||f.createColumn(m,e);return m}const R="debugHeaders";function pe(e,o,t){var n;let r={id:(n=t.id)!=null?n:o.id,column:o,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],u=d=>{d.subHeaders&&d.subHeaders.length&&d.subHeaders.map(u),s.push(d)};return u(r),s},getContext:()=>({table:e,header:r,column:o})};return e._features.forEach(s=>{s.createHeader==null||s.createHeader(r,e)}),r}const We={createTable:e=>{e.getHeaderGroups=y(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,n,i)=>{var r,s;const u=(r=n==null?void 0:n.map(m=>t.find(f=>f.id===m)).filter(Boolean))!=null?r:[],d=(s=i==null?void 0:i.map(m=>t.find(f=>f.id===m)).filter(Boolean))!=null?s:[],c=t.filter(m=>!(n!=null&&n.includes(m.id))&&!(i!=null&&i.includes(m.id)));return G(o,[...u,...c,...d],e)},w(e.options,R,"getHeaderGroups")),e.getCenterHeaderGroups=y(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,n,i)=>(t=t.filter(r=>!(n!=null&&n.includes(r.id))&&!(i!=null&&i.includes(r.id))),G(o,t,e,"center")),w(e.options,R,"getCenterHeaderGroups")),e.getLeftHeaderGroups=y(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(o,t,n)=>{var i;const r=(i=n==null?void 0:n.map(s=>t.find(u=>u.id===s)).filter(Boolean))!=null?i:[];return G(o,r,e,"left")},w(e.options,R,"getLeftHeaderGroups")),e.getRightHeaderGroups=y(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(o,t,n)=>{var i;const r=(i=n==null?void 0:n.map(s=>t.find(u=>u.id===s)).filter(Boolean))!=null?i:[];return G(o,r,e,"right")},w(e.options,R,"getRightHeaderGroups")),e.getFooterGroups=y(()=>[e.getHeaderGroups()],o=>[...o].reverse(),w(e.options,R,"getFooterGroups")),e.getLeftFooterGroups=y(()=>[e.getLeftHeaderGroups()],o=>[...o].reverse(),w(e.options,R,"getLeftFooterGroups")),e.getCenterFooterGroups=y(()=>[e.getCenterHeaderGroups()],o=>[...o].reverse(),w(e.options,R,"getCenterFooterGroups")),e.getRightFooterGroups=y(()=>[e.getRightHeaderGroups()],o=>[...o].reverse(),w(e.options,R,"getRightFooterGroups")),e.getFlatHeaders=y(()=>[e.getHeaderGroups()],o=>o.map(t=>t.headers).flat(),w(e.options,R,"getFlatHeaders")),e.getLeftFlatHeaders=y(()=>[e.getLeftHeaderGroups()],o=>o.map(t=>t.headers).flat(),w(e.options,R,"getLeftFlatHeaders")),e.getCenterFlatHeaders=y(()=>[e.getCenterHeaderGroups()],o=>o.map(t=>t.headers).flat(),w(e.options,R,"getCenterFlatHeaders")),e.getRightFlatHeaders=y(()=>[e.getRightHeaderGroups()],o=>o.map(t=>t.headers).flat(),w(e.options,R,"getRightFlatHeaders")),e.getCenterLeafHeaders=y(()=>[e.getCenterFlatHeaders()],o=>o.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),w(e.options,R,"getCenterLeafHeaders")),e.getLeftLeafHeaders=y(()=>[e.getLeftFlatHeaders()],o=>o.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),w(e.options,R,"getLeftLeafHeaders")),e.getRightLeafHeaders=y(()=>[e.getRightFlatHeaders()],o=>o.filter(t=>{var n;return!((n=t.subHeaders)!=null&&n.length)}),w(e.options,R,"getRightLeafHeaders")),e.getLeafHeaders=y(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(o,t,n)=>{var i,r,s,u,d,c;return[...(i=(r=o[0])==null?void 0:r.headers)!=null?i:[],...(s=(u=t[0])==null?void 0:u.headers)!=null?s:[],...(d=(c=n[0])==null?void 0:c.headers)!=null?d:[]].map(p=>p.getLeafHeaders()).flat()},w(e.options,R,"getLeafHeaders"))}};function G(e,o,t,n){var i,r;let s=0;const u=function(f,l){l===void 0&&(l=1),s=Math.max(s,l),f.filter(g=>g.getIsVisible()).forEach(g=>{var h;(h=g.columns)!=null&&h.length&&u(g.columns,l+1)},0)};u(e);let d=[];const c=(f,l)=>{const g={depth:l,id:[n,`${l}`].filter(Boolean).join("_"),headers:[]},h=[];f.forEach(S=>{const C=[...h].reverse()[0],b=S.column.depth===g.depth;let I,k=!1;if(b&&S.column.parent?I=S.column.parent:(I=S.column,k=!0),C&&(C==null?void 0:C.column)===I)C.subHeaders.push(S);else{const M=pe(t,I,{id:[n,l,I.id,S==null?void 0:S.id].filter(Boolean).join("_"),isPlaceholder:k,placeholderId:k?`${h.filter(L=>L.column===I).length}`:void 0,depth:l,index:h.length});M.subHeaders.push(S),h.push(M)}g.headers.push(S),S.headerGroup=g}),d.push(g),l>0&&c(h,l-1)},p=o.map((f,l)=>pe(t,f,{depth:s,index:l}));c(p,s-1),d.reverse();const m=f=>f.filter(g=>g.column.getIsVisible()).map(g=>{let h=0,S=0,C=[0];g.subHeaders&&g.subHeaders.length?(C=[],m(g.subHeaders).forEach(I=>{let{colSpan:k,rowSpan:M}=I;h+=k,C.push(M)})):h=1;const b=Math.min(...C);return S=S+b,g.colSpan=h,g.rowSpan=S,{colSpan:h,rowSpan:S}});return m((i=(r=d[0])==null?void 0:r.headers)!=null?i:[]),d}const K=(e,o,t,n,i,r,s)=>{let u={id:o,index:n,original:t,depth:i,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(u._valuesCache.hasOwnProperty(d))return u._valuesCache[d];const c=e.getColumn(d);if(c!=null&&c.accessorFn)return u._valuesCache[d]=c.accessorFn(u.original,n),u._valuesCache[d]},getUniqueValues:d=>{if(u._uniqueValuesCache.hasOwnProperty(d))return u._uniqueValuesCache[d];const c=e.getColumn(d);if(c!=null&&c.accessorFn)return c.columnDef.getUniqueValues?(u._uniqueValuesCache[d]=c.columnDef.getUniqueValues(u.original,n),u._uniqueValuesCache[d]):(u._uniqueValuesCache[d]=[u.getValue(d)],u._uniqueValuesCache[d])},renderValue:d=>{var c;return(c=u.getValue(d))!=null?c:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Be(u.subRows,d=>d.subRows),getParentRow:()=>u.parentId?e.getRow(u.parentId,!0):void 0,getParentRows:()=>{let d=[],c=u;for(;;){const p=c.getParentRow();if(!p)break;d.push(p),c=p}return d.reverse()},getAllCells:y(()=>[e.getAllLeafColumns()],d=>d.map(c=>Ue(e,u,c,c.id)),w(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:y(()=>[u.getAllCells()],d=>d.reduce((c,p)=>(c[p.column.id]=p,c),{}),w(e.options,"debugRows","getAllCellsByColumnId"))};for(let d=0;d<e._features.length;d++){const c=e._features[d];c==null||c.createRow==null||c.createRow(u,e)}return u},Ke={createColumn:(e,o)=>{e._getFacetedRowModel=o.options.getFacetedRowModel&&o.options.getFacetedRowModel(o,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():o.getPreFilteredRowModel(),e._getFacetedUniqueValues=o.options.getFacetedUniqueValues&&o.options.getFacetedUniqueValues(o,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=o.options.getFacetedMinMaxValues&&o.options.getFacetedMinMaxValues(o,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},he=(e,o,t)=>{var n,i;const r=t==null||(n=t.toString())==null?void 0:n.toLowerCase();return!!(!((i=e.getValue(o))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(r))};he.autoRemove=e=>E(e);const me=(e,o,t)=>{var n;return!!(!((n=e.getValue(o))==null||(n=n.toString())==null)&&n.includes(t))};me.autoRemove=e=>E(e);const ve=(e,o,t)=>{var n;return((n=e.getValue(o))==null||(n=n.toString())==null?void 0:n.toLowerCase())===(t==null?void 0:t.toLowerCase())};ve.autoRemove=e=>E(e);const ye=(e,o,t)=>{var n;return(n=e.getValue(o))==null?void 0:n.includes(t)};ye.autoRemove=e=>E(e);const we=(e,o,t)=>!t.some(n=>{var i;return!((i=e.getValue(o))!=null&&i.includes(n))});we.autoRemove=e=>E(e)||!(e!=null&&e.length);const Se=(e,o,t)=>t.some(n=>{var i;return(i=e.getValue(o))==null?void 0:i.includes(n)});Se.autoRemove=e=>E(e)||!(e!=null&&e.length);const Ce=(e,o,t)=>e.getValue(o)===t;Ce.autoRemove=e=>E(e);const _e=(e,o,t)=>e.getValue(o)==t;_e.autoRemove=e=>E(e);const J=(e,o,t)=>{let[n,i]=t;const r=e.getValue(o);return r>=n&&r<=i};J.resolveFilterValue=e=>{let[o,t]=e,n=typeof o!="number"?parseFloat(o):o,i=typeof t!="number"?parseFloat(t):t,r=o===null||Number.isNaN(n)?-1/0:n,s=t===null||Number.isNaN(i)?1/0:i;if(r>s){const u=r;r=s,s=u}return[r,s]},J.autoRemove=e=>E(e)||E(e[0])&&E(e[1]);const $={includesString:he,includesStringSensitive:me,equalsString:ve,arrIncludes:ye,arrIncludesAll:we,arrIncludesSome:Se,equals:Ce,weakEquals:_e,inNumberRange:J};function E(e){return e==null||e===""}const Je={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:F("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,o)=>{e.getAutoFilterFn=()=>{const t=o.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(e.id);return typeof n=="string"?$.includesString:typeof n=="number"?$.inNumberRange:typeof n=="boolean"||n!==null&&typeof n=="object"?$.equals:Array.isArray(n)?$.arrIncludes:$.weakEquals},e.getFilterFn=()=>{var t,n;return T(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(t=(n=o.options.filterFns)==null?void 0:n[e.columnDef.filterFn])!=null?t:$[e.columnDef.filterFn]},e.getCanFilter=()=>{var t,n,i;return((t=e.columnDef.enableColumnFilter)!=null?t:!0)&&((n=o.options.enableColumnFilters)!=null?n:!0)&&((i=o.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var t;return(t=o.getState().columnFilters)==null||(t=t.find(n=>n.id===e.id))==null?void 0:t.value},e.getFilterIndex=()=>{var t,n;return(t=(n=o.getState().columnFilters)==null?void 0:n.findIndex(i=>i.id===e.id))!=null?t:-1},e.setFilterValue=t=>{o.setColumnFilters(n=>{const i=e.getFilterFn(),r=n==null?void 0:n.find(p=>p.id===e.id),s=N(t,r?r.value:void 0);if(xe(i,s,e)){var u;return(u=n==null?void 0:n.filter(p=>p.id!==e.id))!=null?u:[]}const d={id:e.id,value:s};if(r){var c;return(c=n==null?void 0:n.map(p=>p.id===e.id?d:p))!=null?c:[]}return n!=null&&n.length?[...n,d]:[d]})}},createRow:(e,o)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=o=>{const t=e.getAllLeafColumns(),n=i=>{var r;return(r=N(o,i))==null?void 0:r.filter(s=>{const u=t.find(d=>d.id===s.id);if(u){const d=u.getFilterFn();if(xe(d,s.value,u))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(n)},e.resetColumnFilters=o=>{var t,n;e.setColumnFilters(o?[]:(t=(n=e.initialState)==null?void 0:n.columnFilters)!=null?t:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function xe(e,o,t){return(e&&e.autoRemove?e.autoRemove(o,t):!1)||typeof o>"u"||typeof o=="string"&&!o}const X={sum:(e,o,t)=>t.reduce((n,i)=>{const r=i.getValue(e);return n+(typeof r=="number"?r:0)},0),min:(e,o,t)=>{let n;return t.forEach(i=>{const r=i.getValue(e);r!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}),n},max:(e,o,t)=>{let n;return t.forEach(i=>{const r=i.getValue(e);r!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}),n},extent:(e,o,t)=>{let n,i;return t.forEach(r=>{const s=r.getValue(e);s!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}),[n,i]},mean:(e,o)=>{let t=0,n=0;if(o.forEach(i=>{let r=i.getValue(e);r!=null&&(r=+r)>=r&&(++t,n+=r)}),t)return n/t},median:(e,o)=>{if(!o.length)return;const t=o.map(r=>r.getValue(e));if(!Ge(t))return;if(t.length===1)return t[0];const n=Math.floor(t.length/2),i=t.sort((r,s)=>r-s);return t.length%2!==0?i[n]:(i[n-1]+i[n])/2},unique:(e,o)=>Array.from(new Set(o.map(t=>t.getValue(e))).values()),uniqueCount:(e,o)=>new Set(o.map(t=>t.getValue(e))).size,count:(e,o)=>o.length},Xe={getDefaultColumnDef:()=>({aggregatedCell:e=>{var o,t;return(o=(t=e.getValue())==null||t.toString==null?void 0:t.toString())!=null?o:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:F("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,o)=>{e.toggleGrouping=()=>{o.setGrouping(t=>t!=null&&t.includes(e.id)?t.filter(n=>n!==e.id):[...t??[],e.id])},e.getCanGroup=()=>{var t,n;return((t=e.columnDef.enableGrouping)!=null?t:!0)&&((n=o.options.enableGrouping)!=null?n:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var t;return(t=o.getState().grouping)==null?void 0:t.includes(e.id)},e.getGroupedIndex=()=>{var t;return(t=o.getState().grouping)==null?void 0:t.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const t=o.getCoreRowModel().flatRows[0],n=t==null?void 0:t.getValue(e.id);if(typeof n=="number")return X.sum;if(Object.prototype.toString.call(n)==="[object Date]")return X.extent},e.getAggregationFn=()=>{var t,n;if(!e)throw new Error;return T(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(t=(n=o.options.aggregationFns)==null?void 0:n[e.columnDef.aggregationFn])!=null?t:X[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=o=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(o),e.resetGrouping=o=>{var t,n;e.setGrouping(o?[]:(t=(n=e.initialState)==null?void 0:n.grouping)!=null?t:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,o)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=t=>{if(e._groupingValuesCache.hasOwnProperty(t))return e._groupingValuesCache[t];const n=o.getColumn(t);return n!=null&&n.columnDef.getGroupingValue?(e._groupingValuesCache[t]=n.columnDef.getGroupingValue(e.original),e._groupingValuesCache[t]):e.getValue(t)},e._groupingValuesCache={}},createCell:(e,o,t,n)=>{e.getIsGrouped=()=>o.getIsGrouped()&&o.id===t.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&o.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=t.subRows)!=null&&i.length)}}};function Ye(e,o,t){if(!(o!=null&&o.length)||!t)return e;const n=e.filter(r=>!o.includes(r.id));return t==="remove"?n:[...o.map(r=>e.find(s=>s.id===r)).filter(Boolean),...n]}const Ze={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:F("columnOrder",e)}),createColumn:(e,o)=>{e.getIndex=y(t=>[H(o,t)],t=>t.findIndex(n=>n.id===e.id),w(o.options,"debugColumns","getIndex")),e.getIsFirstColumn=t=>{var n;return((n=H(o,t)[0])==null?void 0:n.id)===e.id},e.getIsLastColumn=t=>{var n;const i=H(o,t);return((n=i[i.length-1])==null?void 0:n.id)===e.id}},createTable:e=>{e.setColumnOrder=o=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(o),e.resetColumnOrder=o=>{var t;e.setColumnOrder(o?[]:(t=e.initialState.columnOrder)!=null?t:[])},e._getOrderColumnsFn=y(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(o,t,n)=>i=>{let r=[];if(!(o!=null&&o.length))r=i;else{const s=[...o],u=[...i];for(;u.length&&s.length;){const d=s.shift(),c=u.findIndex(p=>p.id===d);c>-1&&r.push(u.splice(c,1)[0])}r=[...r,...u]}return Ye(r,t,n)},w(e.options,"debugTable","_getOrderColumnsFn"))}},Y=()=>({left:[],right:[]}),Qe={getInitialState:e=>({columnPinning:Y(),...e}),getDefaultOptions:e=>({onColumnPinningChange:F("columnPinning",e)}),createColumn:(e,o)=>{e.pin=t=>{const n=e.getLeafColumns().map(i=>i.id).filter(Boolean);o.setColumnPinning(i=>{var r,s;if(t==="right"){var u,d;return{left:((u=i==null?void 0:i.left)!=null?u:[]).filter(m=>!(n!=null&&n.includes(m))),right:[...((d=i==null?void 0:i.right)!=null?d:[]).filter(m=>!(n!=null&&n.includes(m))),...n]}}if(t==="left"){var c,p;return{left:[...((c=i==null?void 0:i.left)!=null?c:[]).filter(m=>!(n!=null&&n.includes(m))),...n],right:((p=i==null?void 0:i.right)!=null?p:[]).filter(m=>!(n!=null&&n.includes(m)))}}return{left:((r=i==null?void 0:i.left)!=null?r:[]).filter(m=>!(n!=null&&n.includes(m))),right:((s=i==null?void 0:i.right)!=null?s:[]).filter(m=>!(n!=null&&n.includes(m)))}})},e.getCanPin=()=>e.getLeafColumns().some(n=>{var i,r,s;return((i=n.columnDef.enablePinning)!=null?i:!0)&&((r=(s=o.options.enableColumnPinning)!=null?s:o.options.enablePinning)!=null?r:!0)}),e.getIsPinned=()=>{const t=e.getLeafColumns().map(u=>u.id),{left:n,right:i}=o.getState().columnPinning,r=t.some(u=>n==null?void 0:n.includes(u)),s=t.some(u=>i==null?void 0:i.includes(u));return r?"left":s?"right":!1},e.getPinnedIndex=()=>{var t,n;const i=e.getIsPinned();return i?(t=(n=o.getState().columnPinning)==null||(n=n[i])==null?void 0:n.indexOf(e.id))!=null?t:-1:0}},createRow:(e,o)=>{e.getCenterVisibleCells=y(()=>[e._getAllVisibleCells(),o.getState().columnPinning.left,o.getState().columnPinning.right],(t,n,i)=>{const r=[...n??[],...i??[]];return t.filter(s=>!r.includes(s.column.id))},w(o.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=y(()=>[e._getAllVisibleCells(),o.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(s=>s.column.id===r)).filter(Boolean).map(r=>({...r,position:"left"})),w(o.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=y(()=>[e._getAllVisibleCells(),o.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(s=>s.column.id===r)).filter(Boolean).map(r=>({...r,position:"right"})),w(o.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=o=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(o),e.resetColumnPinning=o=>{var t,n;return e.setColumnPinning(o?Y():(t=(n=e.initialState)==null?void 0:n.columnPinning)!=null?t:Y())},e.getIsSomeColumnsPinned=o=>{var t;const n=e.getState().columnPinning;if(!o){var i,r;return!!((i=n.left)!=null&&i.length||(r=n.right)!=null&&r.length)}return!!((t=n[o])!=null&&t.length)},e.getLeftLeafColumns=y(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(o,t)=>(t??[]).map(n=>o.find(i=>i.id===n)).filter(Boolean),w(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=y(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(o,t)=>(t??[]).map(n=>o.find(i=>i.id===n)).filter(Boolean),w(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=y(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(o,t,n)=>{const i=[...t??[],...n??[]];return o.filter(r=>!i.includes(r.id))},w(e.options,"debugColumns","getCenterLeafColumns"))}};function et(e){return e||(typeof document<"u"?document:null)}const B={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Z=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),tt={getDefaultColumnDef:()=>B,getInitialState:e=>({columnSizing:{},columnSizingInfo:Z(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:F("columnSizing",e),onColumnSizingInfoChange:F("columnSizingInfo",e)}),createColumn:(e,o)=>{e.getSize=()=>{var t,n,i;const r=o.getState().columnSizing[e.id];return Math.min(Math.max((t=e.columnDef.minSize)!=null?t:B.minSize,(n=r??e.columnDef.size)!=null?n:B.size),(i=e.columnDef.maxSize)!=null?i:B.maxSize)},e.getStart=y(t=>[t,H(o,t),o.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((i,r)=>i+r.getSize(),0),w(o.options,"debugColumns","getStart")),e.getAfter=y(t=>[t,H(o,t),o.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((i,r)=>i+r.getSize(),0),w(o.options,"debugColumns","getAfter")),e.resetSize=()=>{o.setColumnSizing(t=>{let{[e.id]:n,...i}=t;return i})},e.getCanResize=()=>{var t,n;return((t=e.columnDef.enableResizing)!=null?t:!0)&&((n=o.options.enableColumnResizing)!=null?n:!0)},e.getIsResizing=()=>o.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,o)=>{e.getSize=()=>{let t=0;const n=i=>{if(i.subHeaders.length)i.subHeaders.forEach(n);else{var r;t+=(r=i.column.getSize())!=null?r:0}};return n(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=t=>{const n=o.getColumn(e.column.id),i=n==null?void 0:n.getCanResize();return r=>{if(!n||!i||(r.persist==null||r.persist(),Q(r)&&r.touches&&r.touches.length>1))return;const s=e.getSize(),u=e?e.getLeafHeaders().map(C=>[C.column.id,C.column.getSize()]):[[n.id,n.getSize()]],d=Q(r)?Math.round(r.touches[0].clientX):r.clientX,c={},p=(C,b)=>{typeof b=="number"&&(o.setColumnSizingInfo(I=>{var k,M;const L=o.options.columnResizeDirection==="rtl"?-1:1,Oe=(b-((k=I==null?void 0:I.startOffset)!=null?k:0))*L,qe=Math.max(Oe/((M=I==null?void 0:I.startSize)!=null?M:0),-.999999);return I.columnSizingStart.forEach(pn=>{let[hn,ze]=pn;c[hn]=Math.round(Math.max(ze+ze*qe,0)*100)/100}),{...I,deltaOffset:Oe,deltaPercentage:qe}}),(o.options.columnResizeMode==="onChange"||C==="end")&&o.setColumnSizing(I=>({...I,...c})))},m=C=>p("move",C),f=C=>{p("end",C),o.setColumnSizingInfo(b=>({...b,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},l=et(t),g={moveHandler:C=>m(C.clientX),upHandler:C=>{l==null||l.removeEventListener("mousemove",g.moveHandler),l==null||l.removeEventListener("mouseup",g.upHandler),f(C.clientX)}},h={moveHandler:C=>(C.cancelable&&(C.preventDefault(),C.stopPropagation()),m(C.touches[0].clientX),!1),upHandler:C=>{var b;l==null||l.removeEventListener("touchmove",h.moveHandler),l==null||l.removeEventListener("touchend",h.upHandler),C.cancelable&&(C.preventDefault(),C.stopPropagation()),f((b=C.touches[0])==null?void 0:b.clientX)}},S=nt()?{passive:!1}:!1;Q(r)?(l==null||l.addEventListener("touchmove",h.moveHandler,S),l==null||l.addEventListener("touchend",h.upHandler,S)):(l==null||l.addEventListener("mousemove",g.moveHandler,S),l==null||l.addEventListener("mouseup",g.upHandler,S)),o.setColumnSizingInfo(C=>({...C,startOffset:d,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:u,isResizingColumn:n.id}))}}},createTable:e=>{e.setColumnSizing=o=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(o),e.setColumnSizingInfo=o=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(o),e.resetColumnSizing=o=>{var t;e.setColumnSizing(o?{}:(t=e.initialState.columnSizing)!=null?t:{})},e.resetHeaderSizeInfo=o=>{var t;e.setColumnSizingInfo(o?Z():(t=e.initialState.columnSizingInfo)!=null?t:Z())},e.getTotalSize=()=>{var o,t;return(o=(t=e.getHeaderGroups()[0])==null?void 0:t.headers.reduce((n,i)=>n+i.getSize(),0))!=null?o:0},e.getLeftTotalSize=()=>{var o,t;return(o=(t=e.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((n,i)=>n+i.getSize(),0))!=null?o:0},e.getCenterTotalSize=()=>{var o,t;return(o=(t=e.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((n,i)=>n+i.getSize(),0))!=null?o:0},e.getRightTotalSize=()=>{var o,t;return(o=(t=e.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((n,i)=>n+i.getSize(),0))!=null?o:0}}};let U=null;function nt(){if(typeof U=="boolean")return U;let e=!1;try{const o={get passive(){return e=!0,!1}},t=()=>{};window.addEventListener("test",t,o),window.removeEventListener("test",t)}catch{e=!1}return U=e,U}function Q(e){return e.type==="touchstart"}const ot={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:F("columnVisibility",e)}),createColumn:(e,o)=>{e.toggleVisibility=t=>{e.getCanHide()&&o.setColumnVisibility(n=>({...n,[e.id]:t??!e.getIsVisible()}))},e.getIsVisible=()=>{var t,n;const i=e.columns;return(t=i.length?i.some(r=>r.getIsVisible()):(n=o.getState().columnVisibility)==null?void 0:n[e.id])!=null?t:!0},e.getCanHide=()=>{var t,n;return((t=e.columnDef.enableHiding)!=null?t:!0)&&((n=o.options.enableHiding)!=null?n:!0)},e.getToggleVisibilityHandler=()=>t=>{e.toggleVisibility==null||e.toggleVisibility(t.target.checked)}},createRow:(e,o)=>{e._getAllVisibleCells=y(()=>[e.getAllCells(),o.getState().columnVisibility],t=>t.filter(n=>n.column.getIsVisible()),w(o.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=y(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(t,n,i)=>[...t,...n,...i],w(o.options,"debugRows","getVisibleCells"))},createTable:e=>{const o=(t,n)=>y(()=>[n(),n().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(r=>r.getIsVisible==null?void 0:r.getIsVisible()),w(e.options,"debugColumns",t));e.getVisibleFlatColumns=o("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=o("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=o("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=o("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=o("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:(n=e.initialState.columnVisibility)!=null?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=(n=t)!=null?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,r)=>({...i,[r.id]:t||!(r.getCanHide!=null&&r.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible((n=t.target)==null?void 0:n.checked)}}};function H(e,o){return o?o==="center"?e.getCenterVisibleLeafColumns():o==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const it={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},rt={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:F("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:o=>{var t;const n=(t=e.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[o.id])==null?void 0:t.getValue();return typeof n=="string"||typeof n=="number"}}),createColumn:(e,o)=>{e.getCanGlobalFilter=()=>{var t,n,i,r;return((t=e.columnDef.enableGlobalFilter)!=null?t:!0)&&((n=o.options.enableGlobalFilter)!=null?n:!0)&&((i=o.options.enableFilters)!=null?i:!0)&&((r=o.options.getColumnCanGlobalFilter==null?void 0:o.options.getColumnCanGlobalFilter(e))!=null?r:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>$.includesString,e.getGlobalFilterFn=()=>{var o,t;const{globalFilterFn:n}=e.options;return T(n)?n:n==="auto"?e.getGlobalAutoFilterFn():(o=(t=e.options.filterFns)==null?void 0:t[n])!=null?o:$[n]},e.setGlobalFilter=o=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(o)},e.resetGlobalFilter=o=>{e.setGlobalFilter(o?void 0:e.initialState.globalFilter)}}},st={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:F("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let o=!1,t=!1;e._autoResetExpanded=()=>{var n,i;if(!o){e._queue(()=>{o=!0});return}if((n=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?n:!e.options.manualExpanding){if(t)return;t=!0,e._queue(()=>{e.resetExpanded(),t=!1})}},e.setExpanded=n=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(n),e.toggleAllRowsExpanded=n=>{n??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=n=>{var i,r;e.setExpanded(n?{}:(i=(r=e.initialState)==null?void 0:r.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(n=>n.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>n=>{n.persist==null||n.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const n=e.getState().expanded;return n===!0||Object.values(n).some(Boolean)},e.getIsAllRowsExpanded=()=>{const n=e.getState().expanded;return typeof n=="boolean"?n===!0:!(!Object.keys(n).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let n=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(r=>{const s=r.split(".");n=Math.max(n,s.length)}),n},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,o)=>{e.toggleExpanded=t=>{o.setExpanded(n=>{var i;const r=n===!0?!0:!!(n!=null&&n[e.id]);let s={};if(n===!0?Object.keys(o.getRowModel().rowsById).forEach(u=>{s[u]=!0}):s=n,t=(i=t)!=null?i:!r,!r&&t)return{...s,[e.id]:!0};if(r&&!t){const{[e.id]:u,...d}=s;return d}return n})},e.getIsExpanded=()=>{var t;const n=o.getState().expanded;return!!((t=o.options.getIsRowExpanded==null?void 0:o.options.getIsRowExpanded(e))!=null?t:n===!0||n!=null&&n[e.id])},e.getCanExpand=()=>{var t,n,i;return(t=o.options.getRowCanExpand==null?void 0:o.options.getRowCanExpand(e))!=null?t:((n=o.options.enableExpanding)!=null?n:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let t=!0,n=e;for(;t&&n.parentId;)n=o.getRow(n.parentId,!0),t=n.getIsExpanded();return t},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},ee=0,te=10,ne=()=>({pageIndex:ee,pageSize:te}),lt={getInitialState:e=>({...e,pagination:{...ne(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:F("pagination",e)}),createTable:e=>{let o=!1,t=!1;e._autoResetPageIndex=()=>{var n,i;if(!o){e._queue(()=>{o=!0});return}if((n=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?n:!e.options.manualPagination){if(t)return;t=!0,e._queue(()=>{e.resetPageIndex(),t=!1})}},e.setPagination=n=>{const i=r=>N(n,r);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=n=>{var i;e.setPagination(n?ne():(i=e.initialState.pagination)!=null?i:ne())},e.setPageIndex=n=>{e.setPagination(i=>{let r=N(n,i.pageIndex);const s=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return r=Math.max(0,Math.min(r,s)),{...i,pageIndex:r}})},e.resetPageIndex=n=>{var i,r;e.setPageIndex(n?ee:(i=(r=e.initialState)==null||(r=r.pagination)==null?void 0:r.pageIndex)!=null?i:ee)},e.resetPageSize=n=>{var i,r;e.setPageSize(n?te:(i=(r=e.initialState)==null||(r=r.pagination)==null?void 0:r.pageSize)!=null?i:te)},e.setPageSize=n=>{e.setPagination(i=>{const r=Math.max(1,N(n,i.pageSize)),s=i.pageSize*i.pageIndex,u=Math.floor(s/r);return{...i,pageIndex:u,pageSize:r}})},e.setPageCount=n=>e.setPagination(i=>{var r;let s=N(n,(r=e.options.pageCount)!=null?r:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...i,pageCount:s}}),e.getPageOptions=y(()=>[e.getPageCount()],n=>{let i=[];return n&&n>0&&(i=[...new Array(n)].fill(null).map((r,s)=>s)),i},w(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:n}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:n<i-1},e.previousPage=()=>e.setPageIndex(n=>n-1),e.nextPage=()=>e.setPageIndex(n=>n+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var n;return(n=e.options.pageCount)!=null?n:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var n;return(n=e.options.rowCount)!=null?n:e.getPrePaginationRowModel().rows.length}}},oe=()=>({top:[],bottom:[]}),at={getInitialState:e=>({rowPinning:oe(),...e}),getDefaultOptions:e=>({onRowPinningChange:F("rowPinning",e)}),createRow:(e,o)=>{e.pin=(t,n,i)=>{const r=n?e.getLeafRows().map(d=>{let{id:c}=d;return c}):[],s=i?e.getParentRows().map(d=>{let{id:c}=d;return c}):[],u=new Set([...s,e.id,...r]);o.setRowPinning(d=>{var c,p;if(t==="bottom"){var m,f;return{top:((m=d==null?void 0:d.top)!=null?m:[]).filter(h=>!(u!=null&&u.has(h))),bottom:[...((f=d==null?void 0:d.bottom)!=null?f:[]).filter(h=>!(u!=null&&u.has(h))),...Array.from(u)]}}if(t==="top"){var l,g;return{top:[...((l=d==null?void 0:d.top)!=null?l:[]).filter(h=>!(u!=null&&u.has(h))),...Array.from(u)],bottom:((g=d==null?void 0:d.bottom)!=null?g:[]).filter(h=>!(u!=null&&u.has(h)))}}return{top:((c=d==null?void 0:d.top)!=null?c:[]).filter(h=>!(u!=null&&u.has(h))),bottom:((p=d==null?void 0:d.bottom)!=null?p:[]).filter(h=>!(u!=null&&u.has(h)))}})},e.getCanPin=()=>{var t;const{enableRowPinning:n,enablePinning:i}=o.options;return typeof n=="function"?n(e):(t=n??i)!=null?t:!0},e.getIsPinned=()=>{const t=[e.id],{top:n,bottom:i}=o.getState().rowPinning,r=t.some(u=>n==null?void 0:n.includes(u)),s=t.some(u=>i==null?void 0:i.includes(u));return r?"top":s?"bottom":!1},e.getPinnedIndex=()=>{var t,n;const i=e.getIsPinned();if(!i)return-1;const r=(t=i==="top"?o.getTopRows():o.getBottomRows())==null?void 0:t.map(s=>{let{id:u}=s;return u});return(n=r==null?void 0:r.indexOf(e.id))!=null?n:-1}},createTable:e=>{e.setRowPinning=o=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(o),e.resetRowPinning=o=>{var t,n;return e.setRowPinning(o?oe():(t=(n=e.initialState)==null?void 0:n.rowPinning)!=null?t:oe())},e.getIsSomeRowsPinned=o=>{var t;const n=e.getState().rowPinning;if(!o){var i,r;return!!((i=n.top)!=null&&i.length||(r=n.bottom)!=null&&r.length)}return!!((t=n[o])!=null&&t.length)},e._getPinnedRows=(o,t,n)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(t??[]).map(s=>{const u=e.getRow(s,!0);return u.getIsAllParentsExpanded()?u:null}):(t??[]).map(s=>o.find(u=>u.id===s))).filter(Boolean).map(s=>({...s,position:n}))},e.getTopRows=y(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(o,t)=>e._getPinnedRows(o,t,"top"),w(e.options,"debugRows","getTopRows")),e.getBottomRows=y(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(o,t)=>e._getPinnedRows(o,t,"bottom"),w(e.options,"debugRows","getBottomRows")),e.getCenterRows=y(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(o,t,n)=>{const i=new Set([...t??[],...n??[]]);return o.filter(r=>!i.has(r.id))},w(e.options,"debugRows","getCenterRows"))}},ut={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:F("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=o=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(o),e.resetRowSelection=o=>{var t;return e.setRowSelection(o?{}:(t=e.initialState.rowSelection)!=null?t:{})},e.toggleAllRowsSelected=o=>{e.setRowSelection(t=>{o=typeof o<"u"?o:!e.getIsAllRowsSelected();const n={...t},i=e.getPreGroupedRowModel().flatRows;return o?i.forEach(r=>{r.getCanSelect()&&(n[r.id]=!0)}):i.forEach(r=>{delete n[r.id]}),n})},e.toggleAllPageRowsSelected=o=>e.setRowSelection(t=>{const n=typeof o<"u"?o:!e.getIsAllPageRowsSelected(),i={...t};return e.getRowModel().rows.forEach(r=>{ie(i,r.id,n,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=y(()=>[e.getState().rowSelection,e.getCoreRowModel()],(o,t)=>Object.keys(o).length?re(e,t):{rows:[],flatRows:[],rowsById:{}},w(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=y(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(o,t)=>Object.keys(o).length?re(e,t):{rows:[],flatRows:[],rowsById:{}},w(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=y(()=>[e.getState().rowSelection,e.getSortedRowModel()],(o,t)=>Object.keys(o).length?re(e,t):{rows:[],flatRows:[],rowsById:{}},w(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{const o=e.getFilteredRowModel().flatRows,{rowSelection:t}=e.getState();let n=!!(o.length&&Object.keys(t).length);return n&&o.some(i=>i.getCanSelect()&&!t[i.id])&&(n=!1),n},e.getIsAllPageRowsSelected=()=>{const o=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:t}=e.getState();let n=!!o.length;return n&&o.some(i=>!t[i.id])&&(n=!1),n},e.getIsSomeRowsSelected=()=>{var o;const t=Object.keys((o=e.getState().rowSelection)!=null?o:{}).length;return t>0&&t<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const o=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:o.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>o=>{e.toggleAllRowsSelected(o.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>o=>{e.toggleAllPageRowsSelected(o.target.checked)}},createRow:(e,o)=>{e.toggleSelected=(t,n)=>{const i=e.getIsSelected();o.setRowSelection(r=>{var s;if(t=typeof t<"u"?t:!i,e.getCanSelect()&&i===t)return r;const u={...r};return ie(u,e.id,t,(s=n==null?void 0:n.selectChildren)!=null?s:!0,o),u})},e.getIsSelected=()=>{const{rowSelection:t}=o.getState();return se(e,t)},e.getIsSomeSelected=()=>{const{rowSelection:t}=o.getState();return le(e,t)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=o.getState();return le(e,t)==="all"},e.getCanSelect=()=>{var t;return typeof o.options.enableRowSelection=="function"?o.options.enableRowSelection(e):(t=o.options.enableRowSelection)!=null?t:!0},e.getCanSelectSubRows=()=>{var t;return typeof o.options.enableSubRowSelection=="function"?o.options.enableSubRowSelection(e):(t=o.options.enableSubRowSelection)!=null?t:!0},e.getCanMultiSelect=()=>{var t;return typeof o.options.enableMultiRowSelection=="function"?o.options.enableMultiRowSelection(e):(t=o.options.enableMultiRowSelection)!=null?t:!0},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return n=>{var i;t&&e.toggleSelected((i=n.target)==null?void 0:i.checked)}}}},ie=(e,o,t,n,i)=>{var r;const s=i.getRow(o,!0);t?(s.getCanMultiSelect()||Object.keys(e).forEach(u=>delete e[u]),s.getCanSelect()&&(e[o]=!0)):delete e[o],n&&(r=s.subRows)!=null&&r.length&&s.getCanSelectSubRows()&&s.subRows.forEach(u=>ie(e,u.id,t,n,i))};function re(e,o){const t=e.getState().rowSelection,n=[],i={},r=function(s,u){return s.map(d=>{var c;const p=se(d,t);if(p&&(n.push(d),i[d.id]=d),(c=d.subRows)!=null&&c.length&&(d={...d,subRows:r(d.subRows)}),p)return d}).filter(Boolean)};return{rows:r(o.rows),flatRows:n,rowsById:i}}function se(e,o){var t;return(t=o[e.id])!=null?t:!1}function le(e,o,t){var n;if(!((n=e.subRows)!=null&&n.length))return!1;let i=!0,r=!1;return e.subRows.forEach(s=>{if(!(r&&!i)&&(s.getCanSelect()&&(se(s,o)?r=!0:i=!1),s.subRows&&s.subRows.length)){const u=le(s,o);u==="all"?r=!0:(u==="some"&&(r=!0),i=!1)}}),i?"all":r?"some":!1}const ae=/([0-9]+)/gm,dt=(e,o,t)=>be(P(e.getValue(t)).toLowerCase(),P(o.getValue(t)).toLowerCase()),ct=(e,o,t)=>be(P(e.getValue(t)),P(o.getValue(t))),gt=(e,o,t)=>ue(P(e.getValue(t)).toLowerCase(),P(o.getValue(t)).toLowerCase()),ft=(e,o,t)=>ue(P(e.getValue(t)),P(o.getValue(t))),pt=(e,o,t)=>{const n=e.getValue(t),i=o.getValue(t);return n>i?1:n<i?-1:0},ht=(e,o,t)=>ue(e.getValue(t),o.getValue(t));function ue(e,o){return e===o?0:e>o?1:-1}function P(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function be(e,o){const t=e.split(ae).filter(Boolean),n=o.split(ae).filter(Boolean);for(;t.length&&n.length;){const i=t.shift(),r=n.shift(),s=parseInt(i,10),u=parseInt(r,10),d=[s,u].sort();if(isNaN(d[0])){if(i>r)return 1;if(r>i)return-1;continue}if(isNaN(d[1]))return isNaN(s)?-1:1;if(s>u)return 1;if(u>s)return-1}return t.length-n.length}const O={alphanumeric:dt,alphanumericCaseSensitive:ct,text:gt,textCaseSensitive:ft,datetime:pt,basic:ht},mt=[We,ot,Ze,Qe,Ke,Je,it,rt,{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:F("sorting",e),isMultiSortEvent:o=>o.shiftKey}),createColumn:(e,o)=>{e.getAutoSortingFn=()=>{const t=o.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const i of t){const r=i==null?void 0:i.getValue(e.id);if(Object.prototype.toString.call(r)==="[object Date]")return O.datetime;if(typeof r=="string"&&(n=!0,r.split(ae).length>1))return O.alphanumeric}return n?O.text:O.basic},e.getAutoSortDir=()=>{const t=o.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var t,n;if(!e)throw new Error;return T(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(t=(n=o.options.sortingFns)==null?void 0:n[e.columnDef.sortingFn])!=null?t:O[e.columnDef.sortingFn]},e.toggleSorting=(t,n)=>{const i=e.getNextSortingOrder(),r=typeof t<"u"&&t!==null;o.setSorting(s=>{const u=s==null?void 0:s.find(l=>l.id===e.id),d=s==null?void 0:s.findIndex(l=>l.id===e.id);let c=[],p,m=r?t:i==="desc";if(s!=null&&s.length&&e.getCanMultiSort()&&n?u?p="toggle":p="add":s!=null&&s.length&&d!==s.length-1?p="replace":u?p="toggle":p="replace",p==="toggle"&&(r||i||(p="remove")),p==="add"){var f;c=[...s,{id:e.id,desc:m}],c.splice(0,c.length-((f=o.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else p==="toggle"?c=s.map(l=>l.id===e.id?{...l,desc:m}:l):p==="remove"?c=s.filter(l=>l.id!==e.id):c=[{id:e.id,desc:m}];return c})},e.getFirstSortDir=()=>{var t,n;return((t=(n=e.columnDef.sortDescFirst)!=null?n:o.options.sortDescFirst)!=null?t:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=t=>{var n,i;const r=e.getFirstSortDir(),s=e.getIsSorted();return s?s!==r&&((n=o.options.enableSortingRemoval)==null||n)&&(!(t&&(i=o.options.enableMultiRemove)!=null)||i)?!1:s==="desc"?"asc":"desc":r},e.getCanSort=()=>{var t,n;return((t=e.columnDef.enableSorting)!=null?t:!0)&&((n=o.options.enableSorting)!=null?n:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var t,n;return(t=(n=e.columnDef.enableMultiSort)!=null?n:o.options.enableMultiSort)!=null?t:!!e.accessorFn},e.getIsSorted=()=>{var t;const n=(t=o.getState().sorting)==null?void 0:t.find(i=>i.id===e.id);return n?n.desc?"desc":"asc":!1},e.getSortIndex=()=>{var t,n;return(t=(n=o.getState().sorting)==null?void 0:n.findIndex(i=>i.id===e.id))!=null?t:-1},e.clearSorting=()=>{o.setSorting(t=>t!=null&&t.length?t.filter(n=>n.id!==e.id):[])},e.getToggleSortingHandler=()=>{const t=e.getCanSort();return n=>{t&&(n.persist==null||n.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?o.options.isMultiSortEvent==null?void 0:o.options.isMultiSortEvent(n):!1))}}},createTable:e=>{e.setSorting=o=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(o),e.resetSorting=o=>{var t,n;e.setSorting(o?[]:(t=(n=e.initialState)==null?void 0:n.sorting)!=null?t:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Xe,st,lt,at,ut,tt];function vt(e){var o,t;V.NODE_ENV!=="production"&&(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");const n=[...mt,...(o=e._features)!=null?o:[]];let i={_features:n};const r=i._features.reduce((f,l)=>Object.assign(f,l.getDefaultOptions==null?void 0:l.getDefaultOptions(i)),{}),s=f=>i.options.mergeOptions?i.options.mergeOptions(r,f):{...r,...f};let d={...{},...(t=e.initialState)!=null?t:{}};i._features.forEach(f=>{var l;d=(l=f.getInitialState==null?void 0:f.getInitialState(d))!=null?l:d});const c=[];let p=!1;const m={_features:n,options:{...r,...e},initialState:d,_queue:f=>{c.push(f),p||(p=!0,Promise.resolve().then(()=>{for(;c.length;)c.shift()();p=!1}).catch(l=>setTimeout(()=>{throw l})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const l=N(f,i.options);i.options=s(l)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,l,g)=>{var h;return(h=i.options.getRowId==null?void 0:i.options.getRowId(f,l,g))!=null?h:`${g?[g.id,l].join("."):l}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,l)=>{let g=(l?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!g&&(g=i.getCoreRowModel().rowsById[f],!g))throw V.NODE_ENV!=="production"?new Error(`getRow could not find row with ID: ${f}`):new Error;return g},_getDefaultColumnDef:y(()=>[i.options.defaultColumn],f=>{var l;return f=(l=f)!=null?l:{},{header:g=>{const h=g.header.column.columnDef;return h.accessorKey?h.accessorKey:h.accessorFn?h.id:null},cell:g=>{var h,S;return(h=(S=g.renderValue())==null||S.toString==null?void 0:S.toString())!=null?h:null},...i._features.reduce((g,h)=>Object.assign(g,h.getDefaultColumnDef==null?void 0:h.getDefaultColumnDef()),{}),...f}},w(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>i.options.columns,getAllColumns:y(()=>[i._getColumnDefs()],f=>{const l=function(g,h,S){return S===void 0&&(S=0),g.map(C=>{const b=je(i,C,S,h),I=C;return b.columns=I.columns?l(I.columns,b,S+1):[],b})};return l(f)},w(e,"debugColumns","getAllColumns")),getAllFlatColumns:y(()=>[i.getAllColumns()],f=>f.flatMap(l=>l.getFlatColumns()),w(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:y(()=>[i.getAllFlatColumns()],f=>f.reduce((l,g)=>(l[g.id]=g,l),{}),w(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:y(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,l)=>{let g=f.flatMap(h=>h.getLeafColumns());return l(g)},w(e,"debugColumns","getAllLeafColumns")),getColumn:f=>{const l=i._getAllFlatColumnsById()[f];return V.NODE_ENV!=="production"&&!l&&console.error(`[Table] Column with id '${f}' does not exist.`),l}};Object.assign(i,m);for(let f=0;f<i._features.length;f++){const l=i._features[f];l==null||l.createTable==null||l.createTable(i)}return i}function Ie(){return e=>y(()=>[e.options.data],o=>{const t={rows:[],flatRows:[],rowsById:{}},n=function(i,r,s){r===void 0&&(r=0);const u=[];for(let c=0;c<i.length;c++){const p=K(e,e._getRowId(i[c],c,s),i[c],c,r,void 0,s==null?void 0:s.id);if(t.flatRows.push(p),t.rowsById[p.id]=p,u.push(p),e.options.getSubRows){var d;p.originalSubRows=e.options.getSubRows(i[c],c),(d=p.originalSubRows)!=null&&d.length&&(p.subRows=n(p.originalSubRows,r+1,p))}}return u};return t.rows=n(o),t},w(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function yt(e){const o=[],t=n=>{var i;o.push(n),(i=n.subRows)!=null&&i.length&&n.getIsExpanded()&&n.subRows.forEach(t)};return e.rows.forEach(t),{rows:o,flatRows:e.flatRows,rowsById:e.rowsById}}function wt(e,o,t){return t.options.filterFromLeafRows?St(e,o,t):Ct(e,o,t)}function St(e,o,t){var n;const i=[],r={},s=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,u=function(d,c){c===void 0&&(c=0);const p=[];for(let f=0;f<d.length;f++){var m;let l=d[f];const g=K(t,l.id,l.original,l.index,l.depth,void 0,l.parentId);if(g.columnFilters=l.columnFilters,(m=l.subRows)!=null&&m.length&&c<s){if(g.subRows=u(l.subRows,c+1),l=g,o(l)&&!g.subRows.length){p.push(l),r[l.id]=l,i.push(l);continue}if(o(l)||g.subRows.length){p.push(l),r[l.id]=l,i.push(l);continue}}else l=g,o(l)&&(p.push(l),r[l.id]=l,i.push(l))}return p};return{rows:u(e),flatRows:i,rowsById:r}}function Ct(e,o,t){var n;const i=[],r={},s=(n=t.options.maxLeafRowFilterDepth)!=null?n:100,u=function(d,c){c===void 0&&(c=0);const p=[];for(let f=0;f<d.length;f++){let l=d[f];if(o(l)){var m;if((m=l.subRows)!=null&&m.length&&c<s){const h=K(t,l.id,l.original,l.index,l.depth,void 0,l.parentId);h.subRows=u(l.subRows,c+1),l=h}p.push(l),i.push(l),r[l.id]=l}}return p};return{rows:u(e),flatRows:i,rowsById:r}}function Re(){return e=>y(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(o,t,n)=>{if(!o.rows.length||!(t!=null&&t.length)&&!n){for(let f=0;f<o.flatRows.length;f++)o.flatRows[f].columnFilters={},o.flatRows[f].columnFiltersMeta={};return o}const i=[],r=[];(t??[]).forEach(f=>{var l;const g=e.getColumn(f.id);if(!g)return;const h=g.getFilterFn();if(!h){V.NODE_ENV!=="production"&&console.warn(`Could not find a valid 'column.filterFn' for column with the ID: ${g.id}.`);return}i.push({id:f.id,filterFn:h,resolvedValue:(l=h.resolveFilterValue==null?void 0:h.resolveFilterValue(f.value))!=null?l:f.value})});const s=(t??[]).map(f=>f.id),u=e.getGlobalFilterFn(),d=e.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());n&&u&&d.length&&(s.push("__global__"),d.forEach(f=>{var l;r.push({id:f.id,filterFn:u,resolvedValue:(l=u.resolveFilterValue==null?void 0:u.resolveFilterValue(n))!=null?l:n})}));let c,p;for(let f=0;f<o.flatRows.length;f++){const l=o.flatRows[f];if(l.columnFilters={},i.length)for(let g=0;g<i.length;g++){c=i[g];const h=c.id;l.columnFilters[h]=c.filterFn(l,h,c.resolvedValue,S=>{l.columnFiltersMeta[h]=S})}if(r.length){for(let g=0;g<r.length;g++){p=r[g];const h=p.id;if(p.filterFn(l,h,p.resolvedValue,S=>{l.columnFiltersMeta[h]=S})){l.columnFilters.__global__=!0;break}}l.columnFilters.__global__!==!0&&(l.columnFilters.__global__=!1)}}const m=f=>{for(let l=0;l<s.length;l++)if(f.columnFilters[s[l]]===!1)return!1;return!0};return wt(o.rows,m,e)},w(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Fe(e){return o=>y(()=>[o.getState().pagination,o.getPrePaginationRowModel(),o.options.paginateExpandedRows?void 0:o.getState().expanded],(t,n)=>{if(!n.rows.length)return n;const{pageSize:i,pageIndex:r}=t;let{rows:s,flatRows:u,rowsById:d}=n;const c=i*r,p=c+i;s=s.slice(c,p);let m;o.options.paginateExpandedRows?m={rows:s,flatRows:u,rowsById:d}:m=yt({rows:s,flatRows:u,rowsById:d}),m.flatRows=[];const f=l=>{m.flatRows.push(l),l.subRows.length&&l.subRows.forEach(f)};return m.rows.forEach(f),m},w(o.options,"debugTable","getPaginationRowModel"))}function Me(){return e=>y(()=>[e.getState().sorting,e.getPreSortedRowModel()],(o,t)=>{if(!t.rows.length||!(o!=null&&o.length))return t;const n=e.getState().sorting,i=[],r=n.filter(d=>{var c;return(c=e.getColumn(d.id))==null?void 0:c.getCanSort()}),s={};r.forEach(d=>{const c=e.getColumn(d.id);c&&(s[d.id]={sortUndefined:c.columnDef.sortUndefined,invertSorting:c.columnDef.invertSorting,sortingFn:c.getSortingFn()})});const u=d=>{const c=d.map(p=>({...p}));return c.sort((p,m)=>{for(let l=0;l<r.length;l+=1){var f;const g=r[l],h=s[g.id],S=h.sortUndefined,C=(f=g==null?void 0:g.desc)!=null?f:!1;let b=0;if(S){const I=p.getValue(g.id),k=m.getValue(g.id),M=I===void 0,L=k===void 0;if(M||L){if(S==="first")return M?-1:1;if(S==="last")return M?1:-1;b=M&&L?0:M?S:-S}}if(b===0&&(b=h.sortingFn(p,m,g.id)),b!==0)return C&&(b*=-1),h.invertSorting&&(b*=-1),b}return p.index-m.index}),c.forEach(p=>{var m;i.push(p),(m=p.subRows)!=null&&m.length&&(p.subRows=u(p.subRows))}),c};return{rows:u(t.rows),flatRows:i,rowsById:t.rowsById}},w(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function j(e,o){return e?_t(e)?W.createElement(e,o):e:null}function _t(e){return xt(e)||typeof e=="function"||bt(e)}function xt(e){return typeof e=="function"&&(()=>{const o=Object.getPrototypeOf(e);return o.prototype&&o.prototype.isReactComponent})()}function bt(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function Ee(e){const o={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[t]=W.useState(()=>({current:vt(o)})),[n,i]=W.useState(()=>t.current.initialState);return t.current.setOptions(r=>({...r,...e,state:{...n,...e.state},onStateChange:s=>{i(s),e.onStateChange==null||e.onStateChange(s)}})),t.current}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var It={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),x=(e,o)=>{const t=_.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:u="",children:d,...c},p)=>_.createElement("svg",{ref:p,...It,width:i,height:i,stroke:n,strokeWidth:s?Number(r)*24/Number(i):r,className:["lucide",`lucide-${Rt(e)}`,u].join(" "),...c},[...o.map(([m,f])=>_.createElement(m,f)),...Array.isArray(d)?d:[d]]));return t.displayName=`${e}`,t};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=x("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=x("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=x("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=x("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=x("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=x("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=x("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=x("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=x("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=x("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=x("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=x("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=x("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=x("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=x("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=x("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=x("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=x("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=x("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=x("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=x("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=x("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=x("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=x("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),A=fe(),Pe=()=>{const[e,o]=_.useState([]),[t,n]=_.useState(!0),[i,r]=_.useState([]),[s,u]=_.useState(""),[d,c]=_.useState([]),p=async()=>{n(!0);const{data:g,error:h}=await v.data.list({table:"com_hubbi_inventory_items",options:{strategy:"cache_first"}});g?o(g):h&&(console.error(h),v.notify.error("Error al cargar inventario")),n(!1)};_.useEffect(()=>{p();const g=()=>p();return v.events.on("inventory:item:created",g),v.events.on("inventory:item:updated",g),()=>{v.events.off("inventory:item:created",g),v.events.off("inventory:item:updated",g)}},[]);const m=g=>{switch(g){case"kit":return a.jsx(Ot,{size:18,className:"text-blue-500"});case"serialized":return a.jsx(Ft,{size:18,className:"text-purple-500"});case"asset":return a.jsx(Ne,{size:18,className:"text-orange-500"});default:return a.jsx(Pt,{size:18,className:"text-gray-500"})}},f=_.useMemo(()=>[A.accessor("name",{header:"Producto",cell:g=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-gray-900",children:g.getValue()}),g.row.original.description&&a.jsx("span",{className:"text-xs text-gray-400 truncate max-w-xs",children:g.row.original.description})]})}),A.accessor("sku",{header:"SKU",cell:g=>a.jsx("span",{className:"font-mono text-gray-600",children:g.getValue()})}),A.accessor("type",{header:"Tipo",cell:g=>a.jsxs("div",{className:"flex items-center gap-2",title:g.getValue(),children:[m(g.getValue()),a.jsx("span",{className:"text-sm capitalize text-gray-600",children:g.getValue()})]})}),A.accessor("weighted_average_cost",{header:()=>a.jsx("div",{className:"text-right",children:"Costo Prom."}),cell:g=>a.jsxs("div",{className:"text-right font-mono",children:["$",g.getValue().toFixed(2)]})}),A.accessor("is_active",{header:()=>a.jsx("div",{className:"text-center",children:"Estado"}),cell:g=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${g.getValue()?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:g.getValue()?"Activo":"Inactivo"})})}),A.display({id:"actions",header:()=>a.jsx("div",{className:"text-right",children:"Acciones"}),cell:()=>a.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-blue-600",children:a.jsx(qt,{size:16})}),a.jsx("button",{className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-red-600",children:a.jsx(Ut,{size:16})})]})})],[]),l=Ee({data:e,columns:f,state:{sorting:i,globalFilter:s,columnFilters:d},onSortingChange:r,onGlobalFilterChange:u,onColumnFiltersChange:c,getCoreRowModel:Ie(),getSortedRowModel:Me(),getFilteredRowModel:Re(),getPaginationRowModel:Fe()});return a.jsxs("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",placeholder:"Buscar por SKU o Nombre...",className:"pl-10 pr-4 py-2 border rounded-lg text-sm w-64 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",value:s,onChange:g=>u(g.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[a.jsx(Ht,{size:18,className:"text-gray-400"}),a.jsxs("select",{className:"text-sm border-none bg-transparent focus:ring-0 cursor-pointer text-gray-600 font-medium",onChange:g=>{var S;const h=g.target.value;(S=l.getColumn("type"))==null||S.setFilterValue(h==="all"?void 0:h)},children:[a.jsx("option",{value:"all",children:"Todos los tipos"}),a.jsx("option",{value:"simple",children:"Simples"}),a.jsx("option",{value:"kit",children:"Kits"}),a.jsx("option",{value:"serialized",children:"Serializados"}),a.jsx("option",{value:"asset",children:"Activos (Camiones)"})]})]})]}),a.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[a.jsx(zt,{size:18}),"Nuevo Producto"]})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:l.getHeaderGroups().map(g=>a.jsx("tr",{children:g.headers.map(h=>a.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:h.column.getToggleSortingHandler(),children:a.jsxs("div",{className:"flex items-center gap-1",children:[j(h.column.columnDef.header,h.getContext()),h.column.getCanSort()&&a.jsx(q,{size:12,className:"text-gray-400"})]})},h.id))},g.id))}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:t?a.jsx("tr",{children:a.jsx("td",{colSpan:f.length,className:"text-center py-12 text-gray-400",children:"Cargando inventario..."})}):l.getRowModel().rows.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:f.length,className:"text-center py-12 text-gray-400",children:"No se encontraron productos"})}):l.getRowModel().rows.map(g=>a.jsx("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:g.getVisibleCells().map(h=>a.jsx("td",{className:"px-6 py-3 text-sm",children:j(h.column.columnDef.cell,h.getContext())},h.id))},g.id))})]})}),l.getPageCount()>1&&a.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:["PÃ¡gina ",l.getState().pagination.pageIndex+1," de ",l.getPageCount()]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"px-3 py-1 border rounded text-xs disabled:opacity-50",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Anterior"}),a.jsx("button",{className:"px-3 py-1 border rounded text-xs disabled:opacity-50",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Siguiente"})]})]})]})},D=fe(),Wt=({item:e})=>{const[o,t]=_.useState([]),[n,i]=_.useState(!0),[r,s]=_.useState([]),[u,d]=_.useState(""),c=_.useCallback(async()=>{i(!0);let l="SELECT * FROM com_hubbi_inventory_movements ORDER BY created_at DESC LIMIT 500",g=[];e&&(l="SELECT * FROM com_hubbi_inventory_movements WHERE item_id = ? ORDER BY created_at DESC LIMIT 500",g=[e.id]);const h=await v.data.query(l,g);h&&Array.isArray(h)&&t(h),i(!1)},[e]);_.useEffect(()=>{c();const l=()=>c();return v.events.on("inventory:stock:increased",l),v.events.on("inventory:stock:decreased",l),()=>{v.events.off("inventory:stock:increased",l),v.events.off("inventory:stock:increased",l),v.events.off("inventory:stock:decreased",l)}},[e,c]);const p=l=>{switch(l){case"IN":return a.jsx(Et,{className:"text-green-600",size:16});case"OUT":return a.jsx(Nt,{className:"text-red-600",size:16});case"ADJUST":return a.jsx(Lt,{className:"text-gray-600",size:16});default:return a.jsx(kt,{className:"text-blue-600",size:16})}},m=_.useMemo(()=>[D.accessor("type",{header:({column:l})=>a.jsxs("button",{onClick:()=>l.toggleSorting(),className:"flex items-center gap-1",children:["Tipo ",a.jsx(q,{size:14})]}),cell:l=>a.jsxs("div",{className:"flex items-center gap-2",children:[p(l.getValue()),a.jsx("span",{className:"font-medium",children:l.getValue()})]})}),D.accessor("created_at",{header:({column:l})=>a.jsxs("button",{onClick:()=>l.toggleSorting(),className:"flex items-center gap-1",children:["Fecha ",a.jsx(q,{size:14})]}),cell:l=>new Date(l.getValue()).toLocaleString()}),D.accessor("reason",{header:"Motivo",cell:l=>a.jsx("div",{className:"max-w-xs truncate",title:l.getValue()||"",children:l.getValue()||"-"})}),D.accessor("quantity",{header:({column:l})=>a.jsxs("button",{onClick:()=>l.toggleSorting(),className:"flex items-center gap-1 ml-auto",children:["Cantidad ",a.jsx(q,{size:14})]}),cell:l=>{const h=l.row.original.type==="OUT";return a.jsxs("span",{className:`font-mono font-medium ${h?"text-red-600":"text-green-600"}`,children:[h?"-":"+",l.getValue()]})}}),D.accessor("cost_at_moment",{header:"Costo Unit.",cell:l=>a.jsxs("span",{className:"font-mono",children:["$",l.getValue().toFixed(2)]})}),D.accessor("total_value",{header:({column:l})=>a.jsxs("button",{onClick:()=>l.toggleSorting(),className:"flex items-center gap-1 ml-auto",children:["Total ",a.jsx(q,{size:14})]}),cell:l=>a.jsxs("span",{className:"font-mono font-medium",children:["$",l.getValue().toFixed(2)]})})],[]),f=Ee({data:o,columns:m,state:{sorting:r,globalFilter:u},onSortingChange:s,onGlobalFilterChange:d,getCoreRowModel:Ie(),getSortedRowModel:Me(),getFilteredRowModel:Re(),getPaginationRowModel:Fe(),initialState:{pagination:{pageSize:20}}});return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx($e,{size:16}),"Historial de Movimientos"]}),a.jsx("input",{type:"text",placeholder:"Buscar...",value:u,onChange:l=>d(l.target.value),className:"px-3 py-1.5 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-gray-50 text-gray-500",children:f.getHeaderGroups().map(l=>a.jsx("tr",{children:l.headers.map(g=>a.jsx("th",{className:"px-4 py-2 font-medium",children:j(g.column.columnDef.header,g.getContext())},g.id))},l.id))}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:n?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-400",children:"Cargando..."})}):f.getRowModel().rows.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-400",children:"No hay movimientos registrados"})}):f.getRowModel().rows.map(l=>a.jsx("tr",{className:"hover:bg-gray-50",children:l.getVisibleCells().map(g=>a.jsx("td",{className:"px-4 py-3",children:j(g.column.columnDef.cell,g.getContext())},g.id))},l.id))})]})}),a.jsxs("div",{className:"p-4 border-t border-gray-100 flex items-center justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:["Mostrando ",f.getState().pagination.pageIndex*f.getState().pagination.pageSize+1," - ",Math.min((f.getState().pagination.pageIndex+1)*f.getState().pagination.pageSize,o.length)," de ",o.length]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>f.previousPage(),disabled:!f.getCanPreviousPage(),className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",children:a.jsx(At,{size:18})}),a.jsxs("span",{children:["PÃ¡gina ",f.getState().pagination.pageIndex+1," de ",f.getPageCount()]}),a.jsx("button",{onClick:()=>f.nextPage(),disabled:!f.getCanNextPage(),className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",children:a.jsx(Dt,{size:18})})]})]})]})},Kt=()=>{const[e,o]=_.useState([]),t=async()=>{const r=await v.data.query("SELECT * FROM com_hubbi_inventory_transfer_requests ORDER BY created_at DESC");if(r&&Array.isArray(r)){const s=r.map(u=>({...u,items:typeof u.items=="string"?JSON.parse(u.items):u.items}));o(s)}};_.useEffect(()=>{t()},[]);const n=async(r,s)=>{await v.data.update({table:"com_hubbi_inventory_transfer_requests",id:r,data:{status:s,updated_at:new Date().toISOString()},options:{strategy:"online_first"}}),v.notify.success(`Solicitud ${s}`),t()},i=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"in_transit":return"bg-purple-100 text-purple-800";case"received":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(Bt,{size:18,className:"text-blue-600"}),"GestiÃ³n de Traslados"]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500",children:a.jsx($e,{size:16})})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:e.length===0?a.jsx("div",{className:"text-center py-10 text-gray-400",children:"No hay solicitudes de traslado activas"}):e.map(r=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsxs("span",{className:"font-medium text-gray-900",children:["#",r.source_location_id.substring(0,4),"..."]}),a.jsx($t,{size:14}),a.jsxs("span",{className:"font-medium text-gray-900",children:["#",r.target_location_id.substring(0,4),"..."]})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium uppercase ${i(r.status)}`,children:r.status.replace("_"," ")})]}),a.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600 space-y-1",children:r.items.map((s,u)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["Item ID: ",s.item_id.substring(0,8),"..."]}),a.jsxs("span",{className:"font-mono font-medium",children:["x",s.quantity]})]},u))}),r.status==="pending"&&a.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100",children:[a.jsxs("button",{onClick:()=>n(r.id,"rejected"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 rounded bg-white border border-red-200",children:[a.jsx(jt,{size:14})," Rechazar"]}),a.jsxs("button",{onClick:()=>n(r.id,"approved"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-green-600 hover:bg-green-50 rounded bg-white border border-green-200",children:[a.jsx(Vt,{size:14})," Aprobar"]})]}),r.status==="approved"&&a.jsx("div",{className:"flex justify-end gap-2 pt-2",children:a.jsxs("button",{onClick:()=>n(r.id,"in_transit"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-purple-600 hover:bg-purple-50 rounded bg-white border border-purple-200",children:[a.jsx(Ne,{size:14})," Despachar (Enviar)"]})})]},r.id))})]})},Jt=()=>{const[e,o]=_.useState([]),[t,n]=_.useState(!0),[i,r]=_.useState(null),s=_.useCallback(async()=>{n(!0);const c=await v.data.query(`
            SELECT 
                s.item_id,
                s.location_id,
                s.quantity as current_qty,
                s.min_stock,
                s.reorder_point,
                i.name as item_name,
                i.sku as item_sku,
                l.name as location_name
            FROM com_hubbi_inventory_stock s
            JOIN com_hubbi_inventory_items i ON s.item_id = i.id
            LEFT JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
            WHERE s.quantity <= s.reorder_point OR s.quantity <= s.min_stock
            ORDER BY (s.min_stock - s.quantity) DESC
        `);if(c&&Array.isArray(c)){const p=c.map(m=>({...m,severity:m.current_qty<=m.min_stock?"critical":m.current_qty<=m.reorder_point?"warning":"ok"}));o(p)}r(new Date),n(!1)},[]);_.useEffect(()=>{s();const c=()=>{s()};return v.events.on("inventory:stock:increased",c),v.events.on("inventory:stock:decreased",c),()=>{v.events.off("inventory:stock:increased",c),v.events.off("inventory:stock:decreased",c)}},[s]);const u=e.filter(c=>c.severity==="critical").length,d=e.filter(c=>c.severity==="warning").length;return{alerts:e,criticalCount:u,warningCount:d,loading:t,lastCheck:i,refresh:s}},Ve=({compact:e=!1})=>{const{alerts:o,criticalCount:t,warningCount:n,loading:i,lastCheck:r,refresh:s}=Jt(),u=e?o.slice(0,3):o;return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ke,{size:20,className:"text-orange-500"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Alertas de Stock"}),t>0&&a.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:t}),n>0&&a.jsx("span",{className:"bg-yellow-500 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:n})]}),a.jsx("button",{onClick:s,disabled:i,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 disabled:opacity-50",children:a.jsx(Tt,{size:16,className:i?"animate-spin":""})})]}),a.jsx("div",{className:`${e?"max-h-32":"max-h-64"} overflow-auto`,children:u.length===0?a.jsxs("div",{className:"p-8 text-center text-gray-400",children:[a.jsx(ke,{size:32,className:"mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No hay alertas de stock"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:u.map((d,c)=>a.jsxs("div",{className:`p-3 flex items-center gap-3 ${d.severity==="critical"?"bg-red-50":d.severity==="warning"?"bg-yellow-50":""}`,children:[a.jsx(Mt,{size:18,className:d.severity==="critical"?"text-red-500":"text-yellow-500"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 truncate",children:d.item_name}),a.jsxs("div",{className:"text-xs text-gray-500",children:[d.location_name||"Sin ubicaciÃ³n"," â€¢ Stock: ",d.current_qty," / MÃ­nimo: ",d.min_stock]})]}),a.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded ${d.severity==="critical"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:d.severity==="critical"?"CRÃTICO":"BAJO"})]},c))})}),r&&a.jsxs("div",{className:"p-2 border-t border-gray-100 text-xs text-gray-400 text-center",children:["Ãšltima verificaciÃ³n: ",r.toLocaleTimeString()]})]})},de="com.hubbi.inventory";async function ce(){const e=await v.db.query("SELECT * FROM hubbi_fiscal_periods WHERE is_current = TRUE",[],{moduleId:de});return e&&e.length>0?e[0]:null}async function Xt(e){const o=await v.db.query("SELECT * FROM hubbi_fiscal_periods WHERE id = ?",[e],{moduleId:de});return o&&o.length>0?o[0]:null}async function Ae(e){const[o,t,n]=await Promise.all([Xt(e),ce(),v.db.query("SELECT * FROM hubbi_fiscal_config WHERE id = 'default'",[],{moduleId:de})]);if(!o||!t||!n||n.length===0)return!1;const i=n[0];if(o.status==="closed"||o.status==="locked")return!1;const r=t.year*12+t.month,s=o.year*12+o.month;return r-s<=i.lock_after_periods}async function De(e){const{itemId:o,locationId:t}=e;let n=`
    SELECT 
      s.item_id as itemId,
      s.location_id as locationId,
      s.quantity as totalStock,
      COALESCE((
        SELECT SUM(r.quantity) 
        FROM com_hubbi_inventory_reservations r 
        WHERE r.item_id = s.item_id 
          AND r.location_id = s.location_id 
          AND r.status = 'active'
      ), 0) as reservedStock,
      s.min_stock as minStock,
      s.reorder_point as reorderPoint
    FROM com_hubbi_inventory_stock s
    WHERE s.item_id = ?
  `;const i=[o];return t&&(n+=" AND s.location_id = ?",i.push(t)),(await v.db.query(n,i,{moduleId:"com.hubbi.inventory"})).map(s=>({itemId:s.itemId,locationId:s.locationId,totalStock:s.totalStock,reservedStock:s.reservedStock,availableStock:s.totalStock-s.reservedStock,minStock:s.minStock,reorderPoint:s.reorderPoint}))}async function ge(e){const o=await De({itemId:e.itemId,locationId:e.locationId});if(o.length===0)return{available:!1,currentStock:0,requestedQuantity:e.quantity};const t=o[0];return{available:t.availableStock>=e.quantity,currentStock:t.availableStock,requestedQuantity:e.quantity}}async function Yt(e){let o=`
    SELECT 
      i.id as itemId,
      i.name as itemName,
      i.sku,
      s.location_id as locationId,
      s.quantity as currentStock,
      s.reorder_point as reorderPoint,
      (s.reorder_point - s.quantity) as deficit
    FROM com_hubbi_inventory_stock s
    JOIN com_hubbi_inventory_items i ON s.item_id = i.id
    WHERE s.quantity <= s.reorder_point
      AND i.is_active = TRUE
  `;const t=[];return e!=null&&e.locationId&&(o+=" AND s.location_id = ?",t.push(e.locationId)),o+=" ORDER BY deficit DESC",await v.db.query(o,t,{moduleId:"com.hubbi.inventory"})}async function Zt(e){var n;const o=await ge({itemId:e.itemId,locationId:e.locationId,quantity:e.quantity});if(!o.available)return{success:!1,error:`Stock insuficiente. Disponible: ${o.currentStock}, Solicitado: ${e.quantity}`};const t=crypto.randomUUID();return await v.db.execute(`
    INSERT INTO com_hubbi_inventory_reservations 
      (id, item_id, location_id, quantity, reference_type, reference_id, created_by, expires_at, status)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'active')
  `,[t,e.itemId,e.locationId,e.quantity,e.referenceType,e.referenceId,e.createdBy,e.expiresAt||null],{moduleId:"com.hubbi.inventory"}),z("reservation:created",{reservationId:t,itemId:e.itemId,quantity:e.quantity,referenceType:e.referenceType,referenceId:e.referenceId}),(n=v.audit)==null||n.call(v,{action:"reservation_created",entity:"inventory_reservation",entityId:t,description:`Reserva de ${e.quantity} unidades para ${e.referenceType}:${e.referenceId}`}),{success:!0,reservationId:t}}async function Qt(e){const o=await v.db.query("SELECT * FROM com_hubbi_inventory_reservations WHERE id = ? AND status = 'active'",[e.reservationId],{moduleId:"com.hubbi.inventory"});if(o.length===0)return{success:!1,error:"Reserva no encontrada o ya consumida"};const t=o[0],n=crypto.randomUUID(),i=await v.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ?",[t.item_id],{moduleId:"com.hubbi.inventory"}),r=i.length>0?i[0].weighted_average_cost:0,s=t.quantity;return await v.db.execute(`
    INSERT INTO com_hubbi_inventory_movements 
      (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value, created_by)
    VALUES (?, ?, ?, 'OUT', 'internal_use', ?, ?, ?, ?)
  `,[n,t.item_id,t.location_id,s,r,s*r,e.consumedBy],{moduleId:"com.hubbi.inventory"}),await v.db.execute(`
    UPDATE com_hubbi_inventory_stock 
    SET quantity = quantity - ? 
    WHERE item_id = ? AND location_id = ?
  `,[s,t.item_id,t.location_id],{moduleId:"com.hubbi.inventory"}),await v.db.execute(`
    UPDATE com_hubbi_inventory_reservations SET status = 'consumed' WHERE id = ?
  `,[e.reservationId],{moduleId:"com.hubbi.inventory"}),z("reservation:consumed",{reservationId:e.reservationId,movementId:n,itemId:t.item_id,quantity:s}),z("stock:decreased",{itemId:t.item_id,locationId:t.location_id,quantity:s,reason:"internal_use",movementId:n}),{success:!0,movementId:n}}async function en(e){return await v.db.execute(`
    UPDATE com_hubbi_inventory_reservations SET status = 'cancelled' WHERE id = ?
  `,[e.reservationId],{moduleId:"com.hubbi.inventory"}),z("reservation:cancelled",{reservationId:e.reservationId,reason:e.reason}),{success:!0}}async function tn(e){var d;if(e.type==="OUT"&&e.reason!=="correction"){const c=await ge({itemId:e.itemId,locationId:e.locationId,quantity:e.quantity});if(!c.available)return{success:!1,error:`Stock insuficiente. Disponible: ${c.currentStock}, Solicitado: ${e.quantity}`}}let o=e.periodId;if(!o){const c=await ce();o=c==null?void 0:c.id}if(o&&!await Ae(o))return{success:!1,error:`El perÃ­odo ${o} estÃ¡ cerrado o bloqueado. No se pueden registrar movimientos.`};if(e.subHubId){const c=v.permissions.has("inventory:edit_all_subhubs"),p=v.getContext(),m=e.subHubId===(p==null?void 0:p.subHubId),f=v.permissions.has("inventory:edit_own_subhub")&&m;if(!c&&!f)return{success:!1,error:"No tienes permiso para modificar inventario de esta sucursal."}}const t=crypto.randomUUID();let n=e.unitCost||0;if(!e.unitCost){const c=await v.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ? ",[e.itemId],{moduleId:"com.hubbi.inventory"});n=c.length>0?c[0].weighted_average_cost:0}await v.db.execute(`
    INSERT INTO com_hubbi_inventory_movements
                (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value,
                    document_type, document_number, document_uuid, created_by, sub_hub_id, period_id)
            VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
                `,[t,e.itemId,e.locationId,e.type,e.reason,e.quantity,n,e.quantity*n,e.documentType||null,e.documentNumber||null,e.documentUuid||null,e.createdBy,e.subHubId||null,o||null],{moduleId:"com.hubbi.inventory"});let i=e.quantity;e.type==="OUT"||e.type==="TRANSFER_OUT"?i=-e.quantity:e.type==="ADJUST"&&(i=e.quantity),await v.db.execute(`
    INSERT INTO com_hubbi_inventory_stock(item_id, location_id, quantity)
            VALUES(?, ?, ?)
    ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = quantity + ?
                `,[e.itemId,e.locationId,i,i],{moduleId:"com.hubbi.inventory"}),(e.type==="IN"||e.type==="TRANSFER_IN")&&e.unitCost&&await nn(e.itemId,e.quantity,e.unitCost);const r=await v.db.query("SELECT quantity FROM com_hubbi_inventory_stock WHERE item_id = ? AND location_id = ? ",[e.itemId,e.locationId],{moduleId:"com.hubbi.inventory"}),s=r.length>0?r[0].quantity:0,u=e.type==="IN"||e.type==="TRANSFER_IN"||e.type==="ADJUST"&&e.quantity>0;return z(u?"stock:increased":"stock:decreased",{itemId:e.itemId,locationId:e.locationId,quantity:e.quantity,reason:e.reason,movementId:t,newStock:s}),(d=v.audit)==null||d.call(v,{action:`stock_${e.type.toLowerCase()}`,entity:"inventory_movement",entityId:t,description:`${e.type==="IN"?"Entrada":"Salida"} de ${e.quantity} unidades - ${e.reason}`}),{success:!0,movementId:t,newStock:s}}async function nn(e,o,t){const n=await v.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ? ",[e],{moduleId:"com.hubbi.inventory"}),i=await v.db.query("SELECT SUM(quantity) as total FROM com_hubbi_inventory_stock WHERE item_id = ? ",[e],{moduleId:"com.hubbi.inventory"}),r=n.length>0?n[0].weighted_average_cost:0,s=i.length>0?i[0].total-o:0,u=s*r,d=o*t,c=s+o,p=c>0?(u+d)/c:t;await v.db.execute("UPDATE com_hubbi_inventory_items SET weighted_average_cost = ?, last_cost = ? WHERE id = ? ",[p,t,e],{moduleId:"com.hubbi.inventory"})}async function on(e){let o="SELECT * FROM com_hubbi_inventory_items WHERE ";const t=[];if(e.id)o+="id = ? ",t.push(e.id);else if(e.sku)o+="sku = ? ",t.push(e.sku);else return null;const n=await v.db.query(o,t,{moduleId:"com.hubbi.inventory"});return n.length>0?n[0]:null}async function rn(e){let o=`
    SELECT * FROM com_hubbi_inventory_items 
    WHERE is_active = TRUE AND is_internal_use_only = FALSE
                `;const t=[];return e!=null&&e.categoryId&&(o+=" AND category_id = ? ",t.push(e.categoryId)),e!=null&&e.search&&(o+=" AND(name LIKE ? OR sku LIKE ?)",t.push(`% ${e.search}% `,` % ${e.search}% `)),o+=" ORDER BY name LIMIT ? ",t.push((e==null?void 0:e.limit)||100),await v.db.query(o,t,{moduleId:"com.hubbi.inventory"})}async function sn(e){return await v.db.query(`
    SELECT
            k.child_item_id as componentId,
                i.name as componentName,
                i.sku as componentSku,
                k.quantity
    FROM com_hubbi_inventory_kits k
    JOIN com_hubbi_inventory_items i ON k.child_item_id = i.id
    WHERE k.parent_item_id = ?
                `,[e],{moduleId:"com.hubbi.inventory"})}function z(e,o){window.dispatchEvent(new CustomEvent(`inventory:${e} `,{detail:{moduleId:"com.hubbi.inventory",timestamp:new Date().toISOString(),...o}}))}function ln(){var o,t;if(!((t=(o=window.hubbi)==null?void 0:o.modules)!=null&&t.expose))return;const e="com.hubbi.inventory";window.hubbi.modules.expose("getStock",De,e),window.hubbi.modules.expose("checkAvailability",ge,e),window.hubbi.modules.expose("getLowStockItems",Yt,e),window.hubbi.modules.expose("createReservation",Zt,e),window.hubbi.modules.expose("consumeReservation",Qt,e),window.hubbi.modules.expose("cancelReservation",en,e),window.hubbi.modules.expose("recordMovement",tn,e),window.hubbi.modules.expose("getItem",on,e),window.hubbi.modules.expose("getSellableItems",rn,e),window.hubbi.modules.expose("getKitComponents",sn,e),window.hubbi.modules.expose("getCurrentPeriod",ce,e),window.hubbi.modules.expose("isPeriodEditable",Ae,e)}const an=()=>a.jsxs("div",{className:"inventory-settings p-4",children:[a.jsx("h2",{className:"text-lg font-bold",children:"ConfiguraciÃ³n de Inventario"}),a.jsx("p",{className:"text-gray-500",children:"PrÃ³ximamente: Ajustes de costos, prefijos y permisos."})]}),un=()=>a.jsx(Ve,{compact:!0}),dn=()=>{var t,n,i;if(!(((i=(n=(t=window.hubbi)==null?void 0:t.permissions)==null?void 0:n.has)==null?void 0:i.call(n,"inventory:access"))??!0))return null;const o=()=>{var r,s;return(s=(r=window.hubbi)==null?void 0:r.navigate)==null?void 0:s.call(r,"/inventory")};return a.jsxs("button",{onClick:o,className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-lg flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),a.jsx("span",{children:"Inventario"})]})},Le=async()=>{var e,o;(o=(e=window.hubbi)==null?void 0:e.widgets)!=null&&o.register&&(window.hubbi.widgets.register({slotName:"settings_tab",moduleId:"com.hubbi.inventory",component:an,priority:10}),window.hubbi.widgets.register({slotName:"dashboard_widget",moduleId:"com.hubbi.inventory",component:un,priority:20}),window.hubbi.widgets.register({slotName:"sidebar_item",moduleId:"com.hubbi.inventory",component:dn,priority:30})),ln(),cn()};async function cn(){var e,o,t;if(!(!((o=(e=window.hubbi)==null?void 0:e.db)!=null&&o.query)||!((t=window.hubbi)!=null&&t.sendNotification)))try{const n=await window.hubbi.db.query(`
      SELECT i.name, s.quantity, s.reorder_point, l.name as location_name
      FROM com_hubbi_inventory_stock s
      JOIN com_hubbi_inventory_items i ON s.item_id = i.id
      JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
      WHERE s.quantity <= s.min_stock AND i.is_active = TRUE
      LIMIT 5
    `,[],{moduleId:"com.hubbi.inventory"});n.length>0&&await window.hubbi.sendNotification({title:"âš ï¸ Stock CrÃ­tico",message:`${n.length} productos requieren reabastecimiento urgente`,category:"inventory",severity:"warning",actionUrl:"/inventory/alerts"})}catch{}}const gn=[{id:"products",label:"Productos",icon:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})},{id:"movements",label:"Movimientos",icon:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})},{id:"transfers",label:"Transferencias",icon:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})},{id:"alerts",label:"Alertas",icon:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}],He=()=>{const[e,o]=_.useState("products"),t=()=>{switch(e){case"products":return a.jsx(Pe,{});case"movements":return a.jsx(Wt,{});case"transfers":return a.jsx(Kt,{});case"alerts":return a.jsx(Ve,{});default:return a.jsx(Pe,{})}};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Inventario & WMS"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"GestiÃ³n completa de productos, stock y movimientos"})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:a.jsx("nav",{className:"flex space-x-1 px-4","aria-label":"Tabs",children:gn.map(n=>a.jsxs("button",{onClick:()=>o(n.id),className:`
                                flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors
                                ${e===n.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"}
                            `,children:[n.icon,n.label]},n.id))})}),a.jsx("div",{className:"flex-1 overflow-auto p-6 bg-gray-50 dark:bg-gray-900",children:t()})]})};function fn(){const e="com.hubbi.inventory";typeof window<"u"&&window.hubbi&&typeof window.hubbi.register=="function"?(window.hubbi.register(e,He),typeof Le=="function"&&Le().catch(o=>{console.error("[Inventory Module] Activation error:",o)}),console.log(`[PluginEntry] Plugin '${e}' registered successfully`)):console.error("[PluginEntry] window.hubbi.register not found. Cannot register plugin.")}return fn(),He});
