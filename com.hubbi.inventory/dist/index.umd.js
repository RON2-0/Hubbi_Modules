(function(E,b){typeof exports=="object"&&typeof module<"u"?b(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],b):(E=typeof globalThis<"u"?globalThis:E||self,b((E.com=E.com||{},E.com.hubbi=E.com.hubbi||{},E.com.hubbi.inventory={}),E.React))})(this,function(E,b){"use strict";function $n(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:()=>e[t]})}}return n.default=e,Object.freeze(n)}const Je=$n(b);var Xe={exports:{}},Se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At;function Ln(){if(At)return Se;At=1;var e=b,n=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(d,g,m){var f,h={},u=null,l=null;m!==void 0&&(u=""+m),g.key!==void 0&&(u=""+g.key),g.ref!==void 0&&(l=g.ref);for(f in g)i.call(g,f)&&!r.hasOwnProperty(f)&&(h[f]=g[f]);if(d&&d.defaultProps)for(f in g=d.defaultProps,g)h[f]===void 0&&(h[f]=g[f]);return{$$typeof:n,type:d,key:u,ref:l,props:h,_owner:s.current}}return Se.Fragment=t,Se.jsx=a,Se.jsxs=a,Se}var we={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt;function Vn(){return Pt||(Pt=1,process.env.NODE_ENV!=="production"&&function(){var e=b,n=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),l=Symbol.for("react.offscreen"),p=Symbol.iterator,x="@@iterator";function v(c){if(c===null||typeof c!="object")return null;var _=p&&c[p]||c[x];return typeof _=="function"?_:null}var S=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C(c){{for(var _=arguments.length,j=new Array(_>1?_-1:0),T=1;T<_;T++)j[T-1]=arguments[T];w("error",c,j)}}function w(c,_,j){{var T=S.ReactDebugCurrentFrame,$=T.getStackAddendum();$!==""&&(_+="%s",j=j.concat([$]));var q=j.map(function(D){return String(D)});q.unshift("Warning: "+_),Function.prototype.apply.call(console[c],console,q)}}var F=!1,N=!1,O=!1,K=!1,G=!1,M;M=Symbol.for("react.module.reference");function H(c){return!!(typeof c=="string"||typeof c=="function"||c===i||c===r||G||c===s||c===m||c===f||K||c===l||F||N||O||typeof c=="object"&&c!==null&&(c.$$typeof===u||c.$$typeof===h||c.$$typeof===a||c.$$typeof===d||c.$$typeof===g||c.$$typeof===M||c.getModuleId!==void 0))}function X(c,_,j){var T=c.displayName;if(T)return T;var $=_.displayName||_.name||"";return $!==""?j+"("+$+")":j}function z(c){return c.displayName||"Context"}function Y(c){if(c==null)return null;if(typeof c.tag=="number"&&C("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case i:return"Fragment";case t:return"Portal";case r:return"Profiler";case s:return"StrictMode";case m:return"Suspense";case f:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case d:var _=c;return z(_)+".Consumer";case a:var j=c;return z(j._context)+".Provider";case g:return X(c,c.render,"ForwardRef");case h:var T=c.displayName||null;return T!==null?T:Y(c.type)||"Memo";case u:{var $=c,q=$._payload,D=$._init;try{return Y(D(q))}catch{return null}}}return null}var J=Object.assign,Z=0,L,oe,R,ie,V,ae,ge;function ke(){}ke.__reactDisabledLog=!0;function ze(){{if(Z===0){L=console.log,oe=console.info,R=console.warn,ie=console.error,V=console.group,ae=console.groupCollapsed,ge=console.groupEnd;var c={configurable:!0,enumerable:!0,value:ke,writable:!0};Object.defineProperties(console,{info:c,log:c,warn:c,error:c,group:c,groupCollapsed:c,groupEnd:c})}Z++}}function Ue(){{if(Z--,Z===0){var c={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:J({},c,{value:L}),info:J({},c,{value:oe}),warn:J({},c,{value:R}),error:J({},c,{value:ie}),group:J({},c,{value:V}),groupCollapsed:J({},c,{value:ae}),groupEnd:J({},c,{value:ge})})}Z<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ge=S.ReactCurrentDispatcher,Nt;function Be(c,_,j){{if(Nt===void 0)try{throw Error()}catch($){var T=$.stack.trim().match(/\n( *(at )?)/);Nt=T&&T[1]||""}return`
`+Nt+c}}var Rt=!1,We;{var Fo=typeof WeakMap=="function"?WeakMap:Map;We=new Fo}function wn(c,_){if(!c||Rt)return"";{var j=We.get(c);if(j!==void 0)return j}var T;Rt=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var q;q=Ge.current,Ge.current=null,ze();try{if(_){var D=function(){throw Error()};if(Object.defineProperty(D.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(D,[])}catch(te){T=te}Reflect.construct(c,[],D)}else{try{D.call()}catch(te){T=te}c.call(D.prototype)}}else{try{throw Error()}catch(te){T=te}c()}}catch(te){if(te&&T&&typeof te.stack=="string"){for(var P=te.stack.split(`
`),ee=T.stack.split(`
`),U=P.length-1,B=ee.length-1;U>=1&&B>=0&&P[U]!==ee[B];)B--;for(;U>=1&&B>=0;U--,B--)if(P[U]!==ee[B]){if(U!==1||B!==1)do if(U--,B--,B<0||P[U]!==ee[B]){var se=`
`+P[U].replace(" at new "," at ");return c.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",c.displayName)),typeof c=="function"&&We.set(c,se),se}while(U>=1&&B>=0);break}}}finally{Rt=!1,Ge.current=q,Ue(),Error.prepareStackTrace=$}var _e=c?c.displayName||c.name:"",me=_e?Be(_e):"";return typeof c=="function"&&We.set(c,me),me}function Mo(c,_,j){return wn(c,!1)}function Ao(c){var _=c.prototype;return!!(_&&_.isReactComponent)}function Ke(c,_,j){if(c==null)return"";if(typeof c=="function")return wn(c,Ao(c));if(typeof c=="string")return Be(c);switch(c){case m:return Be("Suspense");case f:return Be("SuspenseList")}if(typeof c=="object")switch(c.$$typeof){case g:return Mo(c.render);case h:return Ke(c.type,_,j);case u:{var T=c,$=T._payload,q=T._init;try{return Ke(q($),_,j)}catch{}}}return""}var Te=Object.prototype.hasOwnProperty,Cn={},En=S.ReactDebugCurrentFrame;function Ye(c){if(c){var _=c._owner,j=Ke(c.type,c._source,_?_.type:null);En.setExtraStackFrame(j)}else En.setExtraStackFrame(null)}function Po(c,_,j,T,$){{var q=Function.call.bind(Te);for(var D in c)if(q(c,D)){var P=void 0;try{if(typeof c[D]!="function"){var ee=Error((T||"React class")+": "+j+" type `"+D+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[D]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ee.name="Invariant Violation",ee}P=c[D](_,D,T,j,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(U){P=U}P&&!(P instanceof Error)&&(Ye($),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",T||"React class",j,D,typeof P),Ye(null)),P instanceof Error&&!(P.message in Cn)&&(Cn[P.message]=!0,Ye($),C("Failed %s type: %s",j,P.message),Ye(null))}}}var Do=Array.isArray;function It(c){return Do(c)}function Oo(c){{var _=typeof Symbol=="function"&&Symbol.toStringTag,j=_&&c[Symbol.toStringTag]||c.constructor.name||"Object";return j}}function $o(c){try{return jn(c),!1}catch{return!0}}function jn(c){return""+c}function Nn(c){if($o(c))return C("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Oo(c)),jn(c)}var Rn=S.ReactCurrentOwner,Lo={key:!0,ref:!0,__self:!0,__source:!0},In,kn;function Vo(c){if(Te.call(c,"ref")){var _=Object.getOwnPropertyDescriptor(c,"ref").get;if(_&&_.isReactWarning)return!1}return c.ref!==void 0}function qo(c){if(Te.call(c,"key")){var _=Object.getOwnPropertyDescriptor(c,"key").get;if(_&&_.isReactWarning)return!1}return c.key!==void 0}function Ho(c,_){typeof c.ref=="string"&&Rn.current}function zo(c,_){{var j=function(){In||(In=!0,C("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_))};j.isReactWarning=!0,Object.defineProperty(c,"key",{get:j,configurable:!0})}}function Uo(c,_){{var j=function(){kn||(kn=!0,C("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",_))};j.isReactWarning=!0,Object.defineProperty(c,"ref",{get:j,configurable:!0})}}var Go=function(c,_,j,T,$,q,D){var P={$$typeof:n,type:c,key:_,ref:j,props:D,_owner:q};return P._store={},Object.defineProperty(P._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(P,"_self",{configurable:!1,enumerable:!1,writable:!1,value:T}),Object.defineProperty(P,"_source",{configurable:!1,enumerable:!1,writable:!1,value:$}),Object.freeze&&(Object.freeze(P.props),Object.freeze(P)),P};function Bo(c,_,j,T,$){{var q,D={},P=null,ee=null;j!==void 0&&(Nn(j),P=""+j),qo(_)&&(Nn(_.key),P=""+_.key),Vo(_)&&(ee=_.ref,Ho(_,$));for(q in _)Te.call(_,q)&&!Lo.hasOwnProperty(q)&&(D[q]=_[q]);if(c&&c.defaultProps){var U=c.defaultProps;for(q in U)D[q]===void 0&&(D[q]=U[q])}if(P||ee){var B=typeof c=="function"?c.displayName||c.name||"Unknown":c;P&&zo(D,B),ee&&Uo(D,B)}return Go(c,P,ee,$,T,Rn.current,D)}}var kt=S.ReactCurrentOwner,Tn=S.ReactDebugCurrentFrame;function ve(c){if(c){var _=c._owner,j=Ke(c.type,c._source,_?_.type:null);Tn.setExtraStackFrame(j)}else Tn.setExtraStackFrame(null)}var Tt;Tt=!1;function Ft(c){return typeof c=="object"&&c!==null&&c.$$typeof===n}function Fn(){{if(kt.current){var c=Y(kt.current.type);if(c)return`

Check the render method of \``+c+"`."}return""}}function Wo(c){return""}var Mn={};function Ko(c){{var _=Fn();if(!_){var j=typeof c=="string"?c:c.displayName||c.name;j&&(_=`

Check the top-level render call using <`+j+">.")}return _}}function An(c,_){{if(!c._store||c._store.validated||c.key!=null)return;c._store.validated=!0;var j=Ko(_);if(Mn[j])return;Mn[j]=!0;var T="";c&&c._owner&&c._owner!==kt.current&&(T=" It was passed a child from "+Y(c._owner.type)+"."),ve(c),C('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',j,T),ve(null)}}function Pn(c,_){{if(typeof c!="object")return;if(It(c))for(var j=0;j<c.length;j++){var T=c[j];Ft(T)&&An(T,_)}else if(Ft(c))c._store&&(c._store.validated=!0);else if(c){var $=v(c);if(typeof $=="function"&&$!==c.entries)for(var q=$.call(c),D;!(D=q.next()).done;)Ft(D.value)&&An(D.value,_)}}}function Yo(c){{var _=c.type;if(_==null||typeof _=="string")return;var j;if(typeof _=="function")j=_.propTypes;else if(typeof _=="object"&&(_.$$typeof===g||_.$$typeof===h))j=_.propTypes;else return;if(j){var T=Y(_);Po(j,c.props,"prop",T,c)}else if(_.PropTypes!==void 0&&!Tt){Tt=!0;var $=Y(_);C("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",$||"Unknown")}typeof _.getDefaultProps=="function"&&!_.getDefaultProps.isReactClassApproved&&C("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Jo(c){{for(var _=Object.keys(c.props),j=0;j<_.length;j++){var T=_[j];if(T!=="children"&&T!=="key"){ve(c),C("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",T),ve(null);break}}c.ref!==null&&(ve(c),C("Invalid attribute `ref` supplied to `React.Fragment`."),ve(null))}}var Dn={};function On(c,_,j,T,$,q){{var D=H(c);if(!D){var P="";(c===void 0||typeof c=="object"&&c!==null&&Object.keys(c).length===0)&&(P+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var ee=Wo();ee?P+=ee:P+=Fn();var U;c===null?U="null":It(c)?U="array":c!==void 0&&c.$$typeof===n?(U="<"+(Y(c.type)||"Unknown")+" />",P=" Did you accidentally export a JSX literal instead of a component?"):U=typeof c,C("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",U,P)}var B=Bo(c,_,j,$,q);if(B==null)return B;if(D){var se=_.children;if(se!==void 0)if(T)if(It(se)){for(var _e=0;_e<se.length;_e++)Pn(se[_e],c);Object.freeze&&Object.freeze(se)}else C("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Pn(se,c)}if(Te.call(_,"key")){var me=Y(c),te=Object.keys(_).filter(function(ns){return ns!=="key"}),Mt=te.length>0?"{key: someKey, "+te.join(": ..., ")+": ...}":"{key: someKey}";if(!Dn[me+Mt]){var ts=te.length>0?"{"+te.join(": ..., ")+": ...}":"{}";C(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Mt,me,ts,me),Dn[me+Mt]=!0}}return c===i?Jo(B):Yo(B),B}}function Xo(c,_,j){return On(c,_,j,!0)}function Zo(c,_,j){return On(c,_,j,!1)}var Qo=Zo,es=Xo;we.Fragment=i,we.jsx=Qo,we.jsxs=es}()),we}process.env.NODE_ENV==="production"?Xe.exports=Ln():Xe.exports=Vn();var o=Xe.exports;const y=window.hubbi;/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ze(){return{accessor:(e,n)=>typeof e=="function"?{...n,accessorFn:e}:{...n,accessorKey:e},display:e=>e,group:e=>e}}function de(e,n){return typeof e=="function"?e(n):e}function ne(e,n){return t=>{n.setState(i=>({...i,[e]:de(t,i[e])}))}}function Fe(e){return e instanceof Function}function qn(e){return Array.isArray(e)&&e.every(n=>typeof n=="number")}function Hn(e,n){const t=[],i=s=>{s.forEach(r=>{t.push(r);const a=n(r);a!=null&&a.length&&i(a)})};return i(e),t}function I(e,n,t){let i=[],s;return r=>{let a;t.key&&t.debug&&(a=Date.now());const d=e(r);if(!(d.length!==i.length||d.some((f,h)=>i[h]!==f)))return s;i=d;let m;if(t.key&&t.debug&&(m=Date.now()),s=n(...d),t==null||t.onChange==null||t.onChange(s),t.key&&t.debug&&t!=null&&t.debug()){const f=Math.round((Date.now()-a)*100)/100,h=Math.round((Date.now()-m)*100)/100,u=h/16,l=(p,x)=>{for(p=String(p);p.length<x;)p=" "+p;return p};console.info(`%câ± ${l(h,5)} /${l(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*u,120))}deg 100% 31%);`,t==null?void 0:t.key)}return s}}function k(e,n,t,i){return{debug:()=>{var s;return(s=e==null?void 0:e.debugAll)!=null?s:e[n]},key:process.env.NODE_ENV==="development"&&t,onChange:i}}function zn(e,n,t,i){const s=()=>{var a;return(a=r.getValue())!=null?a:e.options.renderFallbackValue},r={id:`${n.id}_${t.id}`,row:n,column:t,getValue:()=>n.getValue(i),renderValue:s,getContext:I(()=>[e,t,n,r],(a,d,g,m)=>({table:a,column:d,row:g,cell:m,getValue:m.getValue,renderValue:m.renderValue}),k(e.options,"debugCells","cell.getContext"))};return e._features.forEach(a=>{a.createCell==null||a.createCell(r,t,n,e)},{}),r}function Un(e,n,t,i){var s,r;const d={...e._getDefaultColumnDef(),...n},g=d.accessorKey;let m=(s=(r=d.id)!=null?r:g?typeof String.prototype.replaceAll=="function"?g.replaceAll(".","_"):g.replace(/\./g,"_"):void 0)!=null?s:typeof d.header=="string"?d.header:void 0,f;if(d.accessorFn?f=d.accessorFn:g&&(g.includes(".")?f=u=>{let l=u;for(const x of g.split(".")){var p;l=(p=l)==null?void 0:p[x],process.env.NODE_ENV!=="production"&&l===void 0&&console.warn(`"${x}" in deeply nested key "${g}" returned undefined.`)}return l}:f=u=>u[d.accessorKey]),!m)throw process.env.NODE_ENV!=="production"?new Error(d.accessorFn?"Columns require an id when using an accessorFn":"Columns require an id when using a non-string header"):new Error;let h={id:`${String(m)}`,accessorFn:f,parent:i,depth:t,columnDef:d,columns:[],getFlatColumns:I(()=>[!0],()=>{var u;return[h,...(u=h.columns)==null?void 0:u.flatMap(l=>l.getFlatColumns())]},k(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:I(()=>[e._getOrderColumnsFn()],u=>{var l;if((l=h.columns)!=null&&l.length){let p=h.columns.flatMap(x=>x.getLeafColumns());return u(p)}return[h]},k(e.options,"debugColumns","column.getLeafColumns"))};for(const u of e._features)u.createColumn==null||u.createColumn(h,e);return h}const Q="debugHeaders";function Dt(e,n,t){var i;let r={id:(i=t.id)!=null?i:n.id,column:n,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],d=g=>{g.subHeaders&&g.subHeaders.length&&g.subHeaders.map(d),a.push(g)};return d(r),a},getContext:()=>({table:e,header:r,column:n})};return e._features.forEach(a=>{a.createHeader==null||a.createHeader(r,e)}),r}const Gn={createTable:e=>{e.getHeaderGroups=I(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,t,i,s)=>{var r,a;const d=(r=i==null?void 0:i.map(h=>t.find(u=>u.id===h)).filter(Boolean))!=null?r:[],g=(a=s==null?void 0:s.map(h=>t.find(u=>u.id===h)).filter(Boolean))!=null?a:[],m=t.filter(h=>!(i!=null&&i.includes(h.id))&&!(s!=null&&s.includes(h.id)));return Me(n,[...d,...m,...g],e)},k(e.options,Q,"getHeaderGroups")),e.getCenterHeaderGroups=I(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,t,i,s)=>(t=t.filter(r=>!(i!=null&&i.includes(r.id))&&!(s!=null&&s.includes(r.id))),Me(n,t,e,"center")),k(e.options,Q,"getCenterHeaderGroups")),e.getLeftHeaderGroups=I(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(n,t,i)=>{var s;const r=(s=i==null?void 0:i.map(a=>t.find(d=>d.id===a)).filter(Boolean))!=null?s:[];return Me(n,r,e,"left")},k(e.options,Q,"getLeftHeaderGroups")),e.getRightHeaderGroups=I(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(n,t,i)=>{var s;const r=(s=i==null?void 0:i.map(a=>t.find(d=>d.id===a)).filter(Boolean))!=null?s:[];return Me(n,r,e,"right")},k(e.options,Q,"getRightHeaderGroups")),e.getFooterGroups=I(()=>[e.getHeaderGroups()],n=>[...n].reverse(),k(e.options,Q,"getFooterGroups")),e.getLeftFooterGroups=I(()=>[e.getLeftHeaderGroups()],n=>[...n].reverse(),k(e.options,Q,"getLeftFooterGroups")),e.getCenterFooterGroups=I(()=>[e.getCenterHeaderGroups()],n=>[...n].reverse(),k(e.options,Q,"getCenterFooterGroups")),e.getRightFooterGroups=I(()=>[e.getRightHeaderGroups()],n=>[...n].reverse(),k(e.options,Q,"getRightFooterGroups")),e.getFlatHeaders=I(()=>[e.getHeaderGroups()],n=>n.map(t=>t.headers).flat(),k(e.options,Q,"getFlatHeaders")),e.getLeftFlatHeaders=I(()=>[e.getLeftHeaderGroups()],n=>n.map(t=>t.headers).flat(),k(e.options,Q,"getLeftFlatHeaders")),e.getCenterFlatHeaders=I(()=>[e.getCenterHeaderGroups()],n=>n.map(t=>t.headers).flat(),k(e.options,Q,"getCenterFlatHeaders")),e.getRightFlatHeaders=I(()=>[e.getRightHeaderGroups()],n=>n.map(t=>t.headers).flat(),k(e.options,Q,"getRightFlatHeaders")),e.getCenterLeafHeaders=I(()=>[e.getCenterFlatHeaders()],n=>n.filter(t=>{var i;return!((i=t.subHeaders)!=null&&i.length)}),k(e.options,Q,"getCenterLeafHeaders")),e.getLeftLeafHeaders=I(()=>[e.getLeftFlatHeaders()],n=>n.filter(t=>{var i;return!((i=t.subHeaders)!=null&&i.length)}),k(e.options,Q,"getLeftLeafHeaders")),e.getRightLeafHeaders=I(()=>[e.getRightFlatHeaders()],n=>n.filter(t=>{var i;return!((i=t.subHeaders)!=null&&i.length)}),k(e.options,Q,"getRightLeafHeaders")),e.getLeafHeaders=I(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(n,t,i)=>{var s,r,a,d,g,m;return[...(s=(r=n[0])==null?void 0:r.headers)!=null?s:[],...(a=(d=t[0])==null?void 0:d.headers)!=null?a:[],...(g=(m=i[0])==null?void 0:m.headers)!=null?g:[]].map(f=>f.getLeafHeaders()).flat()},k(e.options,Q,"getLeafHeaders"))}};function Me(e,n,t,i){var s,r;let a=0;const d=function(u,l){l===void 0&&(l=1),a=Math.max(a,l),u.filter(p=>p.getIsVisible()).forEach(p=>{var x;(x=p.columns)!=null&&x.length&&d(p.columns,l+1)},0)};d(e);let g=[];const m=(u,l)=>{const p={depth:l,id:[i,`${l}`].filter(Boolean).join("_"),headers:[]},x=[];u.forEach(v=>{const S=[...x].reverse()[0],C=v.column.depth===p.depth;let w,F=!1;if(C&&v.column.parent?w=v.column.parent:(w=v.column,F=!0),S&&(S==null?void 0:S.column)===w)S.subHeaders.push(v);else{const N=Dt(t,w,{id:[i,l,w.id,v==null?void 0:v.id].filter(Boolean).join("_"),isPlaceholder:F,placeholderId:F?`${x.filter(O=>O.column===w).length}`:void 0,depth:l,index:x.length});N.subHeaders.push(v),x.push(N)}p.headers.push(v),v.headerGroup=p}),g.push(p),l>0&&m(x,l-1)},f=n.map((u,l)=>Dt(t,u,{depth:a,index:l}));m(f,a-1),g.reverse();const h=u=>u.filter(p=>p.column.getIsVisible()).map(p=>{let x=0,v=0,S=[0];p.subHeaders&&p.subHeaders.length?(S=[],h(p.subHeaders).forEach(w=>{let{colSpan:F,rowSpan:N}=w;x+=F,S.push(N)})):x=1;const C=Math.min(...S);return v=v+C,p.colSpan=x,p.rowSpan=v,{colSpan:x,rowSpan:v}});return h((s=(r=g[0])==null?void 0:r.headers)!=null?s:[]),g}const Qe=(e,n,t,i,s,r,a)=>{let d={id:n,index:i,original:t,depth:s,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:g=>{if(d._valuesCache.hasOwnProperty(g))return d._valuesCache[g];const m=e.getColumn(g);if(m!=null&&m.accessorFn)return d._valuesCache[g]=m.accessorFn(d.original,i),d._valuesCache[g]},getUniqueValues:g=>{if(d._uniqueValuesCache.hasOwnProperty(g))return d._uniqueValuesCache[g];const m=e.getColumn(g);if(m!=null&&m.accessorFn)return m.columnDef.getUniqueValues?(d._uniqueValuesCache[g]=m.columnDef.getUniqueValues(d.original,i),d._uniqueValuesCache[g]):(d._uniqueValuesCache[g]=[d.getValue(g)],d._uniqueValuesCache[g])},renderValue:g=>{var m;return(m=d.getValue(g))!=null?m:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Hn(d.subRows,g=>g.subRows),getParentRow:()=>d.parentId?e.getRow(d.parentId,!0):void 0,getParentRows:()=>{let g=[],m=d;for(;;){const f=m.getParentRow();if(!f)break;g.push(f),m=f}return g.reverse()},getAllCells:I(()=>[e.getAllLeafColumns()],g=>g.map(m=>zn(e,d,m,m.id)),k(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:I(()=>[d.getAllCells()],g=>g.reduce((m,f)=>(m[f.column.id]=f,m),{}),k(e.options,"debugRows","getAllCellsByColumnId"))};for(let g=0;g<e._features.length;g++){const m=e._features[g];m==null||m.createRow==null||m.createRow(d,e)}return d},Bn={createColumn:(e,n)=>{e._getFacetedRowModel=n.options.getFacetedRowModel&&n.options.getFacetedRowModel(n,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():n.getPreFilteredRowModel(),e._getFacetedUniqueValues=n.options.getFacetedUniqueValues&&n.options.getFacetedUniqueValues(n,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=n.options.getFacetedMinMaxValues&&n.options.getFacetedMinMaxValues(n,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Ot=(e,n,t)=>{var i,s;const r=t==null||(i=t.toString())==null?void 0:i.toLowerCase();return!!(!((s=e.getValue(n))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(r))};Ot.autoRemove=e=>re(e);const $t=(e,n,t)=>{var i;return!!(!((i=e.getValue(n))==null||(i=i.toString())==null)&&i.includes(t))};$t.autoRemove=e=>re(e);const Lt=(e,n,t)=>{var i;return((i=e.getValue(n))==null||(i=i.toString())==null?void 0:i.toLowerCase())===(t==null?void 0:t.toLowerCase())};Lt.autoRemove=e=>re(e);const Vt=(e,n,t)=>{var i;return(i=e.getValue(n))==null?void 0:i.includes(t)};Vt.autoRemove=e=>re(e);const qt=(e,n,t)=>!t.some(i=>{var s;return!((s=e.getValue(n))!=null&&s.includes(i))});qt.autoRemove=e=>re(e)||!(e!=null&&e.length);const Ht=(e,n,t)=>t.some(i=>{var s;return(s=e.getValue(n))==null?void 0:s.includes(i)});Ht.autoRemove=e=>re(e)||!(e!=null&&e.length);const zt=(e,n,t)=>e.getValue(n)===t;zt.autoRemove=e=>re(e);const Ut=(e,n,t)=>e.getValue(n)==t;Ut.autoRemove=e=>re(e);const et=(e,n,t)=>{let[i,s]=t;const r=e.getValue(n);return r>=i&&r<=s};et.resolveFilterValue=e=>{let[n,t]=e,i=typeof n!="number"?parseFloat(n):n,s=typeof t!="number"?parseFloat(t):t,r=n===null||Number.isNaN(i)?-1/0:i,a=t===null||Number.isNaN(s)?1/0:s;if(r>a){const d=r;r=a,a=d}return[r,a]},et.autoRemove=e=>re(e)||re(e[0])&&re(e[1]);const le={includesString:Ot,includesStringSensitive:$t,equalsString:Lt,arrIncludes:Vt,arrIncludesAll:qt,arrIncludesSome:Ht,equals:zt,weakEquals:Ut,inNumberRange:et};function re(e){return e==null||e===""}const Wn={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ne("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,n)=>{e.getAutoFilterFn=()=>{const t=n.getCoreRowModel().flatRows[0],i=t==null?void 0:t.getValue(e.id);return typeof i=="string"?le.includesString:typeof i=="number"?le.inNumberRange:typeof i=="boolean"||i!==null&&typeof i=="object"?le.equals:Array.isArray(i)?le.arrIncludes:le.weakEquals},e.getFilterFn=()=>{var t,i;return Fe(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(t=(i=n.options.filterFns)==null?void 0:i[e.columnDef.filterFn])!=null?t:le[e.columnDef.filterFn]},e.getCanFilter=()=>{var t,i,s;return((t=e.columnDef.enableColumnFilter)!=null?t:!0)&&((i=n.options.enableColumnFilters)!=null?i:!0)&&((s=n.options.enableFilters)!=null?s:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var t;return(t=n.getState().columnFilters)==null||(t=t.find(i=>i.id===e.id))==null?void 0:t.value},e.getFilterIndex=()=>{var t,i;return(t=(i=n.getState().columnFilters)==null?void 0:i.findIndex(s=>s.id===e.id))!=null?t:-1},e.setFilterValue=t=>{n.setColumnFilters(i=>{const s=e.getFilterFn(),r=i==null?void 0:i.find(f=>f.id===e.id),a=de(t,r?r.value:void 0);if(Gt(s,a,e)){var d;return(d=i==null?void 0:i.filter(f=>f.id!==e.id))!=null?d:[]}const g={id:e.id,value:a};if(r){var m;return(m=i==null?void 0:i.map(f=>f.id===e.id?g:f))!=null?m:[]}return i!=null&&i.length?[...i,g]:[g]})}},createRow:(e,n)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=n=>{const t=e.getAllLeafColumns(),i=s=>{var r;return(r=de(n,s))==null?void 0:r.filter(a=>{const d=t.find(g=>g.id===a.id);if(d){const g=d.getFilterFn();if(Gt(g,a.value,d))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(i)},e.resetColumnFilters=n=>{var t,i;e.setColumnFilters(n?[]:(t=(i=e.initialState)==null?void 0:i.columnFilters)!=null?t:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Gt(e,n,t){return(e&&e.autoRemove?e.autoRemove(n,t):!1)||typeof n>"u"||typeof n=="string"&&!n}const tt={sum:(e,n,t)=>t.reduce((i,s)=>{const r=s.getValue(e);return i+(typeof r=="number"?r:0)},0),min:(e,n,t)=>{let i;return t.forEach(s=>{const r=s.getValue(e);r!=null&&(i>r||i===void 0&&r>=r)&&(i=r)}),i},max:(e,n,t)=>{let i;return t.forEach(s=>{const r=s.getValue(e);r!=null&&(i<r||i===void 0&&r>=r)&&(i=r)}),i},extent:(e,n,t)=>{let i,s;return t.forEach(r=>{const a=r.getValue(e);a!=null&&(i===void 0?a>=a&&(i=s=a):(i>a&&(i=a),s<a&&(s=a)))}),[i,s]},mean:(e,n)=>{let t=0,i=0;if(n.forEach(s=>{let r=s.getValue(e);r!=null&&(r=+r)>=r&&(++t,i+=r)}),t)return i/t},median:(e,n)=>{if(!n.length)return;const t=n.map(r=>r.getValue(e));if(!qn(t))return;if(t.length===1)return t[0];const i=Math.floor(t.length/2),s=t.sort((r,a)=>r-a);return t.length%2!==0?s[i]:(s[i-1]+s[i])/2},unique:(e,n)=>Array.from(new Set(n.map(t=>t.getValue(e))).values()),uniqueCount:(e,n)=>new Set(n.map(t=>t.getValue(e))).size,count:(e,n)=>n.length},Kn={getDefaultColumnDef:()=>({aggregatedCell:e=>{var n,t;return(n=(t=e.getValue())==null||t.toString==null?void 0:t.toString())!=null?n:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ne("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,n)=>{e.toggleGrouping=()=>{n.setGrouping(t=>t!=null&&t.includes(e.id)?t.filter(i=>i!==e.id):[...t??[],e.id])},e.getCanGroup=()=>{var t,i;return((t=e.columnDef.enableGrouping)!=null?t:!0)&&((i=n.options.enableGrouping)!=null?i:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var t;return(t=n.getState().grouping)==null?void 0:t.includes(e.id)},e.getGroupedIndex=()=>{var t;return(t=n.getState().grouping)==null?void 0:t.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const t=n.getCoreRowModel().flatRows[0],i=t==null?void 0:t.getValue(e.id);if(typeof i=="number")return tt.sum;if(Object.prototype.toString.call(i)==="[object Date]")return tt.extent},e.getAggregationFn=()=>{var t,i;if(!e)throw new Error;return Fe(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(t=(i=n.options.aggregationFns)==null?void 0:i[e.columnDef.aggregationFn])!=null?t:tt[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=n=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(n),e.resetGrouping=n=>{var t,i;e.setGrouping(n?[]:(t=(i=e.initialState)==null?void 0:i.grouping)!=null?t:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,n)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=t=>{if(e._groupingValuesCache.hasOwnProperty(t))return e._groupingValuesCache[t];const i=n.getColumn(t);return i!=null&&i.columnDef.getGroupingValue?(e._groupingValuesCache[t]=i.columnDef.getGroupingValue(e.original),e._groupingValuesCache[t]):e.getValue(t)},e._groupingValuesCache={}},createCell:(e,n,t,i)=>{e.getIsGrouped=()=>n.getIsGrouped()&&n.id===t.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&n.getIsGrouped(),e.getIsAggregated=()=>{var s;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((s=t.subRows)!=null&&s.length)}}};function Yn(e,n,t){if(!(n!=null&&n.length)||!t)return e;const i=e.filter(r=>!n.includes(r.id));return t==="remove"?i:[...n.map(r=>e.find(a=>a.id===r)).filter(Boolean),...i]}const Jn={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ne("columnOrder",e)}),createColumn:(e,n)=>{e.getIndex=I(t=>[Ce(n,t)],t=>t.findIndex(i=>i.id===e.id),k(n.options,"debugColumns","getIndex")),e.getIsFirstColumn=t=>{var i;return((i=Ce(n,t)[0])==null?void 0:i.id)===e.id},e.getIsLastColumn=t=>{var i;const s=Ce(n,t);return((i=s[s.length-1])==null?void 0:i.id)===e.id}},createTable:e=>{e.setColumnOrder=n=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(n),e.resetColumnOrder=n=>{var t;e.setColumnOrder(n?[]:(t=e.initialState.columnOrder)!=null?t:[])},e._getOrderColumnsFn=I(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(n,t,i)=>s=>{let r=[];if(!(n!=null&&n.length))r=s;else{const a=[...n],d=[...s];for(;d.length&&a.length;){const g=a.shift(),m=d.findIndex(f=>f.id===g);m>-1&&r.push(d.splice(m,1)[0])}r=[...r,...d]}return Yn(r,t,i)},k(e.options,"debugTable","_getOrderColumnsFn"))}},nt=()=>({left:[],right:[]}),Xn={getInitialState:e=>({columnPinning:nt(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ne("columnPinning",e)}),createColumn:(e,n)=>{e.pin=t=>{const i=e.getLeafColumns().map(s=>s.id).filter(Boolean);n.setColumnPinning(s=>{var r,a;if(t==="right"){var d,g;return{left:((d=s==null?void 0:s.left)!=null?d:[]).filter(h=>!(i!=null&&i.includes(h))),right:[...((g=s==null?void 0:s.right)!=null?g:[]).filter(h=>!(i!=null&&i.includes(h))),...i]}}if(t==="left"){var m,f;return{left:[...((m=s==null?void 0:s.left)!=null?m:[]).filter(h=>!(i!=null&&i.includes(h))),...i],right:((f=s==null?void 0:s.right)!=null?f:[]).filter(h=>!(i!=null&&i.includes(h)))}}return{left:((r=s==null?void 0:s.left)!=null?r:[]).filter(h=>!(i!=null&&i.includes(h))),right:((a=s==null?void 0:s.right)!=null?a:[]).filter(h=>!(i!=null&&i.includes(h)))}})},e.getCanPin=()=>e.getLeafColumns().some(i=>{var s,r,a;return((s=i.columnDef.enablePinning)!=null?s:!0)&&((r=(a=n.options.enableColumnPinning)!=null?a:n.options.enablePinning)!=null?r:!0)}),e.getIsPinned=()=>{const t=e.getLeafColumns().map(d=>d.id),{left:i,right:s}=n.getState().columnPinning,r=t.some(d=>i==null?void 0:i.includes(d)),a=t.some(d=>s==null?void 0:s.includes(d));return r?"left":a?"right":!1},e.getPinnedIndex=()=>{var t,i;const s=e.getIsPinned();return s?(t=(i=n.getState().columnPinning)==null||(i=i[s])==null?void 0:i.indexOf(e.id))!=null?t:-1:0}},createRow:(e,n)=>{e.getCenterVisibleCells=I(()=>[e._getAllVisibleCells(),n.getState().columnPinning.left,n.getState().columnPinning.right],(t,i,s)=>{const r=[...i??[],...s??[]];return t.filter(a=>!r.includes(a.column.id))},k(n.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=I(()=>[e._getAllVisibleCells(),n.getState().columnPinning.left],(t,i)=>(i??[]).map(r=>t.find(a=>a.column.id===r)).filter(Boolean).map(r=>({...r,position:"left"})),k(n.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=I(()=>[e._getAllVisibleCells(),n.getState().columnPinning.right],(t,i)=>(i??[]).map(r=>t.find(a=>a.column.id===r)).filter(Boolean).map(r=>({...r,position:"right"})),k(n.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=n=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(n),e.resetColumnPinning=n=>{var t,i;return e.setColumnPinning(n?nt():(t=(i=e.initialState)==null?void 0:i.columnPinning)!=null?t:nt())},e.getIsSomeColumnsPinned=n=>{var t;const i=e.getState().columnPinning;if(!n){var s,r;return!!((s=i.left)!=null&&s.length||(r=i.right)!=null&&r.length)}return!!((t=i[n])!=null&&t.length)},e.getLeftLeafColumns=I(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(n,t)=>(t??[]).map(i=>n.find(s=>s.id===i)).filter(Boolean),k(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=I(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(n,t)=>(t??[]).map(i=>n.find(s=>s.id===i)).filter(Boolean),k(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=I(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,t,i)=>{const s=[...t??[],...i??[]];return n.filter(r=>!s.includes(r.id))},k(e.options,"debugColumns","getCenterLeafColumns"))}};function Zn(e){return e||(typeof document<"u"?document:null)}const Ae={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},it=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Qn={getDefaultColumnDef:()=>Ae,getInitialState:e=>({columnSizing:{},columnSizingInfo:it(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ne("columnSizing",e),onColumnSizingInfoChange:ne("columnSizingInfo",e)}),createColumn:(e,n)=>{e.getSize=()=>{var t,i,s;const r=n.getState().columnSizing[e.id];return Math.min(Math.max((t=e.columnDef.minSize)!=null?t:Ae.minSize,(i=r??e.columnDef.size)!=null?i:Ae.size),(s=e.columnDef.maxSize)!=null?s:Ae.maxSize)},e.getStart=I(t=>[t,Ce(n,t),n.getState().columnSizing],(t,i)=>i.slice(0,e.getIndex(t)).reduce((s,r)=>s+r.getSize(),0),k(n.options,"debugColumns","getStart")),e.getAfter=I(t=>[t,Ce(n,t),n.getState().columnSizing],(t,i)=>i.slice(e.getIndex(t)+1).reduce((s,r)=>s+r.getSize(),0),k(n.options,"debugColumns","getAfter")),e.resetSize=()=>{n.setColumnSizing(t=>{let{[e.id]:i,...s}=t;return s})},e.getCanResize=()=>{var t,i;return((t=e.columnDef.enableResizing)!=null?t:!0)&&((i=n.options.enableColumnResizing)!=null?i:!0)},e.getIsResizing=()=>n.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,n)=>{e.getSize=()=>{let t=0;const i=s=>{if(s.subHeaders.length)s.subHeaders.forEach(i);else{var r;t+=(r=s.column.getSize())!=null?r:0}};return i(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=t=>{const i=n.getColumn(e.column.id),s=i==null?void 0:i.getCanResize();return r=>{if(!i||!s||(r.persist==null||r.persist(),ot(r)&&r.touches&&r.touches.length>1))return;const a=e.getSize(),d=e?e.getLeafHeaders().map(S=>[S.column.id,S.column.getSize()]):[[i.id,i.getSize()]],g=ot(r)?Math.round(r.touches[0].clientX):r.clientX,m={},f=(S,C)=>{typeof C=="number"&&(n.setColumnSizingInfo(w=>{var F,N;const O=n.options.columnResizeDirection==="rtl"?-1:1,K=(C-((F=w==null?void 0:w.startOffset)!=null?F:0))*O,G=Math.max(K/((N=w==null?void 0:w.startSize)!=null?N:0),-.999999);return w.columnSizingStart.forEach(M=>{let[H,X]=M;m[H]=Math.round(Math.max(X+X*G,0)*100)/100}),{...w,deltaOffset:K,deltaPercentage:G}}),(n.options.columnResizeMode==="onChange"||S==="end")&&n.setColumnSizing(w=>({...w,...m})))},h=S=>f("move",S),u=S=>{f("end",S),n.setColumnSizingInfo(C=>({...C,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},l=Zn(t),p={moveHandler:S=>h(S.clientX),upHandler:S=>{l==null||l.removeEventListener("mousemove",p.moveHandler),l==null||l.removeEventListener("mouseup",p.upHandler),u(S.clientX)}},x={moveHandler:S=>(S.cancelable&&(S.preventDefault(),S.stopPropagation()),h(S.touches[0].clientX),!1),upHandler:S=>{var C;l==null||l.removeEventListener("touchmove",x.moveHandler),l==null||l.removeEventListener("touchend",x.upHandler),S.cancelable&&(S.preventDefault(),S.stopPropagation()),u((C=S.touches[0])==null?void 0:C.clientX)}},v=ei()?{passive:!1}:!1;ot(r)?(l==null||l.addEventListener("touchmove",x.moveHandler,v),l==null||l.addEventListener("touchend",x.upHandler,v)):(l==null||l.addEventListener("mousemove",p.moveHandler,v),l==null||l.addEventListener("mouseup",p.upHandler,v)),n.setColumnSizingInfo(S=>({...S,startOffset:g,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:d,isResizingColumn:i.id}))}}},createTable:e=>{e.setColumnSizing=n=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(n),e.setColumnSizingInfo=n=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(n),e.resetColumnSizing=n=>{var t;e.setColumnSizing(n?{}:(t=e.initialState.columnSizing)!=null?t:{})},e.resetHeaderSizeInfo=n=>{var t;e.setColumnSizingInfo(n?it():(t=e.initialState.columnSizingInfo)!=null?t:it())},e.getTotalSize=()=>{var n,t;return(n=(t=e.getHeaderGroups()[0])==null?void 0:t.headers.reduce((i,s)=>i+s.getSize(),0))!=null?n:0},e.getLeftTotalSize=()=>{var n,t;return(n=(t=e.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((i,s)=>i+s.getSize(),0))!=null?n:0},e.getCenterTotalSize=()=>{var n,t;return(n=(t=e.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((i,s)=>i+s.getSize(),0))!=null?n:0},e.getRightTotalSize=()=>{var n,t;return(n=(t=e.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((i,s)=>i+s.getSize(),0))!=null?n:0}}};let Pe=null;function ei(){if(typeof Pe=="boolean")return Pe;let e=!1;try{const n={get passive(){return e=!0,!1}},t=()=>{};window.addEventListener("test",t,n),window.removeEventListener("test",t)}catch{e=!1}return Pe=e,Pe}function ot(e){return e.type==="touchstart"}const ti={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ne("columnVisibility",e)}),createColumn:(e,n)=>{e.toggleVisibility=t=>{e.getCanHide()&&n.setColumnVisibility(i=>({...i,[e.id]:t??!e.getIsVisible()}))},e.getIsVisible=()=>{var t,i;const s=e.columns;return(t=s.length?s.some(r=>r.getIsVisible()):(i=n.getState().columnVisibility)==null?void 0:i[e.id])!=null?t:!0},e.getCanHide=()=>{var t,i;return((t=e.columnDef.enableHiding)!=null?t:!0)&&((i=n.options.enableHiding)!=null?i:!0)},e.getToggleVisibilityHandler=()=>t=>{e.toggleVisibility==null||e.toggleVisibility(t.target.checked)}},createRow:(e,n)=>{e._getAllVisibleCells=I(()=>[e.getAllCells(),n.getState().columnVisibility],t=>t.filter(i=>i.column.getIsVisible()),k(n.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=I(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(t,i,s)=>[...t,...i,...s],k(n.options,"debugRows","getVisibleCells"))},createTable:e=>{const n=(t,i)=>I(()=>[i(),i().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(r=>r.getIsVisible==null?void 0:r.getIsVisible()),k(e.options,"debugColumns",t));e.getVisibleFlatColumns=n("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=n("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=n("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=n("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=n("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var i;e.setColumnVisibility(t?{}:(i=e.initialState.columnVisibility)!=null?i:{})},e.toggleAllColumnsVisible=t=>{var i;t=(i=t)!=null?i:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((s,r)=>({...s,[r.id]:t||!(r.getCanHide!=null&&r.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var i;e.toggleAllColumnsVisible((i=t.target)==null?void 0:i.checked)}}};function Ce(e,n){return n?n==="center"?e.getCenterVisibleLeafColumns():n==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const ni={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},ii={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ne("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:n=>{var t;const i=(t=e.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[n.id])==null?void 0:t.getValue();return typeof i=="string"||typeof i=="number"}}),createColumn:(e,n)=>{e.getCanGlobalFilter=()=>{var t,i,s,r;return((t=e.columnDef.enableGlobalFilter)!=null?t:!0)&&((i=n.options.enableGlobalFilter)!=null?i:!0)&&((s=n.options.enableFilters)!=null?s:!0)&&((r=n.options.getColumnCanGlobalFilter==null?void 0:n.options.getColumnCanGlobalFilter(e))!=null?r:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>le.includesString,e.getGlobalFilterFn=()=>{var n,t;const{globalFilterFn:i}=e.options;return Fe(i)?i:i==="auto"?e.getGlobalAutoFilterFn():(n=(t=e.options.filterFns)==null?void 0:t[i])!=null?n:le[i]},e.setGlobalFilter=n=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(n)},e.resetGlobalFilter=n=>{e.setGlobalFilter(n?void 0:e.initialState.globalFilter)}}},oi={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ne("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let n=!1,t=!1;e._autoResetExpanded=()=>{var i,s;if(!n){e._queue(()=>{n=!0});return}if((i=(s=e.options.autoResetAll)!=null?s:e.options.autoResetExpanded)!=null?i:!e.options.manualExpanding){if(t)return;t=!0,e._queue(()=>{e.resetExpanded(),t=!1})}},e.setExpanded=i=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(i),e.toggleAllRowsExpanded=i=>{i??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=i=>{var s,r;e.setExpanded(i?{}:(s=(r=e.initialState)==null?void 0:r.expanded)!=null?s:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(i=>i.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>i=>{i.persist==null||i.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const i=e.getState().expanded;return i===!0||Object.values(i).some(Boolean)},e.getIsAllRowsExpanded=()=>{const i=e.getState().expanded;return typeof i=="boolean"?i===!0:!(!Object.keys(i).length||e.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},e.getExpandedDepth=()=>{let i=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(r=>{const a=r.split(".");i=Math.max(i,a.length)}),i},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,n)=>{e.toggleExpanded=t=>{n.setExpanded(i=>{var s;const r=i===!0?!0:!!(i!=null&&i[e.id]);let a={};if(i===!0?Object.keys(n.getRowModel().rowsById).forEach(d=>{a[d]=!0}):a=i,t=(s=t)!=null?s:!r,!r&&t)return{...a,[e.id]:!0};if(r&&!t){const{[e.id]:d,...g}=a;return g}return i})},e.getIsExpanded=()=>{var t;const i=n.getState().expanded;return!!((t=n.options.getIsRowExpanded==null?void 0:n.options.getIsRowExpanded(e))!=null?t:i===!0||i!=null&&i[e.id])},e.getCanExpand=()=>{var t,i,s;return(t=n.options.getRowCanExpand==null?void 0:n.options.getRowCanExpand(e))!=null?t:((i=n.options.enableExpanding)!=null?i:!0)&&!!((s=e.subRows)!=null&&s.length)},e.getIsAllParentsExpanded=()=>{let t=!0,i=e;for(;t&&i.parentId;)i=n.getRow(i.parentId,!0),t=i.getIsExpanded();return t},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},st=0,rt=10,at=()=>({pageIndex:st,pageSize:rt}),si={getInitialState:e=>({...e,pagination:{...at(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:ne("pagination",e)}),createTable:e=>{let n=!1,t=!1;e._autoResetPageIndex=()=>{var i,s;if(!n){e._queue(()=>{n=!0});return}if((i=(s=e.options.autoResetAll)!=null?s:e.options.autoResetPageIndex)!=null?i:!e.options.manualPagination){if(t)return;t=!0,e._queue(()=>{e.resetPageIndex(),t=!1})}},e.setPagination=i=>{const s=r=>de(i,r);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(s)},e.resetPagination=i=>{var s;e.setPagination(i?at():(s=e.initialState.pagination)!=null?s:at())},e.setPageIndex=i=>{e.setPagination(s=>{let r=de(i,s.pageIndex);const a=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return r=Math.max(0,Math.min(r,a)),{...s,pageIndex:r}})},e.resetPageIndex=i=>{var s,r;e.setPageIndex(i?st:(s=(r=e.initialState)==null||(r=r.pagination)==null?void 0:r.pageIndex)!=null?s:st)},e.resetPageSize=i=>{var s,r;e.setPageSize(i?rt:(s=(r=e.initialState)==null||(r=r.pagination)==null?void 0:r.pageSize)!=null?s:rt)},e.setPageSize=i=>{e.setPagination(s=>{const r=Math.max(1,de(i,s.pageSize)),a=s.pageSize*s.pageIndex,d=Math.floor(a/r);return{...s,pageIndex:d,pageSize:r}})},e.setPageCount=i=>e.setPagination(s=>{var r;let a=de(i,(r=e.options.pageCount)!=null?r:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...s,pageCount:a}}),e.getPageOptions=I(()=>[e.getPageCount()],i=>{let s=[];return i&&i>0&&(s=[...new Array(i)].fill(null).map((r,a)=>a)),s},k(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:i}=e.getState().pagination,s=e.getPageCount();return s===-1?!0:s===0?!1:i<s-1},e.previousPage=()=>e.setPageIndex(i=>i-1),e.nextPage=()=>e.setPageIndex(i=>i+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var i;return(i=e.options.pageCount)!=null?i:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var i;return(i=e.options.rowCount)!=null?i:e.getPrePaginationRowModel().rows.length}}},lt=()=>({top:[],bottom:[]}),ri={getInitialState:e=>({rowPinning:lt(),...e}),getDefaultOptions:e=>({onRowPinningChange:ne("rowPinning",e)}),createRow:(e,n)=>{e.pin=(t,i,s)=>{const r=i?e.getLeafRows().map(g=>{let{id:m}=g;return m}):[],a=s?e.getParentRows().map(g=>{let{id:m}=g;return m}):[],d=new Set([...a,e.id,...r]);n.setRowPinning(g=>{var m,f;if(t==="bottom"){var h,u;return{top:((h=g==null?void 0:g.top)!=null?h:[]).filter(x=>!(d!=null&&d.has(x))),bottom:[...((u=g==null?void 0:g.bottom)!=null?u:[]).filter(x=>!(d!=null&&d.has(x))),...Array.from(d)]}}if(t==="top"){var l,p;return{top:[...((l=g==null?void 0:g.top)!=null?l:[]).filter(x=>!(d!=null&&d.has(x))),...Array.from(d)],bottom:((p=g==null?void 0:g.bottom)!=null?p:[]).filter(x=>!(d!=null&&d.has(x)))}}return{top:((m=g==null?void 0:g.top)!=null?m:[]).filter(x=>!(d!=null&&d.has(x))),bottom:((f=g==null?void 0:g.bottom)!=null?f:[]).filter(x=>!(d!=null&&d.has(x)))}})},e.getCanPin=()=>{var t;const{enableRowPinning:i,enablePinning:s}=n.options;return typeof i=="function"?i(e):(t=i??s)!=null?t:!0},e.getIsPinned=()=>{const t=[e.id],{top:i,bottom:s}=n.getState().rowPinning,r=t.some(d=>i==null?void 0:i.includes(d)),a=t.some(d=>s==null?void 0:s.includes(d));return r?"top":a?"bottom":!1},e.getPinnedIndex=()=>{var t,i;const s=e.getIsPinned();if(!s)return-1;const r=(t=s==="top"?n.getTopRows():n.getBottomRows())==null?void 0:t.map(a=>{let{id:d}=a;return d});return(i=r==null?void 0:r.indexOf(e.id))!=null?i:-1}},createTable:e=>{e.setRowPinning=n=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(n),e.resetRowPinning=n=>{var t,i;return e.setRowPinning(n?lt():(t=(i=e.initialState)==null?void 0:i.rowPinning)!=null?t:lt())},e.getIsSomeRowsPinned=n=>{var t;const i=e.getState().rowPinning;if(!n){var s,r;return!!((s=i.top)!=null&&s.length||(r=i.bottom)!=null&&r.length)}return!!((t=i[n])!=null&&t.length)},e._getPinnedRows=(n,t,i)=>{var s;return((s=e.options.keepPinnedRows)==null||s?(t??[]).map(a=>{const d=e.getRow(a,!0);return d.getIsAllParentsExpanded()?d:null}):(t??[]).map(a=>n.find(d=>d.id===a))).filter(Boolean).map(a=>({...a,position:i}))},e.getTopRows=I(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(n,t)=>e._getPinnedRows(n,t,"top"),k(e.options,"debugRows","getTopRows")),e.getBottomRows=I(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(n,t)=>e._getPinnedRows(n,t,"bottom"),k(e.options,"debugRows","getBottomRows")),e.getCenterRows=I(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(n,t,i)=>{const s=new Set([...t??[],...i??[]]);return n.filter(r=>!s.has(r.id))},k(e.options,"debugRows","getCenterRows"))}},ai={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ne("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=n=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(n),e.resetRowSelection=n=>{var t;return e.setRowSelection(n?{}:(t=e.initialState.rowSelection)!=null?t:{})},e.toggleAllRowsSelected=n=>{e.setRowSelection(t=>{n=typeof n<"u"?n:!e.getIsAllRowsSelected();const i={...t},s=e.getPreGroupedRowModel().flatRows;return n?s.forEach(r=>{r.getCanSelect()&&(i[r.id]=!0)}):s.forEach(r=>{delete i[r.id]}),i})},e.toggleAllPageRowsSelected=n=>e.setRowSelection(t=>{const i=typeof n<"u"?n:!e.getIsAllPageRowsSelected(),s={...t};return e.getRowModel().rows.forEach(r=>{dt(s,r.id,i,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=I(()=>[e.getState().rowSelection,e.getCoreRowModel()],(n,t)=>Object.keys(n).length?ut(e,t):{rows:[],flatRows:[],rowsById:{}},k(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=I(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(n,t)=>Object.keys(n).length?ut(e,t):{rows:[],flatRows:[],rowsById:{}},k(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=I(()=>[e.getState().rowSelection,e.getSortedRowModel()],(n,t)=>Object.keys(n).length?ut(e,t):{rows:[],flatRows:[],rowsById:{}},k(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{const n=e.getFilteredRowModel().flatRows,{rowSelection:t}=e.getState();let i=!!(n.length&&Object.keys(t).length);return i&&n.some(s=>s.getCanSelect()&&!t[s.id])&&(i=!1),i},e.getIsAllPageRowsSelected=()=>{const n=e.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:t}=e.getState();let i=!!n.length;return i&&n.some(s=>!t[s.id])&&(i=!1),i},e.getIsSomeRowsSelected=()=>{var n;const t=Object.keys((n=e.getState().rowSelection)!=null?n:{}).length;return t>0&&t<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const n=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:n.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>n=>{e.toggleAllRowsSelected(n.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>n=>{e.toggleAllPageRowsSelected(n.target.checked)}},createRow:(e,n)=>{e.toggleSelected=(t,i)=>{const s=e.getIsSelected();n.setRowSelection(r=>{var a;if(t=typeof t<"u"?t:!s,e.getCanSelect()&&s===t)return r;const d={...r};return dt(d,e.id,t,(a=i==null?void 0:i.selectChildren)!=null?a:!0,n),d})},e.getIsSelected=()=>{const{rowSelection:t}=n.getState();return ct(e,t)},e.getIsSomeSelected=()=>{const{rowSelection:t}=n.getState();return gt(e,t)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=n.getState();return gt(e,t)==="all"},e.getCanSelect=()=>{var t;return typeof n.options.enableRowSelection=="function"?n.options.enableRowSelection(e):(t=n.options.enableRowSelection)!=null?t:!0},e.getCanSelectSubRows=()=>{var t;return typeof n.options.enableSubRowSelection=="function"?n.options.enableSubRowSelection(e):(t=n.options.enableSubRowSelection)!=null?t:!0},e.getCanMultiSelect=()=>{var t;return typeof n.options.enableMultiRowSelection=="function"?n.options.enableMultiRowSelection(e):(t=n.options.enableMultiRowSelection)!=null?t:!0},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return i=>{var s;t&&e.toggleSelected((s=i.target)==null?void 0:s.checked)}}}},dt=(e,n,t,i,s)=>{var r;const a=s.getRow(n,!0);t?(a.getCanMultiSelect()||Object.keys(e).forEach(d=>delete e[d]),a.getCanSelect()&&(e[n]=!0)):delete e[n],i&&(r=a.subRows)!=null&&r.length&&a.getCanSelectSubRows()&&a.subRows.forEach(d=>dt(e,d.id,t,i,s))};function ut(e,n){const t=e.getState().rowSelection,i=[],s={},r=function(a,d){return a.map(g=>{var m;const f=ct(g,t);if(f&&(i.push(g),s[g.id]=g),(m=g.subRows)!=null&&m.length&&(g={...g,subRows:r(g.subRows)}),f)return g}).filter(Boolean)};return{rows:r(n.rows),flatRows:i,rowsById:s}}function ct(e,n){var t;return(t=n[e.id])!=null?t:!1}function gt(e,n,t){var i;if(!((i=e.subRows)!=null&&i.length))return!1;let s=!0,r=!1;return e.subRows.forEach(a=>{if(!(r&&!s)&&(a.getCanSelect()&&(ct(a,n)?r=!0:s=!1),a.subRows&&a.subRows.length)){const d=gt(a,n);d==="all"?r=!0:(d==="some"&&(r=!0),s=!1)}}),s?"all":r?"some":!1}const mt=/([0-9]+)/gm,li=(e,n,t)=>Bt(ue(e.getValue(t)).toLowerCase(),ue(n.getValue(t)).toLowerCase()),di=(e,n,t)=>Bt(ue(e.getValue(t)),ue(n.getValue(t))),ui=(e,n,t)=>ft(ue(e.getValue(t)).toLowerCase(),ue(n.getValue(t)).toLowerCase()),ci=(e,n,t)=>ft(ue(e.getValue(t)),ue(n.getValue(t))),gi=(e,n,t)=>{const i=e.getValue(t),s=n.getValue(t);return i>s?1:i<s?-1:0},mi=(e,n,t)=>ft(e.getValue(t),n.getValue(t));function ft(e,n){return e===n?0:e>n?1:-1}function ue(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Bt(e,n){const t=e.split(mt).filter(Boolean),i=n.split(mt).filter(Boolean);for(;t.length&&i.length;){const s=t.shift(),r=i.shift(),a=parseInt(s,10),d=parseInt(r,10),g=[a,d].sort();if(isNaN(g[0])){if(s>r)return 1;if(r>s)return-1;continue}if(isNaN(g[1]))return isNaN(a)?-1:1;if(a>d)return 1;if(d>a)return-1}return t.length-i.length}const Ee={alphanumeric:li,alphanumericCaseSensitive:di,text:ui,textCaseSensitive:ci,datetime:gi,basic:mi},fi=[Gn,ti,Jn,Xn,Bn,Wn,ni,ii,{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ne("sorting",e),isMultiSortEvent:n=>n.shiftKey}),createColumn:(e,n)=>{e.getAutoSortingFn=()=>{const t=n.getFilteredRowModel().flatRows.slice(10);let i=!1;for(const s of t){const r=s==null?void 0:s.getValue(e.id);if(Object.prototype.toString.call(r)==="[object Date]")return Ee.datetime;if(typeof r=="string"&&(i=!0,r.split(mt).length>1))return Ee.alphanumeric}return i?Ee.text:Ee.basic},e.getAutoSortDir=()=>{const t=n.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var t,i;if(!e)throw new Error;return Fe(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(t=(i=n.options.sortingFns)==null?void 0:i[e.columnDef.sortingFn])!=null?t:Ee[e.columnDef.sortingFn]},e.toggleSorting=(t,i)=>{const s=e.getNextSortingOrder(),r=typeof t<"u"&&t!==null;n.setSorting(a=>{const d=a==null?void 0:a.find(l=>l.id===e.id),g=a==null?void 0:a.findIndex(l=>l.id===e.id);let m=[],f,h=r?t:s==="desc";if(a!=null&&a.length&&e.getCanMultiSort()&&i?d?f="toggle":f="add":a!=null&&a.length&&g!==a.length-1?f="replace":d?f="toggle":f="replace",f==="toggle"&&(r||s||(f="remove")),f==="add"){var u;m=[...a,{id:e.id,desc:h}],m.splice(0,m.length-((u=n.options.maxMultiSortColCount)!=null?u:Number.MAX_SAFE_INTEGER))}else f==="toggle"?m=a.map(l=>l.id===e.id?{...l,desc:h}:l):f==="remove"?m=a.filter(l=>l.id!==e.id):m=[{id:e.id,desc:h}];return m})},e.getFirstSortDir=()=>{var t,i;return((t=(i=e.columnDef.sortDescFirst)!=null?i:n.options.sortDescFirst)!=null?t:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=t=>{var i,s;const r=e.getFirstSortDir(),a=e.getIsSorted();return a?a!==r&&((i=n.options.enableSortingRemoval)==null||i)&&(!(t&&(s=n.options.enableMultiRemove)!=null)||s)?!1:a==="desc"?"asc":"desc":r},e.getCanSort=()=>{var t,i;return((t=e.columnDef.enableSorting)!=null?t:!0)&&((i=n.options.enableSorting)!=null?i:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var t,i;return(t=(i=e.columnDef.enableMultiSort)!=null?i:n.options.enableMultiSort)!=null?t:!!e.accessorFn},e.getIsSorted=()=>{var t;const i=(t=n.getState().sorting)==null?void 0:t.find(s=>s.id===e.id);return i?i.desc?"desc":"asc":!1},e.getSortIndex=()=>{var t,i;return(t=(i=n.getState().sorting)==null?void 0:i.findIndex(s=>s.id===e.id))!=null?t:-1},e.clearSorting=()=>{n.setSorting(t=>t!=null&&t.length?t.filter(i=>i.id!==e.id):[])},e.getToggleSortingHandler=()=>{const t=e.getCanSort();return i=>{t&&(i.persist==null||i.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?n.options.isMultiSortEvent==null?void 0:n.options.isMultiSortEvent(i):!1))}}},createTable:e=>{e.setSorting=n=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(n),e.resetSorting=n=>{var t,i;e.setSorting(n?[]:(t=(i=e.initialState)==null?void 0:i.sorting)!=null?t:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Kn,oi,si,ri,ai,Qn];function pi(e){var n,t;process.env.NODE_ENV!=="production"&&(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");const i=[...fi,...(n=e._features)!=null?n:[]];let s={_features:i};const r=s._features.reduce((u,l)=>Object.assign(u,l.getDefaultOptions==null?void 0:l.getDefaultOptions(s)),{}),a=u=>s.options.mergeOptions?s.options.mergeOptions(r,u):{...r,...u};let g={...{},...(t=e.initialState)!=null?t:{}};s._features.forEach(u=>{var l;g=(l=u.getInitialState==null?void 0:u.getInitialState(g))!=null?l:g});const m=[];let f=!1;const h={_features:i,options:{...r,...e},initialState:g,_queue:u=>{m.push(u),f||(f=!0,Promise.resolve().then(()=>{for(;m.length;)m.shift()();f=!1}).catch(l=>setTimeout(()=>{throw l})))},reset:()=>{s.setState(s.initialState)},setOptions:u=>{const l=de(u,s.options);s.options=a(l)},getState:()=>s.options.state,setState:u=>{s.options.onStateChange==null||s.options.onStateChange(u)},_getRowId:(u,l,p)=>{var x;return(x=s.options.getRowId==null?void 0:s.options.getRowId(u,l,p))!=null?x:`${p?[p.id,l].join("."):l}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(u,l)=>{let p=(l?s.getPrePaginationRowModel():s.getRowModel()).rowsById[u];if(!p&&(p=s.getCoreRowModel().rowsById[u],!p))throw process.env.NODE_ENV!=="production"?new Error(`getRow could not find row with ID: ${u}`):new Error;return p},_getDefaultColumnDef:I(()=>[s.options.defaultColumn],u=>{var l;return u=(l=u)!=null?l:{},{header:p=>{const x=p.header.column.columnDef;return x.accessorKey?x.accessorKey:x.accessorFn?x.id:null},cell:p=>{var x,v;return(x=(v=p.renderValue())==null||v.toString==null?void 0:v.toString())!=null?x:null},...s._features.reduce((p,x)=>Object.assign(p,x.getDefaultColumnDef==null?void 0:x.getDefaultColumnDef()),{}),...u}},k(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>s.options.columns,getAllColumns:I(()=>[s._getColumnDefs()],u=>{const l=function(p,x,v){return v===void 0&&(v=0),p.map(S=>{const C=Un(s,S,v,x),w=S;return C.columns=w.columns?l(w.columns,C,v+1):[],C})};return l(u)},k(e,"debugColumns","getAllColumns")),getAllFlatColumns:I(()=>[s.getAllColumns()],u=>u.flatMap(l=>l.getFlatColumns()),k(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:I(()=>[s.getAllFlatColumns()],u=>u.reduce((l,p)=>(l[p.id]=p,l),{}),k(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:I(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(u,l)=>{let p=u.flatMap(x=>x.getLeafColumns());return l(p)},k(e,"debugColumns","getAllLeafColumns")),getColumn:u=>{const l=s._getAllFlatColumnsById()[u];return process.env.NODE_ENV!=="production"&&!l&&console.error(`[Table] Column with id '${u}' does not exist.`),l}};Object.assign(s,h);for(let u=0;u<s._features.length;u++){const l=s._features[u];l==null||l.createTable==null||l.createTable(s)}return s}function pt(){return e=>I(()=>[e.options.data],n=>{const t={rows:[],flatRows:[],rowsById:{}},i=function(s,r,a){r===void 0&&(r=0);const d=[];for(let m=0;m<s.length;m++){const f=Qe(e,e._getRowId(s[m],m,a),s[m],m,r,void 0,a==null?void 0:a.id);if(t.flatRows.push(f),t.rowsById[f.id]=f,d.push(f),e.options.getSubRows){var g;f.originalSubRows=e.options.getSubRows(s[m],m),(g=f.originalSubRows)!=null&&g.length&&(f.subRows=i(f.originalSubRows,r+1,f))}}return d};return t.rows=i(n),t},k(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function hi(e){const n=[],t=i=>{var s;n.push(i),(s=i.subRows)!=null&&s.length&&i.getIsExpanded()&&i.subRows.forEach(t)};return e.rows.forEach(t),{rows:n,flatRows:e.flatRows,rowsById:e.rowsById}}function xi(e,n,t){return t.options.filterFromLeafRows?yi(e,n,t):bi(e,n,t)}function yi(e,n,t){var i;const s=[],r={},a=(i=t.options.maxLeafRowFilterDepth)!=null?i:100,d=function(g,m){m===void 0&&(m=0);const f=[];for(let u=0;u<g.length;u++){var h;let l=g[u];const p=Qe(t,l.id,l.original,l.index,l.depth,void 0,l.parentId);if(p.columnFilters=l.columnFilters,(h=l.subRows)!=null&&h.length&&m<a){if(p.subRows=d(l.subRows,m+1),l=p,n(l)&&!p.subRows.length){f.push(l),r[l.id]=l,s.push(l);continue}if(n(l)||p.subRows.length){f.push(l),r[l.id]=l,s.push(l);continue}}else l=p,n(l)&&(f.push(l),r[l.id]=l,s.push(l))}return f};return{rows:d(e),flatRows:s,rowsById:r}}function bi(e,n,t){var i;const s=[],r={},a=(i=t.options.maxLeafRowFilterDepth)!=null?i:100,d=function(g,m){m===void 0&&(m=0);const f=[];for(let u=0;u<g.length;u++){let l=g[u];if(n(l)){var h;if((h=l.subRows)!=null&&h.length&&m<a){const x=Qe(t,l.id,l.original,l.index,l.depth,void 0,l.parentId);x.subRows=d(l.subRows,m+1),l=x}f.push(l),s.push(l),r[l.id]=l}}return f};return{rows:d(e),flatRows:s,rowsById:r}}function ht(){return e=>I(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(n,t,i)=>{if(!n.rows.length||!(t!=null&&t.length)&&!i){for(let u=0;u<n.flatRows.length;u++)n.flatRows[u].columnFilters={},n.flatRows[u].columnFiltersMeta={};return n}const s=[],r=[];(t??[]).forEach(u=>{var l;const p=e.getColumn(u.id);if(!p)return;const x=p.getFilterFn();if(!x){process.env.NODE_ENV!=="production"&&console.warn(`Could not find a valid 'column.filterFn' for column with the ID: ${p.id}.`);return}s.push({id:u.id,filterFn:x,resolvedValue:(l=x.resolveFilterValue==null?void 0:x.resolveFilterValue(u.value))!=null?l:u.value})});const a=(t??[]).map(u=>u.id),d=e.getGlobalFilterFn(),g=e.getAllLeafColumns().filter(u=>u.getCanGlobalFilter());i&&d&&g.length&&(a.push("__global__"),g.forEach(u=>{var l;r.push({id:u.id,filterFn:d,resolvedValue:(l=d.resolveFilterValue==null?void 0:d.resolveFilterValue(i))!=null?l:i})}));let m,f;for(let u=0;u<n.flatRows.length;u++){const l=n.flatRows[u];if(l.columnFilters={},s.length)for(let p=0;p<s.length;p++){m=s[p];const x=m.id;l.columnFilters[x]=m.filterFn(l,x,m.resolvedValue,v=>{l.columnFiltersMeta[x]=v})}if(r.length){for(let p=0;p<r.length;p++){f=r[p];const x=f.id;if(f.filterFn(l,x,f.resolvedValue,v=>{l.columnFiltersMeta[x]=v})){l.columnFilters.__global__=!0;break}}l.columnFilters.__global__!==!0&&(l.columnFilters.__global__=!1)}}const h=u=>{for(let l=0;l<a.length;l++)if(u.columnFilters[a[l]]===!1)return!1;return!0};return xi(n.rows,h,e)},k(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Wt(e){return n=>I(()=>[n.getState().pagination,n.getPrePaginationRowModel(),n.options.paginateExpandedRows?void 0:n.getState().expanded],(t,i)=>{if(!i.rows.length)return i;const{pageSize:s,pageIndex:r}=t;let{rows:a,flatRows:d,rowsById:g}=i;const m=s*r,f=m+s;a=a.slice(m,f);let h;n.options.paginateExpandedRows?h={rows:a,flatRows:d,rowsById:g}:h=hi({rows:a,flatRows:d,rowsById:g}),h.flatRows=[];const u=l=>{h.flatRows.push(l),l.subRows.length&&l.subRows.forEach(u)};return h.rows.forEach(u),h},k(n.options,"debugTable","getPaginationRowModel"))}function xt(){return e=>I(()=>[e.getState().sorting,e.getPreSortedRowModel()],(n,t)=>{if(!t.rows.length||!(n!=null&&n.length))return t;const i=e.getState().sorting,s=[],r=i.filter(g=>{var m;return(m=e.getColumn(g.id))==null?void 0:m.getCanSort()}),a={};r.forEach(g=>{const m=e.getColumn(g.id);m&&(a[g.id]={sortUndefined:m.columnDef.sortUndefined,invertSorting:m.columnDef.invertSorting,sortingFn:m.getSortingFn()})});const d=g=>{const m=g.map(f=>({...f}));return m.sort((f,h)=>{for(let l=0;l<r.length;l+=1){var u;const p=r[l],x=a[p.id],v=x.sortUndefined,S=(u=p==null?void 0:p.desc)!=null?u:!1;let C=0;if(v){const w=f.getValue(p.id),F=h.getValue(p.id),N=w===void 0,O=F===void 0;if(N||O){if(v==="first")return N?-1:1;if(v==="last")return N?1:-1;C=N&&O?0:N?v:-v}}if(C===0&&(C=x.sortingFn(f,h,p.id)),C!==0)return S&&(C*=-1),x.invertSorting&&(C*=-1),C}return f.index-h.index}),m.forEach(f=>{var h;s.push(f),(h=f.subRows)!=null&&h.length&&(f.subRows=d(f.subRows))}),m};return{rows:d(t.rows),flatRows:s,rowsById:t.rowsById}},k(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function fe(e,n){return e?vi(e)?Je.createElement(e,n):e:null}function vi(e){return _i(e)||typeof e=="function"||Si(e)}function _i(e){return typeof e=="function"&&(()=>{const n=Object.getPrototypeOf(e);return n.prototype&&n.prototype.isReactComponent})()}function Si(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function yt(e){const n={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[t]=Je.useState(()=>({current:pi(n)})),[i,s]=Je.useState(()=>t.current.initialState);return t.current.setOptions(r=>({...r,...e,state:{...i,...e.state},onStateChange:a=>{s(a),e.onStateChange==null||e.onStateChange(a)}})),t.current}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),A=(e,n)=>{const t=b.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:d="",children:g,...m},f)=>b.createElement("svg",{ref:f,...wi,width:s,height:s,stroke:i,strokeWidth:a?Number(r)*24/Number(s):r,className:["lucide",`lucide-${Ci(e)}`,d].join(" "),...m},[...n.map(([h,u])=>b.createElement(h,u)),...Array.isArray(g)?g:[g]]));return t.displayName=`${e}`,t};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=A("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=A("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=A("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=A("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=A("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=A("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=A("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=A("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=A("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=A("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=A("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=A("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=A("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=A("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=A("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=A("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=A("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=A("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=A("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=A("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=A("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=A("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=A("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=A("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=A("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=A("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=A("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=A("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=A("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=A("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=A("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=A("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=A("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=A("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=A("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=A("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=A("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),he=Ze(),Hi=()=>{const[e,n]=b.useState([]),[t,i]=b.useState(!0),[s,r]=b.useState([]),[a,d]=b.useState(""),[g,m]=b.useState([]),f=async()=>{i(!0);const{data:p,error:x}=await y.data.list({table:"com_hubbi_inventory_items",options:{strategy:"cache_first"}});p?n(p):x&&(console.error(x),y.notify.error("Error al cargar inventario")),i(!1)};b.useEffect(()=>{f();const p=()=>f();return y.events.on("inventory:item:created",p),y.events.on("inventory:item:updated",p),()=>{y.events.off("inventory:item:created",p),y.events.off("inventory:item:updated",p)}},[]);const h=p=>{switch(p){case"kit":return o.jsx(Ne,{size:18,className:"text-blue-500"});case"serialized":return o.jsx(Kt,{size:18,className:"text-purple-500"});case"asset":return o.jsx(Le,{size:18,className:"text-orange-500"});default:return o.jsx(vt,{size:18,className:"text-gray-500"})}},u=b.useMemo(()=>[he.accessor("name",{header:"Producto",cell:p=>o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-medium text-gray-900",children:p.getValue()}),p.row.original.description&&o.jsx("span",{className:"text-xs text-gray-400 truncate max-w-xs",children:p.row.original.description})]})}),he.accessor("sku",{header:"SKU",cell:p=>o.jsx("span",{className:"font-mono text-gray-600",children:p.getValue()})}),he.accessor("type",{header:"Tipo",cell:p=>o.jsxs("div",{className:"flex items-center gap-2",title:p.getValue(),children:[h(p.getValue()),o.jsx("span",{className:"text-sm capitalize text-gray-600",children:p.getValue()})]})}),he.accessor("weighted_average_cost",{header:()=>o.jsx("div",{className:"text-right",children:"Costo Prom."}),cell:p=>o.jsxs("div",{className:"text-right font-mono",children:["$",p.getValue().toFixed(2)]})}),he.accessor("is_active",{header:()=>o.jsx("div",{className:"text-center",children:"Estado"}),cell:p=>o.jsx("div",{className:"text-center",children:o.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${p.getValue()?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:p.getValue()?"Activo":"Inactivo"})})}),he.display({id:"actions",header:()=>o.jsx("div",{className:"text-right",children:"Acciones"}),cell:()=>o.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-blue-600",children:o.jsx(Di,{size:16})}),o.jsx("button",{className:"p-1 hover:bg-gray-200 rounded text-gray-500 hover:text-red-600",children:o.jsx(nn,{size:16})})]})})],[]),l=yt({data:e,columns:u,state:{sorting:s,globalFilter:a,columnFilters:g},onSortingChange:r,onGlobalFilterChange:d,onColumnFiltersChange:m,getCoreRowModel:pt(),getSortedRowModel:xt(),getFilteredRowModel:ht(),getPaginationRowModel:Wt()});return o.jsxs("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),o.jsx("input",{type:"text",placeholder:"Buscar por SKU o Nombre...",className:"pl-10 pr-4 py-2 border rounded-lg text-sm w-64 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",value:a,onChange:p=>d(p.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[o.jsx(Mi,{size:18,className:"text-gray-400"}),o.jsxs("select",{className:"text-sm border-none bg-transparent focus:ring-0 cursor-pointer text-gray-600 font-medium",onChange:p=>{var v;const x=p.target.value;(v=l.getColumn("type"))==null||v.setFilterValue(x==="all"?void 0:x)},children:[o.jsx("option",{value:"all",children:"Todos los tipos"}),o.jsx("option",{value:"simple",children:"Simples"}),o.jsx("option",{value:"kit",children:"Kits"}),o.jsx("option",{value:"serialized",children:"Serializados"}),o.jsx("option",{value:"asset",children:"Activos (Camiones)"})]})]})]}),o.jsxs("button",{className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[o.jsx(St,{size:18}),"Nuevo Producto"]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:l.getHeaderGroups().map(p=>o.jsx("tr",{children:p.headers.map(x=>o.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:x.column.getToggleSortingHandler(),children:o.jsxs("div",{className:"flex items-center gap-1",children:[fe(x.column.columnDef.header,x.getContext()),x.column.getCanSort()&&o.jsx(ce,{size:12,className:"text-gray-400"})]})},x.id))},p.id))}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:t?o.jsx("tr",{children:o.jsx("td",{colSpan:u.length,className:"text-center py-12 text-gray-400",children:"Cargando inventario..."})}):l.getRowModel().rows.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:u.length,className:"text-center py-12 text-gray-400",children:"No se encontraron productos"})}):l.getRowModel().rows.map(p=>o.jsx("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:p.getVisibleCells().map(x=>o.jsx("td",{className:"px-6 py-3 text-sm",children:fe(x.column.columnDef.cell,x.getContext())},x.id))},p.id))})]})}),l.getPageCount()>1&&o.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[o.jsxs("div",{className:"text-xs text-gray-500",children:["PÃ¡gina ",l.getState().pagination.pageIndex+1," de ",l.getPageCount()]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 border rounded text-xs disabled:opacity-50",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Anterior"}),o.jsx("button",{className:"px-3 py-1 border rounded text-xs disabled:opacity-50",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Siguiente"})]})]})]})},sn=()=>{const[e,n]=b.useState(!1);return{createItem:async i=>{n(!0);try{const s={...i,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},r=window.hubbi,a=await r.data.create({table:"com_hubbi_inventory_items",data:s,options:{strategy:"online_first"}});if(a.error)throw a.error;return a.offline?r.notify.warning("Guardado localmente. Se sincronizarÃ¡ al recuperar conexiÃ³n."):r.notify.success("Producto creado exitosamente."),{success:!0,data:s}}catch(s){return console.error("Error creating item:",s),window.hubbi&&window.hubbi.notify.error("Error al crear el producto: "+(s instanceof Error?s.message:String(s))),{success:!1,error:s}}finally{n(!1)}},loading:e}},zi=({onClose:e,onSuccess:n,initialData:t})=>{const{createItem:i,loading:s}=sn(),[r,a]=b.useState({type:"simple",is_active:!0,is_internal_use_only:!1,attributes:{},...t}),[d,g]=b.useState(r.attributes||{}),m=async h=>{if(h.preventDefault(),!r.sku||!r.name)return;(await i({...r,attributes:d})).success&&(n==null||n(),e())},f=()=>{switch(r.type){case"asset":return o.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"col-span-2 flex items-center gap-2 text-orange-600 mb-2",children:[o.jsx(Le,{size:18}),o.jsx("span",{className:"font-semibold text-sm",children:"Mascarilla de Activo (CamiÃ³n)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"VIN (NÃºmero Chasis)"}),o.jsx("input",{className:"w-full border rounded px-3 py-2 text-sm",placeholder:"1HGCM82633...",value:d.vin||"",onChange:h=>g({...d,vin:h.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Placa / MatrÃ­cula"}),o.jsx("input",{className:"w-full border rounded px-3 py-2 text-sm",placeholder:"C-123456",value:d.plate||"",onChange:h=>g({...d,plate:h.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Kilometraje Inicial"}),o.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2 text-sm",value:d.mileage||"",onChange:h=>g({...d,mileage:h.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"AÃ±o"}),o.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2 text-sm",value:d.year||"",onChange:h=>g({...d,year:h.target.value})})]})]});case"serialized":return o.jsxs("div",{className:"grid grid-cols-1 gap-4 border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-2",children:[o.jsx(Kt,{size:18}),o.jsx("span",{className:"font-semibold text-sm",children:"Control Serializado"})]}),o.jsxs("div",{className:"bg-purple-50 p-3 rounded text-xs text-purple-700",children:[o.jsx(tn,{size:14,className:"inline mr-1"}),"Este producto requerirÃ¡ escanear o ingresar un nÃºmero de serie Ãºnico para cada unidad que entre al inventario."]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"require_qc",checked:d.require_qc||!1,onChange:h=>g({...d,require_qc:h.target.checked})}),o.jsx("label",{htmlFor:"require_qc",className:"text-sm text-gray-700",children:"Requerir Control de Calidad al ingreso"})]})]});case"kit":return o.jsxs("div",{className:"grid grid-cols-1 gap-4 border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-2",children:[o.jsx(Ne,{size:18}),o.jsx("span",{className:"font-semibold text-sm",children:"DefiniciÃ³n de Kit"})]}),o.jsxs("div",{className:"bg-blue-50 p-3 rounded text-xs text-blue-700",children:[o.jsx(tn,{size:14,className:"inline mr-1"}),'Los componentes del kit se definirÃ¡n en la pestaÃ±a "ComposiciÃ³n" despuÃ©s de crear el producto.']})]});default:return null}};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-in fade-in duration-200",children:o.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:o.jsxs("form",{onSubmit:m,children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t!=null&&t.id?"Editar Producto":"Nuevo Producto"}),o.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Re,{size:24})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"col-span-1",children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-2",children:"Tipo de Producto"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:["simple","asset","serialized","kit"].map(h=>o.jsx("button",{type:"button",onClick:()=>a({...r,type:h}),className:`px-3 py-2 rounded text-sm font-medium border text-left capitalize transition-all ${r.type===h?"border-blue-500 bg-blue-50 text-blue-700 ring-1 ring-blue-500":"border-gray-200 text-gray-600 hover:border-gray-300"}`,children:h},h))})]}),o.jsxs("div",{className:"col-span-1 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"SKU (CÃ³digo Ãšnico)"}),o.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"FIL-ACE-001",value:r.sku||"",onChange:h=>a({...r,sku:h.target.value.toUpperCase()})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Nombre del Producto"}),o.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Filtro de Aceite GenÃ©rico",value:r.name||"",onChange:h=>a({...r,name:h.target.value})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"DescripciÃ³n"}),o.jsx("textarea",{rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",value:r.description||"",onChange:h=>a({...r,description:h.target.value})})]}),f(),o.jsxs("div",{className:"flex items-center gap-6 pt-4 border-t border-gray-100",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-blue-600 focus:ring-blue-500",checked:r.is_active,onChange:h=>a({...r,is_active:h.target.checked})}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Activo"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-blue-600 focus:ring-blue-500",checked:r.is_internal_use_only,onChange:h=>a({...r,is_internal_use_only:h.target.checked})}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Uso Interno Exclusivo"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:s,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium shadow-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Guardando...":o.jsxs(o.Fragment,{children:[o.jsx(Oe,{size:18}),"Guardar Producto"]})})]})]})})})},Ui=({parentItem:e,onClose:n})=>{const[t,i]=b.useState([]),[s,r]=b.useState(""),[a,d]=b.useState([]),[g,m]=b.useState(!1);b.useEffect(()=>{(async()=>{const p=await y.data.query(`SELECT k.child_item_id, k.quantity, i.sku as child_sku, i.name as child_name
                  FROM com_hubbi_inventory_kits k
                  JOIN com_hubbi_inventory_items i ON k.child_item_id = i.id
                  WHERE k.parent_item_id = ?`,[e.id]);p&&Array.isArray(p)&&i(p)})()},[e.id]),b.useEffect(()=>{if(!s){d([]);return}const l=setTimeout(async()=>{const{data:p}=await y.data.list({table:"com_hubbi_inventory_items",query:{filter:s}});if(p){const x=p.filter(v=>v.id!==e.id&&v.type!=="kit"&&(v.name.toLowerCase().includes(s.toLowerCase())||v.sku.toLowerCase().includes(s.toLowerCase())));d(x.slice(0,5))}},300);return()=>clearTimeout(l)},[s,e.id]);const f=async l=>{const p={child_item_id:l.id,child_sku:l.sku,child_name:l.name,quantity:1};i([...t,p]),r(""),d([]),await y.data.create({table:"com_hubbi_inventory_kits",data:{parent_item_id:e.id,child_item_id:l.id,quantity:1},options:{strategy:"online_first"}})},h=async(l,p)=>{p<=0||(i(t.map(x=>x.child_item_id===l?{...x,quantity:p}:x)),await y.data.execute("UPDATE com_hubbi_inventory_kits SET quantity = ? WHERE parent_item_id = ? AND child_item_id = ?",[p,e.id,l]))},u=async l=>{i(t.filter(p=>p.child_item_id!==l)),await y.data.execute("DELETE FROM com_hubbi_inventory_kits WHERE parent_item_id = ? AND child_item_id = ?",[e.id,l])};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg h-[80vh] flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 text-blue-600 mb-1",children:[o.jsx(Ne,{size:24}),o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Configurar Kit"})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Definiendo contenido para: ",o.jsx("span",{className:"font-semibold text-gray-800",children:e.name})]})]}),o.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase block mb-2",children:"Agregar Componente"}),o.jsxs("div",{className:"relative",children:[o.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),o.jsx("input",{className:"w-full pl-9 pr-4 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Buscar Ã­tem...",value:s,onChange:l=>r(l.target.value)}),a.length>0&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-xl border border-gray-100 overflow-hidden z-20",children:a.map(l=>o.jsxs("button",{onClick:()=>f(l),className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-gray-50 last:border-0 flex items-center justify-between group",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800 text-sm",children:l.name}),o.jsx("div",{className:"text-xs text-gray-400 font-mono",children:l.sku})]}),o.jsx(St,{size:16,className:"text-blue-500 opacity-0 group-hover:opacity-100"})]},l.id))})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(Ne,{size:48,className:"mx-auto mb-3 opacity-20"}),o.jsx("p",{children:"Este kit estÃ¡ vacÃ­o."}),o.jsx("p",{className:"text-xs",children:"Agrega productos usando el buscador superior."})]}):t.map(l=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg shadow-sm",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm text-gray-900",children:l.child_name}),o.jsx("div",{className:"text-xs text-gray-500 font-mono",children:l.child_sku})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center border rounded-md",children:[o.jsx("input",{type:"number",className:"w-16 text-center text-sm py-1 border-none focus:ring-0",value:l.quantity,onChange:p=>h(l.child_item_id,parseInt(p.target.value)||0),min:"1"}),o.jsx("span",{className:"text-xs text-gray-400 pr-2",children:"unds"})]}),o.jsx("button",{onClick:()=>u(l.child_item_id),className:"text-gray-400 hover:text-red-500 p-1",children:o.jsx(nn,{size:16})})]})]},l.child_item_id))}),o.jsx("div",{className:"p-4 border-t border-gray-100 flex justify-end",children:o.jsx("button",{onClick:n,className:"px-6 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:"Terminar"})})]})})},xe=Ze(),Gi=({item:e})=>{const[n,t]=b.useState([]),[i,s]=b.useState(!0),[r,a]=b.useState([]),[d,g]=b.useState(""),m=b.useCallback(async()=>{s(!0);let l="SELECT * FROM com_hubbi_inventory_movements ORDER BY created_at DESC LIMIT 500",p=[];e&&(l="SELECT * FROM com_hubbi_inventory_movements WHERE item_id = ? ORDER BY created_at DESC LIMIT 500",p=[e.id]);const x=await y.data.query(l,p);x&&Array.isArray(x)&&t(x),s(!1)},[e]);b.useEffect(()=>{m();const l=()=>m();return y.events.on("inventory:stock:increased",l),y.events.on("inventory:stock:decreased",l),()=>{y.events.off("inventory:stock:increased",l),y.events.off("inventory:stock:increased",l),y.events.off("inventory:stock:decreased",l)}},[e,m]);const f=l=>{switch(l){case"IN":return o.jsx(ji,{className:"text-green-600",size:16});case"OUT":return o.jsx(Ii,{className:"text-red-600",size:16});case"ADJUST":return o.jsx(Fi,{className:"text-gray-600",size:16});default:return o.jsx(Ni,{className:"text-blue-600",size:16})}},h=b.useMemo(()=>[xe.accessor("type",{header:({column:l})=>o.jsxs("button",{onClick:()=>l.toggleSorting(),className:"flex items-center gap-1",children:["Tipo ",o.jsx(ce,{size:14})]}),cell:l=>o.jsxs("div",{className:"flex items-center gap-2",children:[f(l.getValue()),o.jsx("span",{className:"font-medium",children:l.getValue()})]})}),xe.accessor("created_at",{header:({column:l})=>o.jsxs("button",{onClick:()=>l.toggleSorting(),className:"flex items-center gap-1",children:["Fecha ",o.jsx(ce,{size:14})]}),cell:l=>new Date(l.getValue()).toLocaleString()}),xe.accessor("reason",{header:"Motivo",cell:l=>o.jsx("div",{className:"max-w-xs truncate",title:l.getValue()||"",children:l.getValue()||"-"})}),xe.accessor("quantity",{header:({column:l})=>o.jsxs("button",{onClick:()=>l.toggleSorting(),className:"flex items-center gap-1 ml-auto",children:["Cantidad ",o.jsx(ce,{size:14})]}),cell:l=>{const x=l.row.original.type==="OUT";return o.jsxs("span",{className:`font-mono font-medium ${x?"text-red-600":"text-green-600"}`,children:[x?"-":"+",l.getValue()]})}}),xe.accessor("cost_at_moment",{header:"Costo Unit.",cell:l=>o.jsxs("span",{className:"font-mono",children:["$",l.getValue().toFixed(2)]})}),xe.accessor("total_value",{header:({column:l})=>o.jsxs("button",{onClick:()=>l.toggleSorting(),className:"flex items-center gap-1 ml-auto",children:["Total ",o.jsx(ce,{size:14})]}),cell:l=>o.jsxs("span",{className:"font-mono font-medium",children:["$",l.getValue().toFixed(2)]})})],[]),u=yt({data:n,columns:h,state:{sorting:r,globalFilter:d},onSortingChange:a,onGlobalFilterChange:g,getCoreRowModel:pt(),getSortedRowModel:xt(),getFilteredRowModel:ht(),getPaginationRowModel:Wt(),initialState:{pagination:{pageSize:20}}});return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(Zt,{size:16}),"Historial de Movimientos"]}),o.jsx("input",{type:"text",placeholder:"Buscar...",value:d,onChange:l=>g(l.target.value),className:"px-3 py-1.5 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-500",children:u.getHeaderGroups().map(l=>o.jsx("tr",{children:l.headers.map(p=>o.jsx("th",{className:"px-4 py-2 font-medium",children:fe(p.column.columnDef.header,p.getContext())},p.id))},l.id))}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:i?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-400",children:"Cargando..."})}):u.getRowModel().rows.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-400",children:"No hay movimientos registrados"})}):u.getRowModel().rows.map(l=>o.jsx("tr",{className:"hover:bg-gray-50",children:l.getVisibleCells().map(p=>o.jsx("td",{className:"px-4 py-3",children:fe(p.column.columnDef.cell,p.getContext())},p.id))},l.id))})]})}),o.jsxs("div",{className:"p-4 border-t border-gray-100 flex items-center justify-between text-sm text-gray-600",children:[o.jsxs("span",{children:["Mostrando ",u.getState().pagination.pageIndex*u.getState().pagination.pageSize+1," - ",Math.min((u.getState().pagination.pageIndex+1)*u.getState().pagination.pageSize,n.length)," de ",n.length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>u.previousPage(),disabled:!u.getCanPreviousPage(),className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",children:o.jsx(ki,{size:18})}),o.jsxs("span",{children:["PÃ¡gina ",u.getState().pagination.pageIndex+1," de ",u.getPageCount()]}),o.jsx("button",{onClick:()=>u.nextPage(),disabled:!u.getCanNextPage(),className:"p-1 rounded hover:bg-gray-100 disabled:opacity-50",children:o.jsx(Ti,{size:18})})]})]})]})},Bi=()=>{const[e,n]=b.useState([]),t=async()=>{const r=await y.data.query("SELECT * FROM com_hubbi_inventory_transfer_requests ORDER BY created_at DESC");if(r&&Array.isArray(r)){const a=r.map(d=>({...d,items:typeof d.items=="string"?JSON.parse(d.items):d.items}));n(a)}};b.useEffect(()=>{t()},[]);const i=async(r,a)=>{await y.data.update({table:"com_hubbi_inventory_transfer_requests",id:r,data:{status:a,updated_at:new Date().toISOString()},options:{strategy:"online_first"}}),y.notify.success(`Solicitud ${a}`),t()},s=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"in_transit":return"bg-purple-100 text-purple-800";case"received":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(Li,{size:18,className:"text-blue-600"}),"GestiÃ³n de Traslados"]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500",children:o.jsx(Zt,{size:16})})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:e.length===0?o.jsx("div",{className:"text-center py-10 text-gray-400",children:"No hay solicitudes de traslado activas"}):e.map(r=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 flex flex-col gap-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsxs("span",{className:"font-medium text-gray-900",children:["#",r.source_location_id.substring(0,4),"..."]}),o.jsx(Ri,{size:14}),o.jsxs("span",{className:"font-medium text-gray-900",children:["#",r.target_location_id.substring(0,4),"..."]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium uppercase ${s(r.status)}`,children:r.status.replace("_"," ")})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600 space-y-1",children:r.items.map((a,d)=>o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Item ID: ",a.item_id.substring(0,8),"..."]}),o.jsxs("span",{className:"font-mono font-medium",children:["x",a.quantity]})]},d))}),r.status==="pending"&&o.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100",children:[o.jsxs("button",{onClick:()=>i(r.id,"rejected"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 rounded bg-white border border-red-200",children:[o.jsx(Re,{size:14})," Rechazar"]}),o.jsxs("button",{onClick:()=>i(r.id,"approved"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-green-600 hover:bg-green-50 rounded bg-white border border-green-200",children:[o.jsx(pe,{size:14})," Aprobar"]})]}),r.status==="approved"&&o.jsx("div",{className:"flex justify-end gap-2 pt-2",children:o.jsxs("button",{onClick:()=>i(r.id,"in_transit"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-purple-600 hover:bg-purple-50 rounded bg-white border border-purple-200",children:[o.jsx(Le,{size:14})," Despachar (Enviar)"]})})]},r.id))})]})},Wi=({data:e,companyName:n="MI EMPRESA S.A. DE C.V."})=>o.jsxs("div",{className:"bg-white p-8 max-w-2xl mx-auto border border-gray-200 shadow-sm print:shadow-none print:border-0",id:"printable-remission",children:[o.jsxs("div",{className:"flex justify-between items-start border-b border-gray-800 pb-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900 uppercase tracking-widest",children:n}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Giro: Venta de Repuestos y Servicios"}),o.jsx("p",{className:"text-xs text-gray-500",children:"San Salvador, El Salvador"})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 border-2 border-gray-900 px-3 py-1 rounded",children:[o.jsx(Le,{size:20,className:"text-gray-900"}),o.jsx("span",{className:"font-bold text-lg",children:"NOTA DE REMISIÃ“N"})]}),o.jsxs("p",{className:"text-sm font-mono mt-2 text-gray-600",children:["REF: ",e.id.substring(0,8).toUpperCase()]}),o.jsx("p",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8 text-sm",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-1 border-b border-gray-300 inline-block",children:"ORIGEN (BODEGA)"}),o.jsx("p",{className:"font-mono text-gray-600 mt-1",children:e.source_location_id})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-1 border-b border-gray-300 inline-block",children:"DESTINO (SUCURSAL)"}),o.jsx("p",{className:"font-mono text-gray-600 mt-1",children:e.target_location_id})]})]}),o.jsxs("table",{className:"w-full text-left text-sm mb-8",children:[o.jsx("thead",{className:"border-b-2 border-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"py-2 font-bold text-gray-900",children:"CODIGO"}),o.jsx("th",{className:"py-2 font-bold text-gray-900",children:"DESCRIPCION"}),o.jsx("th",{className:"py-2 font-bold text-gray-900 text-right",children:"CANTIDAD"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:e.items.map((t,i)=>o.jsxs("tr",{children:[o.jsx("td",{className:"py-2 text-gray-600 font-mono",children:t.sku||t.item_id.substring(0,6)}),o.jsx("td",{className:"py-2 text-gray-900",children:t.item_name||"Item "+t.item_id}),o.jsx("td",{className:"py-2 text-gray-900 text-right font-medium",children:t.quantity})]},i))})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-12 pt-8 border-t border-gray-200",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 border-b border-gray-300 mb-2"}),o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Solicitado Por"}),o.jsx("p",{className:"text-xs text-gray-400",children:e.requested_by})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 border-b border-gray-300 mb-2"}),o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Despachado Por"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 border-b border-gray-300 mb-2"}),o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Recibido Por (Sello)"})]})]}),o.jsx("div",{className:"mt-8 text-center text-[10px] text-gray-400",children:"Documento interno de traslado. No vÃ¡lido como comprobante fiscal de venta. Generado por Hubbi Inventory Module."})]}),Ki=()=>{var m;const e=b.useRef(null),n=b.useRef(null),[t,i]=b.useState([]),[s,r]=b.useState(1),[a,d]=b.useState(null);b.useEffect(()=>{i([{id:"1",x:50,y:50,w:100,h:200,color:"#e0e7ff",label:"Estante A"},{id:"2",x:200,y:50,w:100,h:200,color:"#e0e7ff",label:"Estante B"},{id:"3",x:50,y:300,w:250,h:100,color:"#fee2e2",label:"Zona de Carga"}])},[]),b.useEffect(()=>{const f=e.current;if(!f)return;const h=f.getContext("2d");if(h){h.clearRect(0,0,f.width,f.height),h.save(),h.scale(s,s),h.strokeStyle="#f0f0f0",h.lineWidth=1;for(let u=0;u<f.width/s;u+=20)h.beginPath(),h.moveTo(u,0),h.lineTo(u,f.height/s),h.stroke();for(let u=0;u<f.height/s;u+=20)h.beginPath(),h.moveTo(0,u),h.lineTo(f.width/s,u),h.stroke();t.forEach(u=>{h.fillStyle=u.color,h.fillRect(u.x,u.y,u.w,u.h),h.strokeStyle=a===u.id?"#2563eb":"#94a3b8",h.lineWidth=a===u.id?2:1,h.strokeRect(u.x,u.y,u.w,u.h),h.fillStyle="#1e293b",h.font="12px sans-serif",h.textAlign="center",h.fillText(u.label,u.x+u.w/2,u.y+u.h/2)}),h.restore()}},[t,s,a]);const g=f=>{const h=e.current;if(!h)return;const u=h.getBoundingClientRect(),l=(f.clientX-u.left)/s,p=(f.clientY-u.top)/s,x=t.find(v=>l>=v.x&&l<=v.x+v.w&&p>=v.y&&p<=v.y+v.h);d(x?x.id:null)};return o.jsxs("div",{className:"flex h-full bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[o.jsxs("div",{className:"w-64 border-r border-gray-200 p-4 bg-gray-50 flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-bold border-b border-gray-200 pb-2",children:[o.jsx(vt,{size:20,className:"text-blue-600"}),o.jsx("h2",{children:"DiseÃ±ador de Bodega"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Herramientas"}),o.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-colors",children:[o.jsx(vt,{size:16})," Nuevo Estante"]}),o.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-colors",children:[o.jsx(Ai,{size:16})," Zona de Piso"]})]}),a&&o.jsxs("div",{className:"mt-auto bg-white p-3 rounded border border-gray-200 shadow-sm animate-in slide-in-from-bottom-5",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-2 uppercase",children:"Propiedades"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs text-gray-500",children:"Etiqueta"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-sm",value:(m=t.find(f=>f.id===a))==null?void 0:m.label,onChange:f=>i(t.map(h=>h.id===a?{...h,label:f.target.value}:h))})]})]})]}),o.jsxs("div",{className:"flex-1 relative bg-gray-100 overflow-hidden",ref:n,children:[o.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 bg-white shadow-md rounded-lg p-1 z-10",children:[o.jsx("button",{onClick:()=>r(f=>Math.max(.5,f-.1)),className:"p-2 hover:bg-gray-100 rounded",children:o.jsx(qi,{size:18,className:"text-gray-600"})}),o.jsxs("span",{className:"flex items-center text-xs font-mono text-gray-500 px-2 min-w-[3rem] justify-center",children:[Math.round(s*100),"%"]}),o.jsx("button",{onClick:()=>r(f=>Math.min(2,f+.1)),className:"p-2 hover:bg-gray-100 rounded",children:o.jsx(Vi,{size:18,className:"text-gray-600"})}),o.jsx("div",{className:"w-px bg-gray-200 my-1 mx-1"}),o.jsx("button",{className:"p-2 hover:bg-blue-50 text-blue-600 rounded",children:o.jsx(Oe,{size:18})})]}),o.jsx("div",{className:"overflow-auto w-full h-full flex justify-center items-center p-8",children:o.jsx("canvas",{ref:e,width:800,height:600,className:"bg-white shadow-xl cursor-crosshair",onMouseDown:g})})]})]})},Yi=()=>{const[e,n]=b.useState(!1),[t,i]=b.useState(null),s=r=>{n(!1),setTimeout(()=>{i({name:"Filtro Aceite Toyota",sku:r,stock:15,location:"Estante A-02"})},500)};return o.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[o.jsx("div",{className:"bg-blue-600 text-white p-4 pt-8 shadow-lg sticky top-0 z-20",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-lg font-bold",children:"Scanner Hubbi"}),o.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})})]})}),o.jsxs("div",{className:"flex-1 p-4 flex flex-col gap-6",children:[e?o.jsxs("div",{className:"bg-gray-900 rounded-2xl aspect-[4/3] flex items-center justify-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 border-2 border-red-500/50 animate-pulse"}),o.jsx("p",{className:"text-white/50 text-sm",children:"CÃ¡mara activa (Simulada)"}),o.jsxs("div",{className:"absolute bottom-4 flex gap-4",children:[o.jsx("button",{onClick:()=>s("SKU-123"),className:"bg-white text-black text-xs px-3 py-1 rounded",children:"Simular CÃ³digo 1"}),o.jsx("button",{onClick:()=>n(!1),className:"bg-white/20 text-white text-xs px-3 py-1 rounded",children:"Cancelar"})]})]}):o.jsxs("button",{onClick:()=>n(!0),className:"w-full aspect-square max-w-[200px] mx-auto bg-white rounded-3xl shadow-sm border-2 border-blue-100 flex flex-col items-center justify-center gap-4 hover:shadow-md transition-all active:scale-95",children:[o.jsx("div",{className:"bg-blue-600 p-4 rounded-full shadow-lg shadow-blue-600/30",children:o.jsx($i,{size:32,className:"text-white"})}),o.jsx("span",{className:"font-bold text-gray-600",children:"Escanear"})]}),t&&o.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 animate-in slide-in-from-bottom-10 fade-in",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-xl text-gray-900",children:t.name}),o.jsx("p",{className:"text-gray-400 font-mono text-sm",children:t.sku})]}),o.jsx("div",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold",children:"Activo"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("span",{className:"text-xs text-gray-500 uppercase block mb-1",children:"Stock"}),o.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t.stock})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("span",{className:"text-xs text-gray-500 uppercase block mb-1",children:"UbicaciÃ³n"}),o.jsx("span",{className:"text-lg font-semibold text-blue-600",children:t.location})]})]}),o.jsxs("div",{className:"mt-6 flex gap-3",children:[o.jsx("button",{className:"flex-1 bg-blue-600 text-white py-3 rounded-xl font-medium shadow-lg shadow-blue-600/20 active:bg-blue-700",children:"Ver Detalles"}),o.jsx("button",{className:"flex-1 bg-white border border-gray-200 text-gray-700 py-3 rounded-xl font-medium active:bg-gray-50",children:"Inventariar"})]})]})]})]})},Ve=Ze(),Ji=()=>{const[e,n]=b.useState([]),[t,i]=b.useState(null),[s,r]=b.useState(!1),[a,d]=b.useState([]),[g,m]=b.useState("");b.useEffect(()=>{(async()=>{const v=await y.data.query("SELECT * FROM com_hubbi_inventory_audits ORDER BY started_at DESC LIMIT 10");v&&Array.isArray(v)&&n(v.map(S=>({...S,lines:[]})))})()},[]);const f=async x=>{r(!0);const v=crypto.randomUUID(),S=await y.data.query(`SELECT s.item_id, s.quantity, i.name, i.sku 
             FROM com_hubbi_inventory_stock s 
             JOIN com_hubbi_inventory_items i ON s.item_id = i.id
             WHERE s.location_id = ?`,[x]);await y.data.execute("INSERT INTO com_hubbi_inventory_audits (id, location_id, status, started_at) VALUES (?, ?, 'open', ?)",[v,x,new Date().toISOString()]);for(const w of S||[])await y.data.execute("INSERT INTO com_hubbi_inventory_audit_lines (audit_id, item_id, expected_qty) VALUES (?, ?, ?)",[v,w.item_id,w.quantity]);const C={id:v,location_id:x,status:"open",started_at:new Date().toISOString(),lines:(S||[]).map(w=>({item_id:w.item_id,item_name:w.name,item_sku:w.sku,expected_qty:w.quantity,counted_qty:null,difference:null,notes:""}))};i(C),n([C,...e]),r(!1),y.notify.success("AuditorÃ­a iniciada")},h=b.useCallback((x,v,S)=>{t&&i({...t,lines:t.lines.map(C=>C.item_id===x?{...C,counted_qty:v,difference:v-C.expected_qty,notes:S||C.notes}:C)})},[t]),u=async()=>{if(t){r(!0);for(const x of t.lines)if(x.counted_qty!==null&&(await y.data.execute(`UPDATE com_hubbi_inventory_audit_lines 
                     SET counted_qty = ?, difference = ?, notes = ? 
                     WHERE audit_id = ? AND item_id = ?`,[x.counted_qty,x.difference,x.notes,t.id,x.item_id]),x.difference!==0)){const v=crypto.randomUUID();await y.data.execute(`INSERT INTO com_hubbi_inventory_movements (id, item_id, location_id, type, reason, quantity, created_by, created_at)
                         VALUES (?, ?, ?, 'ADJUST', 'Ajuste por auditorÃ­a fÃ­sica', ?, 'audit_system', ?)`,[v,x.item_id,t.location_id,Math.abs(x.difference),new Date().toISOString()]),await y.data.execute("UPDATE com_hubbi_inventory_stock SET quantity = ? WHERE item_id = ? AND location_id = ?",[x.counted_qty,x.item_id,t.location_id])}await y.data.execute("UPDATE com_hubbi_inventory_audits SET status = 'closed', closed_at = ? WHERE id = ?",[new Date().toISOString(),t.id]),y.notify.success("AuditorÃ­a finalizada. Ajustes aplicados."),i(null),r(!1)}},l=b.useMemo(()=>[Ve.accessor("item_name",{header:({column:x})=>o.jsxs("button",{onClick:()=>x.toggleSorting(),className:"flex items-center gap-1",children:["Producto ",o.jsx(ce,{size:14})]}),cell:x=>o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:x.getValue()}),o.jsx("div",{className:"text-xs text-gray-400 font-mono",children:x.row.original.item_sku})]})}),Ve.accessor("expected_qty",{header:({column:x})=>o.jsxs("button",{onClick:()=>x.toggleSorting(),className:"flex items-center gap-1",children:["Esperado ",o.jsx(ce,{size:14})]}),cell:x=>o.jsx("span",{className:"font-mono",children:x.getValue()})}),Ve.display({id:"counted",header:"Contado",cell:({row:x})=>{const v=x.original;return o.jsx("input",{type:"number",className:"w-20 text-center border rounded-lg py-1 font-mono",value:v.counted_qty??"",onChange:S=>h(v.item_id,parseInt(S.target.value)||0),disabled:(t==null?void 0:t.status)!=="open"})}}),Ve.accessor("difference",{header:"Diferencia",cell:x=>{const v=x.getValue();if(v===null)return null;const S=v===0?"bg-green-100 text-green-700":v>0?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700";return o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${S}`,children:[v===0?o.jsx(pe,{size:12}):o.jsx(bt,{size:12}),v>0?"+":"",v]})}})],[t,h]),p=yt({data:(t==null?void 0:t.lines)||[],columns:l,state:{sorting:a,globalFilter:g},onSortingChange:d,onGlobalFilterChange:m,getCoreRowModel:pt(),getSortedRowModel:xt(),getFilteredRowModel:ht()});return o.jsxs("div",{className:"flex h-full bg-white rounded-lg shadow-sm overflow-hidden",children:[o.jsxs("div",{className:"w-72 border-r border-gray-200 bg-gray-50 flex flex-col",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("h2",{className:"font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(Xt,{size:20,className:"text-blue-600"}),"AuditorÃ­as FÃ­sicas"]})}),o.jsx("div",{className:"p-4",children:o.jsx("button",{onClick:()=>f("default-location"),disabled:s,className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50",children:"+ Nueva AuditorÃ­a"})}),o.jsx("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:e.map(x=>o.jsxs("button",{onClick:()=>i(x),className:`w-full text-left p-3 rounded-lg border transition-colors ${(t==null?void 0:t.id)===x.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(x.started_at).toLocaleDateString()}),o.jsx("div",{className:"text-xs text-gray-500",children:x.status==="open"?"ðŸŸ¡ Abierta":"ðŸŸ¢ Cerrada"})]},x.id))})]}),o.jsx("div",{className:"flex-1 flex flex-col",children:t?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Conteo en Progreso"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t.lines.length," productos"]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),o.jsx("input",{type:"text",placeholder:"Buscar...",value:g,onChange:x=>m(x.target.value),className:"pl-9 pr-4 py-1.5 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.status==="open"&&o.jsxs("button",{onClick:u,disabled:s,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50",children:[o.jsx(Oe,{size:18})," Finalizar"]})]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:p.getHeaderGroups().map(x=>o.jsx("tr",{children:x.headers.map(v=>o.jsx("th",{className:"text-left p-3 font-semibold text-gray-600",children:fe(v.column.columnDef.header,v.getContext())},v.id))},x.id))}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:p.getRowModel().rows.map(x=>o.jsx("tr",{className:"hover:bg-gray-50",children:x.getVisibleCells().map(v=>o.jsx("td",{className:"p-3",children:fe(v.column.columnDef.cell,v.getContext())},v.id))},x.id))})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{size:48,className:"mx-auto mb-4 opacity-30"}),o.jsx("p",{children:"Selecciona o crea una auditorÃ­a"})]})})})]})},rn=()=>{const[e,n]=b.useState([]),[t,i]=b.useState(!0),[s,r]=b.useState(null),a=b.useCallback(async()=>{i(!0);const m=await y.data.query(`
            SELECT 
                s.item_id,
                s.location_id,
                s.quantity as current_qty,
                s.min_stock,
                s.reorder_point,
                i.name as item_name,
                i.sku as item_sku,
                l.name as location_name
            FROM com_hubbi_inventory_stock s
            JOIN com_hubbi_inventory_items i ON s.item_id = i.id
            LEFT JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
            WHERE s.quantity <= s.reorder_point OR s.quantity <= s.min_stock
            ORDER BY (s.min_stock - s.quantity) DESC
        `);if(m&&Array.isArray(m)){const f=m.map(h=>({...h,severity:h.current_qty<=h.min_stock?"critical":h.current_qty<=h.reorder_point?"warning":"ok"}));n(f)}r(new Date),i(!1)},[]);b.useEffect(()=>{a();const m=()=>{a()};return y.events.on("inventory:stock:increased",m),y.events.on("inventory:stock:decreased",m),()=>{y.events.off("inventory:stock:increased",m),y.events.off("inventory:stock:decreased",m)}},[a]);const d=e.filter(m=>m.severity==="critical").length,g=e.filter(m=>m.severity==="warning").length;return{alerts:e,criticalCount:d,warningCount:g,loading:t,lastCheck:s,refresh:a}},an=({compact:e=!1})=>{const{alerts:n,criticalCount:t,warningCount:i,loading:s,lastCheck:r,refresh:a}=rn(),d=e?n.slice(0,3):n;return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yt,{size:20,className:"text-orange-500"}),o.jsx("h3",{className:"font-semibold text-gray-900",children:"Alertas de Stock"}),t>0&&o.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:t}),i>0&&o.jsx("span",{className:"bg-yellow-500 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:i})]}),o.jsx("button",{onClick:a,disabled:s,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 disabled:opacity-50",children:o.jsx(Oi,{size:16,className:s?"animate-spin":""})})]}),o.jsx("div",{className:`${e?"max-h-32":"max-h-64"} overflow-auto`,children:d.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(Yt,{size:32,className:"mx-auto mb-2 opacity-30"}),o.jsx("p",{children:"No hay alertas de stock"})]}):o.jsx("div",{className:"divide-y divide-gray-100",children:d.map((g,m)=>o.jsxs("div",{className:`p-3 flex items-center gap-3 ${g.severity==="critical"?"bg-red-50":g.severity==="warning"?"bg-yellow-50":""}`,children:[o.jsx(bt,{size:18,className:g.severity==="critical"?"text-red-500":"text-yellow-500"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-gray-900 truncate",children:g.item_name}),o.jsxs("div",{className:"text-xs text-gray-500",children:[g.location_name||"Sin ubicaciÃ³n"," â€¢ Stock: ",g.current_qty," / MÃ­nimo: ",g.min_stock]})]}),o.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded ${g.severity==="critical"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:g.severity==="critical"?"CRÃTICO":"BAJO"})]},m))})}),r&&o.jsxs("div",{className:"p-2 border-t border-gray-100 text-xs text-gray-400 text-center",children:["Ãšltima verificaciÃ³n: ",r.toLocaleTimeString()]})]})},W="com.hubbi.inventory",Xi="com.hubbi.accounting";function Ie(){const[e,n]=b.useState([]),[t,i]=b.useState(null),[s,r]=b.useState(null),[a,d]=b.useState(!0),[g,m]=b.useState(null);b.useEffect(()=>{f()},[]);const f=async()=>{var N;d(!0),await h();const w=await y.db.query("SELECT * FROM hubbi_fiscal_config WHERE id = 'default'",[],{moduleId:W});w&&w.length>0&&r(w[0]),!await y.modules.isInstalled(Xi)&&((N=w[0])==null?void 0:N.managed_by)!==W&&await y.db.execute("UPDATE hubbi_fiscal_config SET managed_by = ? WHERE id = 'default'",[W],{moduleId:W}),await u(),await l(),d(!1)},h=async()=>{await y.db.execute(`
      CREATE TABLE IF NOT EXISTS hubbi_fiscal_config (
        id TEXT PRIMARY KEY DEFAULT 'default',
        lock_after_periods INTEGER DEFAULT 2,
        auto_close BOOLEAN DEFAULT FALSE,
        period_type TEXT DEFAULT 'monthly',
        fiscal_year_start_month INTEGER DEFAULT 1,
        managed_by TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `,[],{moduleId:W}),await y.db.execute(`
      INSERT OR IGNORE INTO hubbi_fiscal_config (id, lock_after_periods, period_type)
      VALUES ('default', 2, 'monthly')
    `,[],{moduleId:W}),await y.db.execute(`
      CREATE TABLE IF NOT EXISTS hubbi_fiscal_periods (
        id TEXT PRIMARY KEY,
        year INTEGER NOT NULL,
        month INTEGER NOT NULL,
        quarter INTEGER,
        start_date DATE NOT NULL,
        end_date DATE NOT NULL,
        status TEXT DEFAULT 'open',
        is_current BOOLEAN DEFAULT FALSE,
        created_by_module TEXT,
        closed_by TEXT,
        closed_at DATETIME,
        locked_at DATETIME,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        UNIQUE(year, month)
      )
    `,[],{moduleId:W})},u=async()=>{const w=await y.db.query("SELECT * FROM hubbi_fiscal_periods WHERE is_current = TRUE",[],{moduleId:W});if(!w||w.length===0){const F=new Date,N=F.getFullYear(),O=F.getMonth()+1,K=`${N}-${String(O).padStart(2,"0")}`,G=new Date(N,O-1,1).toISOString().split("T")[0],M=new Date(N,O,0).toISOString().split("T")[0];await y.db.execute(`
        INSERT OR IGNORE INTO hubbi_fiscal_periods 
          (id, year, month, start_date, end_date, status, is_current, created_by_module)
        VALUES (?, ?, ?, ?, ?, 'open', TRUE, ?)
      `,[K,N,O,G,M,W],{moduleId:W})}},l=async()=>{const w=await y.db.query("SELECT * FROM hubbi_fiscal_periods ORDER BY year DESC, month DESC",[],{moduleId:W});if(w){n(w);const F=w.find(N=>N.is_current);i(F||null),!g&&F&&m(F.id)}},p=b.useCallback(w=>{if(!s||!t)return!1;const F=e.find(G=>G.id===w);if(!F||F.status==="closed"||F.status==="locked")return!1;const N=t.year*12+t.month,O=F.year*12+F.month;return N-O<=s.lock_after_periods},[s,t,e]);return{periods:e,currentPeriod:t,config:s,loading:a,selectedPeriodId:g,selectPeriod:w=>{m(w)},getSelectedPeriod:()=>e.find(w=>w.id===g)||t,isPeriodEditable:p,closePeriod:async(w,F)=>{const N=e.find(O=>O.id===w);if(!N||N.status!=="open")return!1;if(await y.db.execute(`UPDATE hubbi_fiscal_periods 
       SET status = 'closed', closed_by = ?, closed_at = ? 
       WHERE id = ?`,[F,new Date().toISOString(),w],{moduleId:W}),N.is_current){const O=N.month===12?1:N.month+1,K=N.month===12?N.year+1:N.year,G=`${K}-${String(O).padStart(2,"0")}`,M=new Date(K,O-1,1).toISOString().split("T")[0],H=new Date(K,O,0).toISOString().split("T")[0];await y.db.execute("UPDATE hubbi_fiscal_periods SET is_current = FALSE WHERE id = ?",[w],{moduleId:W}),await y.db.execute(`
        INSERT OR IGNORE INTO hubbi_fiscal_periods 
          (id, year, month, start_date, end_date, status, is_current, created_by_module)
        VALUES (?, ?, ?, ?, ?, 'open', TRUE, ?)
      `,[G,K,O,M,H,W],{moduleId:W})}return await l(),!0},updateConfig:async w=>{const F=[],N=[];w.lock_after_periods!==void 0&&(F.push("lock_after_periods = ?"),N.push(w.lock_after_periods)),w.auto_close!==void 0&&(F.push("auto_close = ?"),N.push(w.auto_close)),w.period_type!==void 0&&(F.push("period_type = ?"),N.push(w.period_type)),F.length>0&&(F.push("updated_at = ?"),N.push(new Date().toISOString()),N.push("default"),await y.db.execute(`UPDATE hubbi_fiscal_config SET ${F.join(", ")} WHERE id = ?`,N,{moduleId:W}),await f())},refreshPeriods:l}}async function qe(){const e=await y.db.query("SELECT * FROM hubbi_fiscal_periods WHERE is_current = TRUE",[],{moduleId:W});return e&&e.length>0?e[0]:null}async function ln(e){const n=await y.db.query("SELECT * FROM hubbi_fiscal_periods WHERE id = ?",[e],{moduleId:W});return n&&n.length>0?n[0]:null}async function wt(e){const[n,t,i]=await Promise.all([ln(e),qe(),y.db.query("SELECT * FROM hubbi_fiscal_config WHERE id = 'default'",[],{moduleId:W})]);if(!n||!t||!i||i.length===0)return!1;const s=i[0];if(n.status==="closed"||n.status==="locked")return!1;const r=t.year*12+t.month,a=n.year*12+n.month;return r-a<=s.lock_after_periods}const dn=["","Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Zi=({onChange:e,className:n=""})=>{const{periods:t,currentPeriod:i,selectedPeriodId:s,selectPeriod:r,isPeriodEditable:a,loading:d}=Ie(),g=u=>{r(u),e==null||e(u)},m=u=>`${dn[u.month]} ${u.year}`,f=u=>u.is_current?o.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:"Actual"}):u.status==="closed"?o.jsx("span",{className:"ml-2 text-xs bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded",children:"Cerrado"}):u.status==="locked"?o.jsx("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-1.5 py-0.5 rounded",children:"Bloqueado"}):null,h=t.find(u=>u.id===s)||i;return d?o.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm ${n}`,children:[o.jsx(_t,{size:16,className:"text-gray-400"}),o.jsx("span",{className:"text-gray-400",children:"Cargando..."})]}):o.jsx("div",{className:`relative inline-block ${n}`,children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[o.jsx(_t,{size:16,className:"text-blue-600"}),o.jsx("span",{className:"font-medium text-gray-900",children:h?m(h):"Seleccionar perÃ­odo"}),h&&!a(h.id)&&o.jsx("span",{title:"Solo lectura",children:o.jsx(De,{size:14,className:"text-amber-500"})}),o.jsx(Jt,{size:16,className:"text-gray-400 group-open:rotate-180 transition-transform"})]}),o.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-xl z-50 max-h-80 overflow-auto",children:[t.map(u=>{const l=u.id===s,p=a(u.id);return o.jsxs("button",{onClick:()=>g(u.id),className:`w-full text-left px-4 py-3 flex items-center justify-between hover:bg-gray-50 border-b border-gray-50 last:border-0 ${l?"bg-blue-50":""}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[l&&o.jsx(pe,{size:16,className:"text-blue-600"}),o.jsx("span",{className:`${l?"font-semibold text-blue-900":"text-gray-700"}`,children:m(u)}),f(u)]}),!p&&o.jsx(De,{size:14,className:"text-gray-400"})]},u.id)}),t.length===0&&o.jsx("div",{className:"px-4 py-6 text-center text-gray-400 text-sm",children:"No hay perÃ­odos disponibles"})]})]})})},Qi=({className:e=""})=>{const{currentPeriod:n,loading:t}=Ie();return t||!n?null:o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium ${e}`,children:[o.jsx(_t,{size:12}),dn[n.month]," ",n.year]})};function ye(){const[e,n]=b.useState({assignedSubHubId:null,activeSubHubId:null,subHubs:[],canViewAll:!1,canEditOwn:!0,canEditAll:!1,canSwitchActive:!1}),[t,i]=b.useState(!0);b.useEffect(()=>{s()},[]);const s=async()=>{i(!0);const f=y.getContext(),h=(f==null?void 0:f.subHubId)||null,u=y.permissions.has("inventory:view_all_subhubs"),l=y.permissions.has("inventory:edit_own_subhub"),p=y.permissions.has("inventory:edit_all_subhubs"),x=y.permissions.has("inventory:switch_active_subhub");let v=[];try{v=await y.subHubs.list()||[]}catch{v=[]}let S=h;if(x){const C=await y.settings.get("active_subhub_id");C&&v.some(w=>w.id===C)&&(S=C)}n({assignedSubHubId:h,activeSubHubId:S,subHubs:v,canViewAll:u,canEditOwn:l,canEditAll:p,canSwitchActive:x}),i(!1)},r=b.useCallback(async f=>e.canSwitchActive?(await y.settings.set("active_subhub_id",f),n(h=>({...h,activeSubHubId:f})),y.notify("Sucursal activa cambiada","success"),!0):(y.notify("No tienes permiso para cambiar de sucursal","error"),!1),[e.canSwitchActive]),a=b.useCallback(f=>!!(e.canEditAll||e.canEditOwn&&f===e.assignedSubHubId),[e.canEditAll,e.canEditOwn,e.assignedSubHubId]),d=b.useCallback((f="sub_hub_id")=>e.canViewAll?e.activeSubHubId?` AND ${f} = '${e.activeSubHubId}'`:"":e.assignedSubHubId?` AND ${f} = '${e.assignedSubHubId}'`:" AND 1=0",[e.canViewAll,e.activeSubHubId,e.assignedSubHubId]),g=b.useCallback(()=>e.canSwitchActive&&e.activeSubHubId?e.activeSubHubId:e.assignedSubHubId,[e.canSwitchActive,e.activeSubHubId,e.assignedSubHubId]),m=b.useCallback(()=>{const f=e.activeSubHubId||e.assignedSubHubId,h=e.subHubs.find(u=>u.id===f);return(h==null?void 0:h.name)||"Sin Sucursal"},[e.activeSubHubId,e.assignedSubHubId,e.subHubs]);return{...e,loading:t,setActiveSubHub:r,canEditSubHub:a,getSubHubWhereClause:d,getEffectiveSubHubId:g,getActiveSubHubName:m,refreshContext:s}}function eo(){const e=y.getContext();return(e==null?void 0:e.subHubId)||null}async function to(e,n){const t=y.getContext(),i=(t==null?void 0:t.subHubId)||null;return n==="view"?y.permissions.has("inventory:view_all_subhubs")?!0:e===i:n==="edit"?!!(y.permissions.has("inventory:edit_all_subhubs")||y.permissions.has("inventory:edit_own_subhub")&&e===i):!1}const no=({onChange:e,className:n="",compact:t=!1})=>{const{subHubs:i,activeSubHubId:s,assignedSubHubId:r,canSwitchActive:a,canEditSubHub:d,setActiveSubHub:g,getActiveSubHubName:m,loading:f}=ye(),h=async u=>{await g(u)&&(e==null||e(u))};return a?f?o.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm ${n}`,children:[o.jsx(je,{size:16,className:"text-gray-400"}),o.jsx("span",{className:"text-gray-400",children:"Cargando..."})]}):i.length===0?o.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm ${n}`,children:[o.jsx(je,{size:16,className:"text-gray-500"}),o.jsx("span",{className:"text-gray-500",children:"Sin Sucursales"})]}):o.jsx("div",{className:`relative inline-block ${n}`,children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[o.jsx(je,{size:16,className:"text-indigo-600"}),o.jsx("span",{className:`font-medium text-gray-900 ${t?"hidden sm:inline":""}`,children:m()}),o.jsx(Jt,{size:16,className:"text-gray-400 group-open:rotate-180 transition-transform"})]}),o.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-xl z-50 max-h-80 overflow-auto",children:i.map(u=>{const l=u.id===s,p=u.id===r,x=d(u.id);return o.jsxs("button",{onClick:()=>h(u.id),className:`w-full text-left px-4 py-3 flex items-center justify-between hover:bg-gray-50 border-b border-gray-50 last:border-0 ${l?"bg-indigo-50":""}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[l&&o.jsx(pe,{size:16,className:"text-indigo-600"}),o.jsxs("div",{children:[o.jsx("span",{className:`block ${l?"font-semibold text-indigo-900":"text-gray-700"}`,children:u.name}),p&&o.jsx("span",{className:"text-xs text-gray-400",children:"Tu sucursal asignada"})]})]}),o.jsx("div",{className:"flex items-center gap-1",children:!x&&o.jsx("span",{className:"text-xs bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded",children:"Solo lectura"})})]},u.id)})})]})}):o.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg text-sm ${n}`,children:[o.jsx(je,{size:16,className:"text-gray-500"}),o.jsx("span",{className:"text-gray-700",children:m()}),o.jsx("span",{title:"No puedes cambiar de sucursal",children:o.jsx(De,{size:14,className:"text-gray-400"})})]})},io=({className:e=""})=>{const{getActiveSubHubName:n,loading:t,canEditSubHub:i,activeSubHubId:s}=ye();if(t)return null;const r=s?i(s):!1;return o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium ${r?"bg-indigo-50 text-indigo-700":"bg-gray-100 text-gray-600"} ${e}`,children:[o.jsx(je,{size:12}),n(),!r&&o.jsx(De,{size:10})]})},oo=[{value:"correction",label:"CorrecciÃ³n de inventario"},{value:"damage",label:"Producto daÃ±ado"},{value:"expired",label:"Producto vencido"},{value:"internal_use",label:"Uso interno"},{value:"found",label:"Producto encontrado"},{value:"other",label:"Otro"}],so=({onClose:e,onSuccess:n})=>{var oe;const[t,i]=b.useState(""),[s,r]=b.useState([]),[a,d]=b.useState(null),[g,m]=b.useState([]),[f,h]=b.useState(""),[u,l]=b.useState("add"),[p,x]=b.useState(0),[v,S]=b.useState("correction"),[C,w]=b.useState(""),[F,N]=b.useState(!1),[O,K]=b.useState(!1),{currentPeriod:G,isPeriodEditable:M}=Ie(),{canEditSubHub:H,getEffectiveSubHubId:X}=ye(),z=b.useCallback(async()=>{if(!t.trim()){r([]);return}N(!0);const R=await y.db.query(`SELECT * FROM com_hubbi_inventory_items 
       WHERE (name LIKE ? OR sku LIKE ? OR barcode LIKE ?)
       AND is_active = TRUE
       LIMIT 10`,[`%${t}%`,`%${t}%`,`%${t}%`],{moduleId:"com.hubbi.inventory"});r(R),N(!1)},[t]),Y=async R=>{d(R),r([]),i(R.name);const ie=await y.db.query(`SELECT s.location_id as locationId, l.name as locationName, s.quantity as currentStock
       FROM com_hubbi_inventory_stock s
       JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
       WHERE s.item_id = ?`,[R.id],{moduleId:"com.hubbi.inventory"});m(ie),ie.length>0&&h(ie[0].locationId)},J=async()=>{var ke,ze,Ue;if(!a||!f||p<=0){y.notify("Completa todos los campos","warning");return}if(G&&!M(G.id)){y.notify("El perÃ­odo actual estÃ¡ cerrado. No se puede ajustar.","error");return}const R=X();if(R&&!H(R)){y.notify("No tienes permiso para editar esta sucursal.","error");return}if(p>100&&!await((ze=(ke=y.auth).requireRevalidation)==null?void 0:ze.call(ke,"Ajuste de inventario mayor a 100 unidades"))){y.notify("RevalidaciÃ³n de identidad cancelada","warning");return}K(!0);const ie=crypto.randomUUID(),V=u==="add"?p:-p,ae=u==="add"?"IN":"OUT",ge=a.weighted_average_cost||0;await y.db.execute(`
      INSERT INTO com_hubbi_inventory_movements 
        (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value, created_by, period_id, sub_hub_id)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `,[ie,a.id,f,ae,v+(C?`: ${C}`:""),Math.abs(V),ge,Math.abs(V)*ge,((Ue=y.getContext())==null?void 0:Ue.userId)||"system",(G==null?void 0:G.id)||null,R],{moduleId:"com.hubbi.inventory"}),await y.db.execute(`
      INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
      VALUES (?, ?, ?)
      ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = quantity + ?
    `,[a.id,f,V,V],{moduleId:"com.hubbi.inventory"}),K(!1),y.notify(`Ajuste registrado: ${u==="add"?"+":"-"}${p} ${a.name}`,"success"),n==null||n(),e()},Z=((oe=g.find(R=>R.locationId===f))==null?void 0:oe.currentStock)||0,L=u==="add"?Z+p:Z-p;return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(Ne,{className:"text-indigo-600",size:20}),"Ajuste RÃ¡pido"]}),o.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",children:o.jsx(Re,{size:20,className:"text-gray-500"})})]}),o.jsxs("div",{className:"p-6 space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar Producto"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",value:t,onChange:R=>i(R.target.value),onKeyDown:R=>R.key==="Enter"&&z(),placeholder:"CÃ³digo, SKU o nombre...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),o.jsx($e,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),o.jsx("button",{onClick:z,disabled:F,className:"absolute right-2 top-1.5 px-3 py-1 bg-indigo-600 text-white text-sm rounded hover:bg-indigo-700",children:"Buscar"})]}),s.length>0&&o.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-auto",children:s.map(R=>o.jsxs("button",{onClick:()=>Y(R),className:"w-full text-left px-4 py-2 hover:bg-gray-50 border-b last:border-0",children:[o.jsx("div",{className:"font-medium",children:R.name}),o.jsxs("div",{className:"text-xs text-gray-500",children:["SKU: ",R.sku]})]},R.id))})]}),a&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg",children:[o.jsx("div",{className:"font-medium text-indigo-900",children:a.name}),o.jsxs("div",{className:"text-sm text-indigo-700",children:["SKU: ",a.sku]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bodega"}),o.jsx("select",{value:f,onChange:R=>h(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:g.map(R=>o.jsxs("option",{value:R.locationId,children:[R.locationName," (Stock: ",R.currentStock,")"]},R.locationId))})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>l("add"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 ${u==="add"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(St,{size:18})," Entrada"]}),o.jsxs("button",{onClick:()=>l("subtract"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 ${u==="subtract"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(Pi,{size:18})," Salida"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad"}),o.jsx("input",{type:"number",value:p,onChange:R=>x(Math.max(0,parseInt(R.target.value)||0)),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RazÃ³n"}),o.jsx("select",{value:v,onChange:R=>S(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:oo.map(R=>o.jsx("option",{value:R.value,children:R.label},R.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),o.jsx("input",{type:"text",value:C,onChange:R=>w(R.target.value),placeholder:"Detalles adicionales...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Stock resultante:"}),o.jsxs("span",{className:`font-bold ${L<0?"text-red-600":"text-gray-900"}`,children:[Z," â†’ ",L]})]}),L<0&&o.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm",children:[o.jsx(bt,{size:16}),"El stock resultante serÃ¡ negativo"]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50 rounded-b-xl",children:[o.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg",children:"Cancelar"}),o.jsxs("button",{onClick:J,disabled:!a||!f||p<=0||O,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:[o.jsx(Oe,{size:16}),O?"Guardando...":"Guardar Ajuste"]})]})]})})},ro=[{value:"initial",label:"Carga Inicial",description:"Crear productos y establecer stock inicial"},{value:"adjust",label:"Ajuste Masivo",description:"Ajustar cantidades existentes (+/-)"},{value:"sync",label:"SincronizaciÃ³n",description:"Reemplazar stock actual con valores del Excel"}],ao=({onClose:e,onSuccess:n})=>{const[t,i]=b.useState(null),[s,r]=b.useState("initial"),[a,d]=b.useState(""),[g,m]=b.useState([]),[f,h]=b.useState([]),[u,l]=b.useState(!1),[p,x]=b.useState("upload"),[v,S]=b.useState({success:0,errors:0}),{currentPeriod:C,isPeriodEditable:w}=Ie(),{getEffectiveSubHubId:F,canEditSubHub:N}=ye();b.useState(()=>{(async()=>{const H=await y.db.query("SELECT id, name FROM com_hubbi_inventory_locations WHERE is_active = TRUE",[],{moduleId:"com.hubbi.inventory"});m(H),H.length>0&&d(H[0].id)})()});const O=b.useCallback(async M=>{var ie;const H=(ie=M.target.files)==null?void 0:ie[0];if(!H)return;i(H);const z=(await H.text()).split(`
`),Y=z[0].toLowerCase().split(",").map(V=>V.trim()),J=Y.findIndex(V=>V.includes("sku")||V.includes("codigo")),Z=Y.findIndex(V=>V.includes("name")||V.includes("nombre")),L=Y.findIndex(V=>V.includes("qty")||V.includes("quantity")||V.includes("cantidad")),oe=Y.findIndex(V=>V.includes("cost")||V.includes("costo")||V.includes("precio"));if(J===-1||L===-1){y.notify("El archivo debe tener columnas SKU y Cantidad","error");return}const R=[];for(let V=1;V<z.length;V++){const ae=z[V].split(",").map(ge=>ge.trim());ae[J]&&R.push({sku:ae[J],name:Z>=0?ae[Z]:void 0,quantity:parseFloat(ae[L])||0,cost:oe>=0?parseFloat(ae[oe]):void 0})}h(R),x("preview")},[]),K=async()=>{var Y,J,Z;if(C&&!w(C.id)){y.notify("El perÃ­odo actual estÃ¡ cerrado","error");return}const M=F();if(M&&!N(M)){y.notify("No tienes permiso para editar esta sucursal","error");return}if(!await((J=(Y=y.auth).requireRevalidation)==null?void 0:J.call(Y,"ImportaciÃ³n masiva de inventario"))){y.notify("RevalidaciÃ³n de identidad cancelada","warning");return}l(!0);let X=0,z=0;for(const L of f)try{const oe=await y.db.query("SELECT id FROM com_hubbi_inventory_items WHERE sku = ?",[L.sku],{moduleId:"com.hubbi.inventory"});let R;if(oe.length===0&&s==="initial"&&L.name)R=crypto.randomUUID(),await y.db.execute(`
            INSERT INTO com_hubbi_inventory_items (id, sku, name, weighted_average_cost, is_active)
            VALUES (?, ?, ?, ?, TRUE)
          `,[R,L.sku,L.name,L.cost||0],{moduleId:"com.hubbi.inventory"});else if(oe.length>0)R=oe[0].id;else{L.error="Producto no encontrado",z++;continue}if(s==="initial")await y.db.execute(`
            INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
            VALUES (?, ?, ?)
            ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = ?
          `,[R,a,L.quantity,L.quantity],{moduleId:"com.hubbi.inventory"});else if(s==="adjust"){const ie=crypto.randomUUID();await y.db.execute(`
            INSERT INTO com_hubbi_inventory_movements 
              (id, item_id, location_id, type, reason, quantity, created_by, period_id)
            VALUES (?, ?, ?, 'ADJUST', 'excel_import', ?, ?, ?)
          `,[ie,R,a,L.quantity,(Z=y.getContext())==null?void 0:Z.userId,C==null?void 0:C.id],{moduleId:"com.hubbi.inventory"}),await y.db.execute(`
            INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
            VALUES (?, ?, ?)
            ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = quantity + ?
          `,[R,a,L.quantity,L.quantity],{moduleId:"com.hubbi.inventory"})}else s==="sync"&&await y.db.execute(`
            INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
            VALUES (?, ?, ?)
            ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = ?
          `,[R,a,L.quantity,L.quantity],{moduleId:"com.hubbi.inventory"});X++}catch{L.error="Error al procesar",z++}S({success:X,errors:z}),x("result"),l(!1),X>0&&(n==null||n(X))},G=()=>{const M=`SKU,Nombre,Cantidad,Costo
PROD-001,Producto Ejemplo,100,25.50
`,H=new Blob([M],{type:"text/csv"}),X=URL.createObjectURL(H),z=document.createElement("a");z.href=X,z.download="plantilla_inventario.csv",z.click()};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(en,{className:"text-green-600",size:20}),"Importar desde Excel"]}),o.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",children:o.jsx(Re,{size:20,className:"text-gray-500"})})]}),o.jsxs("div",{className:"p-6 flex-1 overflow-auto",children:[p==="upload"&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modo de importaciÃ³n"}),o.jsx("div",{className:"space-y-2",children:ro.map(M=>o.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer ${s===M.value?"border-green-500 bg-green-50":"border-gray-200 hover:bg-gray-50"}`,children:[o.jsx("input",{type:"radio",name:"mode",value:M.value,checked:s===M.value,onChange:()=>r(M.value),className:"mt-1"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:M.label}),o.jsx("div",{className:"text-sm text-gray-500",children:M.description})]})]},M.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bodega destino"}),o.jsx("select",{value:a,onChange:M=>d(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:g.map(M=>o.jsx("option",{value:M.id,children:M.name},M.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Archivo"}),o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-green-500 transition-colors",children:[o.jsx(on,{size:40,className:"mx-auto text-gray-400 mb-3"}),o.jsx("p",{className:"text-gray-600 mb-2",children:"Arrastra tu archivo Excel o CSV aquÃ­"}),o.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:O,className:"hidden",id:"excel-input"}),o.jsx("label",{htmlFor:"excel-input",className:"inline-block px-4 py-2 bg-green-600 text-white rounded-lg cursor-pointer hover:bg-green-700",children:"Seleccionar archivo"})]})]}),o.jsxs("button",{onClick:G,className:"flex items-center gap-2 text-green-600 hover:text-green-700 text-sm",children:[o.jsx(Qt,{size:16}),"Descargar plantilla de ejemplo"]})]}),p==="preview"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-sm text-gray-600",children:[f.length," productos encontrados en ",t==null?void 0:t.name]}),o.jsx("button",{onClick:()=>x("upload"),className:"text-sm text-blue-600 hover:underline",children:"Cambiar archivo"})]}),o.jsx("div",{className:"border rounded-lg overflow-hidden max-h-64 overflow-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"SKU"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Nombre"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Cantidad"}),o.jsx("th",{className:"px-3 py-2 text-right",children:"Costo"})]})}),o.jsx("tbody",{children:f.slice(0,50).map((M,H)=>o.jsxs("tr",{className:M.error?"bg-red-50":"hover:bg-gray-50",children:[o.jsx("td",{className:"px-3 py-2 font-mono",children:M.sku}),o.jsx("td",{className:"px-3 py-2",children:M.name||"-"}),o.jsx("td",{className:"px-3 py-2 text-right",children:M.quantity}),o.jsx("td",{className:"px-3 py-2 text-right",children:M.cost??"-"})]},H))})]})}),f.length>50&&o.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Mostrando 50 de ",f.length," productos"]})]}),p==="result"&&o.jsxs("div",{className:"text-center py-8",children:[v.errors===0?o.jsx(pe,{size:48,className:"mx-auto text-green-600 mb-4"}):o.jsx(Ei,{size:48,className:"mx-auto text-amber-500 mb-4"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ImportaciÃ³n completada"}),o.jsxs("p",{className:"text-gray-600",children:[v.success," productos importados exitosamente",v.errors>0&&`, ${v.errors} errores`]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[o.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg",children:p==="result"?"Cerrar":"Cancelar"}),p==="preview"&&o.jsxs("button",{onClick:K,disabled:u||f.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:[o.jsx(on,{size:16}),u?"Importando...":`Importar ${f.length} productos`]})]})]})})},lo=[{value:"stock",label:"Reporte de Stock",description:"Stock actual por bodega y producto"},{value:"kardex",label:"Kardex",description:"Historial de movimientos por producto"},{value:"valuation",label:"ValorizaciÃ³n",description:"Stock con costos y valor total"},{value:"low_stock",label:"Stock Bajo",description:"Productos por debajo del punto de reorden"}],uo=({onClose:e})=>{const[n,t]=b.useState("stock"),[i,s]=b.useState("all"),[r,a]=b.useState([]),[d,g]=b.useState(""),[m,f]=b.useState(""),[h,u]=b.useState(!1),[l,p]=b.useState(!1),{getEffectiveSubHubId:x}=ye();b.useState(()=>{(async()=>{const C=await y.db.query("SELECT id, name FROM com_hubbi_inventory_locations WHERE is_active = TRUE",[],{moduleId:"com.hubbi.inventory"});a(C)})()});const v=async()=>{var X;u(!0);let S=[],C="",w=[];const F=x(),N=F?`AND l.sub_hub_id = '${F}'`:"",O=i!=="all"?`AND s.location_id = '${i}'`:"";if(n==="stock")C="stock_report",w=["SKU","Producto","Bodega","Stock","Unidad","MÃ­nimo","Reorden"],S=await y.db.query(`
        SELECT 
          i.sku, i.name as producto, l.name as bodega, 
          s.quantity as stock, i.primary_unit as unidad,
          s.min_stock as minimo, s.reorder_point as reorden
        FROM com_hubbi_inventory_stock s
        JOIN com_hubbi_inventory_items i ON s.item_id = i.id
        JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
        WHERE i.is_active = TRUE ${O} ${N}
        ORDER BY i.name
      `,[],{moduleId:"com.hubbi.inventory"});else if(n==="kardex"){C="kardex",w=["Fecha","SKU","Producto","Bodega","Tipo","RazÃ³n","Cantidad","Costo","Total"];const z=d&&m?`AND m.created_at BETWEEN '${d}' AND '${m}'`:"";S=await y.db.query(`
        SELECT 
          m.created_at as fecha, i.sku, i.name as producto, l.name as bodega,
          m.type as tipo, m.reason as razon, m.quantity as cantidad,
          m.cost_at_moment as costo, m.total_value as total
        FROM com_hubbi_inventory_movements m
        JOIN com_hubbi_inventory_items i ON m.item_id = i.id
        JOIN com_hubbi_inventory_locations l ON m.location_id = l.id
        WHERE 1=1 ${O} ${N} ${z}
        ORDER BY m.created_at DESC
        LIMIT 5000
      `,[],{moduleId:"com.hubbi.inventory"})}else n==="valuation"?(C="valorizacion",w=["SKU","Producto","Bodega","Stock","Costo Unitario","Valor Total"],S=await y.db.query(`
        SELECT 
          i.sku, i.name as producto, l.name as bodega, s.quantity as stock,
          i.weighted_average_cost as costo_unitario,
          (s.quantity * i.weighted_average_cost) as valor_total
        FROM com_hubbi_inventory_stock s
        JOIN com_hubbi_inventory_items i ON s.item_id = i.id
        JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
        WHERE i.is_active = TRUE ${O} ${N}
        ORDER BY valor_total DESC
      `,[],{moduleId:"com.hubbi.inventory"})):n==="low_stock"&&(C="stock_bajo",w=["SKU","Producto","Bodega","Stock Actual","Punto Reorden","DÃ©ficit"],S=await y.db.query(`
        SELECT 
          i.sku, i.name as producto, l.name as bodega, s.quantity as stock_actual,
          s.reorder_point as punto_reorden,
          (s.reorder_point - s.quantity) as deficit
        FROM com_hubbi_inventory_stock s
        JOIN com_hubbi_inventory_items i ON s.item_id = i.id
        JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
        WHERE i.is_active = TRUE 
          AND s.quantity <= s.reorder_point 
          ${O} ${N}
        ORDER BY deficit DESC
      `,[],{moduleId:"com.hubbi.inventory"}));const K=[w.join(","),...S.map(z=>w.map((Y,J)=>{const Z=Object.keys(z)[J],L=z[Z];return typeof L=="string"&&L.includes(",")?`"${L}"`:L}).join(","))].join(`
`),G=new Blob(["\uFEFF"+K],{type:"text/csv;charset=utf-8"}),M=URL.createObjectURL(G),H=document.createElement("a");H.href=M,H.download=`${C}_${new Date().toISOString().split("T")[0]}.csv`,H.click(),URL.revokeObjectURL(M),await y.db.execute(`
      INSERT INTO com_hubbi_inventory_export_logs (id, export_type, record_count, exported_by, exported_at)
      VALUES (?, ?, ?, ?, ?)
    `,[crypto.randomUUID(),n,S.length,((X=y.getContext())==null?void 0:X.userId)||"system",new Date().toISOString()],{moduleId:"com.hubbi.inventory"}),u(!1),p(!0),y.notify(`Exportados ${S.length} registros`,"success")};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(en,{className:"text-blue-600",size:20}),"Exportar a Excel"]}),o.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",children:o.jsx(Re,{size:20,className:"text-gray-500"})})]}),o.jsx("div",{className:"p-6 space-y-5",children:l?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(pe,{size:48,className:"mx-auto text-green-600 mb-4"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ExportaciÃ³n completada"}),o.jsx("p",{className:"text-gray-600",children:"El archivo se ha descargado a tu computadora"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de reporte"}),o.jsx("div",{className:"space-y-2",children:lo.map(S=>o.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer ${n===S.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"}`,children:[o.jsx("input",{type:"radio",name:"exportType",value:S.value,checked:n===S.value,onChange:()=>t(S.value),className:"mt-1"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:S.label}),o.jsx("div",{className:"text-sm text-gray-500",children:S.description})]})]},S.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bodega"}),o.jsxs("select",{value:i,onChange:S=>s(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[o.jsx("option",{value:"all",children:"Todas las bodegas"}),r.map(S=>o.jsx("option",{value:S.id,children:S.name},S.id))]})]}),n==="kardex"&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),o.jsx("input",{type:"date",value:d,onChange:S=>g(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),o.jsx("input",{type:"date",value:m,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]})}),o.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50 rounded-b-xl",children:[o.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg",children:l?"Cerrar":"Cancelar"}),!l&&o.jsxs("button",{onClick:v,disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[o.jsx(Qt,{size:16}),h?"Exportando...":"Exportar"]})]})]})})};async function Ct(e){const{itemId:n,locationId:t}=e;let i=`
    SELECT 
      s.item_id as itemId,
      s.location_id as locationId,
      s.quantity as totalStock,
      COALESCE((
        SELECT SUM(r.quantity) 
        FROM com_hubbi_inventory_reservations r 
        WHERE r.item_id = s.item_id 
          AND r.location_id = s.location_id 
          AND r.status = 'active'
      ), 0) as reservedStock,
      s.min_stock as minStock,
      s.reorder_point as reorderPoint
    FROM com_hubbi_inventory_stock s
    WHERE s.item_id = ?
  `;const s=[n];return t&&(i+=" AND s.location_id = ?",s.push(t)),(await y.db.query(i,s,{moduleId:"com.hubbi.inventory"})).map(a=>({itemId:a.itemId,locationId:a.locationId,totalStock:a.totalStock,reservedStock:a.reservedStock,availableStock:a.totalStock-a.reservedStock,minStock:a.minStock,reorderPoint:a.reorderPoint}))}async function He(e){const n=await Ct({itemId:e.itemId,locationId:e.locationId});if(n.length===0)return{available:!1,currentStock:0,requestedQuantity:e.quantity};const t=n[0];return{available:t.availableStock>=e.quantity,currentStock:t.availableStock,requestedQuantity:e.quantity}}async function un(e){let n=`
    SELECT 
      i.id as itemId,
      i.name as itemName,
      i.sku,
      s.location_id as locationId,
      s.quantity as currentStock,
      s.reorder_point as reorderPoint,
      (s.reorder_point - s.quantity) as deficit
    FROM com_hubbi_inventory_stock s
    JOIN com_hubbi_inventory_items i ON s.item_id = i.id
    WHERE s.quantity <= s.reorder_point
      AND i.is_active = TRUE
  `;const t=[];return e!=null&&e.locationId&&(n+=" AND s.location_id = ?",t.push(e.locationId)),n+=" ORDER BY deficit DESC",await y.db.query(n,t,{moduleId:"com.hubbi.inventory"})}async function cn(e){var i;const n=await He({itemId:e.itemId,locationId:e.locationId,quantity:e.quantity});if(!n.available)return{success:!1,error:`Stock insuficiente. Disponible: ${n.currentStock}, Solicitado: ${e.quantity}`};const t=crypto.randomUUID();return await y.db.execute(`
    INSERT INTO com_hubbi_inventory_reservations 
      (id, item_id, location_id, quantity, reference_type, reference_id, created_by, expires_at, status)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'active')
  `,[t,e.itemId,e.locationId,e.quantity,e.referenceType,e.referenceId,e.createdBy,e.expiresAt||null],{moduleId:"com.hubbi.inventory"}),be("reservation:created",{reservationId:t,itemId:e.itemId,quantity:e.quantity,referenceType:e.referenceType,referenceId:e.referenceId}),(i=y.audit)==null||i.call(y,{action:"reservation_created",entity:"inventory_reservation",entityId:t,description:`Reserva de ${e.quantity} unidades para ${e.referenceType}:${e.referenceId}`}),{success:!0,reservationId:t}}async function gn(e){const n=await y.db.query("SELECT * FROM com_hubbi_inventory_reservations WHERE id = ? AND status = 'active'",[e.reservationId],{moduleId:"com.hubbi.inventory"});if(n.length===0)return{success:!1,error:"Reserva no encontrada o ya consumida"};const t=n[0],i=crypto.randomUUID(),s=await y.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ?",[t.item_id],{moduleId:"com.hubbi.inventory"}),r=s.length>0?s[0].weighted_average_cost:0,a=t.quantity;return await y.db.execute(`
    INSERT INTO com_hubbi_inventory_movements 
      (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value, created_by)
    VALUES (?, ?, ?, 'OUT', 'internal_use', ?, ?, ?, ?)
  `,[i,t.item_id,t.location_id,a,r,a*r,e.consumedBy],{moduleId:"com.hubbi.inventory"}),await y.db.execute(`
    UPDATE com_hubbi_inventory_stock 
    SET quantity = quantity - ? 
    WHERE item_id = ? AND location_id = ?
  `,[a,t.item_id,t.location_id],{moduleId:"com.hubbi.inventory"}),await y.db.execute(`
    UPDATE com_hubbi_inventory_reservations SET status = 'consumed' WHERE id = ?
  `,[e.reservationId],{moduleId:"com.hubbi.inventory"}),be("reservation:consumed",{reservationId:e.reservationId,movementId:i,itemId:t.item_id,quantity:a}),be("stock:decreased",{itemId:t.item_id,locationId:t.location_id,quantity:a,reason:"internal_use",movementId:i}),{success:!0,movementId:i}}async function mn(e){return await y.db.execute(`
    UPDATE com_hubbi_inventory_reservations SET status = 'cancelled' WHERE id = ?
  `,[e.reservationId],{moduleId:"com.hubbi.inventory"}),be("reservation:cancelled",{reservationId:e.reservationId,reason:e.reason}),{success:!0}}async function Et(e){var g;if(e.type==="OUT"&&e.reason!=="correction"){const m=await He({itemId:e.itemId,locationId:e.locationId,quantity:e.quantity});if(!m.available)return{success:!1,error:`Stock insuficiente. Disponible: ${m.currentStock}, Solicitado: ${e.quantity}`}}let n=e.periodId;if(!n){const m=await qe();n=m==null?void 0:m.id}if(n&&!await wt(n))return{success:!1,error:`El perÃ­odo ${n} estÃ¡ cerrado o bloqueado. No se pueden registrar movimientos.`};if(e.subHubId){const m=y.permissions.has("inventory:edit_all_subhubs"),f=y.getContext(),h=e.subHubId===(f==null?void 0:f.subHubId),u=y.permissions.has("inventory:edit_own_subhub")&&h;if(!m&&!u)return{success:!1,error:"No tienes permiso para modificar inventario de esta sucursal."}}const t=crypto.randomUUID();let i=e.unitCost||0;if(!e.unitCost){const m=await y.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ? ",[e.itemId],{moduleId:"com.hubbi.inventory"});i=m.length>0?m[0].weighted_average_cost:0}await y.db.execute(`
    INSERT INTO com_hubbi_inventory_movements
                (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value,
                    document_type, document_number, document_uuid, created_by, sub_hub_id, period_id)
            VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
                `,[t,e.itemId,e.locationId,e.type,e.reason,e.quantity,i,e.quantity*i,e.documentType||null,e.documentNumber||null,e.documentUuid||null,e.createdBy,e.subHubId||null,n||null],{moduleId:"com.hubbi.inventory"});let s=e.quantity;e.type==="OUT"||e.type==="TRANSFER_OUT"?s=-e.quantity:e.type==="ADJUST"&&(s=e.quantity),await y.db.execute(`
    INSERT INTO com_hubbi_inventory_stock(item_id, location_id, quantity)
            VALUES(?, ?, ?)
    ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = quantity + ?
                `,[e.itemId,e.locationId,s,s],{moduleId:"com.hubbi.inventory"}),(e.type==="IN"||e.type==="TRANSFER_IN")&&e.unitCost&&await co(e.itemId,e.quantity,e.unitCost);const r=await y.db.query("SELECT quantity FROM com_hubbi_inventory_stock WHERE item_id = ? AND location_id = ? ",[e.itemId,e.locationId],{moduleId:"com.hubbi.inventory"}),a=r.length>0?r[0].quantity:0,d=e.type==="IN"||e.type==="TRANSFER_IN"||e.type==="ADJUST"&&e.quantity>0;return be(d?"stock:increased":"stock:decreased",{itemId:e.itemId,locationId:e.locationId,quantity:e.quantity,reason:e.reason,movementId:t,newStock:a}),(g=y.audit)==null||g.call(y,{action:`stock_${e.type.toLowerCase()}`,entity:"inventory_movement",entityId:t,description:`${e.type==="IN"?"Entrada":"Salida"} de ${e.quantity} unidades - ${e.reason}`}),{success:!0,movementId:t,newStock:a}}async function co(e,n,t){const i=await y.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ? ",[e],{moduleId:"com.hubbi.inventory"}),s=await y.db.query("SELECT SUM(quantity) as total FROM com_hubbi_inventory_stock WHERE item_id = ? ",[e],{moduleId:"com.hubbi.inventory"}),r=i.length>0?i[0].weighted_average_cost:0,a=s.length>0?s[0].total-n:0,d=a*r,g=n*t,m=a+n,f=m>0?(d+g)/m:t;await y.db.execute("UPDATE com_hubbi_inventory_items SET weighted_average_cost = ?, last_cost = ? WHERE id = ? ",[f,t,e],{moduleId:"com.hubbi.inventory"})}async function fn(e){let n="SELECT * FROM com_hubbi_inventory_items WHERE ";const t=[];if(e.id)n+="id = ? ",t.push(e.id);else if(e.sku)n+="sku = ? ",t.push(e.sku);else return null;const i=await y.db.query(n,t,{moduleId:"com.hubbi.inventory"});return i.length>0?i[0]:null}async function pn(e){let n=`
    SELECT * FROM com_hubbi_inventory_items 
    WHERE is_active = TRUE AND is_internal_use_only = FALSE
                `;const t=[];return e!=null&&e.categoryId&&(n+=" AND category_id = ? ",t.push(e.categoryId)),e!=null&&e.search&&(n+=" AND(name LIKE ? OR sku LIKE ?)",t.push(`% ${e.search}% `,` % ${e.search}% `)),n+=" ORDER BY name LIMIT ? ",t.push((e==null?void 0:e.limit)||100),await y.db.query(n,t,{moduleId:"com.hubbi.inventory"})}async function hn(e){return await y.db.query(`
    SELECT
            k.child_item_id as componentId,
                i.name as componentName,
                i.sku as componentSku,
                k.quantity
    FROM com_hubbi_inventory_kits k
    JOIN com_hubbi_inventory_items i ON k.child_item_id = i.id
    WHERE k.parent_item_id = ?
                `,[e],{moduleId:"com.hubbi.inventory"})}function be(e,n){window.dispatchEvent(new CustomEvent(`inventory:${e} `,{detail:{moduleId:"com.hubbi.inventory",timestamp:new Date().toISOString(),...n}}))}function xn(){var e,n;(n=(e=window.hubbi)==null?void 0:e.modules)!=null&&n.expose&&(window.hubbi.modules.expose("getStock",Ct),window.hubbi.modules.expose("checkAvailability",He),window.hubbi.modules.expose("getLowStockItems",un),window.hubbi.modules.expose("createReservation",cn),window.hubbi.modules.expose("consumeReservation",gn),window.hubbi.modules.expose("cancelReservation",mn),window.hubbi.modules.expose("recordMovement",Et),window.hubbi.modules.expose("getItem",fn),window.hubbi.modules.expose("getSellableItems",pn),window.hubbi.modules.expose("getKitComponents",hn),window.hubbi.modules.expose("getCurrentPeriod",qe),window.hubbi.modules.expose("isPeriodEditable",wt))}const go=()=>{const[e,n]=b.useState(!1);return{registerMovement:async i=>{var s,r;n(!0);try{const a=y.getContext(),d=await Et({itemId:i.item.id,locationId:i.location_id,type:i.type,quantity:i.quantity,reason:i.reason||"other",unitCost:i.unit_cost,documentType:(s=i.reference)==null?void 0:s.type,documentNumber:(r=i.reference)==null?void 0:r.id,createdBy:(a==null?void 0:a.userId)||"system",subHubId:a==null?void 0:a.subHubId});if(!d.success)throw new Error(d.error||"Error desconocido al registrar movimiento");return y.notify.success("Movimiento registrado exitosamente"),{success:!0,movementId:d.movementId}}catch(a){return console.error(a),y.notify.error((a instanceof Error?a.message:String(a))||"Error al registrar movimiento"),{success:!1,error:a}}finally{n(!1)}},processing:e}},mo=async e=>{const n=crypto.randomUUID();await y.data.execute(`
        INSERT INTO com_hubbi_inventory_dte_events (id, event_type, movement_id, payload, status, created_at)
        VALUES (?, ?, ?, ?, 'pending', ?)
    `,[n,e.eventType,e.movement.id,JSON.stringify(e),new Date().toISOString()]),console.log(`[DTE Integration] Event emitted: ${e.eventType} for movement ${e.movement.id}`)},fo=async(e,n)=>{await y.data.execute(`
        UPDATE com_hubbi_inventory_movements 
        SET document_type = ?, document_number = ?, document_uuid = ?
        WHERE id = ?
    `,[n.documentType,n.documentNumber,n.documentUUID,e]),y.notify.success(`Movimiento vinculado a ${n.documentType} #${n.documentNumber}`)},po=async()=>(await y.data.query(`
        SELECT payload FROM com_hubbi_inventory_dte_events 
        WHERE status = 'pending' 
        ORDER BY created_at ASC
        LIMIT 50
    `)||[]).map(n=>JSON.parse(n.payload)),ho=async e=>{await y.data.execute(`
        UPDATE com_hubbi_inventory_dte_events 
        SET status = 'processed' 
        WHERE movement_id = ?
    `,[e])};class xo{static calculateNewWeightedAverageCost(n,t,i,s){if(n+i===0)return 0;const r=Math.max(0,n),a=r*t+i*s,d=r+i;return d>0?parseFloat((a/d).toFixed(4)):0}static validateStockAvailability(n,t,i=!1){return t<=0?{allowed:!1,message:"La cantidad debe ser mayor a 0"}:!i&&n<t?{allowed:!1,message:`Stock insuficiente. Disponible: ${n}, Solicitado: ${t}`}:{allowed:!0}}static determineOutCost(n,t){return t!==void 0&&(n.type==="serialized"||n.type==="asset")?t:n.weighted_average_cost}}const yo=[{id:"simple",label:"Producto Simple",icon:"Box",description:"Repuestos, consumibles, productos estÃ¡ndar"},{id:"serialized",label:"Serializado",icon:"Barcode",description:"Equipos con nÃºmero de serie Ãºnico"},{id:"kit",label:"Kit / Combo",icon:"Package",description:"Conjunto de productos que se venden juntos"},{id:"asset",label:"Activo Fijo",icon:"Truck",description:"VehÃ­culos, maquinaria, equipos de alto valor"},{id:"service",label:"Servicio",icon:"Wrench",description:"Mano de obra, servicios sin stock fÃ­sico"}],bo=[{id:"available",label:"Disponible",color:"green"},{id:"reserved",label:"Reservado",color:"yellow"},{id:"damaged",label:"DaÃ±ado",color:"red"},{id:"expired",label:"Vencido",color:"orange"},{id:"discontinued",label:"Descontinuado",color:"gray"}],jt={simple:[{key:"location_rack",label:"UbicaciÃ³n (Estante)",type:"text",placeholder:"Ej: Pasillo A-2"},{key:"min_stock_alert",label:"Alerta Stock MÃ­nimo",type:"number",placeholder:"0"},{key:"weight",label:"Peso (kg)",type:"number",placeholder:"0.00"},{key:"dimensions",label:"Dimensiones (LxAxH cm)",type:"text",placeholder:"Ej: 10x5x3"}],serialized:[{key:"serial_number",label:"NÃºmero de Serie",type:"text",required:!0},{key:"warranty_months",label:"Meses de GarantÃ­a",type:"number",placeholder:"12"},{key:"warranty_expiry",label:"Vencimiento GarantÃ­a",type:"date"},{key:"manufacturer",label:"Fabricante",type:"text"},{key:"model_number",label:"NÃºmero de Modelo",type:"text"}],asset:[{key:"vin",label:"VIN / NÃºmero de Chasis",type:"text",required:!0,placeholder:"17 caracteres"},{key:"engine_number",label:"NÃºmero de Motor",type:"text",required:!0},{key:"license_plate",label:"Placa",type:"text"},{key:"year",label:"AÃ±o",type:"number",placeholder:"2024"},{key:"color",label:"Color",type:"text"},{key:"fuel_type",label:"Combustible",type:"select",options:["Diesel","Gasolina","ElÃ©ctrico","HÃ­brido","GLP"]},{key:"mileage",label:"Kilometraje",type:"number",placeholder:"0"},{key:"import_policy",label:"PÃ³liza de ImportaciÃ³n",type:"text"},{key:"acquisition_date",label:"Fecha de AdquisiciÃ³n",type:"date"},{key:"last_maintenance",label:"Ãšltimo Mantenimiento",type:"date"},{key:"notes",label:"Notas Adicionales",type:"textarea"}],kit:[{key:"is_preassembled",label:"Â¿Pre-ensamblado?",type:"boolean"},{key:"compatibility",label:"Compatibilidad",type:"text",placeholder:"Ej: Motores Cummins ISX"},{key:"assembly_time",label:"Tiempo de Ensamblaje (min)",type:"number"},{key:"instructions",label:"Instrucciones",type:"textarea"}],medicine:[{key:"batch_number",label:"NÃºmero de Lote",type:"text",required:!0},{key:"expiry_date",label:"Fecha de Vencimiento",type:"date",required:!0},{key:"active_ingredient",label:"Componente Activo",type:"text"},{key:"dosage",label:"Dosis",type:"text",placeholder:"Ej: 500mg"},{key:"storage_temp",label:"Temperatura de Almacenamiento",type:"select",options:["Ambiente","Refrigerado (2-8Â°C)","Congelado (-20Â°C)"]},{key:"requires_prescription",label:"Requiere Receta",type:"boolean"}],service:[{key:"duration_hours",label:"DuraciÃ³n Estimada (horas)",type:"number"},{key:"requires_appointment",label:"Requiere Cita",type:"boolean"},{key:"technician_level",label:"Nivel de TÃ©cnico",type:"select",options:["BÃ¡sico","Intermedio","Avanzado","Especialista"]}]},vo=[{id:"unit",label:"Unidad",abbreviation:"ud"},{id:"box",label:"Caja",abbreviation:"caja"},{id:"pack",label:"Paquete",abbreviation:"paq"},{id:"kg",label:"Kilogramo",abbreviation:"kg"},{id:"g",label:"Gramo",abbreviation:"g"},{id:"lb",label:"Libra",abbreviation:"lb"},{id:"l",label:"Litro",abbreviation:"L"},{id:"ml",label:"Mililitro",abbreviation:"mL"},{id:"gal",label:"GalÃ³n",abbreviation:"gal"},{id:"m",label:"Metro",abbreviation:"m"},{id:"cm",label:"CentÃ­metro",abbreviation:"cm"},{id:"ft",label:"Pie",abbreviation:"ft"},{id:"pair",label:"Par",abbreviation:"par"},{id:"dozen",label:"Docena",abbreviation:"doc"},{id:"set",label:"Juego",abbreviation:"jgo"}],_o=[{id:"daily",label:"Diario",days:1},{id:"weekly",label:"Semanal",days:7},{id:"biweekly",label:"Quincenal",days:14},{id:"monthly",label:"Mensual",days:30},{id:"quarterly",label:"Trimestral",days:90},{id:"biannual",label:"Semestral",days:180},{id:"annual",label:"Anual",days:365}],So=[{id:"parts",label:"Repuestos",icon:"Cog"},{id:"consumables",label:"Consumibles",icon:"Droplet"},{id:"tools",label:"Herramientas",icon:"Wrench"},{id:"vehicles",label:"VehÃ­culos",icon:"Truck"},{id:"electronics",label:"ElectrÃ³nicos",icon:"Cpu"},{id:"office",label:"Oficina",icon:"FileText"},{id:"maintenance",label:"Mantenimiento",icon:"Tool"},{id:"safety",label:"Seguridad",icon:"Shield"}];function yn(e){return jt[e]||jt.simple}function wo(e,n){const t=yn(e),i=[];for(const s of t)s.required&&!n[s.key]&&i.push(`${s.label} es requerido`);return{valid:i.length===0,errors:i}}async function Co(e,n){try{let t=`
      SELECT 
        m.created_at as fecha,
        i.sku,
        i.name as producto,
        m.type as tipo,
        m.reason as motivo,
        m.quantity as cantidad,
        m.cost_at_moment as costo_unitario,
        m.total_value as valor_total,
        m.document_type as tipo_documento,
        m.document_number as numero_documento,
        l.name as ubicacion
      FROM com_hubbi_inventory_movements m
      JOIN com_hubbi_inventory_items i ON m.item_id = i.id
      LEFT JOIN com_hubbi_inventory_locations l ON m.location_id = l.id
      WHERE 1=1
    `;const i=[];e&&(t+=" AND m.item_id = ?",i.push(e)),n!=null&&n.startDate&&(t+=" AND m.created_at >= ?",i.push(n.startDate)),n!=null&&n.endDate&&(t+=" AND m.created_at <= ?",i.push(n.endDate)),n!=null&&n.locationId&&(t+=" AND m.location_id = ?",i.push(n.locationId)),t+=" ORDER BY m.created_at DESC";const s=await y.db.query(t,i,{moduleId:"com.hubbi.inventory"});return{success:!0,data:bn(s),rowCount:s.length}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Error al exportar Kardex"}}}async function Eo(e){try{let n=`
      SELECT 
        i.sku,
        i.name as producto,
        i.category_id as categoria,
        i.type as tipo,
        i.weighted_average_cost as costo_promedio,
        s.quantity as cantidad,
        (s.quantity * i.weighted_average_cost) as valor_total,
        l.name as ubicacion
      FROM com_hubbi_inventory_items i
      JOIN com_hubbi_inventory_stock s ON i.id = s.item_id
      LEFT JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
      WHERE i.is_active = TRUE
    `;const t=[];e!=null&&e.locationId&&(n+=" AND s.location_id = ?",t.push(e.locationId)),e!=null&&e.categoryId&&(n+=" AND i.category_id = ?",t.push(e.categoryId)),e!=null&&e.itemType&&(n+=" AND i.type = ?",t.push(e.itemType)),n+=" ORDER BY i.name";const i=await y.db.query(n,t,{moduleId:"com.hubbi.inventory"}),s=i.reduce((r,a)=>r+(a.valor_total||0),0);return{success:!0,data:bn(i,{footer:`TOTAL VALORIZACIÃ“N: ${s.toFixed(2)}`}),rowCount:i.length}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Error al exportar valorizaciÃ³n"}}}async function jo(e,n){try{const{startDate:t,endDate:i}=Ro(e,n),r=await y.db.query(`
      SELECT 
        m.type,
        m.reason,
        COUNT(*) as cantidad_movimientos,
        SUM(m.quantity) as unidades_totales,
        SUM(m.total_value) as valor_total
      FROM com_hubbi_inventory_movements m
      WHERE m.created_at >= ? AND m.created_at <= ?
      GROUP BY m.type, m.reason
      ORDER BY m.type, m.reason
    `,[t,i],{moduleId:"com.hubbi.inventory"}),d=await y.db.query(`
      SELECT 
        i.type,
        COUNT(DISTINCT i.id) as productos,
        SUM(s.quantity) as unidades,
        SUM(s.quantity * i.weighted_average_cost) as valor
      FROM com_hubbi_inventory_items i
      JOIN com_hubbi_inventory_stock s ON i.id = s.item_id
      WHERE i.is_active = TRUE
      GROUP BY i.type
    `,[],{moduleId:"com.hubbi.inventory"}),g={periodo:`${n} ${e}`,fecha_inicio:t,fecha_fin:i,resumen_movimientos:r,stock_al_cierre:d};return{success:!0,data:JSON.stringify(g,null,2),rowCount:r.length+d.length}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Error al generar resumen fiscal"}}}async function No(e){const n=crypto.randomUUID();await y.db.execute(`
    INSERT INTO com_hubbi_inventory_export_logs 
      (id, report_type, format, period_start, period_end, filters, row_count, generated_by, file_path, file_size)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
  `,[n,e.reportType,e.format,e.periodStart||null,e.periodEnd||null,e.filters?JSON.stringify(e.filters):null,e.rowCount,e.userId,e.filePath||null,e.fileSize||null],{moduleId:"com.hubbi.inventory"})}function bn(e,n){if(e.length===0)return"";const t=Object.keys(e[0]),i=[];i.push(t.join(","));for(const s of e){const r=t.map(a=>{const d=s[a];return d==null?"":typeof d=="string"&&(d.includes(",")||d.includes('"'))?`"${d.replace(/"/g,'""')}"`:String(d)});i.push(r.join(","))}return n!=null&&n.footer&&(i.push(""),i.push(n.footer)),i.join(`
`)}function Ro(e,n){switch(n){case"Q1":return{startDate:`${e}-01-01`,endDate:`${e}-03-31`};case"Q2":return{startDate:`${e}-04-01`,endDate:`${e}-06-30`};case"Q3":return{startDate:`${e}-07-01`,endDate:`${e}-09-30`};case"Q4":return{startDate:`${e}-10-01`,endDate:`${e}-12-31`};case"annual":default:return{startDate:`${e}-01-01`,endDate:`${e}-12-31`}}}const vn=()=>o.jsxs("div",{className:"inventory-settings p-4",children:[o.jsx("h2",{className:"text-lg font-bold",children:"ConfiguraciÃ³n de Inventario"}),o.jsx("p",{className:"text-gray-500",children:"PrÃ³ximamente: Ajustes de costos, prefijos y permisos."})]}),_n=()=>o.jsx(an,{compact:!0}),Sn=()=>{var t,i,s;if(!(((s=(i=(t=window.hubbi)==null?void 0:t.permissions)==null?void 0:i.has)==null?void 0:s.call(i,"inventory:access"))??!0))return null;const n=()=>{var r,a;return(a=(r=window.hubbi)==null?void 0:r.navigate)==null?void 0:a.call(r,"/inventory")};return o.jsxs("button",{onClick:n,className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-lg flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),o.jsx("span",{children:"Inventario"})]})},Io=async()=>{var e,n;(n=(e=window.hubbi)==null?void 0:e.widgets)!=null&&n.register&&(window.hubbi.widgets.register({slotName:"settings_tab",moduleId:"com.hubbi.inventory",component:vn,priority:10}),window.hubbi.widgets.register({slotName:"dashboard_widget",moduleId:"com.hubbi.inventory",component:_n,priority:20}),window.hubbi.widgets.register({slotName:"sidebar_item",moduleId:"com.hubbi.inventory",component:Sn,priority:30})),xn(),ko()};async function ko(){var e,n,t;if(!(!((n=(e=window.hubbi)==null?void 0:e.db)!=null&&n.query)||!((t=window.hubbi)!=null&&t.sendNotification)))try{const i=await window.hubbi.db.query(`
      SELECT i.name, s.quantity, s.reorder_point, l.name as location_name
      FROM com_hubbi_inventory_stock s
      JOIN com_hubbi_inventory_items i ON s.item_id = i.id
      JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
      WHERE s.quantity <= s.min_stock AND i.is_active = TRUE
      LIMIT 5
    `,[],{moduleId:"com.hubbi.inventory"});i.length>0&&await window.hubbi.sendNotification({title:"âš ï¸ Stock CrÃ­tico",message:`${i.length} productos requieren reabastecimiento urgente`,category:"inventory",severity:"warning",actionUrl:"/inventory/alerts"})}catch{}}const To={id:"com.hubbi.inventory",name:"Hubbi Inventory & WMS",version:"1.0.0",emittedEvents:["inventory:stock:increased","inventory:stock:decreased","inventory:reservation:created","inventory:reservation:consumed","inventory:reservation:cancelled","inventory:item:created","inventory:item:updated","inventory:transfer:requested","inventory:transfer:approved","inventory:transfer:received"],exposedMethods:["getStock","checkAvailability","getLowStockItems","createReservation","consumeReservation","cancelReservation","recordMovement","getItem","getSellableItems","getKitComponents","getCurrentPeriod","isPeriodEditable"]};E.CYCLIC_COUNT_FREQUENCIES=_o,E.DEFAULT_CATEGORIES=So,E.ExcelExport=uo,E.ExcelImport=ao,E.InventoryCore=xo,E.InventoryDashboardWidget=_n,E.InventorySettingsTab=vn,E.InventorySidebar=Sn,E.KitsManager=Ui,E.MobileScanner=Yi,E.MovementsHistory=Gi,E.PRODUCT_SCHEMAS=jt,E.PRODUCT_STATUS=bo,E.PRODUCT_TYPES=yo,E.PeriodBadge=Qi,E.PeriodSelector=Zi,E.PhysicalAudit=Ji,E.ProductForm=zi,E.ProductsTable=Hi,E.QuickAdjust=so,E.RemissionNote=Wi,E.StockAlertsPanel=an,E.SubHubBadge=io,E.SubHubSelector=no,E.TransferDashboard=Bi,E.UNITS_OF_MEASURE=vo,E.VisualWarehouse=Ki,E.cancelReservation=mn,E.checkAvailability=He,E.consumeReservation=gn,E.createReservation=cn,E.emitDTEEvent=mo,E.emitInventoryEvent=be,E.exportFiscalSummary=jo,E.exportKardex=Co,E.exportStockValuation=Eo,E.getCurrentPeriod=qe,E.getItem=fn,E.getKitComponents=hn,E.getLowStockItems=un,E.getPendingDTEEvents=po,E.getPeriodById=ln,E.getSchemaForType=yn,E.getSellableItems=pn,E.getStock=Ct,E.getSubHubIdFromContext=eo,E.isPeriodEditableById=wt,E.linkMovementToDTE=fo,E.logExport=No,E.markDTEEventProcessed=ho,E.moduleInfo=To,E.onActivate=Io,E.recordMovement=Et,E.registerInventoryAPI=xn,E.useFiscalPeriods=Ie,E.useInventoryActions=sn,E.useInventoryMovements=go,E.useStockAlerts=rn,E.useSubHubFilter=ye,E.validateAttributes=wo,E.validateSubHubPermission=to,Object.defineProperty(E,Symbol.toStringTag,{value:"Module"})});
