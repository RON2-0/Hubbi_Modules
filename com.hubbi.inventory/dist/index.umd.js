(function(a,k){typeof exports=="object"&&typeof module<"u"?module.exports=k(require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["react/jsx-runtime","react"],k):(a=typeof globalThis<"u"?globalThis:a||self,a.com=a.com||{},a.com.hubbi=a.com.hubbi||{},a.com.hubbi.inventory=k(a.HubbiJSX,a.React))})(this,function(a,k){"use strict";function ms(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}function vs(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const wr=ms(k),T=new Proxy({},{get:(e,t)=>{const r=window.hubbi;if(!r){console.warn("[Hubbi SDK] Accessing hubbi SDK before it is initialized");return}return r[t]}});var Fe={};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Tr(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function ke(e,t){return typeof e=="function"?e(t):e}function he(e,t){return r=>{t.setState(n=>({...n,[e]:ke(r,n[e])}))}}function Mt(e){return e instanceof Function}function ys(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function bs(e,t){const r=[],n=i=>{i.forEach(o=>{r.push(o);const s=t(o);s!=null&&s.length&&n(s)})};return n(e),r}function F(e,t,r){let n=[],i;return o=>{let s;r.key&&r.debug&&(s=Date.now());const u=e(o);if(!(u.length!==n.length||u.some((f,y)=>n[y]!==f)))return i;n=u;let g;if(r.key&&r.debug&&(g=Date.now()),i=t(...u),r==null||r.onChange==null||r.onChange(i),r.key&&r.debug&&r!=null&&r.debug()){const f=Math.round((Date.now()-s)*100)/100,y=Math.round((Date.now()-g)*100)/100,v=y/16,p=(x,S)=>{for(x=String(x);x.length<S;)x=" "+x;return x};console.info(`%câ± ${p(y,5)} /${p(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,r==null?void 0:r.key)}return i}}function L(e,t,r,n){return{debug:()=>{var i;return(i=e==null?void 0:e.debugAll)!=null?i:e[t]},key:Fe.NODE_ENV==="development"&&r,onChange:n}}function _s(e,t,r,n){const i=()=>{var s;return(s=o.getValue())!=null?s:e.options.renderFallbackValue},o={id:`${t.id}_${r.id}`,row:t,column:r,getValue:()=>t.getValue(n),renderValue:i,getContext:F(()=>[e,r,t,o],(s,u,h,g)=>({table:s,column:u,row:h,cell:g,getValue:g.getValue,renderValue:g.renderValue}),L(e.options,"debugCells","cell.getContext"))};return e._features.forEach(s=>{s.createCell==null||s.createCell(o,r,t,e)},{}),o}function Ss(e,t,r,n){var i,o;const u={...e._getDefaultColumnDef(),...t},h=u.accessorKey;let g=(i=(o=u.id)!=null?o:h?typeof String.prototype.replaceAll=="function"?h.replaceAll(".","_"):h.replace(/\./g,"_"):void 0)!=null?i:typeof u.header=="string"?u.header:void 0,f;if(u.accessorFn?f=u.accessorFn:h&&(h.includes(".")?f=v=>{let p=v;for(const S of h.split(".")){var x;p=(x=p)==null?void 0:x[S],Fe.NODE_ENV!=="production"&&p===void 0&&console.warn(`"${S}" in deeply nested key "${h}" returned undefined.`)}return p}:f=v=>v[u.accessorKey]),!g)throw Fe.NODE_ENV!=="production"?new Error(u.accessorFn?"Columns require an id when using an accessorFn":"Columns require an id when using a non-string header"):new Error;let y={id:`${String(g)}`,accessorFn:f,parent:n,depth:r,columnDef:u,columns:[],getFlatColumns:F(()=>[!0],()=>{var v;return[y,...(v=y.columns)==null?void 0:v.flatMap(p=>p.getFlatColumns())]},L(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:F(()=>[e._getOrderColumnsFn()],v=>{var p;if((p=y.columns)!=null&&p.length){let x=y.columns.flatMap(S=>S.getLeafColumns());return v(x)}return[y]},L(e.options,"debugColumns","column.getLeafColumns"))};for(const v of e._features)v.createColumn==null||v.createColumn(y,e);return y}const oe="debugHeaders";function fi(e,t,r){var n;let o={id:(n=r.id)!=null?n:t.id,column:t,index:r.index,isPlaceholder:!!r.isPlaceholder,placeholderId:r.placeholderId,depth:r.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],u=h=>{h.subHeaders&&h.subHeaders.length&&h.subHeaders.map(u),s.push(h)};return u(o),s},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach(s=>{s.createHeader==null||s.createHeader(o,e)}),o}const xs={createTable:e=>{e.getHeaderGroups=F(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,n,i)=>{var o,s;const u=(o=n==null?void 0:n.map(y=>r.find(v=>v.id===y)).filter(Boolean))!=null?o:[],h=(s=i==null?void 0:i.map(y=>r.find(v=>v.id===y)).filter(Boolean))!=null?s:[],g=r.filter(y=>!(n!=null&&n.includes(y.id))&&!(i!=null&&i.includes(y.id)));return Nt(t,[...u,...g,...h],e)},L(e.options,oe,"getHeaderGroups")),e.getCenterHeaderGroups=F(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,n,i)=>(r=r.filter(o=>!(n!=null&&n.includes(o.id))&&!(i!=null&&i.includes(o.id))),Nt(t,r,e,"center")),L(e.options,oe,"getCenterHeaderGroups")),e.getLeftHeaderGroups=F(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,r,n)=>{var i;const o=(i=n==null?void 0:n.map(s=>r.find(u=>u.id===s)).filter(Boolean))!=null?i:[];return Nt(t,o,e,"left")},L(e.options,oe,"getLeftHeaderGroups")),e.getRightHeaderGroups=F(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,r,n)=>{var i;const o=(i=n==null?void 0:n.map(s=>r.find(u=>u.id===s)).filter(Boolean))!=null?i:[];return Nt(t,o,e,"right")},L(e.options,oe,"getRightHeaderGroups")),e.getFooterGroups=F(()=>[e.getHeaderGroups()],t=>[...t].reverse(),L(e.options,oe,"getFooterGroups")),e.getLeftFooterGroups=F(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),L(e.options,oe,"getLeftFooterGroups")),e.getCenterFooterGroups=F(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),L(e.options,oe,"getCenterFooterGroups")),e.getRightFooterGroups=F(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),L(e.options,oe,"getRightFooterGroups")),e.getFlatHeaders=F(()=>[e.getHeaderGroups()],t=>t.map(r=>r.headers).flat(),L(e.options,oe,"getFlatHeaders")),e.getLeftFlatHeaders=F(()=>[e.getLeftHeaderGroups()],t=>t.map(r=>r.headers).flat(),L(e.options,oe,"getLeftFlatHeaders")),e.getCenterFlatHeaders=F(()=>[e.getCenterHeaderGroups()],t=>t.map(r=>r.headers).flat(),L(e.options,oe,"getCenterFlatHeaders")),e.getRightFlatHeaders=F(()=>[e.getRightHeaderGroups()],t=>t.map(r=>r.headers).flat(),L(e.options,oe,"getRightFlatHeaders")),e.getCenterLeafHeaders=F(()=>[e.getCenterFlatHeaders()],t=>t.filter(r=>{var n;return!((n=r.subHeaders)!=null&&n.length)}),L(e.options,oe,"getCenterLeafHeaders")),e.getLeftLeafHeaders=F(()=>[e.getLeftFlatHeaders()],t=>t.filter(r=>{var n;return!((n=r.subHeaders)!=null&&n.length)}),L(e.options,oe,"getLeftLeafHeaders")),e.getRightLeafHeaders=F(()=>[e.getRightFlatHeaders()],t=>t.filter(r=>{var n;return!((n=r.subHeaders)!=null&&n.length)}),L(e.options,oe,"getRightLeafHeaders")),e.getLeafHeaders=F(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,r,n)=>{var i,o,s,u,h,g;return[...(i=(o=t[0])==null?void 0:o.headers)!=null?i:[],...(s=(u=r[0])==null?void 0:u.headers)!=null?s:[],...(h=(g=n[0])==null?void 0:g.headers)!=null?h:[]].map(f=>f.getLeafHeaders()).flat()},L(e.options,oe,"getLeafHeaders"))}};function Nt(e,t,r,n){var i,o;let s=0;const u=function(v,p){p===void 0&&(p=1),s=Math.max(s,p),v.filter(x=>x.getIsVisible()).forEach(x=>{var S;(S=x.columns)!=null&&S.length&&u(x.columns,p+1)},0)};u(e);let h=[];const g=(v,p)=>{const x={depth:p,id:[n,`${p}`].filter(Boolean).join("_"),headers:[]},S=[];v.forEach(P=>{const I=[...S].reverse()[0],N=P.column.depth===x.depth;let M,w=!1;if(N&&P.column.parent?M=P.column.parent:(M=P.column,w=!0),I&&(I==null?void 0:I.column)===M)I.subHeaders.push(P);else{const A=fi(r,M,{id:[n,p,M.id,P==null?void 0:P.id].filter(Boolean).join("_"),isPlaceholder:w,placeholderId:w?`${S.filter(G=>G.column===M).length}`:void 0,depth:p,index:S.length});A.subHeaders.push(P),S.push(A)}x.headers.push(P),P.headerGroup=x}),h.push(x),p>0&&g(S,p-1)},f=t.map((v,p)=>fi(r,v,{depth:s,index:p}));g(f,s-1),h.reverse();const y=v=>v.filter(x=>x.column.getIsVisible()).map(x=>{let S=0,P=0,I=[0];x.subHeaders&&x.subHeaders.length?(I=[],y(x.subHeaders).forEach(M=>{let{colSpan:w,rowSpan:A}=M;S+=w,I.push(A)})):S=1;const N=Math.min(...I);return P=P+N,x.colSpan=S,x.rowSpan=P,{colSpan:S,rowSpan:P}});return y((i=(o=h[0])==null?void 0:o.headers)!=null?i:[]),h}const Or=(e,t,r,n,i,o,s)=>{let u={id:t,index:n,original:r,depth:i,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:h=>{if(u._valuesCache.hasOwnProperty(h))return u._valuesCache[h];const g=e.getColumn(h);if(g!=null&&g.accessorFn)return u._valuesCache[h]=g.accessorFn(u.original,n),u._valuesCache[h]},getUniqueValues:h=>{if(u._uniqueValuesCache.hasOwnProperty(h))return u._uniqueValuesCache[h];const g=e.getColumn(h);if(g!=null&&g.accessorFn)return g.columnDef.getUniqueValues?(u._uniqueValuesCache[h]=g.columnDef.getUniqueValues(u.original,n),u._uniqueValuesCache[h]):(u._uniqueValuesCache[h]=[u.getValue(h)],u._uniqueValuesCache[h])},renderValue:h=>{var g;return(g=u.getValue(h))!=null?g:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>bs(u.subRows,h=>h.subRows),getParentRow:()=>u.parentId?e.getRow(u.parentId,!0):void 0,getParentRows:()=>{let h=[],g=u;for(;;){const f=g.getParentRow();if(!f)break;h.push(f),g=f}return h.reverse()},getAllCells:F(()=>[e.getAllLeafColumns()],h=>h.map(g=>_s(e,u,g,g.id)),L(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:F(()=>[u.getAllCells()],h=>h.reduce((g,f)=>(g[f.column.id]=f,g),{}),L(e.options,"debugRows","getAllCellsByColumnId"))};for(let h=0;h<e._features.length;h++){const g=e._features[h];g==null||g.createRow==null||g.createRow(u,e)}return u},Cs={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},hi=(e,t,r)=>{var n,i;const o=r==null||(n=r.toString())==null?void 0:n.toLowerCase();return!!(!((i=e.getValue(t))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(o))};hi.autoRemove=e=>be(e);const gi=(e,t,r)=>{var n;return!!(!((n=e.getValue(t))==null||(n=n.toString())==null)&&n.includes(r))};gi.autoRemove=e=>be(e);const pi=(e,t,r)=>{var n;return((n=e.getValue(t))==null||(n=n.toString())==null?void 0:n.toLowerCase())===(r==null?void 0:r.toLowerCase())};pi.autoRemove=e=>be(e);const mi=(e,t,r)=>{var n;return(n=e.getValue(t))==null?void 0:n.includes(r)};mi.autoRemove=e=>be(e);const vi=(e,t,r)=>!r.some(n=>{var i;return!((i=e.getValue(t))!=null&&i.includes(n))});vi.autoRemove=e=>be(e)||!(e!=null&&e.length);const yi=(e,t,r)=>r.some(n=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(n)});yi.autoRemove=e=>be(e)||!(e!=null&&e.length);const bi=(e,t,r)=>e.getValue(t)===r;bi.autoRemove=e=>be(e);const _i=(e,t,r)=>e.getValue(t)==r;_i.autoRemove=e=>be(e);const Pr=(e,t,r)=>{let[n,i]=r;const o=e.getValue(t);return o>=n&&o<=i};Pr.resolveFilterValue=e=>{let[t,r]=e,n=typeof t!="number"?parseFloat(t):t,i=typeof r!="number"?parseFloat(r):r,o=t===null||Number.isNaN(n)?-1/0:n,s=r===null||Number.isNaN(i)?1/0:i;if(o>s){const u=o;o=s,s=u}return[o,s]},Pr.autoRemove=e=>be(e)||be(e[0])&&be(e[1]);const Te={includesString:hi,includesStringSensitive:gi,equalsString:pi,arrIncludes:mi,arrIncludesAll:vi,arrIncludesSome:yi,equals:bi,weakEquals:_i,inNumberRange:Pr};function be(e){return e==null||e===""}const Es={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:he("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const r=t.getCoreRowModel().flatRows[0],n=r==null?void 0:r.getValue(e.id);return typeof n=="string"?Te.includesString:typeof n=="number"?Te.inNumberRange:typeof n=="boolean"||n!==null&&typeof n=="object"?Te.equals:Array.isArray(n)?Te.arrIncludes:Te.weakEquals},e.getFilterFn=()=>{var r,n;return Mt(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(r=(n=t.options.filterFns)==null?void 0:n[e.columnDef.filterFn])!=null?r:Te[e.columnDef.filterFn]},e.getCanFilter=()=>{var r,n,i;return((r=e.columnDef.enableColumnFilter)!=null?r:!0)&&((n=t.options.enableColumnFilters)!=null?n:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var r;return(r=t.getState().columnFilters)==null||(r=r.find(n=>n.id===e.id))==null?void 0:r.value},e.getFilterIndex=()=>{var r,n;return(r=(n=t.getState().columnFilters)==null?void 0:n.findIndex(i=>i.id===e.id))!=null?r:-1},e.setFilterValue=r=>{t.setColumnFilters(n=>{const i=e.getFilterFn(),o=n==null?void 0:n.find(f=>f.id===e.id),s=ke(r,o?o.value:void 0);if(Si(i,s,e)){var u;return(u=n==null?void 0:n.filter(f=>f.id!==e.id))!=null?u:[]}const h={id:e.id,value:s};if(o){var g;return(g=n==null?void 0:n.map(f=>f.id===e.id?h:f))!=null?g:[]}return n!=null&&n.length?[...n,h]:[h]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const r=e.getAllLeafColumns(),n=i=>{var o;return(o=ke(t,i))==null?void 0:o.filter(s=>{const u=r.find(h=>h.id===s.id);if(u){const h=u.getFilterFn();if(Si(h,s.value,u))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(n)},e.resetColumnFilters=t=>{var r,n;e.setColumnFilters(t?[]:(r=(n=e.initialState)==null?void 0:n.columnFilters)!=null?r:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Si(e,t,r){return(e&&e.autoRemove?e.autoRemove(t,r):!1)||typeof t>"u"||typeof t=="string"&&!t}const Ir={sum:(e,t,r)=>r.reduce((n,i)=>{const o=i.getValue(e);return n+(typeof o=="number"?o:0)},0),min:(e,t,r)=>{let n;return r.forEach(i=>{const o=i.getValue(e);o!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}),n},max:(e,t,r)=>{let n;return r.forEach(i=>{const o=i.getValue(e);o!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}),n},extent:(e,t,r)=>{let n,i;return r.forEach(o=>{const s=o.getValue(e);s!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}),[n,i]},mean:(e,t)=>{let r=0,n=0;if(t.forEach(i=>{let o=i.getValue(e);o!=null&&(o=+o)>=o&&(++r,n+=o)}),r)return n/r},median:(e,t)=>{if(!t.length)return;const r=t.map(o=>o.getValue(e));if(!ys(r))return;if(r.length===1)return r[0];const n=Math.floor(r.length/2),i=r.sort((o,s)=>o-s);return r.length%2!==0?i[n]:(i[n-1]+i[n])/2},unique:(e,t)=>Array.from(new Set(t.map(r=>r.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(r=>r.getValue(e))).size,count:(e,t)=>t.length},ws={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,r;return(t=(r=e.getValue())==null||r.toString==null?void 0:r.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:he("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(r=>r!=null&&r.includes(e.id)?r.filter(n=>n!==e.id):[...r??[],e.id])},e.getCanGroup=()=>{var r,n;return((r=e.columnDef.enableGrouping)!=null?r:!0)&&((n=t.options.enableGrouping)!=null?n:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var r;return(r=t.getState().grouping)==null?void 0:r.includes(e.id)},e.getGroupedIndex=()=>{var r;return(r=t.getState().grouping)==null?void 0:r.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const r=e.getCanGroup();return()=>{r&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const r=t.getCoreRowModel().flatRows[0],n=r==null?void 0:r.getValue(e.id);if(typeof n=="number")return Ir.sum;if(Object.prototype.toString.call(n)==="[object Date]")return Ir.extent},e.getAggregationFn=()=>{var r,n;if(!e)throw new Error;return Mt(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(r=(n=t.options.aggregationFns)==null?void 0:n[e.columnDef.aggregationFn])!=null?r:Ir[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var r,n;e.setGrouping(t?[]:(r=(n=e.initialState)==null?void 0:n.grouping)!=null?r:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=r=>{if(e._groupingValuesCache.hasOwnProperty(r))return e._groupingValuesCache[r];const n=t.getColumn(r);return n!=null&&n.columnDef.getGroupingValue?(e._groupingValuesCache[r]=n.columnDef.getGroupingValue(e.original),e._groupingValuesCache[r]):e.getValue(r)},e._groupingValuesCache={}},createCell:(e,t,r,n)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===r.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=r.subRows)!=null&&i.length)}}};function Ts(e,t,r){if(!(t!=null&&t.length)||!r)return e;const n=e.filter(o=>!t.includes(o.id));return r==="remove"?n:[...t.map(o=>e.find(s=>s.id===o)).filter(Boolean),...n]}const Os={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:he("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=F(r=>[ft(t,r)],r=>r.findIndex(n=>n.id===e.id),L(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=r=>{var n;return((n=ft(t,r)[0])==null?void 0:n.id)===e.id},e.getIsLastColumn=r=>{var n;const i=ft(t,r);return((n=i[i.length-1])==null?void 0:n.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var r;e.setColumnOrder(t?[]:(r=e.initialState.columnOrder)!=null?r:[])},e._getOrderColumnsFn=F(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,r,n)=>i=>{let o=[];if(!(t!=null&&t.length))o=i;else{const s=[...t],u=[...i];for(;u.length&&s.length;){const h=s.shift(),g=u.findIndex(f=>f.id===h);g>-1&&o.push(u.splice(g,1)[0])}o=[...o,...u]}return Ts(o,r,n)},L(e.options,"debugTable","_getOrderColumnsFn"))}},kr=()=>({left:[],right:[]}),Ps={getInitialState:e=>({columnPinning:kr(),...e}),getDefaultOptions:e=>({onColumnPinningChange:he("columnPinning",e)}),createColumn:(e,t)=>{e.pin=r=>{const n=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var o,s;if(r==="right"){var u,h;return{left:((u=i==null?void 0:i.left)!=null?u:[]).filter(y=>!(n!=null&&n.includes(y))),right:[...((h=i==null?void 0:i.right)!=null?h:[]).filter(y=>!(n!=null&&n.includes(y))),...n]}}if(r==="left"){var g,f;return{left:[...((g=i==null?void 0:i.left)!=null?g:[]).filter(y=>!(n!=null&&n.includes(y))),...n],right:((f=i==null?void 0:i.right)!=null?f:[]).filter(y=>!(n!=null&&n.includes(y)))}}return{left:((o=i==null?void 0:i.left)!=null?o:[]).filter(y=>!(n!=null&&n.includes(y))),right:((s=i==null?void 0:i.right)!=null?s:[]).filter(y=>!(n!=null&&n.includes(y)))}})},e.getCanPin=()=>e.getLeafColumns().some(n=>{var i,o,s;return((i=n.columnDef.enablePinning)!=null?i:!0)&&((o=(s=t.options.enableColumnPinning)!=null?s:t.options.enablePinning)!=null?o:!0)}),e.getIsPinned=()=>{const r=e.getLeafColumns().map(u=>u.id),{left:n,right:i}=t.getState().columnPinning,o=r.some(u=>n==null?void 0:n.includes(u)),s=r.some(u=>i==null?void 0:i.includes(u));return o?"left":s?"right":!1},e.getPinnedIndex=()=>{var r,n;const i=e.getIsPinned();return i?(r=(n=t.getState().columnPinning)==null||(n=n[i])==null?void 0:n.indexOf(e.id))!=null?r:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=F(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(r,n,i)=>{const o=[...n??[],...i??[]];return r.filter(s=>!o.includes(s.column.id))},L(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=F(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(r,n)=>(n??[]).map(o=>r.find(s=>s.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),L(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=F(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(r,n)=>(n??[]).map(o=>r.find(s=>s.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),L(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var r,n;return e.setColumnPinning(t?kr():(r=(n=e.initialState)==null?void 0:n.columnPinning)!=null?r:kr())},e.getIsSomeColumnsPinned=t=>{var r;const n=e.getState().columnPinning;if(!t){var i,o;return!!((i=n.left)!=null&&i.length||(o=n.right)!=null&&o.length)}return!!((r=n[t])!=null&&r.length)},e.getLeftLeafColumns=F(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,r)=>(r??[]).map(n=>t.find(i=>i.id===n)).filter(Boolean),L(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=F(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,r)=>(r??[]).map(n=>t.find(i=>i.id===n)).filter(Boolean),L(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=F(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,n)=>{const i=[...r??[],...n??[]];return t.filter(o=>!i.includes(o.id))},L(e.options,"debugColumns","getCenterLeafColumns"))}};function Is(e){return e||(typeof document<"u"?document:null)}const At={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},$r=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),ks={getDefaultColumnDef:()=>At,getInitialState:e=>({columnSizing:{},columnSizingInfo:$r(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:he("columnSizing",e),onColumnSizingInfoChange:he("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var r,n,i;const o=t.getState().columnSizing[e.id];return Math.min(Math.max((r=e.columnDef.minSize)!=null?r:At.minSize,(n=o??e.columnDef.size)!=null?n:At.size),(i=e.columnDef.maxSize)!=null?i:At.maxSize)},e.getStart=F(r=>[r,ft(t,r),t.getState().columnSizing],(r,n)=>n.slice(0,e.getIndex(r)).reduce((i,o)=>i+o.getSize(),0),L(t.options,"debugColumns","getStart")),e.getAfter=F(r=>[r,ft(t,r),t.getState().columnSizing],(r,n)=>n.slice(e.getIndex(r)+1).reduce((i,o)=>i+o.getSize(),0),L(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(r=>{let{[e.id]:n,...i}=r;return i})},e.getCanResize=()=>{var r,n;return((r=e.columnDef.enableResizing)!=null?r:!0)&&((n=t.options.enableColumnResizing)!=null?n:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let r=0;const n=i=>{if(i.subHeaders.length)i.subHeaders.forEach(n);else{var o;r+=(o=i.column.getSize())!=null?o:0}};return n(e),r},e.getStart=()=>{if(e.index>0){const r=e.headerGroup.headers[e.index-1];return r.getStart()+r.getSize()}return 0},e.getResizeHandler=r=>{const n=t.getColumn(e.column.id),i=n==null?void 0:n.getCanResize();return o=>{if(!n||!i||(o.persist==null||o.persist(),Mr(o)&&o.touches&&o.touches.length>1))return;const s=e.getSize(),u=e?e.getLeafHeaders().map(I=>[I.column.id,I.column.getSize()]):[[n.id,n.getSize()]],h=Mr(o)?Math.round(o.touches[0].clientX):o.clientX,g={},f=(I,N)=>{typeof N=="number"&&(t.setColumnSizingInfo(M=>{var w,A;const G=t.options.columnResizeDirection==="rtl"?-1:1,Q=(N-((w=M==null?void 0:M.startOffset)!=null?w:0))*G,ae=Math.max(Q/((A=M==null?void 0:M.startSize)!=null?A:0),-.999999);return M.columnSizingStart.forEach(R=>{let[ne,me]=R;g[ne]=Math.round(Math.max(me+me*ae,0)*100)/100}),{...M,deltaOffset:Q,deltaPercentage:ae}}),(t.options.columnResizeMode==="onChange"||I==="end")&&t.setColumnSizing(M=>({...M,...g})))},y=I=>f("move",I),v=I=>{f("end",I),t.setColumnSizingInfo(N=>({...N,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=Is(r),x={moveHandler:I=>y(I.clientX),upHandler:I=>{p==null||p.removeEventListener("mousemove",x.moveHandler),p==null||p.removeEventListener("mouseup",x.upHandler),v(I.clientX)}},S={moveHandler:I=>(I.cancelable&&(I.preventDefault(),I.stopPropagation()),y(I.touches[0].clientX),!1),upHandler:I=>{var N;p==null||p.removeEventListener("touchmove",S.moveHandler),p==null||p.removeEventListener("touchend",S.upHandler),I.cancelable&&(I.preventDefault(),I.stopPropagation()),v((N=I.touches[0])==null?void 0:N.clientX)}},P=$s()?{passive:!1}:!1;Mr(o)?(p==null||p.addEventListener("touchmove",S.moveHandler,P),p==null||p.addEventListener("touchend",S.upHandler,P)):(p==null||p.addEventListener("mousemove",x.moveHandler,P),p==null||p.addEventListener("mouseup",x.upHandler,P)),t.setColumnSizingInfo(I=>({...I,startOffset:h,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:u,isResizingColumn:n.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var r;e.setColumnSizing(t?{}:(r=e.initialState.columnSizing)!=null?r:{})},e.resetHeaderSizeInfo=t=>{var r;e.setColumnSizingInfo(t?$r():(r=e.initialState.columnSizingInfo)!=null?r:$r())},e.getTotalSize=()=>{var t,r;return(t=(r=e.getHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,r;return(t=(r=e.getLeftHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,r;return(t=(r=e.getCenterHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,r;return(t=(r=e.getRightHeaderGroups()[0])==null?void 0:r.headers.reduce((n,i)=>n+i.getSize(),0))!=null?t:0}}};let Dt=null;function $s(){if(typeof Dt=="boolean")return Dt;let e=!1;try{const t={get passive(){return e=!0,!1}},r=()=>{};window.addEventListener("test",r,t),window.removeEventListener("test",r)}catch{e=!1}return Dt=e,Dt}function Mr(e){return e.type==="touchstart"}const Ms={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:he("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=r=>{e.getCanHide()&&t.setColumnVisibility(n=>({...n,[e.id]:r??!e.getIsVisible()}))},e.getIsVisible=()=>{var r,n;const i=e.columns;return(r=i.length?i.some(o=>o.getIsVisible()):(n=t.getState().columnVisibility)==null?void 0:n[e.id])!=null?r:!0},e.getCanHide=()=>{var r,n;return((r=e.columnDef.enableHiding)!=null?r:!0)&&((n=t.options.enableHiding)!=null?n:!0)},e.getToggleVisibilityHandler=()=>r=>{e.toggleVisibility==null||e.toggleVisibility(r.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=F(()=>[e.getAllCells(),t.getState().columnVisibility],r=>r.filter(n=>n.column.getIsVisible()),L(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=F(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(r,n,i)=>[...r,...n,...i],L(t.options,"debugRows","getVisibleCells"))},createTable:e=>{const t=(r,n)=>F(()=>[n(),n().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),L(e.options,"debugColumns",r));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=r=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(r),e.resetColumnVisibility=r=>{var n;e.setColumnVisibility(r?{}:(n=e.initialState.columnVisibility)!=null?n:{})},e.toggleAllColumnsVisible=r=>{var n;r=(n=r)!=null?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,o)=>({...i,[o.id]:r||!(o.getCanHide!=null&&o.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(r=>!(r.getIsVisible!=null&&r.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(r=>r.getIsVisible==null?void 0:r.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>r=>{var n;e.toggleAllColumnsVisible((n=r.target)==null?void 0:n.checked)}}};function ft(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Ns={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},As={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:he("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var r;const n=(r=e.getCoreRowModel().flatRows[0])==null||(r=r._getAllCellsByColumnId()[t.id])==null?void 0:r.getValue();return typeof n=="string"||typeof n=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var r,n,i,o;return((r=e.columnDef.enableGlobalFilter)!=null?r:!0)&&((n=t.options.enableGlobalFilter)!=null?n:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((o=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?o:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Te.includesString,e.getGlobalFilterFn=()=>{var t,r;const{globalFilterFn:n}=e.options;return Mt(n)?n:n==="auto"?e.getGlobalAutoFilterFn():(t=(r=e.options.filterFns)==null?void 0:r[n])!=null?t:Te[n]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},Ds={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:he("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,r=!1;e._autoResetExpanded=()=>{var n,i;if(!t){e._queue(()=>{t=!0});return}if((n=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?n:!e.options.manualExpanding){if(r)return;r=!0,e._queue(()=>{e.resetExpanded(),r=!1})}},e.setExpanded=n=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(n),e.toggleAllRowsExpanded=n=>{n??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=n=>{var i,o;e.setExpanded(n?{}:(i=(o=e.initialState)==null?void 0:o.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(n=>n.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>n=>{n.persist==null||n.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const n=e.getState().expanded;return n===!0||Object.values(n).some(Boolean)},e.getIsAllRowsExpanded=()=>{const n=e.getState().expanded;return typeof n=="boolean"?n===!0:!(!Object.keys(n).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let n=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(o=>{const s=o.split(".");n=Math.max(n,s.length)}),n},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=r=>{t.setExpanded(n=>{var i;const o=n===!0?!0:!!(n!=null&&n[e.id]);let s={};if(n===!0?Object.keys(t.getRowModel().rowsById).forEach(u=>{s[u]=!0}):s=n,r=(i=r)!=null?i:!o,!o&&r)return{...s,[e.id]:!0};if(o&&!r){const{[e.id]:u,...h}=s;return h}return n})},e.getIsExpanded=()=>{var r;const n=t.getState().expanded;return!!((r=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?r:n===!0||n!=null&&n[e.id])},e.getCanExpand=()=>{var r,n,i;return(r=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?r:((n=t.options.enableExpanding)!=null?n:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let r=!0,n=e;for(;r&&n.parentId;)n=t.getRow(n.parentId,!0),r=n.getIsExpanded();return r},e.getToggleExpandedHandler=()=>{const r=e.getCanExpand();return()=>{r&&e.toggleExpanded()}}}},Nr=0,Ar=10,Dr=()=>({pageIndex:Nr,pageSize:Ar}),Rs={getInitialState:e=>({...e,pagination:{...Dr(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:he("pagination",e)}),createTable:e=>{let t=!1,r=!1;e._autoResetPageIndex=()=>{var n,i;if(!t){e._queue(()=>{t=!0});return}if((n=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?n:!e.options.manualPagination){if(r)return;r=!0,e._queue(()=>{e.resetPageIndex(),r=!1})}},e.setPagination=n=>{const i=o=>ke(n,o);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=n=>{var i;e.setPagination(n?Dr():(i=e.initialState.pagination)!=null?i:Dr())},e.setPageIndex=n=>{e.setPagination(i=>{let o=ke(n,i.pageIndex);const s=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,s)),{...i,pageIndex:o}})},e.resetPageIndex=n=>{var i,o;e.setPageIndex(n?Nr:(i=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?i:Nr)},e.resetPageSize=n=>{var i,o;e.setPageSize(n?Ar:(i=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?i:Ar)},e.setPageSize=n=>{e.setPagination(i=>{const o=Math.max(1,ke(n,i.pageSize)),s=i.pageSize*i.pageIndex,u=Math.floor(s/o);return{...i,pageIndex:u,pageSize:o}})},e.setPageCount=n=>e.setPagination(i=>{var o;let s=ke(n,(o=e.options.pageCount)!=null?o:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...i,pageCount:s}}),e.getPageOptions=F(()=>[e.getPageCount()],n=>{let i=[];return n&&n>0&&(i=[...new Array(n)].fill(null).map((o,s)=>s)),i},L(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:n}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:n<i-1},e.previousPage=()=>e.setPageIndex(n=>n-1),e.nextPage=()=>e.setPageIndex(n=>n+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var n;return(n=e.options.pageCount)!=null?n:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var n;return(n=e.options.rowCount)!=null?n:e.getPrePaginationRowModel().rows.length}}},Rr=()=>({top:[],bottom:[]}),Fs={getInitialState:e=>({rowPinning:Rr(),...e}),getDefaultOptions:e=>({onRowPinningChange:he("rowPinning",e)}),createRow:(e,t)=>{e.pin=(r,n,i)=>{const o=n?e.getLeafRows().map(h=>{let{id:g}=h;return g}):[],s=i?e.getParentRows().map(h=>{let{id:g}=h;return g}):[],u=new Set([...s,e.id,...o]);t.setRowPinning(h=>{var g,f;if(r==="bottom"){var y,v;return{top:((y=h==null?void 0:h.top)!=null?y:[]).filter(S=>!(u!=null&&u.has(S))),bottom:[...((v=h==null?void 0:h.bottom)!=null?v:[]).filter(S=>!(u!=null&&u.has(S))),...Array.from(u)]}}if(r==="top"){var p,x;return{top:[...((p=h==null?void 0:h.top)!=null?p:[]).filter(S=>!(u!=null&&u.has(S))),...Array.from(u)],bottom:((x=h==null?void 0:h.bottom)!=null?x:[]).filter(S=>!(u!=null&&u.has(S)))}}return{top:((g=h==null?void 0:h.top)!=null?g:[]).filter(S=>!(u!=null&&u.has(S))),bottom:((f=h==null?void 0:h.bottom)!=null?f:[]).filter(S=>!(u!=null&&u.has(S)))}})},e.getCanPin=()=>{var r;const{enableRowPinning:n,enablePinning:i}=t.options;return typeof n=="function"?n(e):(r=n??i)!=null?r:!0},e.getIsPinned=()=>{const r=[e.id],{top:n,bottom:i}=t.getState().rowPinning,o=r.some(u=>n==null?void 0:n.includes(u)),s=r.some(u=>i==null?void 0:i.includes(u));return o?"top":s?"bottom":!1},e.getPinnedIndex=()=>{var r,n;const i=e.getIsPinned();if(!i)return-1;const o=(r=i==="top"?t.getTopRows():t.getBottomRows())==null?void 0:r.map(s=>{let{id:u}=s;return u});return(n=o==null?void 0:o.indexOf(e.id))!=null?n:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var r,n;return e.setRowPinning(t?Rr():(r=(n=e.initialState)==null?void 0:n.rowPinning)!=null?r:Rr())},e.getIsSomeRowsPinned=t=>{var r;const n=e.getState().rowPinning;if(!t){var i,o;return!!((i=n.top)!=null&&i.length||(o=n.bottom)!=null&&o.length)}return!!((r=n[t])!=null&&r.length)},e._getPinnedRows=(t,r,n)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(r??[]).map(s=>{const u=e.getRow(s,!0);return u.getIsAllParentsExpanded()?u:null}):(r??[]).map(s=>t.find(u=>u.id===s))).filter(Boolean).map(s=>({...s,position:n}))},e.getTopRows=F(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,r)=>e._getPinnedRows(t,r,"top"),L(e.options,"debugRows","getTopRows")),e.getBottomRows=F(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,r)=>e._getPinnedRows(t,r,"bottom"),L(e.options,"debugRows","getBottomRows")),e.getCenterRows=F(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,r,n)=>{const i=new Set([...r??[],...n??[]]);return t.filter(o=>!i.has(o.id))},L(e.options,"debugRows","getCenterRows"))}},Ls={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:he("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var r;return e.setRowSelection(t?{}:(r=e.initialState.rowSelection)!=null?r:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(r=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const n={...r},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(o=>{o.getCanSelect()&&(n[o.id]=!0)}):i.forEach(o=>{delete n[o.id]}),n})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(r=>{const n=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...r};return e.getRowModel().rows.forEach(o=>{Fr(i,o.id,n,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=F(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,r)=>Object.keys(t).length?Lr(e,r):{rows:[],flatRows:[],rowsById:{}},L(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=F(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,r)=>Object.keys(t).length?Lr(e,r):{rows:[],flatRows:[],rowsById:{}},L(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=F(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,r)=>Object.keys(t).length?Lr(e,r):{rows:[],flatRows:[],rowsById:{}},L(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:r}=e.getState();let n=!!(t.length&&Object.keys(r).length);return n&&t.some(i=>i.getCanSelect()&&!r[i.id])&&(n=!1),n},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:r}=e.getState();let n=!!t.length;return n&&t.some(i=>!r[i.id])&&(n=!1),n},e.getIsSomeRowsSelected=()=>{var t;const r=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return r>0&&r<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(r=>r.getCanSelect()).some(r=>r.getIsSelected()||r.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(r,n)=>{const i=e.getIsSelected();t.setRowSelection(o=>{var s;if(r=typeof r<"u"?r:!i,e.getCanSelect()&&i===r)return o;const u={...o};return Fr(u,e.id,r,(s=n==null?void 0:n.selectChildren)!=null?s:!0,t),u})},e.getIsSelected=()=>{const{rowSelection:r}=t.getState();return jr(e,r)},e.getIsSomeSelected=()=>{const{rowSelection:r}=t.getState();return Vr(e,r)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:r}=t.getState();return Vr(e,r)==="all"},e.getCanSelect=()=>{var r;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(r=t.options.enableRowSelection)!=null?r:!0},e.getCanSelectSubRows=()=>{var r;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(r=t.options.enableSubRowSelection)!=null?r:!0},e.getCanMultiSelect=()=>{var r;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(r=t.options.enableMultiRowSelection)!=null?r:!0},e.getToggleSelectedHandler=()=>{const r=e.getCanSelect();return n=>{var i;r&&e.toggleSelected((i=n.target)==null?void 0:i.checked)}}}},Fr=(e,t,r,n,i)=>{var o;const s=i.getRow(t,!0);r?(s.getCanMultiSelect()||Object.keys(e).forEach(u=>delete e[u]),s.getCanSelect()&&(e[t]=!0)):delete e[t],n&&(o=s.subRows)!=null&&o.length&&s.getCanSelectSubRows()&&s.subRows.forEach(u=>Fr(e,u.id,r,n,i))};function Lr(e,t){const r=e.getState().rowSelection,n=[],i={},o=function(s,u){return s.map(h=>{var g;const f=jr(h,r);if(f&&(n.push(h),i[h.id]=h),(g=h.subRows)!=null&&g.length&&(h={...h,subRows:o(h.subRows)}),f)return h}).filter(Boolean)};return{rows:o(t.rows),flatRows:n,rowsById:i}}function jr(e,t){var r;return(r=t[e.id])!=null?r:!1}function Vr(e,t,r){var n;if(!((n=e.subRows)!=null&&n.length))return!1;let i=!0,o=!1;return e.subRows.forEach(s=>{if(!(o&&!i)&&(s.getCanSelect()&&(jr(s,t)?o=!0:i=!1),s.subRows&&s.subRows.length)){const u=Vr(s,t);u==="all"?o=!0:(u==="some"&&(o=!0),i=!1)}}),i?"all":o?"some":!1}const zr=/([0-9]+)/gm,js=(e,t,r)=>xi($e(e.getValue(r)).toLowerCase(),$e(t.getValue(r)).toLowerCase()),Vs=(e,t,r)=>xi($e(e.getValue(r)),$e(t.getValue(r))),zs=(e,t,r)=>Hr($e(e.getValue(r)).toLowerCase(),$e(t.getValue(r)).toLowerCase()),Hs=(e,t,r)=>Hr($e(e.getValue(r)),$e(t.getValue(r))),Us=(e,t,r)=>{const n=e.getValue(r),i=t.getValue(r);return n>i?1:n<i?-1:0},Bs=(e,t,r)=>Hr(e.getValue(r),t.getValue(r));function Hr(e,t){return e===t?0:e>t?1:-1}function $e(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function xi(e,t){const r=e.split(zr).filter(Boolean),n=t.split(zr).filter(Boolean);for(;r.length&&n.length;){const i=r.shift(),o=n.shift(),s=parseInt(i,10),u=parseInt(o,10),h=[s,u].sort();if(isNaN(h[0])){if(i>o)return 1;if(o>i)return-1;continue}if(isNaN(h[1]))return isNaN(s)?-1:1;if(s>u)return 1;if(u>s)return-1}return r.length-n.length}const ht={alphanumeric:js,alphanumericCaseSensitive:Vs,text:zs,textCaseSensitive:Hs,datetime:Us,basic:Bs},Gs=[xs,Ms,Os,Ps,Cs,Es,Ns,As,{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:he("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const r=t.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const i of r){const o=i==null?void 0:i.getValue(e.id);if(Object.prototype.toString.call(o)==="[object Date]")return ht.datetime;if(typeof o=="string"&&(n=!0,o.split(zr).length>1))return ht.alphanumeric}return n?ht.text:ht.basic},e.getAutoSortDir=()=>{const r=t.getFilteredRowModel().flatRows[0];return typeof(r==null?void 0:r.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var r,n;if(!e)throw new Error;return Mt(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(r=(n=t.options.sortingFns)==null?void 0:n[e.columnDef.sortingFn])!=null?r:ht[e.columnDef.sortingFn]},e.toggleSorting=(r,n)=>{const i=e.getNextSortingOrder(),o=typeof r<"u"&&r!==null;t.setSorting(s=>{const u=s==null?void 0:s.find(p=>p.id===e.id),h=s==null?void 0:s.findIndex(p=>p.id===e.id);let g=[],f,y=o?r:i==="desc";if(s!=null&&s.length&&e.getCanMultiSort()&&n?u?f="toggle":f="add":s!=null&&s.length&&h!==s.length-1?f="replace":u?f="toggle":f="replace",f==="toggle"&&(o||i||(f="remove")),f==="add"){var v;g=[...s,{id:e.id,desc:y}],g.splice(0,g.length-((v=t.options.maxMultiSortColCount)!=null?v:Number.MAX_SAFE_INTEGER))}else f==="toggle"?g=s.map(p=>p.id===e.id?{...p,desc:y}:p):f==="remove"?g=s.filter(p=>p.id!==e.id):g=[{id:e.id,desc:y}];return g})},e.getFirstSortDir=()=>{var r,n;return((r=(n=e.columnDef.sortDescFirst)!=null?n:t.options.sortDescFirst)!=null?r:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=r=>{var n,i;const o=e.getFirstSortDir(),s=e.getIsSorted();return s?s!==o&&((n=t.options.enableSortingRemoval)==null||n)&&(!(r&&(i=t.options.enableMultiRemove)!=null)||i)?!1:s==="desc"?"asc":"desc":o},e.getCanSort=()=>{var r,n;return((r=e.columnDef.enableSorting)!=null?r:!0)&&((n=t.options.enableSorting)!=null?n:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var r,n;return(r=(n=e.columnDef.enableMultiSort)!=null?n:t.options.enableMultiSort)!=null?r:!!e.accessorFn},e.getIsSorted=()=>{var r;const n=(r=t.getState().sorting)==null?void 0:r.find(i=>i.id===e.id);return n?n.desc?"desc":"asc":!1},e.getSortIndex=()=>{var r,n;return(r=(n=t.getState().sorting)==null?void 0:n.findIndex(i=>i.id===e.id))!=null?r:-1},e.clearSorting=()=>{t.setSorting(r=>r!=null&&r.length?r.filter(n=>n.id!==e.id):[])},e.getToggleSortingHandler=()=>{const r=e.getCanSort();return n=>{r&&(n.persist==null||n.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(n):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var r,n;e.setSorting(t?[]:(r=(n=e.initialState)==null?void 0:n.sorting)!=null?r:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},ws,Ds,Rs,Fs,Ls,ks];function qs(e){var t,r;Fe.NODE_ENV!=="production"&&(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");const n=[...Gs,...(t=e._features)!=null?t:[]];let i={_features:n};const o=i._features.reduce((v,p)=>Object.assign(v,p.getDefaultOptions==null?void 0:p.getDefaultOptions(i)),{}),s=v=>i.options.mergeOptions?i.options.mergeOptions(o,v):{...o,...v};let h={...{},...(r=e.initialState)!=null?r:{}};i._features.forEach(v=>{var p;h=(p=v.getInitialState==null?void 0:v.getInitialState(h))!=null?p:h});const g=[];let f=!1;const y={_features:n,options:{...o,...e},initialState:h,_queue:v=>{g.push(v),f||(f=!0,Promise.resolve().then(()=>{for(;g.length;)g.shift()();f=!1}).catch(p=>setTimeout(()=>{throw p})))},reset:()=>{i.setState(i.initialState)},setOptions:v=>{const p=ke(v,i.options);i.options=s(p)},getState:()=>i.options.state,setState:v=>{i.options.onStateChange==null||i.options.onStateChange(v)},_getRowId:(v,p,x)=>{var S;return(S=i.options.getRowId==null?void 0:i.options.getRowId(v,p,x))!=null?S:`${x?[x.id,p].join("."):p}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(v,p)=>{let x=(p?i.getPrePaginationRowModel():i.getRowModel()).rowsById[v];if(!x&&(x=i.getCoreRowModel().rowsById[v],!x))throw Fe.NODE_ENV!=="production"?new Error(`getRow could not find row with ID: ${v}`):new Error;return x},_getDefaultColumnDef:F(()=>[i.options.defaultColumn],v=>{var p;return v=(p=v)!=null?p:{},{header:x=>{const S=x.header.column.columnDef;return S.accessorKey?S.accessorKey:S.accessorFn?S.id:null},cell:x=>{var S,P;return(S=(P=x.renderValue())==null||P.toString==null?void 0:P.toString())!=null?S:null},...i._features.reduce((x,S)=>Object.assign(x,S.getDefaultColumnDef==null?void 0:S.getDefaultColumnDef()),{}),...v}},L(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>i.options.columns,getAllColumns:F(()=>[i._getColumnDefs()],v=>{const p=function(x,S,P){return P===void 0&&(P=0),x.map(I=>{const N=Ss(i,I,P,S),M=I;return N.columns=M.columns?p(M.columns,N,P+1):[],N})};return p(v)},L(e,"debugColumns","getAllColumns")),getAllFlatColumns:F(()=>[i.getAllColumns()],v=>v.flatMap(p=>p.getFlatColumns()),L(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:F(()=>[i.getAllFlatColumns()],v=>v.reduce((p,x)=>(p[x.id]=x,p),{}),L(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:F(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(v,p)=>{let x=v.flatMap(S=>S.getLeafColumns());return p(x)},L(e,"debugColumns","getAllLeafColumns")),getColumn:v=>{const p=i._getAllFlatColumnsById()[v];return Fe.NODE_ENV!=="production"&&!p&&console.error(`[Table] Column with id '${v}' does not exist.`),p}};Object.assign(i,y);for(let v=0;v<i._features.length;v++){const p=i._features[v];p==null||p.createTable==null||p.createTable(i)}return i}function Ur(){return e=>F(()=>[e.options.data],t=>{const r={rows:[],flatRows:[],rowsById:{}},n=function(i,o,s){o===void 0&&(o=0);const u=[];for(let g=0;g<i.length;g++){const f=Or(e,e._getRowId(i[g],g,s),i[g],g,o,void 0,s==null?void 0:s.id);if(r.flatRows.push(f),r.rowsById[f.id]=f,u.push(f),e.options.getSubRows){var h;f.originalSubRows=e.options.getSubRows(i[g],g),(h=f.originalSubRows)!=null&&h.length&&(f.subRows=n(f.originalSubRows,o+1,f))}}return u};return r.rows=n(t),r},L(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Ws(e){const t=[],r=n=>{var i;t.push(n),(i=n.subRows)!=null&&i.length&&n.getIsExpanded()&&n.subRows.forEach(r)};return e.rows.forEach(r),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function Xs(e,t,r){return r.options.filterFromLeafRows?Js(e,t,r):Ks(e,t,r)}function Js(e,t,r){var n;const i=[],o={},s=(n=r.options.maxLeafRowFilterDepth)!=null?n:100,u=function(h,g){g===void 0&&(g=0);const f=[];for(let v=0;v<h.length;v++){var y;let p=h[v];const x=Or(r,p.id,p.original,p.index,p.depth,void 0,p.parentId);if(x.columnFilters=p.columnFilters,(y=p.subRows)!=null&&y.length&&g<s){if(x.subRows=u(p.subRows,g+1),p=x,t(p)&&!x.subRows.length){f.push(p),o[p.id]=p,i.push(p);continue}if(t(p)||x.subRows.length){f.push(p),o[p.id]=p,i.push(p);continue}}else p=x,t(p)&&(f.push(p),o[p.id]=p,i.push(p))}return f};return{rows:u(e),flatRows:i,rowsById:o}}function Ks(e,t,r){var n;const i=[],o={},s=(n=r.options.maxLeafRowFilterDepth)!=null?n:100,u=function(h,g){g===void 0&&(g=0);const f=[];for(let v=0;v<h.length;v++){let p=h[v];if(t(p)){var y;if((y=p.subRows)!=null&&y.length&&g<s){const S=Or(r,p.id,p.original,p.index,p.depth,void 0,p.parentId);S.subRows=u(p.subRows,g+1),p=S}f.push(p),i.push(p),o[p.id]=p}}return f};return{rows:u(e),flatRows:i,rowsById:o}}function Br(){return e=>F(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,r,n)=>{if(!t.rows.length||!(r!=null&&r.length)&&!n){for(let v=0;v<t.flatRows.length;v++)t.flatRows[v].columnFilters={},t.flatRows[v].columnFiltersMeta={};return t}const i=[],o=[];(r??[]).forEach(v=>{var p;const x=e.getColumn(v.id);if(!x)return;const S=x.getFilterFn();if(!S){Fe.NODE_ENV!=="production"&&console.warn(`Could not find a valid 'column.filterFn' for column with the ID: ${x.id}.`);return}i.push({id:v.id,filterFn:S,resolvedValue:(p=S.resolveFilterValue==null?void 0:S.resolveFilterValue(v.value))!=null?p:v.value})});const s=(r??[]).map(v=>v.id),u=e.getGlobalFilterFn(),h=e.getAllLeafColumns().filter(v=>v.getCanGlobalFilter());n&&u&&h.length&&(s.push("__global__"),h.forEach(v=>{var p;o.push({id:v.id,filterFn:u,resolvedValue:(p=u.resolveFilterValue==null?void 0:u.resolveFilterValue(n))!=null?p:n})}));let g,f;for(let v=0;v<t.flatRows.length;v++){const p=t.flatRows[v];if(p.columnFilters={},i.length)for(let x=0;x<i.length;x++){g=i[x];const S=g.id;p.columnFilters[S]=g.filterFn(p,S,g.resolvedValue,P=>{p.columnFiltersMeta[S]=P})}if(o.length){for(let x=0;x<o.length;x++){f=o[x];const S=f.id;if(f.filterFn(p,S,f.resolvedValue,P=>{p.columnFiltersMeta[S]=P})){p.columnFilters.__global__=!0;break}}p.columnFilters.__global__!==!0&&(p.columnFilters.__global__=!1)}}const y=v=>{for(let p=0;p<s.length;p++)if(v.columnFilters[s[p]]===!1)return!1;return!0};return Xs(t.rows,y,e)},L(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Ci(e){return t=>F(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(r,n)=>{if(!n.rows.length)return n;const{pageSize:i,pageIndex:o}=r;let{rows:s,flatRows:u,rowsById:h}=n;const g=i*o,f=g+i;s=s.slice(g,f);let y;t.options.paginateExpandedRows?y={rows:s,flatRows:u,rowsById:h}:y=Ws({rows:s,flatRows:u,rowsById:h}),y.flatRows=[];const v=p=>{y.flatRows.push(p),p.subRows.length&&p.subRows.forEach(v)};return y.rows.forEach(v),y},L(t.options,"debugTable","getPaginationRowModel"))}function Gr(){return e=>F(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,r)=>{if(!r.rows.length||!(t!=null&&t.length))return r;const n=e.getState().sorting,i=[],o=n.filter(h=>{var g;return(g=e.getColumn(h.id))==null?void 0:g.getCanSort()}),s={};o.forEach(h=>{const g=e.getColumn(h.id);g&&(s[h.id]={sortUndefined:g.columnDef.sortUndefined,invertSorting:g.columnDef.invertSorting,sortingFn:g.getSortingFn()})});const u=h=>{const g=h.map(f=>({...f}));return g.sort((f,y)=>{for(let p=0;p<o.length;p+=1){var v;const x=o[p],S=s[x.id],P=S.sortUndefined,I=(v=x==null?void 0:x.desc)!=null?v:!1;let N=0;if(P){const M=f.getValue(x.id),w=y.getValue(x.id),A=M===void 0,G=w===void 0;if(A||G){if(P==="first")return A?-1:1;if(P==="last")return A?1:-1;N=A&&G?0:A?P:-P}}if(N===0&&(N=S.sortingFn(f,y,x.id)),N!==0)return I&&(N*=-1),S.invertSorting&&(N*=-1),N}return f.index-y.index}),g.forEach(f=>{var y;i.push(f),(y=f.subRows)!=null&&y.length&&(f.subRows=u(f.subRows))}),g};return{rows:u(r.rows),flatRows:i,rowsById:r.rowsById}},L(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ke(e,t){return e?Ys(e)?wr.createElement(e,t):e:null}function Ys(e){return Qs(e)||typeof e=="function"||Zs(e)}function Qs(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function Zs(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function qr(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[r]=wr.useState(()=>({current:qs(t)})),[n,i]=wr.useState(()=>r.current.initialState);return r.current.setOptions(o=>({...o,...e,state:{...n,...e.state},onStateChange:s=>{i(s),e.onStateChange==null||e.onStateChange(s)}})),r.current}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var el={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),V=(e,t)=>{const r=k.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:u="",children:h,...g},f)=>k.createElement("svg",{ref:f,...el,width:i,height:i,stroke:n,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${tl(e)}`,u].join(" "),...g},[...t.map(([y,v])=>k.createElement(y,v)),...Array.isArray(h)?h:[h]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=V("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=V("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=V("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=V("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=V("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=V("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=V("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=V("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=V("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=V("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=V("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=V("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=V("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=V("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=V("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=V("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=V("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=V("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=V("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=V("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=V("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=V("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=V("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=V("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=V("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=V("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=V("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=V("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=V("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=V("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=V("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=V("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=V("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=V("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=V("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=V("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=V("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=V("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=V("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=V("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=V("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),re="com.hubbi.inventory",Cl="com.hubbi.accounting";function El(){const[e,t]=k.useState([]),[r,n]=k.useState(null),[i,o]=k.useState(null),[s,u]=k.useState(!0),[h,g]=k.useState(null);k.useEffect(()=>{f()},[]);const f=async()=>{var A;u(!0),await y();const M=await T.db.query("SELECT * FROM hubbi_fiscal_config WHERE id = 'default'",[],{moduleId:re});M&&M.length>0&&o(M[0]),!await T.modules.isInstalled(Cl)&&((A=M[0])==null?void 0:A.managed_by)!==re&&await T.db.execute("UPDATE hubbi_fiscal_config SET managed_by = ? WHERE id = 'default'",[re],{moduleId:re}),await v(),await p(),u(!1)},y=async()=>{await T.db.execute(`
      CREATE TABLE IF NOT EXISTS hubbi_fiscal_config (
        id TEXT PRIMARY KEY DEFAULT 'default',
        lock_after_periods INTEGER DEFAULT 2,
        auto_close BOOLEAN DEFAULT FALSE,
        period_type TEXT DEFAULT 'monthly',
        fiscal_year_start_month INTEGER DEFAULT 1,
        managed_by TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `,[],{moduleId:re}),await T.db.execute(`
      INSERT OR IGNORE INTO hubbi_fiscal_config (id, lock_after_periods, period_type)
      VALUES ('default', 2, 'monthly')
    `,[],{moduleId:re}),await T.db.execute(`
      CREATE TABLE IF NOT EXISTS hubbi_fiscal_periods (
        id TEXT PRIMARY KEY,
        year INTEGER NOT NULL,
        month INTEGER NOT NULL,
        quarter INTEGER,
        start_date DATE NOT NULL,
        end_date DATE NOT NULL,
        status TEXT DEFAULT 'open',
        is_current BOOLEAN DEFAULT FALSE,
        created_by_module TEXT,
        closed_by TEXT,
        closed_at DATETIME,
        locked_at DATETIME,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        UNIQUE(year, month)
      )
    `,[],{moduleId:re})},v=async()=>{const M=await T.db.query("SELECT * FROM hubbi_fiscal_periods WHERE is_current = TRUE",[],{moduleId:re});if(!M||M.length===0){const w=new Date,A=w.getFullYear(),G=w.getMonth()+1,Q=`${A}-${String(G).padStart(2,"0")}`,ae=new Date(A,G-1,1).toISOString().split("T")[0],R=new Date(A,G,0).toISOString().split("T")[0];await T.db.execute(`
        INSERT OR IGNORE INTO hubbi_fiscal_periods 
          (id, year, month, start_date, end_date, status, is_current, created_by_module)
        VALUES (?, ?, ?, ?, ?, 'open', TRUE, ?)
      `,[Q,A,G,ae,R,re],{moduleId:re})}},p=async()=>{const M=await T.db.query("SELECT * FROM hubbi_fiscal_periods ORDER BY year DESC, month DESC",[],{moduleId:re});if(M){t(M);const w=M.find(A=>A.is_current);n(w||null),!h&&w&&g(w.id)}},x=k.useCallback(M=>{if(!i||!r)return!1;const w=e.find(ae=>ae.id===M);if(!w||w.status==="closed"||w.status==="locked")return!1;const A=r.year*12+r.month,G=w.year*12+w.month;return A-G<=i.lock_after_periods},[i,r,e]);return{periods:e,currentPeriod:r,config:i,loading:s,selectedPeriodId:h,selectPeriod:M=>{g(M)},getSelectedPeriod:()=>e.find(M=>M.id===h)||r,isPeriodEditable:x,closePeriod:async(M,w)=>{const A=e.find(G=>G.id===M);if(!A||A.status!=="open")return!1;if(await T.db.execute(`UPDATE hubbi_fiscal_periods 
       SET status = 'closed', closed_by = ?, closed_at = ? 
       WHERE id = ?`,[w,new Date().toISOString(),M],{moduleId:re}),A.is_current){const G=A.month===12?1:A.month+1,Q=A.month===12?A.year+1:A.year,ae=`${Q}-${String(G).padStart(2,"0")}`,R=new Date(Q,G-1,1).toISOString().split("T")[0],ne=new Date(Q,G,0).toISOString().split("T")[0];await T.db.execute("UPDATE hubbi_fiscal_periods SET is_current = FALSE WHERE id = ?",[M],{moduleId:re}),await T.db.execute(`
        INSERT OR IGNORE INTO hubbi_fiscal_periods 
          (id, year, month, start_date, end_date, status, is_current, created_by_module)
        VALUES (?, ?, ?, ?, ?, 'open', TRUE, ?)
      `,[ae,Q,G,R,ne,re],{moduleId:re})}return await p(),!0},updateConfig:async M=>{const w=[],A=[];M.lock_after_periods!==void 0&&(w.push("lock_after_periods = ?"),A.push(M.lock_after_periods)),M.auto_close!==void 0&&(w.push("auto_close = ?"),A.push(M.auto_close)),M.period_type!==void 0&&(w.push("period_type = ?"),A.push(M.period_type)),w.length>0&&(w.push("updated_at = ?"),A.push(new Date().toISOString()),A.push("default"),await T.db.execute(`UPDATE hubbi_fiscal_config SET ${w.join(", ")} WHERE id = ?`,A,{moduleId:re}),await f())},refreshPeriods:p}}async function Kr(){const e=await T.db.query("SELECT * FROM hubbi_fiscal_periods WHERE is_current = TRUE",[],{moduleId:re});return e&&e.length>0?e[0]:null}async function wl(e){const t=await T.db.query("SELECT * FROM hubbi_fiscal_periods WHERE id = ?",[e],{moduleId:re});return t&&t.length>0?t[0]:null}async function Fi(e){const[t,r,n]=await Promise.all([wl(e),Kr(),T.db.query("SELECT * FROM hubbi_fiscal_config WHERE id = 'default'",[],{moduleId:re})]);if(!t||!r||!n||n.length===0)return!1;const i=n[0];if(t.status==="closed"||t.status==="locked")return!1;const o=r.year*12+r.month,s=t.year*12+t.month;return o-s<=i.lock_after_periods}function Tl(){const[e,t]=k.useState({assignedSubHubId:null,activeSubHubId:null,subHubs:[],canViewAll:!1,canEditOwn:!0,canEditAll:!1,canSwitchActive:!1}),[r,n]=k.useState(!0);k.useEffect(()=>{i()},[]);const i=async()=>{n(!0);const f=T.getContext(),y=(f==null?void 0:f.subHubId)||null,v=T.permissions.has("inventory:view_all_subhubs"),p=T.permissions.has("inventory:edit_own_subhub"),x=T.permissions.has("inventory:edit_all_subhubs"),S=T.permissions.has("inventory:switch_active_subhub");let P=[];try{P=await T.subHubs.list()||[]}catch{P=[]}let I=y;if(S){const N=await T.settings.get("active_subhub_id");N&&P.some(M=>M.id===N)&&(I=N)}t({assignedSubHubId:y,activeSubHubId:I,subHubs:P,canViewAll:v,canEditOwn:p,canEditAll:x,canSwitchActive:S}),n(!1)},o=k.useCallback(async f=>e.canSwitchActive?(await T.settings.set("active_subhub_id",f),t(y=>({...y,activeSubHubId:f})),T.notify("Sucursal activa cambiada","success"),!0):(T.notify("No tienes permiso para cambiar de sucursal","error"),!1),[e.canSwitchActive]),s=k.useCallback(f=>!!(e.canEditAll||e.canEditOwn&&f===e.assignedSubHubId),[e.canEditAll,e.canEditOwn,e.assignedSubHubId]),u=k.useCallback((f="sub_hub_id")=>e.canViewAll?e.activeSubHubId?` AND ${f} = '${e.activeSubHubId}'`:"":e.assignedSubHubId?` AND ${f} = '${e.assignedSubHubId}'`:" AND 1=0",[e.canViewAll,e.activeSubHubId,e.assignedSubHubId]),h=k.useCallback(()=>e.canSwitchActive&&e.activeSubHubId?e.activeSubHubId:e.assignedSubHubId,[e.canSwitchActive,e.activeSubHubId,e.assignedSubHubId]),g=k.useCallback(()=>{const f=e.activeSubHubId||e.assignedSubHubId,y=e.subHubs.find(v=>v.id===f);return(y==null?void 0:y.name)||"Sin Sucursal"},[e.activeSubHubId,e.assignedSubHubId,e.subHubs]);return{...e,loading:r,setActiveSubHub:o,canEditSubHub:s,getSubHubWhereClause:u,getEffectiveSubHubId:h,getActiveSubHubName:g,refreshContext:i}}const Ol=[{value:"initial",label:"Carga Inicial",description:"Crear productos y establecer stock inicial"},{value:"adjust",label:"Ajuste Masivo",description:"Ajustar cantidades existentes (+/-)"},{value:"sync",label:"SincronizaciÃ³n",description:"Reemplazar stock actual con valores del Excel"}],Li=({onClose:e,onSuccess:t})=>{const[r,n]=k.useState(null),[i,o]=k.useState("initial"),[s,u]=k.useState(""),[h,g]=k.useState([]),[f,y]=k.useState([]),[v,p]=k.useState(!1),[x,S]=k.useState("upload"),[P,I]=k.useState({success:0,errors:0}),{currentPeriod:N,isPeriodEditable:M}=El(),{getEffectiveSubHubId:w,canEditSubHub:A}=Tl();k.useState(()=>{(async()=>{const ne=await T.db.query("SELECT id, name FROM com_hubbi_inventory_locations WHERE is_active = TRUE",[],{moduleId:"com.hubbi.inventory"});g(ne),ne.length>0&&u(ne[0].id)})()});const G=k.useCallback(async R=>{var ct;const ne=(ct=R.target.files)==null?void 0:ct[0];if(!ne)return;n(ne);const fe=(await ne.text()).split(`
`),xe=fe[0].toLowerCase().split(",").map(ee=>ee.trim()),Ae=xe.findIndex(ee=>ee.includes("sku")||ee.includes("codigo")),Be=xe.findIndex(ee=>ee.includes("name")||ee.includes("nombre")),ie=xe.findIndex(ee=>ee.includes("qty")||ee.includes("quantity")||ee.includes("cantidad")),Ce=xe.findIndex(ee=>ee.includes("cost")||ee.includes("costo")||ee.includes("precio"));if(Ae===-1||ie===-1){T.notify("El archivo debe tener columnas SKU y Cantidad","error");return}const le=[];for(let ee=1;ee<fe.length;ee++){const Ge=fe[ee].split(",").map(Yn=>Yn.trim());Ge[Ae]&&le.push({sku:Ge[Ae],name:Be>=0?Ge[Be]:void 0,quantity:parseFloat(Ge[ie])||0,cost:Ce>=0?parseFloat(Ge[Ce]):void 0})}y(le),S("preview")},[]),Q=async()=>{var xe,Ae,Be;if(N&&!M(N.id)){T.notify("El perÃ­odo actual estÃ¡ cerrado","error");return}const R=w();if(R&&!A(R)){T.notify("No tienes permiso para editar esta sucursal","error");return}if(!await((Ae=(xe=T.auth).requireRevalidation)==null?void 0:Ae.call(xe,"ImportaciÃ³n masiva de inventario"))){T.notify("RevalidaciÃ³n de identidad cancelada","warning");return}p(!0);let me=0,fe=0;for(const ie of f)try{const Ce=await T.db.query("SELECT id FROM com_hubbi_inventory_items WHERE sku = ?",[ie.sku],{moduleId:"com.hubbi.inventory"});let le;if(Ce.length===0&&i==="initial"&&ie.name)le=crypto.randomUUID(),await T.db.execute(`
            INSERT INTO com_hubbi_inventory_items (id, sku, name, weighted_average_cost, is_active)
            VALUES (?, ?, ?, ?, TRUE)
          `,[le,ie.sku,ie.name,ie.cost||0],{moduleId:"com.hubbi.inventory"});else if(Ce.length>0)le=Ce[0].id;else{ie.error="Producto no encontrado",fe++;continue}if(i==="initial")await T.db.execute(`
            INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
            VALUES (?, ?, ?)
            ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = ?
          `,[le,s,ie.quantity,ie.quantity],{moduleId:"com.hubbi.inventory"});else if(i==="adjust"){const ct=crypto.randomUUID();await T.db.execute(`
            INSERT INTO com_hubbi_inventory_movements 
              (id, item_id, location_id, type, reason, quantity, created_by, period_id)
            VALUES (?, ?, ?, 'ADJUST', 'excel_import', ?, ?, ?)
          `,[ct,le,s,ie.quantity,(Be=T.getContext())==null?void 0:Be.userId,N==null?void 0:N.id],{moduleId:"com.hubbi.inventory"}),await T.db.execute(`
            INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
            VALUES (?, ?, ?)
            ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = quantity + ?
          `,[le,s,ie.quantity,ie.quantity],{moduleId:"com.hubbi.inventory"})}else i==="sync"&&await T.db.execute(`
            INSERT INTO com_hubbi_inventory_stock (item_id, location_id, quantity)
            VALUES (?, ?, ?)
            ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = ?
          `,[le,s,ie.quantity,ie.quantity],{moduleId:"com.hubbi.inventory"});me++}catch{ie.error="Error al procesar",fe++}I({success:me,errors:fe}),S("result"),p(!1),me>0&&(t==null||t(me))},ae=()=>{const R=`SKU,Nombre,Cantidad,Costo
PROD-001,Producto Ejemplo,100,25.50
`,ne=new Blob([R],{type:"text/csv"}),me=URL.createObjectURL(ne),fe=document.createElement("a");fe.href=me,fe.download="plantilla_inventario.csv",fe.click()};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(dl,{className:"text-green-600",size:20}),"Importar desde Excel"]}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",children:a.jsx(Lt,{size:20,className:"text-gray-500"})})]}),a.jsxs("div",{className:"p-6 flex-1 overflow-auto",children:[x==="upload"&&a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modo de importaciÃ³n"}),a.jsx("div",{className:"space-y-2",children:Ol.map(R=>a.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer ${i===R.value?"border-green-500 bg-green-50":"border-gray-200 hover:bg-gray-50"}`,children:[a.jsx("input",{type:"radio",name:"mode",value:R.value,checked:i===R.value,onChange:()=>o(R.value),className:"mt-1"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:R.label}),a.jsx("div",{className:"text-sm text-gray-500",children:R.description})]})]},R.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bodega destino"}),a.jsx("select",{value:s,onChange:R=>u(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:h.map(R=>a.jsx("option",{value:R.id,children:R.name},R.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Archivo"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-green-500 transition-colors",children:[a.jsx(Ft,{size:40,className:"mx-auto text-gray-400 mb-3"}),a.jsx("p",{className:"text-gray-600 mb-2",children:"Arrastra tu archivo Excel o CSV aquÃ­"}),a.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:G,className:"hidden",id:"excel-input"}),a.jsx("label",{htmlFor:"excel-input",className:"inline-block px-4 py-2 bg-green-600 text-white rounded-lg cursor-pointer hover:bg-green-700",children:"Seleccionar archivo"})]})]}),a.jsxs("button",{onClick:ae,className:"flex items-center gap-2 text-green-600 hover:text-green-700 text-sm",children:[a.jsx(ki,{size:16}),"Descargar plantilla de ejemplo"]})]}),x==="preview"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[f.length," productos encontrados en ",r==null?void 0:r.name]}),a.jsx("button",{onClick:()=>S("upload"),className:"text-sm text-blue-600 hover:underline",children:"Cambiar archivo"})]}),a.jsx("div",{className:"border rounded-lg overflow-hidden max-h-64 overflow-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"SKU"}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Nombre"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Cantidad"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Costo"})]})}),a.jsx("tbody",{children:f.slice(0,50).map((R,ne)=>a.jsxs("tr",{className:R.error?"bg-red-50":"hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-2 font-mono",children:R.sku}),a.jsx("td",{className:"px-3 py-2",children:R.name||"-"}),a.jsx("td",{className:"px-3 py-2 text-right",children:R.quantity}),a.jsx("td",{className:"px-3 py-2 text-right",children:R.cost??"-"})]},ne))})]})}),f.length>50&&a.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Mostrando 50 de ",f.length," productos"]})]}),x==="result"&&a.jsxs("div",{className:"text-center py-8",children:[P.errors===0?a.jsx(Rt,{size:48,className:"mx-auto text-green-600 mb-4"}):a.jsx(nl,{size:48,className:"mx-auto text-amber-500 mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ImportaciÃ³n completada"}),a.jsxs("p",{className:"text-gray-600",children:[P.success," productos importados exitosamente",P.errors>0&&`, ${P.errors} errores`]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg",children:x==="result"?"Cerrar":"Cancelar"}),x==="preview"&&a.jsxs("button",{onClick:Q,disabled:v||f.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:[a.jsx(Ft,{size:16}),v?"Importando...":`Importar ${f.length} productos`]})]})]})})},Ye=Tr(),ji=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),[i,o]=k.useState([]),[s,u]=k.useState(""),[h,g]=k.useState([]),[f,y]=k.useState(!1),v=k.useCallback(async()=>{n(!0);const{data:I,error:N}=await T.data.list({table:"com_hubbi_inventory_items",options:{strategy:"cache_first"}});I?t(I):N&&(console.error(N),T.notify.error("Error al cargar inventario")),n(!1)},[]),p=k.useCallback(()=>v(),[v]);k.useEffect(()=>(v(),T.events.on("inventory:item:created",p),T.events.on("inventory:item:updated",p),()=>{T.events.off("inventory:item:created",p),T.events.off("inventory:item:updated",p)}),[v,p]);const x=I=>{switch(I){case"kit":return a.jsx(pt,{size:18,className:"text-blue-500"});case"serialized":return a.jsx(rl,{size:18,className:"text-purple-500"});case"asset":return a.jsx(Jr,{size:18,className:"text-orange-500"});default:return a.jsx(al,{size:18,className:"text-gray-500"})}},S=k.useMemo(()=>[Ye.accessor("name",{header:"Producto",cell:I=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-hubbi-text",children:I.getValue()}),I.row.original.description&&a.jsx("span",{className:"text-xs text-hubbi-dim truncate max-w-xs",children:I.row.original.description})]})}),Ye.accessor("sku",{header:"SKU",cell:I=>a.jsx("span",{className:"font-mono text-hubbi-dim",children:I.getValue()})}),Ye.accessor("type",{header:"Tipo",cell:I=>a.jsxs("div",{className:"flex items-center gap-2",title:I.getValue(),children:[x(I.getValue()),a.jsx("span",{className:"text-sm capitalize text-hubbi-dim",children:I.getValue()})]})}),Ye.accessor("weighted_average_cost",{header:()=>a.jsx("div",{className:"text-right",children:"Costo Prom."}),cell:I=>a.jsxs("div",{className:"text-right font-mono",children:["$",I.getValue().toFixed(2)]})}),Ye.accessor("is_active",{header:()=>a.jsx("div",{className:"text-center",children:"Estado"}),cell:I=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${I.getValue()?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:I.getValue()?"Activo":"Inactivo"})})}),Ye.display({id:"actions",header:()=>a.jsx("div",{className:"text-right",children:"Acciones"}),cell:()=>a.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{className:"p-1 hover:bg-hubbi-bg rounded text-hubbi-dim hover:text-hubbi-primary",children:a.jsx($i,{size:16})}),a.jsx("button",{className:"p-1 hover:bg-hubbi-bg rounded text-hubbi-dim hover:text-hubbi-danger",children:a.jsx(Ai,{size:16})})]})})],[]),P=qr({data:e,columns:S,state:{sorting:i,globalFilter:s,columnFilters:h},onSortingChange:o,onGlobalFilterChange:u,onColumnFiltersChange:g,getCoreRowModel:Ur(),getSortedRowModel:Gr(),getFilteredRowModel:Br(),getPaginationRowModel:Ci()});return a.jsxs("div",{className:"flex flex-col h-full bg-hubbi-card rounded-xl border border-hubbi-border shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-hubbi-border",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Xr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-hubbi-dim",size:18}),a.jsx("input",{type:"text",placeholder:"Buscar por SKU o Nombre...",className:"pl-10 pr-4 py-2 border border-hubbi-border rounded-lg text-sm w-64 bg-hubbi-input text-hubbi-text focus:outline-none focus:ring-2 focus:ring-hubbi-primary/20 focus:border-hubbi-primary",value:s,onChange:I=>u(I.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[a.jsx(hl,{size:18,className:"text-hubbi-dim"}),a.jsxs("select",{className:"text-sm border-none bg-transparent focus:ring-0 cursor-pointer text-hubbi-text font-medium",onChange:I=>{var M;const N=I.target.value;(M=P.getColumn("type"))==null||M.setFilterValue(N==="all"?void 0:N)},children:[a.jsx("option",{value:"all",children:"Todos los tipos"}),a.jsx("option",{value:"simple",children:"Simples"}),a.jsx("option",{value:"kit",children:"Kits"}),a.jsx("option",{value:"serialized",children:"Serializados"}),a.jsx("option",{value:"asset",children:"Activos (Camiones)"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>{y(!0)},className:"flex items-center gap-2 bg-hubbi-card border border-hubbi-border hover:bg-hubbi-bg text-hubbi-text px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[a.jsx(Ft,{size:18}),"Importar"]}),a.jsxs("button",{className:"flex items-center gap-2 bg-hubbi-primary hover:opacity-90 text-hubbi-primary-fg px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[a.jsx(Mi,{size:18}),"Nuevo Producto"]})]})]}),f&&a.jsx(Li,{onClose:()=>y(!1),onSuccess:p}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-hubbi-bg sticky top-0 z-10",children:P.getHeaderGroups().map(I=>a.jsx("tr",{children:I.headers.map(N=>a.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-hubbi-dim uppercase tracking-wider cursor-pointer hover:bg-hubbi-card transition-colors",onClick:N.column.getToggleSortingHandler(),children:a.jsxs("div",{className:"flex items-center gap-1",children:[Ke(N.column.columnDef.header,N.getContext()),N.column.getCanSort()&&a.jsx(Le,{size:12,className:"text-hubbi-dim"})]})},N.id))},I.id))}),a.jsx("tbody",{className:"divide-y divide-hubbi-border",children:r?a.jsx("tr",{children:a.jsx("td",{colSpan:S.length,className:"text-center py-12 text-hubbi-dim",children:"Cargando inventario..."})}):P.getRowModel().rows.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:S.length,className:"text-center py-12 text-hubbi-dim",children:"No se encontraron productos"})}):P.getRowModel().rows.map(I=>a.jsx("tr",{className:"hover:bg-hubbi-bg/50 transition-colors group",children:I.getVisibleCells().map(N=>a.jsx("td",{className:"px-6 py-3 text-sm",children:Ke(N.column.columnDef.cell,N.getContext())},N.id))},I.id))})]})}),P.getPageCount()>1&&a.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-hubbi-border",children:[a.jsxs("div",{className:"text-xs text-hubbi-dim",children:["PÃ¡gina ",P.getState().pagination.pageIndex+1," de ",P.getPageCount()]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"px-3 py-1 border border-hubbi-border rounded text-xs text-hubbi-text disabled:opacity-50 hover:bg-hubbi-bg",onClick:()=>P.previousPage(),disabled:!P.getCanPreviousPage(),children:"Anterior"}),a.jsx("button",{className:"px-3 py-1 border rounded text-xs disabled:opacity-50",onClick:()=>P.nextPage(),disabled:!P.getCanNextPage(),children:"Siguiente"})]})]})]})},Qe=Tr(),Pl=({item:e})=>{const[t,r]=k.useState([]),[n,i]=k.useState(!0),[o,s]=k.useState([]),[u,h]=k.useState(""),g=k.useCallback(async()=>{i(!0);let p="SELECT * FROM com_hubbi_inventory_movements ORDER BY created_at DESC LIMIT 500",x=[];e&&(p="SELECT * FROM com_hubbi_inventory_movements WHERE item_id = ? ORDER BY created_at DESC LIMIT 500",x=[e.id]);const S=await T.data.query(p,x);S&&Array.isArray(S)&&r(S),i(!1)},[e]);k.useEffect(()=>{g();const p=()=>g();return T.events.on("inventory:stock:increased",p),T.events.on("inventory:stock:decreased",p),()=>{T.events.off("inventory:stock:increased",p),T.events.off("inventory:stock:increased",p),T.events.off("inventory:stock:decreased",p)}},[e,g]);const f=p=>{switch(p){case"IN":return a.jsx(il,{className:"text-green-600",size:16});case"OUT":return a.jsx(ol,{className:"text-red-600",size:16});case"ADJUST":return a.jsx(fl,{className:"text-hubbi-dim",size:16});default:return a.jsx(Ei,{className:"text-blue-600",size:16})}},y=k.useMemo(()=>[Qe.accessor("type",{header:({column:p})=>a.jsxs("button",{onClick:()=>p.toggleSorting(),className:"flex items-center gap-1",children:["Tipo ",a.jsx(Le,{size:14})]}),cell:p=>a.jsxs("div",{className:"flex items-center gap-2",children:[f(p.getValue()),a.jsx("span",{className:"font-medium",children:p.getValue()})]})}),Qe.accessor("created_at",{header:({column:p})=>a.jsxs("button",{onClick:()=>p.toggleSorting(),className:"flex items-center gap-1",children:["Fecha ",a.jsx(Le,{size:14})]}),cell:p=>new Date(p.getValue()).toLocaleString()}),Qe.accessor("reason",{header:"Motivo",cell:p=>a.jsx("div",{className:"max-w-xs truncate",title:p.getValue()||"",children:p.getValue()||"-"})}),Qe.accessor("quantity",{header:({column:p})=>a.jsxs("button",{onClick:()=>p.toggleSorting(),className:"flex items-center gap-1 ml-auto",children:["Cantidad ",a.jsx(Le,{size:14})]}),cell:p=>{const S=p.row.original.type==="OUT";return a.jsxs("span",{className:`font-mono font-medium ${S?"text-red-600":"text-green-600"}`,children:[S?"-":"+",p.getValue()]})}}),Qe.accessor("cost_at_moment",{header:"Costo Unit.",cell:p=>a.jsxs("span",{className:"font-mono",children:["$",p.getValue().toFixed(2)]})}),Qe.accessor("total_value",{header:({column:p})=>a.jsxs("button",{onClick:()=>p.toggleSorting(),className:"flex items-center gap-1 ml-auto",children:["Total ",a.jsx(Le,{size:14})]}),cell:p=>a.jsxs("span",{className:"font-mono font-medium",children:["$",p.getValue().toFixed(2)]})})],[]),v=qr({data:t,columns:y,state:{sorting:o,globalFilter:u},onSortingChange:s,onGlobalFilterChange:h,getCoreRowModel:Ur(),getSortedRowModel:Gr(),getFilteredRowModel:Br(),getPaginationRowModel:Ci(),initialState:{pagination:{pageSize:20}}});return a.jsxs("div",{className:"bg-hubbi-card rounded-xl border border-hubbi-border shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-hubbi-border flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold text-hubbi-text flex items-center gap-2",children:[a.jsx(Ii,{size:16}),"Historial de Movimientos"]}),a.jsx("input",{type:"text",placeholder:"Buscar...",value:u,onChange:p=>h(p.target.value),className:"px-3 py-1.5 text-sm border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text focus:outline-none focus:ring-2 focus:ring-hubbi-primary"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-hubbi-bg text-hubbi-dim",children:v.getHeaderGroups().map(p=>a.jsx("tr",{children:p.headers.map(x=>a.jsx("th",{className:"px-4 py-2 font-medium",children:Ke(x.column.columnDef.header,x.getContext())},x.id))},p.id))}),a.jsx("tbody",{className:"divide-y divide-hubbi-border",children:n?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-8 text-hubbi-dim",children:"Cargando..."})}):v.getRowModel().rows.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-8 text-hubbi-dim",children:"No hay movimientos registrados"})}):v.getRowModel().rows.map(p=>a.jsx("tr",{className:"hover:bg-hubbi-bg/50",children:p.getVisibleCells().map(x=>a.jsx("td",{className:"px-4 py-3",children:Ke(x.column.columnDef.cell,x.getContext())},x.id))},p.id))})]})}),a.jsxs("div",{className:"p-4 border-t border-hubbi-border flex items-center justify-between text-sm text-hubbi-dim",children:[a.jsxs("span",{children:["Mostrando ",v.getState().pagination.pageIndex*v.getState().pagination.pageSize+1," - ",Math.min((v.getState().pagination.pageIndex+1)*v.getState().pagination.pageSize,t.length)," de ",t.length]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>v.previousPage(),disabled:!v.getCanPreviousPage(),className:"p-1 rounded hover:bg-hubbi-bg disabled:opacity-50",children:a.jsx(sl,{size:18})}),a.jsxs("span",{children:["PÃ¡gina ",v.getState().pagination.pageIndex+1," de ",v.getPageCount()]}),a.jsx("button",{onClick:()=>v.nextPage(),disabled:!v.getCanNextPage(),className:"p-1 rounded hover:bg-hubbi-bg disabled:opacity-50",children:a.jsx(ll,{size:18})})]})]})]})},Il=()=>{const[e,t]=k.useState([]),r=async()=>{const o=await T.data.query("SELECT * FROM com_hubbi_inventory_transfer_requests ORDER BY created_at DESC");if(o&&Array.isArray(o)){const s=o.map(u=>({...u,items:typeof u.items=="string"?JSON.parse(u.items):u.items}));t(s)}};k.useEffect(()=>{r()},[]);const n=async(o,s)=>{await T.data.update({table:"com_hubbi_inventory_transfer_requests",id:o,data:{status:s,updated_at:new Date().toISOString()},options:{strategy:"online_first"}}),T.notify.success(`Solicitud ${s}`),r()},i=o=>{switch(o){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"in_transit":return"bg-purple-100 text-purple-800";case"received":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"bg-hubbi-card rounded-xl border border-hubbi-border shadow-sm h-full flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-hubbi-border flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold text-hubbi-text flex items-center gap-2",children:[a.jsx(_l,{size:18,className:"text-hubbi-primary"}),"GestiÃ³n de Traslados"]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-hubbi-bg rounded-full text-hubbi-dim",children:a.jsx(Ii,{size:16})})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:e.length===0?a.jsx("div",{className:"text-center py-10 text-hubbi-dim",children:"No hay solicitudes de traslado activas"}):e.map(o=>a.jsxs("div",{className:"border border-hubbi-border rounded-lg p-4 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-hubbi-dim",children:[a.jsxs("span",{className:"font-medium text-hubbi-text",children:["#",o.source_location_id.substring(0,4),"..."]}),a.jsx(wi,{size:14}),a.jsxs("span",{className:"font-medium text-hubbi-text",children:["#",o.target_location_id.substring(0,4),"..."]})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium uppercase ${i(o.status)}`,children:o.status.replace("_"," ")})]}),a.jsx("div",{className:"bg-hubbi-bg p-3 rounded text-sm text-hubbi-dim space-y-1",children:o.items.map((s,u)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["Item ID: ",s.item_id.substring(0,8),"..."]}),a.jsxs("span",{className:"font-mono font-medium",children:["x",s.quantity]})]},u))}),o.status==="pending"&&a.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-hubbi-border",children:[a.jsxs("button",{onClick:()=>n(o.id,"rejected"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-hubbi-danger hover:bg-hubbi-danger/10 rounded bg-hubbi-card border border-hubbi-danger/30",children:[a.jsx(Lt,{size:14})," Rechazar"]}),a.jsxs("button",{onClick:()=>n(o.id,"approved"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-hubbi-success hover:bg-hubbi-success/10 rounded bg-hubbi-card border border-hubbi-success/30",children:[a.jsx(Rt,{size:14})," Aprobar"]})]}),o.status==="approved"&&a.jsx("div",{className:"flex justify-end gap-2 pt-2",children:a.jsxs("button",{onClick:()=>n(o.id,"in_transit"),className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-purple-400 hover:bg-purple-500/10 rounded bg-hubbi-card border border-purple-400/30",children:[a.jsx(Jr,{size:14})," Despachar (Enviar)"]})})]},o.id))})]})};var Vi=e=>{throw TypeError(e)},zi=(e,t,r)=>t.has(e)||Vi("Cannot "+r),kl=(e,t,r)=>(zi(e,t,"read from private field"),r?r.call(e):t.get(e)),$l=(e,t,r)=>t.has(e)?Vi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ml=(e,t,r,n)=>(zi(e,t,"write to private field"),t.set(e,r),r);const jt=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],Vt=jt.map(([e])=>e),Nl=Vt.filter((e,t)=>jt[t][1]==="L"),Al=Vt.filter((e,t)=>jt[t][1]==="M");function Yr(e){switch(e){case"Linear-Codes":return Nl.reduce((t,r)=>t|Yr(r),0);case"Matrix-Codes":return Al.reduce((t,r)=>t|Yr(r),0);case"Any":return(1<<jt.length)-1;case"None":return 0;default:return 1<<Vt.indexOf(e)}}function Dl(e){if(e===0)return"None";const t=31-Math.clz32(e);return Vt[t]}function Rl(e){return e.reduce((t,r)=>t|Yr(r),0)}const Fl=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function Ll(e){return Fl.indexOf(e)}const Hi=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function jl(e){return e==="UnicodeBig"?Hi.indexOf("UTF16BE"):Hi.indexOf(e)}const Vl=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function zl(e){return Vl[e]}const Hl=["Ignore","Read","Require"];function Ul(e){return Hl.indexOf(e)}const Bl=["Plain","ECI","HRI","Hex","Escaped"];function Gl(e){return Bl.indexOf(e)}const zt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function Ui(e){return{...e,formats:Rl(e.formats),binarizer:Ll(e.binarizer),eanAddOnSymbol:Ul(e.eanAddOnSymbol),textMode:Gl(e.textMode),characterSet:jl(e.characterSet)}}function ql(e){return{...e,format:Dl(e.format),contentType:zl(e.contentType),eccLevel:e.ecLevel}}const Wl={locateFile:(e,t)=>{const r=e.match(/_(.+?)\.wasm$/);return r?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.2.4/dist/${r[1]}/${e}`:t+e}},Qr=new WeakMap;function Xl(e,t){return Object.is(e,t)||Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>Object.hasOwn(t,r)&&e[r]===t[r])}function Bi(e,{overrides:t,equalityFn:r=Xl,fireImmediately:n=!1}={}){var i;const[o,s]=(i=Qr.get(e))!=null?i:[Wl],u=t??o;let h;if(n){if(s&&(h=r(o,u)))return s;const g=e({...u});return Qr.set(e,[u,g]),g}(h??r(o,u))||Qr.set(e,[u])}async function Jl(e,t,r=zt){const n={...zt,...r},i=await Bi(e,{fireImmediately:!0});let o,s;if("width"in t&&"height"in t&&"data"in t){const{data:h,data:{byteLength:g},width:f,height:y}=t;s=i._malloc(g),i.HEAPU8.set(h,s),o=i.readBarcodesFromPixmap(s,f,y,Ui(n))}else{let h,g;if("buffer"in t)[h,g]=[t.byteLength,t];else if("byteLength"in t)[h,g]=[t.byteLength,new Uint8Array(t)];else if("size"in t)[h,g]=[t.size,new Uint8Array(await t.arrayBuffer())];else throw new TypeError("Invalid input type");s=i._malloc(h),i.HEAPU8.set(g,s),o=i.readBarcodesFromImage(s,h,Ui(n))}i._free(s);const u=[];for(let h=0;h<o.size();++h)u.push(ql(o.get(h)));return u}({...zt,formats:[...zt.formats]});async function Gi(e={}){var t,r,n,i=e,o=!!globalThis.window,s=typeof Bun<"u",u=!!globalThis.WorkerGlobalScope;!((r=globalThis.process)===null||r===void 0||(r=r.versions)===null||r===void 0)&&r.node&&((n=globalThis.process)===null||n===void 0?void 0:n.type)!="renderer";var h="./this.program",g,f="";function y(l){return i.locateFile?i.locateFile(l,f):f+l}var v,p;if(o||u||s){try{f=new URL(".",g).href}catch{}u&&(p=l=>{var c=new XMLHttpRequest;return c.open("GET",l,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),v=async l=>{var c=await fetch(l,{credentials:"same-origin"});if(c.ok)return c.arrayBuffer();throw new Error(c.status+" : "+c.url)}}var x=console.log.bind(console),S=console.error.bind(console),P,I=!1,N,M,w,A,G,Q,ae,R,ne,me,fe=!1;function xe(){var l=Sr.buffer;w=new Int8Array(l),G=new Int16Array(l),i.HEAPU8=A=new Uint8Array(l),Q=new Uint16Array(l),ae=new Int32Array(l),R=new Uint32Array(l),ne=new Float32Array(l),me=new Float64Array(l)}function Ae(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Zp(i.preRun.shift());Aa(Ra)}function Be(){fe=!0,$t.xa()}function ie(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Qp(i.postRun.shift());Aa(Da)}function Ce(l){var c,d;(c=i.onAbort)===null||c===void 0||c.call(i,l),l="Aborted("+l+")",S(l),I=!0,l+=". Build with -sASSERTIONS for more info.";var m=new WebAssembly.RuntimeError(l);throw(d=M)===null||d===void 0||d(m),m}var le;function ct(){return y("zxing_reader.wasm")}function ee(l){if(l==le&&P)return new Uint8Array(P);if(p)return p(l);throw"both async and sync fetching of the wasm failed"}async function Ge(l){if(!P)try{var c=await v(l);return new Uint8Array(c)}catch{}return ee(l)}async function Yn(l,c){try{var d=await Ge(l),m=await WebAssembly.instantiate(d,c);return m}catch(b){S(`failed to asynchronously prepare wasm: ${b}`),Ce(b)}}async function Jp(l,c,d){if(!l&&WebAssembly.instantiateStreaming)try{var m=fetch(c,{credentials:"same-origin"}),b=await WebAssembly.instantiateStreaming(m,d);return b}catch(_){S(`wasm streaming compile failed: ${_}`),S("falling back to ArrayBuffer instantiation")}return Yn(c,d)}function Kp(){var l={a:$m};return l}async function Yp(){function l(_,C){return $t=_.exports,km($t),xe(),$t}function c(_){return l(_.instance)}var d=Kp();if(i.instantiateWasm)return new Promise((_,C)=>{i.instantiateWasm(d,(E,O)=>{_(l(E))})});le!=null||(le=ct());var m=await Jp(P,le,d),b=c(m);return b}var Aa=l=>{for(;l.length>0;)l.shift()(i)},Da=[],Qp=l=>Da.push(l),Ra=[],Zp=l=>Ra.push(l),H=l=>is(l),U=()=>os(),dr=[],fr=0,e0=l=>{var c=new Qn(l);return c.get_caught()||(c.set_caught(!0),fr--),c.set_rethrown(!1),dr.push(c),ss(l),rs(l)},Pe=0,t0=()=>{z(0,0);var l=dr.pop();as(l.excPtr),Pe=0};class Qn{constructor(c){this.excPtr=c,this.ptr=c-24}set_type(c){R[this.ptr+4>>2]=c}get_type(){return R[this.ptr+4>>2]}set_destructor(c){R[this.ptr+8>>2]=c}get_destructor(){return R[this.ptr+8>>2]}set_caught(c){c=c?1:0,w[this.ptr+12]=c}get_caught(){return w[this.ptr+12]!=0}set_rethrown(c){c=c?1:0,w[this.ptr+13]=c}get_rethrown(){return w[this.ptr+13]!=0}init(c,d){this.set_adjusted_ptr(0),this.set_type(c),this.set_destructor(d)}set_adjusted_ptr(c){R[this.ptr+16>>2]=c}get_adjusted_ptr(){return R[this.ptr+16>>2]}}var hr=l=>ns(l),Zn=l=>{var c=Pe;if(!c)return hr(0),0;var d=new Qn(c);d.set_adjusted_ptr(c);var m=d.get_type();if(!m)return hr(0),c;for(var b of l){if(b===0||b===m)break;var _=d.ptr+16;if(ls(b,m,_))return hr(b),c}return hr(m),c},r0=()=>Zn([]),n0=l=>Zn([l]),i0=(l,c)=>Zn([l,c]),o0=()=>{var l=dr.pop();l||Ce("no exception to throw");var c=l.excPtr;throw l.get_rethrown()||(dr.push(l),l.set_rethrown(!0),l.set_caught(!1),fr++),Pe=c,Pe},a0=(l,c,d)=>{var m=new Qn(l);throw m.init(c,d),Pe=l,fr++,Pe},s0=()=>fr,l0=l=>{throw Pe||(Pe=l),Pe},c0=()=>Ce(""),gr={},ei=l=>{for(;l.length;){var c=l.pop(),d=l.pop();d(c)}};function Ot(l){return this.fromWireType(R[l>>2])}var ut={},qe={},pr={},u0=class extends Error{constructor(l){super(l),this.name="InternalError"}},mr=l=>{throw new u0(l)},We=(l,c,d)=>{l.forEach(E=>pr[E]=c);function m(E){var O=d(E);O.length!==l.length&&mr("Mismatched type converter count");for(var $=0;$<l.length;++$)Ee(l[$],O[$])}var b=new Array(c.length),_=[],C=0;{const E=c;for(let O=0;O<E.length;++O){const $=E[O];qe.hasOwnProperty($)?b[O]=qe[$]:(_.push($),ut.hasOwnProperty($)||(ut[$]=[]),ut[$].push(()=>{b[O]=qe[$],++C,C===_.length&&m(b)}))}}_.length===0&&m(b)},d0=l=>{var c=gr[l];delete gr[l];var d=c.rawConstructor,m=c.rawDestructor,b=c.fields,_=b.map(C=>C.getterReturnType).concat(b.map(C=>C.setterArgumentType));We([l],_,C=>{var E={};{const O=b;for(let $=0;$<O.length;++$){const D=O[$],j=C[$],W=D.getter,K=D.getterContext,te=C[$+b.length],Z=D.setter,Y=D.setterContext;E[D.fieldName]={read:X=>j.fromWireType(W(K,X)),write:(X,Je)=>{var ue=[];Z(Y,X,te.toWireType(ue,Je)),ei(ue)},optional:j.optional}}}return[{name:c.name,fromWireType:O=>{var $={};for(var D in E)$[D]=E[D].read(O);return m(O),$},toWireType:(O,$)=>{for(var D in E)if(!(D in $)&&!E[D].optional)throw new TypeError(`Missing field: "${D}"`);var j=d();for(D in E)E[D].write(j,$[D]);return O!==null&&O.push(m,j),j},readValueFromPointer:Ot,destructorFunction:m}]})},f0=(l,c,d,m,b)=>{},ce=l=>{for(var c="";;){var d=A[l++];if(!d)return c;c+=String.fromCharCode(d)}},Pt=class extends Error{constructor(l){super(l),this.name="BindingError"}},q=l=>{throw new Pt(l)};function h0(l,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var m=c.name;if(l||q(`type "${m}" must have a positive integer typeid pointer`),qe.hasOwnProperty(l)){if(d.ignoreDuplicateRegistrations)return;q(`Cannot register type '${m}' twice`)}if(qe[l]=c,delete pr[l],ut.hasOwnProperty(l)){var b=ut[l];delete ut[l],b.forEach(_=>_())}}function Ee(l,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return h0(l,c,d)}var g0=(l,c,d,m)=>{c=ce(c),Ee(l,{name:c,fromWireType:function(b){return!!b},toWireType:function(b,_){return _?d:m},readValueFromPointer:function(b){return this.fromWireType(A[b])},destructorFunction:null})},p0=l=>({count:l.count,deleteScheduled:l.deleteScheduled,preservePointerOnDelete:l.preservePointerOnDelete,ptr:l.ptr,ptrType:l.ptrType,smartPtr:l.smartPtr,smartPtrType:l.smartPtrType}),ti=l=>{function c(d){return d.$$.ptrType.registeredClass.name}q(c(l)+" instance already deleted")},ri=!1,Fa=l=>{},m0=l=>{l.smartPtr?l.smartPtrType.rawDestructor(l.smartPtr):l.ptrType.registeredClass.rawDestructor(l.ptr)},La=l=>{l.count.value-=1;var c=l.count.value===0;c&&m0(l)},It=l=>globalThis.FinalizationRegistry?(ri=new FinalizationRegistry(c=>{La(c.$$)}),It=c=>{var d=c.$$,m=!!d.smartPtr;if(m){var b={$$:d};ri.register(c,b,c)}return c},Fa=c=>ri.unregister(c),It(l)):(It=c=>c,l),v0=()=>{let l=vr.prototype;Object.assign(l,{isAliasOf(d){if(!(this instanceof vr)||!(d instanceof vr))return!1;var m=this.$$.ptrType.registeredClass,b=this.$$.ptr;d.$$=d.$$;for(var _=d.$$.ptrType.registeredClass,C=d.$$.ptr;m.baseClass;)b=m.upcast(b),m=m.baseClass;for(;_.baseClass;)C=_.upcast(C),_=_.baseClass;return m===_&&b===C},clone(){if(this.$$.ptr||ti(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var d=It(Object.create(Object.getPrototypeOf(this),{$$:{value:p0(this.$$)}}));return d.$$.count.value+=1,d.$$.deleteScheduled=!1,d},delete(){this.$$.ptr||ti(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&q("Object already scheduled for deletion"),Fa(this),La(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ti(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&q("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const c=Symbol.dispose;c&&(l[c]=l.delete)};function vr(){}var ni=(l,c)=>Object.defineProperty(c,"name",{value:l}),ja={},Va=(l,c,d)=>{if(l[c].overloadTable===void 0){var m=l[c];l[c]=function(){for(var b=arguments.length,_=new Array(b),C=0;C<b;C++)_[C]=arguments[C];return l[c].overloadTable.hasOwnProperty(_.length)||q(`Function '${d}' called with an invalid number of arguments (${_.length}) - expects one of (${l[c].overloadTable})!`),l[c].overloadTable[_.length].apply(this,_)},l[c].overloadTable=[],l[c].overloadTable[m.argCount]=m}},za=(l,c,d)=>{i.hasOwnProperty(l)?((d===void 0||i[l].overloadTable!==void 0&&i[l].overloadTable[d]!==void 0)&&q(`Cannot register public name '${l}' twice`),Va(i,l,l),i[l].overloadTable.hasOwnProperty(d)&&q(`Cannot register multiple overloads of a function with the same number of arguments (${d})!`),i[l].overloadTable[d]=c):(i[l]=c,i[l].argCount=d)},y0=48,b0=57,_0=l=>{l=l.replace(/[^a-zA-Z0-9_]/g,"$");var c=l.charCodeAt(0);return c>=y0&&c<=b0?`_${l}`:l};function S0(l,c,d,m,b,_,C,E){this.name=l,this.constructor=c,this.instancePrototype=d,this.rawDestructor=m,this.baseClass=b,this.getActualType=_,this.upcast=C,this.downcast=E,this.pureVirtualFunctions=[]}var ii=(l,c,d)=>{for(;c!==d;)c.upcast||q(`Expected null or instance of ${d.name}, got an instance of ${c.name}`),l=c.upcast(l),c=c.baseClass;return l},oi=l=>{if(l===null)return"null";var c=typeof l;return c==="object"||c==="array"||c==="function"?l.toString():""+l};function x0(l,c){if(c===null)return this.isReference&&q(`null is not a valid ${this.name}`),0;c.$$||q(`Cannot pass "${oi(c)}" as a ${this.name}`),c.$$.ptr||q(`Cannot pass deleted object as a pointer of type ${this.name}`);var d=c.$$.ptrType.registeredClass,m=ii(c.$$.ptr,d,this.registeredClass);return m}function C0(l,c){var d;if(c===null)return this.isReference&&q(`null is not a valid ${this.name}`),this.isSmartPointer?(d=this.rawConstructor(),l!==null&&l.push(this.rawDestructor,d),d):0;(!c||!c.$$)&&q(`Cannot pass "${oi(c)}" as a ${this.name}`),c.$$.ptr||q(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&c.$$.ptrType.isConst&&q(`Cannot convert argument of type ${c.$$.smartPtrType?c.$$.smartPtrType.name:c.$$.ptrType.name} to parameter type ${this.name}`);var m=c.$$.ptrType.registeredClass;if(d=ii(c.$$.ptr,m,this.registeredClass),this.isSmartPointer)switch(c.$$.smartPtr===void 0&&q("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:c.$$.smartPtrType===this?d=c.$$.smartPtr:q(`Cannot convert argument of type ${c.$$.smartPtrType?c.$$.smartPtrType.name:c.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:d=c.$$.smartPtr;break;case 2:if(c.$$.smartPtrType===this)d=c.$$.smartPtr;else{var b=c.clone();d=this.rawShare(d,we.toHandle(()=>b.delete())),l!==null&&l.push(this.rawDestructor,d)}break;default:q("Unsupporting sharing policy")}return d}function E0(l,c){if(c===null)return this.isReference&&q(`null is not a valid ${this.name}`),0;c.$$||q(`Cannot pass "${oi(c)}" as a ${this.name}`),c.$$.ptr||q(`Cannot pass deleted object as a pointer of type ${this.name}`),c.$$.ptrType.isConst&&q(`Cannot convert argument of type ${c.$$.ptrType.name} to parameter type ${this.name}`);var d=c.$$.ptrType.registeredClass,m=ii(c.$$.ptr,d,this.registeredClass);return m}var Ha=(l,c,d)=>{if(c===d)return l;if(d.baseClass===void 0)return null;var m=Ha(l,c,d.baseClass);return m===null?null:d.downcast(m)},w0={},T0=(l,c)=>{for(c===void 0&&q("ptr should not be undefined");l.baseClass;)c=l.upcast(c),l=l.baseClass;return c},O0=(l,c)=>(c=T0(l,c),w0[c]),yr=(l,c)=>{(!c.ptrType||!c.ptr)&&mr("makeClassHandle requires ptr and ptrType");var d=!!c.smartPtrType,m=!!c.smartPtr;return d!==m&&mr("Both smartPtrType and smartPtr must be specified"),c.count={value:1},It(Object.create(l,{$$:{value:c,writable:!0}}))};function P0(l){var c=this.getPointee(l);if(!c)return this.destructor(l),null;var d=O0(this.registeredClass,c);if(d!==void 0){if(d.$$.count.value===0)return d.$$.ptr=c,d.$$.smartPtr=l,d.clone();var m=d.clone();return this.destructor(l),m}function b(){return this.isSmartPointer?yr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:c,smartPtrType:this,smartPtr:l}):yr(this.registeredClass.instancePrototype,{ptrType:this,ptr:l})}var _=this.registeredClass.getActualType(c),C=ja[_];if(!C)return b.call(this);var E;this.isConst?E=C.constPointerType:E=C.pointerType;var O=Ha(c,this.registeredClass,E.registeredClass);return O===null?b.call(this):this.isSmartPointer?yr(E.registeredClass.instancePrototype,{ptrType:E,ptr:O,smartPtrType:this,smartPtr:l}):yr(E.registeredClass.instancePrototype,{ptrType:E,ptr:O})}var I0=()=>{Object.assign(br.prototype,{getPointee(l){return this.rawGetPointee&&(l=this.rawGetPointee(l)),l},destructor(l){var c;(c=this.rawDestructor)===null||c===void 0||c.call(this,l)},readValueFromPointer:Ot,fromWireType:P0})};function br(l,c,d,m,b,_,C,E,O,$,D){this.name=l,this.registeredClass=c,this.isReference=d,this.isConst=m,this.isSmartPointer=b,this.pointeeType=_,this.sharingPolicy=C,this.rawGetPointee=E,this.rawConstructor=O,this.rawShare=$,this.rawDestructor=D,!b&&c.baseClass===void 0?m?(this.toWireType=x0,this.destructorFunction=null):(this.toWireType=E0,this.destructorFunction=null):this.toWireType=C0}var Ua=(l,c,d)=>{i.hasOwnProperty(l)||mr("Replacing nonexistent public symbol"),i[l].overloadTable!==void 0&&d!==void 0?i[l].overloadTable[d]=c:(i[l]=c,i[l].argCount=d)},De={},k0=(l,c,d)=>{l=l.replace(/p/g,"i");var m=De[l];return m(c,...d)},Ba=[],B=l=>{var c=Ba[l];return c||(Ba[l]=c=ds.get(l)),c},$0=function(l,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(l.includes("j"))return k0(l,c,d);var m=B(c),b=m(...d);return b},M0=function(l,c){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var m=arguments.length,b=new Array(m),_=0;_<m;_++)b[_]=arguments[_];return $0(l,c,b,d)}},_e=function(l,c){l=ce(l);function d(){if(l.includes("j"))return M0(l,c);var b=B(c);return b}var m=d();return typeof m!="function"&&q(`unknown function pointer with signature ${l}: ${c}`),m};class N0 extends Error{}var Ga=l=>{var c=ts(l),d=ce(c);return Re(c),d},_r=(l,c)=>{var d=[],m={};function b(_){if(!m[_]&&!qe[_]){if(pr[_]){pr[_].forEach(b);return}d.push(_),m[_]=!0}}throw c.forEach(b),new N0(`${l}: `+d.map(Ga).join([", "]))},A0=(l,c,d,m,b,_,C,E,O,$,D,j,W)=>{D=ce(D),_=_e(b,_),E&&(E=_e(C,E)),$&&($=_e(O,$)),W=_e(j,W);var K=_0(D);za(K,function(){_r(`Cannot construct ${D} due to unbound types`,[m])}),We([l,c,d],m?[m]:[],te=>{te=te[0];var Z,Y;m?(Z=te.registeredClass,Y=Z.instancePrototype):Y=vr.prototype;var X=ni(D,function(){if(Object.getPrototypeOf(this)!==Je)throw new Pt(`Use 'new' to construct ${D}`);if(ue.constructor_body===void 0)throw new Pt(`${D} has no accessible constructor`);for(var gs=arguments.length,Cr=new Array(gs),Er=0;Er<gs;Er++)Cr[Er]=arguments[Er];var ps=ue.constructor_body[Cr.length];if(ps===void 0)throw new Pt(`Tried to invoke ctor of ${D} with invalid number of parameters (${Cr.length}) - expected (${Object.keys(ue.constructor_body).toString()}) parameters instead!`);return ps.apply(this,Cr)}),Je=Object.create(Y,{constructor:{value:X}});X.prototype=Je;var ue=new S0(D,X,Je,W,Z,_,E,$);if(ue.baseClass){var Ie,xr;(xr=(Ie=ue.baseClass).__derivedClasses)!==null&&xr!==void 0||(Ie.__derivedClasses=[]),ue.baseClass.__derivedClasses.push(ue)}var gv=new br(D,ue,!0,!1,!1),fs=new br(D+"*",ue,!1,!1,!1),hs=new br(D+" const*",ue,!1,!0,!1);return ja[l]={pointerType:fs,constPointerType:hs},Ua(K,X),[gv,fs,hs]})},ai=(l,c)=>{for(var d=[],m=0;m<l;m++)d.push(R[c+m*4>>2]);return d};function D0(l){for(var c=1;c<l.length;++c)if(l[c]!==null&&l[c].destructorFunction===void 0)return!0;return!1}function si(l,c,d,m,b,_){var C=c.length;C<2&&q("argTypes array size mismatch! Must at least get return value and 'this' types!");var E=c[1]!==null&&d!==null,O=D0(c),$=!c[0].isVoid,D=C-2,j=new Array(D),W=[],K=[],te=function(){K.length=0;var Z;W.length=E?2:1,W[0]=b,E&&(Z=c[1].toWireType(K,this),W[1]=Z);for(var Y=0;Y<D;++Y)j[Y]=c[Y+2].toWireType(K,Y<0||arguments.length<=Y?void 0:arguments[Y]),W.push(j[Y]);var X=m(...W);function Je(ue){if(O)ei(K);else for(var Ie=E?1:2;Ie<c.length;Ie++){var xr=Ie===1?Z:j[Ie-2];c[Ie].destructorFunction!==null&&c[Ie].destructorFunction(xr)}if($)return c[0].fromWireType(ue)}return Je(X)};return ni(l,te)}var R0=(l,c,d,m,b,_)=>{var C=ai(c,d);b=_e(m,b),We([],[l],E=>{E=E[0];var O=`constructor ${E.name}`;if(E.registeredClass.constructor_body===void 0&&(E.registeredClass.constructor_body=[]),E.registeredClass.constructor_body[c-1]!==void 0)throw new Pt(`Cannot register multiple constructors with identical number of parameters (${c-1}) for class '${E.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return E.registeredClass.constructor_body[c-1]=()=>{_r(`Cannot construct ${E.name} due to unbound types`,C)},We([],C,$=>($.splice(1,0,null),E.registeredClass.constructor_body[c-1]=si(O,$,null,b,_),[])),[]})},qa=l=>{l=l.trim();const c=l.indexOf("(");return c===-1?l:l.slice(0,c)},F0=(l,c,d,m,b,_,C,E,O,$)=>{var D=ai(d,m);c=ce(c),c=qa(c),_=_e(b,_),We([],[l],j=>{j=j[0];var W=`${j.name}.${c}`;c.startsWith("@@")&&(c=Symbol[c.substring(2)]),E&&j.registeredClass.pureVirtualFunctions.push(c);function K(){_r(`Cannot call ${W} due to unbound types`,D)}var te=j.registeredClass.instancePrototype,Z=te[c];return Z===void 0||Z.overloadTable===void 0&&Z.className!==j.name&&Z.argCount===d-2?(K.argCount=d-2,K.className=j.name,te[c]=K):(Va(te,c,W),te[c].overloadTable[d-2]=K),We([],D,Y=>{var X=si(W,Y,j,_,C);return te[c].overloadTable===void 0?(X.argCount=d-2,te[c]=X):te[c].overloadTable[d-2]=X,[]}),[]})},Wa=[],Xe=[0,1,,1,null,1,!0,1,!1,1],li=l=>{l>9&&--Xe[l+1]===0&&(Xe[l]=void 0,Wa.push(l))},we={toValue:l=>(l||q(`Cannot use deleted val. handle = ${l}`),Xe[l]),toHandle:l=>{switch(l){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const c=Wa.pop()||Xe.length;return Xe[c]=l,Xe[c+1]=1,c}}}},Xa={name:"emscripten::val",fromWireType:l=>{var c=we.toValue(l);return li(l),c},toWireType:(l,c)=>we.toHandle(c),readValueFromPointer:Ot,destructorFunction:null},L0=l=>Ee(l,Xa),j0=(l,c)=>{switch(c){case 4:return function(d){return this.fromWireType(ne[d>>2])};case 8:return function(d){return this.fromWireType(me[d>>3])};default:throw new TypeError(`invalid float width (${c}): ${l}`)}},V0=(l,c,d)=>{c=ce(c),Ee(l,{name:c,fromWireType:m=>m,toWireType:(m,b)=>b,readValueFromPointer:j0(c,d),destructorFunction:null})},z0=(l,c,d,m,b,_,C,E)=>{var O=ai(c,d);l=ce(l),l=qa(l),b=_e(m,b),za(l,function(){_r(`Cannot call ${l} due to unbound types`,O)},c-1),We([],O,$=>{var D=[$[0],null].concat($.slice(1));return Ua(l,si(l,D,null,b,_),c-1),[]})},H0=(l,c,d)=>{switch(c){case 1:return d?m=>w[m]:m=>A[m];case 2:return d?m=>G[m>>1]:m=>Q[m>>1];case 4:return d?m=>ae[m>>2]:m=>R[m>>2];default:throw new TypeError(`invalid integer width (${c}): ${l}`)}},U0=(l,c,d,m,b)=>{c=ce(c);const _=m===0;let C=O=>O;if(_){var E=32-8*d;C=O=>O<<E>>>E,b=C(b)}Ee(l,{name:c,fromWireType:C,toWireType:(O,$)=>$,readValueFromPointer:H0(c,d,m!==0),destructorFunction:null})},B0=(l,c,d)=>{var m=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],b=m[c];function _(C){var E=R[C>>2],O=R[C+4>>2];return new b(w.buffer,O,E)}d=ce(d),Ee(l,{name:d,fromWireType:_,readValueFromPointer:_},{ignoreDuplicateRegistrations:!0})},G0=Object.assign({optional:!0},Xa),q0=(l,c)=>{Ee(l,G0)},W0=(l,c,d,m)=>{if(!(m>0))return 0;for(var b=d,_=d+m-1,C=0;C<l.length;++C){var E=l.codePointAt(C);if(E<=127){if(d>=_)break;c[d++]=E}else if(E<=2047){if(d+1>=_)break;c[d++]=192|E>>6,c[d++]=128|E&63}else if(E<=65535){if(d+2>=_)break;c[d++]=224|E>>12,c[d++]=128|E>>6&63,c[d++]=128|E&63}else{if(d+3>=_)break;c[d++]=240|E>>18,c[d++]=128|E>>12&63,c[d++]=128|E>>6&63,c[d++]=128|E&63,C++}}return c[d]=0,d-b},dt=(l,c,d)=>W0(l,A,c,d),Ja=l=>{for(var c=0,d=0;d<l.length;++d){var m=l.charCodeAt(d);m<=127?c++:m<=2047?c+=2:m>=55296&&m<=57343?(c+=4,++d):c+=3}return c},Ka=globalThis.TextDecoder&&new TextDecoder,Ya=(l,c,d,m)=>{var b=c+d;if(m)return b;for(;l[c]&&!(c>=b);)++c;return c},Qa=function(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=arguments.length>2?arguments[2]:void 0,m=arguments.length>3?arguments[3]:void 0;var b=Ya(l,c,d,m);if(b-c>16&&l.buffer&&Ka)return Ka.decode(l.subarray(c,b));for(var _="";c<b;){var C=l[c++];if(!(C&128)){_+=String.fromCharCode(C);continue}var E=l[c++]&63;if((C&224)==192){_+=String.fromCharCode((C&31)<<6|E);continue}var O=l[c++]&63;if((C&240)==224?C=(C&15)<<12|E<<6|O:C=(C&7)<<18|E<<12|O<<6|l[c++]&63,C<65536)_+=String.fromCharCode(C);else{var $=C-65536;_+=String.fromCharCode(55296|$>>10,56320|$&1023)}}return _},X0=(l,c,d)=>l?Qa(A,l,c,d):"",J0=(l,c)=>{c=ce(c),Ee(l,{name:c,fromWireType(d){var m=R[d>>2],b=d+4,_;return _=X0(b,m,!0),Re(d),_},toWireType(d,m){m instanceof ArrayBuffer&&(m=new Uint8Array(m));var b,_=typeof m=="string";_||ArrayBuffer.isView(m)&&m.BYTES_PER_ELEMENT==1||q("Cannot pass non-string to std::string"),_?b=Ja(m):b=m.length;var C=di(4+b+1),E=C+4;return R[C>>2]=b,_?dt(m,E,b+1):A.set(m,E),d!==null&&d.push(Re,C),C},readValueFromPointer:Ot,destructorFunction(d){Re(d)}})},Za=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,K0=(l,c,d)=>{var m=l>>1,b=Ya(Q,m,c/2,d);if(b-m>16&&Za)return Za.decode(Q.subarray(m,b));for(var _="",C=m;C<b;++C){var E=Q[C];_+=String.fromCharCode(E)}return _},Y0=(l,c,d)=>{if(d!=null||(d=2147483647),d<2)return 0;d-=2;for(var m=c,b=d<l.length*2?d/2:l.length,_=0;_<b;++_){var C=l.charCodeAt(_);G[c>>1]=C,c+=2}return G[c>>1]=0,c-m},Q0=l=>l.length*2,Z0=(l,c,d)=>{for(var m="",b=l>>2,_=0;!(_>=c/4);_++){var C=R[b+_];if(!C&&!d)break;m+=String.fromCodePoint(C)}return m},em=(l,c,d)=>{if(d!=null||(d=2147483647),d<4)return 0;for(var m=c,b=m+d-4,_=0;_<l.length;++_){var C=l.codePointAt(_);if(C>65535&&_++,ae[c>>2]=C,c+=4,c+4>b)break}return ae[c>>2]=0,c-m},tm=l=>{for(var c=0,d=0;d<l.length;++d){var m=l.codePointAt(d);m>65535&&d++,c+=4}return c},rm=(l,c,d)=>{d=ce(d);var m,b,_;c===2?(m=K0,b=Y0,_=Q0):(m=Z0,b=em,_=tm),Ee(l,{name:d,fromWireType:C=>{var E=R[C>>2],O=m(C+4,E*c,!0);return Re(C),O},toWireType:(C,E)=>{typeof E!="string"&&q(`Cannot pass non-string to C++ string type ${d}`);var O=_(E),$=di(4+O+c);return R[$>>2]=O/c,b(E,$+4,O+c),C!==null&&C.push(Re,$),$},readValueFromPointer:Ot,destructorFunction(C){Re(C)}})},nm=(l,c,d,m,b,_)=>{gr[l]={name:ce(c),rawConstructor:_e(d,m),rawDestructor:_e(b,_),fields:[]}},im=(l,c,d,m,b,_,C,E,O,$)=>{gr[l].fields.push({fieldName:ce(c),getterReturnType:d,getter:_e(m,b),getterContext:_,setterArgumentType:C,setter:_e(E,O),setterContext:$})},om=(l,c)=>{c=ce(c),Ee(l,{isVoid:!0,name:c,fromWireType:()=>{},toWireType:(d,m)=>{}})},ci=[],am=l=>{var c=ci.length;return ci.push(l),c},sm=(l,c)=>{var d=qe[l];return d===void 0&&q(`${c} has unknown type ${Ga(l)}`),d},lm=(l,c)=>{for(var d=new Array(l),m=0;m<l;++m)d[m]=sm(R[c+m*4>>2],`parameter ${m}`);return d},cm=(l,c,d)=>{var m=[],b=l(m,d);return m.length&&(R[c>>2]=we.toHandle(m)),b},um={},es=l=>{var c=um[l];return c===void 0?ce(l):c},dm=(l,c,d)=>{var m=8,[b,..._]=lm(l,c),C=b.toWireType.bind(b),E=_.map(j=>j.readValueFromPointer.bind(j));l--;var O=new Array(l),$=(j,W,K,te)=>{for(var Z=0,Y=0;Y<l;++Y)O[Y]=E[Y](te+Z),Z+=m;var X;switch(d){case 0:X=we.toValue(j).apply(null,O);break;case 2:X=Reflect.construct(we.toValue(j),O);break;case 3:X=O[0];break;case 1:X=we.toValue(j)[es(W)](...O);break}return cm(C,K,X)},D=`methodCaller<(${_.map(j=>j.name)}) => ${b.name}>`;return am(ni(D,$))},fm=l=>l?(l=es(l),we.toHandle(globalThis[l])):we.toHandle(globalThis),hm=l=>{l>9&&(Xe[l+1]+=1)},gm=(l,c,d,m,b)=>ci[l](c,d,m,b),pm=l=>{var c=we.toValue(l);ei(c),li(l)},mm=(l,c,d,m)=>{var b=new Date().getFullYear(),_=new Date(b,0,1),C=new Date(b,6,1),E=_.getTimezoneOffset(),O=C.getTimezoneOffset(),$=Math.max(E,O);R[l>>2]=$*60,ae[c>>2]=+(E!=O);var D=K=>{var te=K>=0?"-":"+",Z=Math.abs(K),Y=String(Math.floor(Z/60)).padStart(2,"0"),X=String(Z%60).padStart(2,"0");return`UTC${te}${Y}${X}`},j=D(E),W=D(O);O<E?(dt(j,d,17),dt(W,m,17)):(dt(j,m,17),dt(W,d,17))},vm=()=>2147483648,ym=(l,c)=>Math.ceil(l/c)*c,bm=l=>{var c=Sr.buffer.byteLength,d=(l-c+65535)/65536|0;try{return Sr.grow(d),xe(),1}catch{}},_m=l=>{var c=A.length;l>>>=0;var d=vm();if(l>d)return!1;for(var m=1;m<=4;m*=2){var b=c*(1+.2/m);b=Math.min(b,l+100663296);var _=Math.min(d,ym(Math.max(l,b),65536)),C=bm(_);if(C)return!0}return!1},ui={},Sm=()=>h||"./this.program",kt=()=>{if(!kt.strings){var l=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",c={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:l,_:Sm()};for(var d in ui)ui[d]===void 0?delete c[d]:c[d]=ui[d];var m=[];for(var d in c)m.push(`${d}=${c[d]}`);kt.strings=m}return kt.strings},xm=(l,c)=>{var d=0,m=0;for(var b of kt()){var _=c+d;R[l+m>>2]=_,d+=dt(b,_,1/0)+1,m+=4}return 0},Cm=(l,c)=>{var d=kt();R[l>>2]=d.length;var m=0;for(var b of d)m+=Ja(b)+1;return R[c>>2]=m,0},Em=l=>52;function wm(l,c,d,m,b){return 70}var Tm=[null,[],[]],Om=(l,c)=>{var d=Tm[l];c===0||c===10?((l===1?x:S)(Qa(d)),d.length=0):d.push(c)},Pm=(l,c,d,m)=>{for(var b=0,_=0;_<d;_++){var C=R[c>>2],E=R[c+4>>2];c+=8;for(var O=0;O<E;O++)Om(l,A[C+O]);b+=E}return R[m>>2]=b,0},Im=l=>l;if(v0(),I0(),i.noExitRuntime&&i.noExitRuntime,i.print&&(x=i.print),i.printErr&&(S=i.printErr),i.wasmBinary&&(P=i.wasmBinary),i.arguments&&i.arguments,i.thisProgram&&(h=i.thisProgram),i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.shift()();var ts,Re,di,rs,z,ns,is,os,as,ss,ls,cs,us,Sr,ds;function km(l){ts=l.ya,Re=i._free=l.za,di=i._malloc=l.Ba,rs=l.Ca,z=l.Da,ns=l.Ea,is=l.Fa,os=l.Ga,as=l.Ha,ss=l.Ia,ls=l.Ja,De.viijii=l.Ka,cs=De.iiijj=l.La,De.jiji=l.Ma,us=De.jiiii=l.Na,De.iiiiij=l.Oa,De.iiiiijj=l.Pa,De.iiiiiijj=l.Qa,Sr=l.wa,ds=l.Aa}var $m={s:e0,w:t0,a:r0,j:n0,m:i0,Q:o0,p:a0,U:s0,d:l0,ca:c0,ta:d0,ba:f0,oa:g0,ra:A0,qa:R0,H:F0,ma:L0,X:V0,Y:z0,x:U0,t:B0,sa:q0,na:J0,R:rm,I:nm,ua:im,pa:om,N:dm,va:li,D:fm,S:hm,M:gm,ia:pm,da:mm,ga:_m,ea:xm,fa:Cm,ha:Em,$:wm,V:Pm,K:ev,C:nv,Z:Lm,T:cv,r:Km,b:Rm,E:Zm,ka:ov,c:jm,ja:av,h:Fm,i:Hm,q:qm,P:Qm,v:Xm,F:Jm,L:Ym,z:iv,J:uv,aa:dv,_:fv,f:Vm,l:Mm,e:Dm,g:Am,O:lv,k:Nm,la:tv,o:Wm,B:Um,u:rv,W:Gm,A:sv,n:zm,G:Bm,y:Im};function Mm(l,c){var d=U();try{B(l)(c)}catch(m){if(H(d),m!==m+0)throw m;z(1,0)}}function Nm(l,c,d,m,b){var _=U();try{B(l)(c,d,m,b)}catch(C){if(H(_),C!==C+0)throw C;z(1,0)}}function Am(l,c,d,m){var b=U();try{B(l)(c,d,m)}catch(_){if(H(b),_!==_+0)throw _;z(1,0)}}function Dm(l,c,d){var m=U();try{B(l)(c,d)}catch(b){if(H(m),b!==b+0)throw b;z(1,0)}}function Rm(l,c){var d=U();try{return B(l)(c)}catch(m){if(H(d),m!==m+0)throw m;z(1,0)}}function Fm(l,c,d,m){var b=U();try{return B(l)(c,d,m)}catch(_){if(H(b),_!==_+0)throw _;z(1,0)}}function Lm(l,c,d,m,b,_){var C=U();try{return B(l)(c,d,m,b,_)}catch(E){if(H(C),E!==E+0)throw E;z(1,0)}}function jm(l,c,d){var m=U();try{return B(l)(c,d)}catch(b){if(H(m),b!==b+0)throw b;z(1,0)}}function Vm(l){var c=U();try{B(l)()}catch(d){if(H(c),d!==d+0)throw d;z(1,0)}}function zm(l,c,d,m,b,_,C,E,O,$,D){var j=U();try{B(l)(c,d,m,b,_,C,E,O,$,D)}catch(W){if(H(j),W!==W+0)throw W;z(1,0)}}function Hm(l,c,d,m,b){var _=U();try{return B(l)(c,d,m,b)}catch(C){if(H(_),C!==C+0)throw C;z(1,0)}}function Um(l,c,d,m,b,_,C){var E=U();try{B(l)(c,d,m,b,_,C)}catch(O){if(H(E),O!==O+0)throw O;z(1,0)}}function Bm(l,c,d,m,b,_,C,E,O,$,D,j,W,K,te,Z){var Y=U();try{B(l)(c,d,m,b,_,C,E,O,$,D,j,W,K,te,Z)}catch(X){if(H(Y),X!==X+0)throw X;z(1,0)}}function Gm(l,c,d,m,b,_,C,E,O){var $=U();try{B(l)(c,d,m,b,_,C,E,O)}catch(D){if(H($),D!==D+0)throw D;z(1,0)}}function qm(l,c,d,m,b,_){var C=U();try{return B(l)(c,d,m,b,_)}catch(E){if(H(C),E!==E+0)throw E;z(1,0)}}function Wm(l,c,d,m,b,_){var C=U();try{B(l)(c,d,m,b,_)}catch(E){if(H(C),E!==E+0)throw E;z(1,0)}}function Xm(l,c,d,m,b,_,C){var E=U();try{return B(l)(c,d,m,b,_,C)}catch(O){if(H(E),O!==O+0)throw O;z(1,0)}}function Jm(l,c,d,m,b,_,C,E){var O=U();try{return B(l)(c,d,m,b,_,C,E)}catch($){if(H(O),$!==$+0)throw $;z(1,0)}}function Km(l){var c=U();try{return B(l)()}catch(d){if(H(c),d!==d+0)throw d;z(1,0)}}function Ym(l,c,d,m,b,_,C,E,O){var $=U();try{return B(l)(c,d,m,b,_,C,E,O)}catch(D){if(H($),D!==D+0)throw D;z(1,0)}}function Qm(l,c,d,m,b,_,C){var E=U();try{return B(l)(c,d,m,b,_,C)}catch(O){if(H(E),O!==O+0)throw O;z(1,0)}}function Zm(l,c,d,m){var b=U();try{return B(l)(c,d,m)}catch(_){if(H(b),_!==_+0)throw _;z(1,0)}}function ev(l,c,d,m){var b=U();try{return B(l)(c,d,m)}catch(_){if(H(b),_!==_+0)throw _;z(1,0)}}function tv(l,c,d,m,b,_,C,E){var O=U();try{B(l)(c,d,m,b,_,C,E)}catch($){if(H(O),$!==$+0)throw $;z(1,0)}}function rv(l,c,d,m,b,_,C,E){var O=U();try{B(l)(c,d,m,b,_,C,E)}catch($){if(H(O),$!==$+0)throw $;z(1,0)}}function nv(l,c,d,m,b,_){var C=U();try{return B(l)(c,d,m,b,_)}catch(E){if(H(C),E!==E+0)throw E;z(1,0)}}function iv(l,c,d,m,b,_,C,E,O,$){var D=U();try{return B(l)(c,d,m,b,_,C,E,O,$)}catch(j){if(H(D),j!==j+0)throw j;z(1,0)}}function ov(l,c,d){var m=U();try{return B(l)(c,d)}catch(b){if(H(m),b!==b+0)throw b;z(1,0)}}function av(l,c,d,m,b){var _=U();try{return B(l)(c,d,m,b)}catch(C){if(H(_),C!==C+0)throw C;z(1,0)}}function sv(l,c,d,m,b,_,C,E,O,$){var D=U();try{B(l)(c,d,m,b,_,C,E,O,$)}catch(j){if(H(D),j!==j+0)throw j;z(1,0)}}function lv(l,c,d,m,b,_,C){var E=U();try{B(l)(c,d,m,b,_,C)}catch(O){if(H(E),O!==O+0)throw O;z(1,0)}}function cv(l,c,d,m){var b=U();try{return B(l)(c,d,m)}catch(_){if(H(b),_!==_+0)throw _;z(1,0)}}function uv(l,c,d,m,b,_,C,E,O,$,D,j){var W=U();try{return B(l)(c,d,m,b,_,C,E,O,$,D,j)}catch(K){if(H(W),K!==K+0)throw K;z(1,0)}}function dv(l,c,d,m,b,_,C){var E=U();try{return cs(l,c,d,m,b,_,C)}catch(O){if(H(E),O!==O+0)throw O;z(1,0)}}function fv(l,c,d,m,b){var _=U();try{return us(l,c,d,m,b)}catch(C){if(H(_),C!==C+0)throw C;z(1,0)}}function hv(){Ae();function l(){var c,d;i.calledRun=!0,!I&&(Be(),(c=N)===null||c===void 0||c(i),(d=i.onRuntimeInitialized)===null||d===void 0||d.call(i),ie())}i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),l()},1)):l()}var $t;return $t=await Yp(),hv(),fe?t=i:t=new Promise((l,c)=>{N=l,M=c}),t}function Kl(e){return Bi(Gi,e)}async function Yl(e,t){return Jl(Gi,e,t)}const qi=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],Ql=[...qi,["unknown"]].map(e=>e[0]),Zr=new Map(qi);function Zl(e){for(const[t,r]of Zr)if(e===r)return t;return"unknown"}function ec(e){if(Wi(e))return{width:e.naturalWidth,height:e.naturalHeight};if(Xi(e))return{width:e.width.baseVal.value,height:e.height.baseVal.value};if(Ji(e))return{width:e.videoWidth,height:e.videoHeight};if(Yi(e))return{width:e.width,height:e.height};if(Zi(e))return{width:e.displayWidth,height:e.displayHeight};if(Ki(e))return{width:e.width,height:e.height};if(Qi(e))return{width:e.width,height:e.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Wi(e){var t,r;try{return e instanceof((r=(t=e==null?void 0:e.ownerDocument)==null?void 0:t.defaultView)==null?void 0:r.HTMLImageElement)}catch{return!1}}function Xi(e){var t,r;try{return e instanceof((r=(t=e==null?void 0:e.ownerDocument)==null?void 0:t.defaultView)==null?void 0:r.SVGImageElement)}catch{return!1}}function Ji(e){var t,r;try{return e instanceof((r=(t=e==null?void 0:e.ownerDocument)==null?void 0:t.defaultView)==null?void 0:r.HTMLVideoElement)}catch{return!1}}function Ki(e){var t,r;try{return e instanceof((r=(t=e==null?void 0:e.ownerDocument)==null?void 0:t.defaultView)==null?void 0:r.HTMLCanvasElement)}catch{return!1}}function Yi(e){try{return e instanceof ImageBitmap||Object.prototype.toString.call(e)==="[object ImageBitmap]"}catch{return!1}}function Qi(e){try{return e instanceof OffscreenCanvas||Object.prototype.toString.call(e)==="[object OffscreenCanvas]"}catch{return!1}}function Zi(e){try{return e instanceof VideoFrame||Object.prototype.toString.call(e)==="[object VideoFrame]"}catch{return!1}}function tc(e){try{return e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"}catch{return!1}}function rc(e){try{return e instanceof ImageData||Object.prototype.toString.call(e)==="[object ImageData]"}catch{return!1}}function nc(e,t){try{const r=new OffscreenCanvas(e,t);if(r.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return r;throw void 0}catch{const r=document.createElement("canvas");return r.width=e,r.height=t,r}}async function eo(e){if(Wi(e)&&!await sc(e))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Xi(e)&&!await lc(e))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Zi(e)&&cc(e))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Ji(e)&&(e.readyState===0||e.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Yi(e)&&dc(e))throw new DOMException("The image source is detached.","InvalidStateError");const{width:t,height:r}=ec(e);if(t===0||r===0)return null;const n=nc(t,r).getContext("2d");n.drawImage(e,0,0);try{return n.getImageData(0,0,t,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ic(e){let t;try{t=await createImageBitmap(e)}catch{try{if(globalThis.Image){t=new Image;let r="";try{r=URL.createObjectURL(e),t.src=r,await t.decode()}finally{URL.revokeObjectURL(r)}}else return e}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await eo(t)}function oc(e){const{width:t,height:r}=e;if(t===0||r===0)return null;const n=e.getContext("2d");try{return n.getImageData(0,0,t,r)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function ac(e){if(tc(e))return await ic(e);if(rc(e)){if(uc(e))throw new DOMException("The image data has been detached.","InvalidStateError");return e}return Ki(e)||Qi(e)?oc(e):await eo(e)}async function sc(e){try{return await e.decode(),!0}catch{return!1}}async function lc(e){var t;try{return await((t=e.decode)==null?void 0:t.call(e)),!0}catch{return!1}}function cc(e){return e.format===null}function uc(e){return e.data.buffer.byteLength===0}function dc(e){return e.width===0&&e.height===0}function to(e,t){return fc(e)?new DOMException(`${t}: ${e.message}`,e.name):hc(e)?new e.constructor(`${t}: ${e.message}`):new Error(`${t}: ${e}`)}function fc(e){return e instanceof DOMException||Object.prototype.toString.call(e)==="[object DOMException]"}function hc(e){return e instanceof Error||Object.prototype.toString.call(e)==="[object Error]"}var Ht;class gc{constructor(t={}){$l(this,Ht);var r;try{const n=(r=t==null?void 0:t.formats)==null?void 0:r.filter(i=>i!=="unknown");if((n==null?void 0:n.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const i of n??[])if(!Zr.has(i))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${i}' is not a valid enum value of type BarcodeFormat.`);Ml(this,Ht,n??[]),Kl({fireImmediately:!0}).catch(()=>{})}catch(n){throw to(n,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return Ql.filter(t=>t!=="unknown")}async detect(t){try{const r=await ac(t);if(r===null)return[];let n;const i={tryCode39ExtendedMode:!1,textMode:"Plain",formats:kl(this,Ht).map(o=>Zr.get(o))};try{n=await Yl(r,i)}catch(o){throw console.error(o),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return n.map(o=>{const{topLeft:{x:s,y:u},topRight:{x:h,y:g},bottomLeft:{x:f,y},bottomRight:{x:v,y:p}}=o.position,x=Math.min(s,h,f,v),S=Math.min(u,g,y,p),P=Math.max(s,h,f,v),I=Math.max(u,g,y,p);return{boundingBox:new DOMRectReadOnly(x,S,P-x,I-S),rawValue:o.text,format:Zl(o.format),cornerPoints:[{x:s,y:u},{x:h,y:g},{x:v,y:p},{x:f,y}]}})}catch(r){throw to(r,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Ht=new WeakMap,globalThis.BarcodeDetector!=null||(globalThis.BarcodeDetector=gc);let ro=!0,no=!0;function mt(e,t,r){const n=e.match(t);return n&&n.length>=r&&parseFloat(n[r],10)}function je(e,t,r){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(s,u){if(s!==t)return i.apply(this,arguments);const h=g=>{const f=r(g);f&&(u.handleEvent?u.handleEvent(f):u(f))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,h),i.apply(this,[s,h])};const o=n.removeEventListener;n.removeEventListener=function(s,u){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(u))return o.apply(this,arguments);const h=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,h])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(s){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),s&&this.addEventListener(t,this["_on"+t]=s)},enumerable:!0,configurable:!0})}function pc(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(ro=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function mc(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(no=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function io(){if(typeof window=="object"){if(ro)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function en(e,t){no&&console.warn(e+" is deprecated, please use "+t+" instead.")}function vc(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.userAgentData&&r.userAgentData.brands){const n=r.userAgentData.brands.find(i=>i.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(r.mozGetUserMedia)t.browser="firefox",t.version=parseInt(mt(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(mt(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(mt(r.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=mt(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function oo(e){return Object.prototype.toString.call(e)==="[object Object]"}function ao(e){return oo(e)?Object.keys(e).reduce(function(t,r){const n=oo(e[r]),i=n?ao(e[r]):e[r],o=n&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[r]:i})},{}):e}function tn(e,t,r){!t||r.has(t.id)||(r.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?tn(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(i=>{tn(e,e.get(i),r)})}))}function so(e,t,r){const n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(s=>{s.type==="track"&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(s=>{e.forEach(u=>{u.type===n&&u.trackId===s.id&&tn(e,u,i)})}),i}const lo=io;function co(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const n=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const h={};return Object.keys(u).forEach(g=>{if(g==="require"||g==="advanced"||g==="mediaSource")return;const f=typeof u[g]=="object"?u[g]:{ideal:u[g]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const y=function(v,p){return v?v+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(f.ideal!==void 0){h.optional=h.optional||[];let v={};typeof f.ideal=="number"?(v[y("min",g)]=f.ideal,h.optional.push(v),v={},v[y("max",g)]=f.ideal,h.optional.push(v)):(v[y("",g)]=f.ideal,h.optional.push(v))}f.exact!==void 0&&typeof f.exact!="number"?(h.mandatory=h.mandatory||{},h.mandatory[y("",g)]=f.exact):["min","max"].forEach(v=>{f[v]!==void 0&&(h.mandatory=h.mandatory||{},h.mandatory[y(v,g)]=f[v])})}),u.advanced&&(h.optional=(h.optional||[]).concat(u.advanced)),h},i=function(u,h){if(t.version>=61)return h(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const g=function(f,y,v){y in f&&!(v in f)&&(f[v]=f[y],delete f[y])};u=JSON.parse(JSON.stringify(u)),g(u.audio,"autoGainControl","googAutoGainControl"),g(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=n(u.audio)}if(u&&typeof u.video=="object"){let g=u.video.facingMode;g=g&&(typeof g=="object"?g:{ideal:g});const f=t.version<66;if(g&&(g.exact==="user"||g.exact==="environment"||g.ideal==="user"||g.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete u.video.facingMode;let y;if(g.exact==="environment"||g.ideal==="environment"?y=["back","rear"]:(g.exact==="user"||g.ideal==="user")&&(y=["front"]),y)return r.mediaDevices.enumerateDevices().then(v=>{v=v.filter(x=>x.kind==="videoinput");let p=v.find(x=>y.some(S=>x.label.toLowerCase().includes(S)));return!p&&v.length&&y.includes("back")&&(p=v[v.length-1]),p&&(u.video.deviceId=g.exact?{exact:p.deviceId}:{ideal:p.deviceId}),u.video=n(u.video),lo("chrome: "+JSON.stringify(u)),h(u)})}u.video=n(u.video)}return lo("chrome: "+JSON.stringify(u)),h(u)},o=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(u,h,g){i(u,f=>{r.webkitGetUserMedia(f,h,y=>{g&&g(o(y))})})};if(r.getUserMedia=s.bind(r),r.mediaDevices.getUserMedia){const u=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(h){return i(h,g=>u(g).then(f=>{if(g.audio&&!f.getAudioTracks().length||g.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(o(f))))}}}function uo(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function fo(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[n.stream],this.dispatchEvent(s)}),n.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[n.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else je(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function ho(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,h){let g=i.apply(this,arguments);return g||(g=t(this,u),this._senders.push(g)),g};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){o.apply(this,arguments);const h=this._senders.indexOf(u);h!==-1&&this._senders.splice(h,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(t(this,s))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{const u=this._senders.find(h=>h.track===s);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function go(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=r.apply(this,[]);return o.forEach(s=>s._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>so(s,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i}),je(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>so(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let i,o,s;return this.getSenders().forEach(u=>{u.track===n&&(i?s=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===n&&(o?s=!0:o=u),u.track===n)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function po(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const h=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(h)===-1&&this._shimmedLocalStreams[u.id].push(h):this._shimmedLocalStreams[u.id]=[u,h],h};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(g=>{if(this.getSenders().find(y=>y.track===g))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();r.apply(this,arguments);const h=this.getSenders().filter(g=>u.indexOf(g)===-1);this._shimmedLocalStreams[s.id]=[s].concat(h)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],n.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const h=this._shimmedLocalStreams[u].indexOf(s);h!==-1&&this._shimmedLocalStreams[u].splice(h,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function mo(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return po(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const f=r.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(y=>this._reverseStreams[y.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(y=>{if(this.getSenders().find(p=>p.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const y=new e.MediaStream(f.getTracks());this._streams[f.id]=y,this._reverseStreams[y.id]=f,f=y}n.apply(this,[f])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},e.RTCPeerConnection.prototype.addTrack=function(f,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(S=>S===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(S=>S.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[y.id];if(x)x.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const S=new e.MediaStream([f]);this._streams[y.id]=S,this._reverseStreams[S.id]=y,this.addStream(S)}return this.getSenders().find(S=>S.track===f)};function o(g,f){let y=f.sdp;return Object.keys(g._reverseStreams||[]).forEach(v=>{const p=g._reverseStreams[v],x=g._streams[p.id];y=y.replace(new RegExp(x.id,"g"),p.id)}),new RTCSessionDescription({type:f.type,sdp:y})}function s(g,f){let y=f.sdp;return Object.keys(g._reverseStreams||[]).forEach(v=>{const p=g._reverseStreams[v],x=g._streams[p.id];y=y.replace(new RegExp(p.id,"g"),x.id)}),new RTCSessionDescription({type:f.type,sdp:y})}["createOffer","createAnswer"].forEach(function(g){const f=e.RTCPeerConnection.prototype[g],y={[g](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[x=>{const S=o(this,x);v[0].apply(null,[S])},x=>{v[1]&&v[1].apply(null,x)},arguments[2]]):f.apply(this,arguments).then(x=>o(this,x))}};e.RTCPeerConnection.prototype[g]=y[g]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=s(this,arguments[0]),u.apply(this,arguments))};const h=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const g=h.get.apply(this);return g.type===""?g:o(this,g)}}),e.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(S=>f.track===S)&&(v=this._streams[p])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function rn(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=e.RTCPeerConnection.prototype[r],i={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=i[r]})}function vo(e,t){je(e,"negotiationneeded",r=>{const n=r.target;if(!((t.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const yo=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:vo,shimAddTrackRemoveTrack:mo,shimAddTrackRemoveTrackWithNative:po,shimGetSendersWithDtmf:ho,shimGetUserMedia:co,shimMediaStream:uo,shimOnTrack:fo,shimPeerConnection:rn,shimSenderReceiverGetStats:go},Symbol.toStringTag,{value:"Module"}));function bo(e,t){const r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(i,o,s){en("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(i).then(o,s)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const i=function(s,u,h){u in s&&!(h in s)&&(s[h]=s[u],delete s[u])},o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},n&&n.prototype.getSettings){const s=n.prototype.getSettings;n.prototype.getSettings=function(){const u=s.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(n&&n.prototype.applyConstraints){const s=n.prototype.applyConstraints;n.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[u])}}}}function yc(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return n.video===!0?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function _o(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function nn(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=s[i]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,s,u]=arguments;return n.apply(this,[o||null]).then(h=>{if(t.version<53&&!s)try{h.forEach(g=>{g.type=r[g.type]||g.type})}catch(g){if(g.name!=="TypeError")throw g;h.forEach((f,y)=>{h.set(y,Object.assign({},f,{type:r[f.type]||f.type}))})}return h}).then(s,u)}}function So(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function xo(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=t.apply(this,[]);return n.forEach(i=>i._pc=this),n}),je(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Co(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){en("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function Eo(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function wo(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const i=n.length>0;i&&n.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:s}=o,u=s.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=n,s.sendEncodings=n,this.setParametersPromises.push(s.setParameters(u).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function To(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const n=t.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function Oo(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Po(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Io=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:wo,shimCreateAnswer:Po,shimCreateOffer:Oo,shimGetDisplayMedia:yc,shimGetParameters:To,shimGetUserMedia:bo,shimOnTrack:_o,shimPeerConnection:nn,shimRTCDataChannel:Eo,shimReceiverGetStats:xo,shimRemoveStream:Co,shimSenderGetStats:So},Symbol.toStringTag,{value:"Module"}));function ko(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(i=>t.call(this,i,n)),n.getVideoTracks().forEach(i=>t.call(this,i,n))},e.RTCPeerConnection.prototype.addTrack=function(n,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const i=r.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function $o(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(o)>=0)return;n._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,n.dispatchEvent(s)})}),t.apply(n,arguments)}}}function Mo(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(g,f){const y=arguments.length>=2?arguments[2]:arguments[0],v=r.apply(this,[y]);return f?(v.then(g,f),Promise.resolve()):v},t.createAnswer=function(g,f){const y=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[y]);return f?(v.then(g,f),Promise.resolve()):v};let u=function(h,g,f){const y=i.apply(this,[h]);return f?(y.then(g,f),Promise.resolve()):y};t.setLocalDescription=u,u=function(h,g,f){const y=o.apply(this,[h]);return f?(y.then(g,f),Promise.resolve()):y},t.setRemoteDescription=u,u=function(h,g,f){const y=s.apply(this,[h]);return f?(y.then(g,f),Promise.resolve()):y},t.addIceCandidate=u}function No(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const r=t.mediaDevices,n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=i=>n(Ao(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(n,i,o){t.mediaDevices.getUserMedia(n).then(i,o)}).bind(t))}function Ao(e){return e&&e.video!==void 0?Object.assign({},e,{video:ao(e.video)}):e}function Do(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(n,i){if(n&&n.iceServers){const o=[];for(let s=0;s<n.iceServers.length;s++){let u=n.iceServers[s];u.urls===void 0&&u.url?(en("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,o.push(u)):o.push(n.iceServers[s])}n.iceServers=o}return new t(n,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Ro(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Fo(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):n.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Lo(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const jo=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Lo,shimCallbacksAPI:Mo,shimConstraints:Ao,shimCreateOfferLegacy:Fo,shimGetUserMedia:No,shimLocalStreamsAPI:ko,shimRTCIceServerUrls:Do,shimRemoteStreamsAPI:$o,shimTrackEventTransceiver:Ro},Symbol.toStringTag,{value:"Module"}));function Vo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zo={exports:{}};(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},t.splitSections=function(r){return r.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(r){const n=t.splitSections(r);return n&&n[0]},t.getMediaSections=function(r){const n=t.splitSections(r);return n.shift(),n},t.matchPrefix=function(r,n){return t.splitLines(r).filter(i=>i.indexOf(n)===0)},t.parseCandidate=function(r){let n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");const i={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let o=8;o<n.length;o+=2)switch(n[o]){case"raddr":i.relatedAddress=n[o+1];break;case"rport":i.relatedPort=parseInt(n[o+1],10);break;case"tcptype":i.tcpType=n[o+1];break;case"ufrag":i.ufrag=n[o+1],i.usernameFragment=n[o+1];break;default:i[n[o]]===void 0&&(i[n[o]]=n[o+1]);break}return i},t.writeCandidate=function(r){const n=[];n.push(r.foundation);const i=r.component;i==="rtp"?n.push(1):i==="rtcp"?n.push(2):n.push(i),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);const o=r.type;return n.push("typ"),n.push(o),o!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},t.parseIceOptions=function(r){return r.substring(14).split(" ")},t.parseRtpMap=function(r){let n=r.substring(9).split(" ");const i={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),i.name=n[0],i.clockRate=parseInt(n[1],10),i.channels=n.length===3?parseInt(n[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);const i=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(r){const n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},t.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},t.parseFmtp=function(r){const n={};let i;const o=r.substring(r.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)i=o[s].trim().split("="),n[i[0].trim()]=i[1];return n},t.writeFmtp=function(r){let n="",i=r.payloadType;if(r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const o=[];Object.keys(r.parameters).forEach(s=>{r.parameters[s]!==void 0?o.push(s+"="+r.parameters[s]):o.push(s)}),n+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return n},t.parseRtcpFb=function(r){const n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},t.writeRtcpFb=function(r){let n="",i=r.payloadType;return r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(o=>{n+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),n},t.parseSsrcMedia=function(r){const n=r.indexOf(" "),i={ssrc:parseInt(r.substring(7,n),10)},o=r.indexOf(":",n);return o>-1?(i.attribute=r.substring(n+1,o),i.value=r.substring(o+1)):i.attribute=r.substring(n+1),i},t.parseSsrcGroup=function(r){const n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(i=>parseInt(i,10))}},t.getMid=function(r){const n=t.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(r){const n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},t.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:t.matchPrefix(r+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(r,n){let i="a=setup:"+n+`\r
`;return r.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(r){const n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},t.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?t.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},t.getCryptoParameters=function(r,n){return t.matchPrefix(r+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(r,n){const i=t.matchPrefix(r+n,"a=ice-ufrag:")[0],o=t.matchPrefix(r+n,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},t.parseRtpParameters=function(r){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(r)[0].split(" ");n.profile=o[2];for(let u=3;u<o.length;u++){const h=o[u],g=t.matchPrefix(r,"a=rtpmap:"+h+" ")[0];if(g){const f=t.parseRtpMap(g),y=t.matchPrefix(r,"a=fmtp:"+h+" ");switch(f.parameters=y.length?t.parseFmtp(y[0]):{},f.rtcpFeedback=t.matchPrefix(r,"a=rtcp-fb:"+h+" ").map(t.parseRtcpFb),n.codecs.push(f),f.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(f.name.toUpperCase());break}}}t.matchPrefix(r,"a=extmap:").forEach(u=>{n.headerExtensions.push(t.parseExtmap(u))});const s=t.matchPrefix(r,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach(u=>{s.forEach(h=>{u.rtcpFeedback.find(f=>f.type===h.type&&f.parameter===h.parameter)||u.rtcpFeedback.push(h)})}),n},t.writeRtpDescription=function(r,n){let i="";i+="m="+r+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(s=>{i+=t.writeRtpMap(s),i+=t.writeFmtp(s),i+=t.writeRtcpFb(s)});let o=0;return n.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(s=>{i+=t.writeExtmap(s)}),i},t.parseRtpEncodingParameters=function(r){const n=[],i=t.parseRtpParameters(r),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(r,"a=ssrc:").map(v=>t.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),h=u.length>0&&u[0].ssrc;let g;const f=t.matchPrefix(r,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(x=>parseInt(x,10)));f.length>0&&f[0].length>1&&f[0][0]===h&&(g=f[0][1]),i.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let p={ssrc:h,codecPayloadType:parseInt(v.parameters.apt,10)};h&&g&&(p.rtx={ssrc:g}),n.push(p),o&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:h,mechanism:s?"red+ulpfec":"red"},n.push(p))}}),n.length===0&&h&&n.push({ssrc:h});let y=t.matchPrefix(r,"b=");return y.length&&(y[0].indexOf("b=TIAS:")===0?y=parseInt(y[0].substring(7),10):y[0].indexOf("b=AS:")===0?y=parseInt(y[0].substring(5),10)*1e3*.95-50*40*8:y=void 0,n.forEach(v=>{v.maxBitrate=y})),n},t.parseRtcpParameters=function(r){const n={},i=t.matchPrefix(r,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);const o=t.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=o.length===0;const s=t.matchPrefix(r,"a=rtcp-mux");return n.mux=s.length>0,n},t.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},t.parseMsid=function(r){let n;const i=t.matchPrefix(r,"a=msid:");if(i.length===1)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};const o=t.matchPrefix(r,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return n=o[0].value.split(" "),{stream:n[0],track:n[1]}},t.parseSctpDescription=function(r){const n=t.parseMLine(r),i=t.matchPrefix(r,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const s=t.matchPrefix(r,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:n.fmt,maxMessageSize:o};const u=t.matchPrefix(r,"a=sctpmap:");if(u.length>0){const h=u[0].substring(10).split(" ");return{port:parseInt(h[0],10),protocol:h[1],maxMessageSize:o}}},t.writeSctpDescription=function(r,n){let i=[];return r.protocol!=="DTLS/SCTP"?i=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:i=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&i.push("a=max-message-size:"+n.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(r,n,i){let o;const s=n!==void 0?n:2;return r?o=r:o=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(r,n){const i=t.splitLines(r);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(r){return t.splitLines(r)[0].split(" ")[0].substring(2)},t.isRejected=function(r){return r.split(" ",2)[1]==="0"},t.parseMLine=function(r){const i=t.splitLines(r)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(r){const i=t.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const n=t.splitLines(r);for(let i=0;i<n.length;i++)if(n[i].length<2||n[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(zo);var Ho=zo.exports;const Ze=Vo(Ho),bc=vs({__proto__:null,default:Ze},[Ho]);function Ut(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const i=new t(n),o=Ze.parseCandidate(n.candidate);for(const s in o)s in i||Object.defineProperty(i,s,{value:o[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(n)},e.RTCIceCandidate.prototype=t.prototype,je(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function on(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||je(e,"icecandidate",t=>{if(t.candidate){const r=Ze.parseCandidate(t.candidate.candidate);r.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return t})}function Bt(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(u){if(!u||!u.sdp)return!1;const h=Ze.splitSections(u.sdp);return h.shift(),h.some(g=>{const f=Ze.parseMLine(g);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},n=function(u){const h=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(h===null||h.length<2)return-1;const g=parseInt(h[1],10);return g!==g?-1:g},i=function(u){let h=65536;return t.browser==="firefox"&&(t.version<57?u===-1?h=16384:h=2147483637:t.version<60?h=t.version===57?65535:65536:h=2147483637),h},o=function(u,h){let g=65536;t.browser==="firefox"&&t.version===57&&(g=65535);const f=Ze.matchPrefix(u.sdp,"a=max-message-size:");return f.length>0?g=parseInt(f[0].substring(19),10):t.browser==="firefox"&&h!==-1&&(g=2147483637),g},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:h}=this.getConfiguration();h==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const h=n(arguments[0]),g=i(h),f=o(arguments[0],h);let y;g===0&&f===0?y=Number.POSITIVE_INFINITY:g===0||f===0?y=Math.max(g,f):y=Math.min(g,f);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return y}}),this._sctp=v}return s.apply(this,arguments)}}function Gt(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(n,i){const o=n.send;n.send=function(){const u=arguments[0],h=u.length||u.size||u.byteLength;if(n.readyState==="open"&&i.sctp&&h>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(n,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=r.apply(this,arguments);return t(i,this),i},je(e,"datachannel",n=>(t(n.channel,n.target),n))}function an(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=t[r];t[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function sn(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return r.apply(this,arguments)}}function qt(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Wt(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return r.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?r.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>r.apply(this,[s]))})}const _c=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:sn,shimAddIceCandidateNullOrEmpty:qt,shimConnectionState:an,shimMaxMessageSize:Bt,shimParameterlessSetLocalDescription:Wt,shimRTCIceCandidate:Ut,shimRTCIceCandidateRelayProtocol:on,shimSendThrowTypeError:Gt},Symbol.toStringTag,{value:"Module"}));function Sc({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=io,n=vc(e),i={browserDetails:n,commonShim:_c,extractVersion:mt,disableLog:pc,disableWarnings:mc,sdp:bc};switch(n.browser){case"chrome":if(!yo||!rn||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),i;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),i;r("adapter.js shimming chrome."),i.browserShim=yo,qt(e,n),Wt(e),co(e,n),uo(e),rn(e,n),fo(e),mo(e,n),ho(e),go(e),vo(e,n),Ut(e),on(e),an(e),Bt(e,n),Gt(e),sn(e,n);break;case"firefox":if(!Io||!nn||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),i;r("adapter.js shimming firefox."),i.browserShim=Io,qt(e,n),Wt(e),bo(e,n),nn(e,n),_o(e),Co(e),So(e),xo(e),Eo(e),wo(e),To(e),Oo(e),Po(e),Ut(e),an(e),Bt(e,n),Gt(e);break;case"safari":if(!jo||!t.shimSafari)return r("Safari shim is not included in this adapter release."),i;r("adapter.js shimming safari."),i.browserShim=jo,qt(e,n),Wt(e),Do(e),Fo(e),Mo(e),ko(e),$o(e),Ro(e),No(e),Lo(e),Ut(e),on(e),Bt(e,n),Gt(e),sn(e,n);break;default:r("Unsupported browser!");break}return i}Sc({window:typeof window>"u"?void 0:window});const Xt=Tr(),xc=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(null),[i,o]=k.useState(!1),[s,u]=k.useState([]),[h,g]=k.useState("");k.useEffect(()=>{(async()=>{const P=await T.data.query("SELECT * FROM com_hubbi_inventory_audits ORDER BY started_at DESC LIMIT 10");P&&Array.isArray(P)&&t(P.map(I=>({...I,lines:[]})))})()},[]);const f=async S=>{o(!0);const P=crypto.randomUUID(),I=await T.data.query(`SELECT s.item_id, s.quantity, i.name, i.sku 
             FROM com_hubbi_inventory_stock s 
             JOIN com_hubbi_inventory_items i ON s.item_id = i.id
             WHERE s.location_id = ?`,[S]);await T.data.execute("INSERT INTO com_hubbi_inventory_audits (id, location_id, status, started_at) VALUES (?, ?, 'open', ?)",[P,S,new Date().toISOString()]);for(const M of I||[])await T.data.execute("INSERT INTO com_hubbi_inventory_audit_lines (audit_id, item_id, expected_qty) VALUES (?, ?, ?)",[P,M.item_id,M.quantity]);const N={id:P,location_id:S,status:"open",started_at:new Date().toISOString(),lines:(I||[]).map(M=>({item_id:M.item_id,item_name:M.name,item_sku:M.sku,expected_qty:M.quantity,counted_qty:null,difference:null,notes:""}))};n(N),t([N,...e]),o(!1),T.notify.success("AuditorÃ­a iniciada")},y=k.useCallback((S,P,I)=>{r&&n({...r,lines:r.lines.map(N=>N.item_id===S?{...N,counted_qty:P,difference:P-N.expected_qty,notes:I||N.notes}:N)})},[r]),v=async()=>{if(r){o(!0);for(const S of r.lines)if(S.counted_qty!==null&&(await T.data.execute(`UPDATE com_hubbi_inventory_audit_lines 
                     SET counted_qty = ?, difference = ?, notes = ? 
                     WHERE audit_id = ? AND item_id = ?`,[S.counted_qty,S.difference,S.notes,r.id,S.item_id]),S.difference!==0)){const P=crypto.randomUUID();await T.data.execute(`INSERT INTO com_hubbi_inventory_movements (id, item_id, location_id, type, reason, quantity, created_by, created_at)
                         VALUES (?, ?, ?, 'ADJUST', 'Ajuste por auditorÃ­a fÃ­sica', ?, 'audit_system', ?)`,[P,S.item_id,r.location_id,Math.abs(S.difference),new Date().toISOString()]),await T.data.execute("UPDATE com_hubbi_inventory_stock SET quantity = ? WHERE item_id = ? AND location_id = ?",[S.counted_qty,S.item_id,r.location_id])}await T.data.execute("UPDATE com_hubbi_inventory_audits SET status = 'closed', closed_at = ? WHERE id = ?",[new Date().toISOString(),r.id]),T.notify.success("AuditorÃ­a finalizada. Ajustes aplicados."),n(null),o(!1)}},p=k.useMemo(()=>[Xt.accessor("item_name",{header:({column:S})=>a.jsxs("button",{onClick:()=>S.toggleSorting(),className:"flex items-center gap-1",children:["Producto ",a.jsx(Le,{size:14})]}),cell:S=>a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:S.getValue()}),a.jsx("div",{className:"text-xs text-gray-400 font-mono",children:S.row.original.item_sku})]})}),Xt.accessor("expected_qty",{header:({column:S})=>a.jsxs("button",{onClick:()=>S.toggleSorting(),className:"flex items-center gap-1",children:["Esperado ",a.jsx(Le,{size:14})]}),cell:S=>a.jsx("span",{className:"font-mono",children:S.getValue()})}),Xt.display({id:"counted",header:"Contado",cell:({row:S})=>{const P=S.original;return a.jsx("input",{type:"number",className:"w-20 text-center border rounded-lg py-1 font-mono",value:P.counted_qty??"",onChange:I=>y(P.item_id,parseInt(I.target.value)||0),disabled:(r==null?void 0:r.status)!=="open"})}}),Xt.accessor("difference",{header:"Diferencia",cell:S=>{const P=S.getValue();if(P===null)return null;const I=P===0?"bg-green-100 text-green-700":P>0?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700";return a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${I}`,children:[P===0?a.jsx(Rt,{size:12}):a.jsx(gt,{size:12}),P>0?"+":"",P]})}})],[r,y]),x=qr({data:(r==null?void 0:r.lines)||[],columns:p,state:{sorting:s,globalFilter:h},onSortingChange:u,onGlobalFilterChange:g,getCoreRowModel:Ur(),getSortedRowModel:Gr(),getFilteredRowModel:Br()});return a.jsxs("div",{className:"flex h-full bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"w-72 border-r border-gray-200 bg-gray-50 flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("h2",{className:"font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(Wr,{size:20,className:"text-blue-600"}),"AuditorÃ­as FÃ­sicas"]})}),a.jsx("div",{className:"p-4",children:a.jsx("button",{onClick:()=>f("default-location"),disabled:i,className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50",children:"+ Nueva AuditorÃ­a"})}),a.jsx("div",{className:"flex-1 overflow-auto p-2 space-y-2",children:e.map(S=>a.jsxs("button",{onClick:()=>n(S),className:`w-full text-left p-3 rounded-lg border transition-colors ${(r==null?void 0:r.id)===S.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}`,children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(S.started_at).toLocaleDateString()}),a.jsx("div",{className:"text-xs text-gray-500",children:S.status==="open"?"ðŸŸ¡ Abierta":"ðŸŸ¢ Cerrada"})]},S.id))})]}),a.jsx("div",{className:"flex-1 flex flex-col",children:r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900",children:"Conteo en Progreso"}),a.jsxs("p",{className:"text-sm text-gray-500",children:[r.lines.length," productos"]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Xr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:"Buscar...",value:h,onChange:S=>g(S.target.value),className:"pl-9 pr-4 py-1.5 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.status==="open"&&a.jsxs("button",{onClick:v,disabled:i,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50",children:[a.jsx(Ni,{size:18})," Finalizar"]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:x.getHeaderGroups().map(S=>a.jsx("tr",{children:S.headers.map(P=>a.jsx("th",{className:"text-left p-3 font-semibold text-gray-600",children:Ke(P.column.columnDef.header,P.getContext())},P.id))},S.id))}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:x.getRowModel().rows.map(S=>a.jsx("tr",{className:"hover:bg-gray-50",children:S.getVisibleCells().map(P=>a.jsx("td",{className:"p-3",children:Ke(P.column.columnDef.cell,P.getContext())},P.id))},S.id))})]})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Wr,{size:48,className:"mx-auto mb-4 opacity-30"}),a.jsx("p",{children:"Selecciona o crea una auditorÃ­a"})]})})})]})},Cc=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),[i,o]=k.useState(null),s=k.useCallback(async()=>{n(!0);const g=await T.data.query(`
            SELECT 
                s.item_id,
                s.location_id,
                s.quantity as current_qty,
                s.min_stock,
                s.reorder_point,
                i.name as item_name,
                i.sku as item_sku,
                l.name as location_name
            FROM com_hubbi_inventory_stock s
            JOIN com_hubbi_inventory_items i ON s.item_id = i.id
            LEFT JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
            WHERE s.quantity <= s.reorder_point OR s.quantity <= s.min_stock
            ORDER BY (s.min_stock - s.quantity) DESC
        `);if(g&&Array.isArray(g)){const f=g.map(y=>({...y,severity:y.current_qty<=y.min_stock?"critical":y.current_qty<=y.reorder_point?"warning":"ok"}));t(f)}o(new Date),n(!1)},[]);k.useEffect(()=>{s();const g=()=>{s()};return T.events.on("inventory:stock:increased",g),T.events.on("inventory:stock:decreased",g),()=>{T.events.off("inventory:stock:increased",g),T.events.off("inventory:stock:decreased",g)}},[s]);const u=e.filter(g=>g.severity==="critical").length,h=e.filter(g=>g.severity==="warning").length;return{alerts:e,criticalCount:u,warningCount:h,loading:r,lastCheck:i,refresh:s}},Uo=({compact:e=!1})=>{const{alerts:t,criticalCount:r,warningCount:n,loading:i,lastCheck:o,refresh:s}=Cc(),u=e?t.slice(0,3):t;return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pi,{size:20,className:"text-orange-500"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:"Alertas de Stock"}),r>0&&a.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:r}),n>0&&a.jsx("span",{className:"bg-yellow-500 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:n})]}),a.jsx("button",{onClick:s,disabled:i,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 disabled:opacity-50",children:a.jsx(bl,{size:16,className:i?"animate-spin":""})})]}),a.jsx("div",{className:`${e?"max-h-32":"max-h-64"} overflow-auto`,children:u.length===0?a.jsxs("div",{className:"p-8 text-center text-gray-400",children:[a.jsx(Pi,{size:32,className:"mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No hay alertas de stock"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:u.map((h,g)=>a.jsxs("div",{className:`p-3 flex items-center gap-3 ${h.severity==="critical"?"bg-red-50":h.severity==="warning"?"bg-yellow-50":""}`,children:[a.jsx(gt,{size:18,className:h.severity==="critical"?"text-red-500":"text-yellow-500"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 truncate",children:h.item_name}),a.jsxs("div",{className:"text-xs text-gray-500",children:[h.location_name||"Sin ubicaciÃ³n"," â€¢ Stock: ",h.current_qty," / MÃ­nimo: ",h.min_stock]})]}),a.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded ${h.severity==="critical"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:h.severity==="critical"?"CRÃTICO":"BAJO"})]},g))})}),o&&a.jsxs("div",{className:"p-2 border-t border-gray-100 text-xs text-gray-400 text-center",children:["Ãšltima verificaciÃ³n: ",o.toLocaleTimeString()]})]})};async function Bo(e){const{itemId:t,locationId:r}=e;let n=`
    SELECT 
      s.item_id as itemId,
      s.location_id as locationId,
      s.quantity as totalStock,
      COALESCE((
        SELECT SUM(r.quantity) 
        FROM com_hubbi_inventory_reservations r 
        WHERE r.item_id = s.item_id 
          AND r.location_id = s.location_id 
          AND r.status = 'active'
      ), 0) as reservedStock,
      s.min_stock as minStock,
      s.reorder_point as reorderPoint
    FROM com_hubbi_inventory_stock s
    WHERE s.item_id = ?
  `;const i=[t];return r&&(n+=" AND s.location_id = ?",i.push(r)),(await T.db.query(n,i,{moduleId:"com.hubbi.inventory"})).map(s=>({itemId:s.itemId,locationId:s.locationId,totalStock:s.totalStock,reservedStock:s.reservedStock,availableStock:s.totalStock-s.reservedStock,minStock:s.minStock,reorderPoint:s.reorderPoint}))}async function ln(e){const t=await Bo({itemId:e.itemId,locationId:e.locationId});if(t.length===0)return{available:!1,currentStock:0,requestedQuantity:e.quantity};const r=t[0];return{available:r.availableStock>=e.quantity,currentStock:r.availableStock,requestedQuantity:e.quantity}}async function Ec(e){let t=`
    SELECT 
      i.id as itemId,
      i.name as itemName,
      i.sku,
      s.location_id as locationId,
      s.quantity as currentStock,
      s.reorder_point as reorderPoint,
      (s.reorder_point - s.quantity) as deficit
    FROM com_hubbi_inventory_stock s
    JOIN com_hubbi_inventory_items i ON s.item_id = i.id
    WHERE s.quantity <= s.reorder_point
      AND i.is_active = TRUE
  `;const r=[];return e!=null&&e.locationId&&(t+=" AND s.location_id = ?",r.push(e.locationId)),t+=" ORDER BY deficit DESC",await T.db.query(t,r,{moduleId:"com.hubbi.inventory"})}async function wc(e){var n;const t=await ln({itemId:e.itemId,locationId:e.locationId,quantity:e.quantity});if(!t.available)return{success:!1,error:`Stock insuficiente. Disponible: ${t.currentStock}, Solicitado: ${e.quantity}`};const r=crypto.randomUUID();return await T.db.execute(`
    INSERT INTO com_hubbi_inventory_reservations 
      (id, item_id, location_id, quantity, reference_type, reference_id, created_by, expires_at, status)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'active')
  `,[r,e.itemId,e.locationId,e.quantity,e.referenceType,e.referenceId,e.createdBy,e.expiresAt||null],{moduleId:"com.hubbi.inventory"}),vt("reservation:created",{reservationId:r,itemId:e.itemId,quantity:e.quantity,referenceType:e.referenceType,referenceId:e.referenceId}),(n=T.audit)==null||n.call(T,{action:"reservation_created",entity:"inventory_reservation",entityId:r,description:`Reserva de ${e.quantity} unidades para ${e.referenceType}:${e.referenceId}`}),{success:!0,reservationId:r}}async function Tc(e){const t=await T.db.query("SELECT * FROM com_hubbi_inventory_reservations WHERE id = ? AND status = 'active'",[e.reservationId],{moduleId:"com.hubbi.inventory"});if(t.length===0)return{success:!1,error:"Reserva no encontrada o ya consumida"};const r=t[0],n=crypto.randomUUID(),i=await T.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ?",[r.item_id],{moduleId:"com.hubbi.inventory"}),o=i.length>0?i[0].weighted_average_cost:0,s=r.quantity;return await T.db.execute(`
    INSERT INTO com_hubbi_inventory_movements 
      (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value, created_by)
    VALUES (?, ?, ?, 'OUT', 'internal_use', ?, ?, ?, ?)
  `,[n,r.item_id,r.location_id,s,o,s*o,e.consumedBy],{moduleId:"com.hubbi.inventory"}),await T.db.execute(`
    UPDATE com_hubbi_inventory_stock 
    SET quantity = quantity - ? 
    WHERE item_id = ? AND location_id = ?
  `,[s,r.item_id,r.location_id],{moduleId:"com.hubbi.inventory"}),await T.db.execute(`
    UPDATE com_hubbi_inventory_reservations SET status = 'consumed' WHERE id = ?
  `,[e.reservationId],{moduleId:"com.hubbi.inventory"}),vt("reservation:consumed",{reservationId:e.reservationId,movementId:n,itemId:r.item_id,quantity:s}),vt("stock:decreased",{itemId:r.item_id,locationId:r.location_id,quantity:s,reason:"internal_use",movementId:n}),{success:!0,movementId:n}}async function Oc(e){return await T.db.execute(`
    UPDATE com_hubbi_inventory_reservations SET status = 'cancelled' WHERE id = ?
  `,[e.reservationId],{moduleId:"com.hubbi.inventory"}),vt("reservation:cancelled",{reservationId:e.reservationId,reason:e.reason}),{success:!0}}async function Pc(e){var h;if(e.type==="OUT"&&e.reason!=="correction"){const g=await ln({itemId:e.itemId,locationId:e.locationId,quantity:e.quantity});if(!g.available)return{success:!1,error:`Stock insuficiente. Disponible: ${g.currentStock}, Solicitado: ${e.quantity}`}}let t=e.periodId;if(!t){const g=await Kr();t=g==null?void 0:g.id}if(t&&!await Fi(t))return{success:!1,error:`El perÃ­odo ${t} estÃ¡ cerrado o bloqueado. No se pueden registrar movimientos.`};if(e.subHubId){const g=T.permissions.has("inventory:edit_all_subhubs"),f=T.getContext(),y=e.subHubId===(f==null?void 0:f.subHubId),v=T.permissions.has("inventory:edit_own_subhub")&&y;if(!g&&!v)return{success:!1,error:"No tienes permiso para modificar inventario de esta sucursal."}}const r=crypto.randomUUID();let n=e.unitCost||0;if(!e.unitCost){const g=await T.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ? ",[e.itemId],{moduleId:"com.hubbi.inventory"});n=g.length>0?g[0].weighted_average_cost:0}await T.db.execute(`
    INSERT INTO com_hubbi_inventory_movements
                (id, item_id, location_id, type, reason, quantity, cost_at_moment, total_value,
                    document_type, document_number, document_uuid, created_by, sub_hub_id, period_id)
            VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
                `,[r,e.itemId,e.locationId,e.type,e.reason,e.quantity,n,e.quantity*n,e.documentType||null,e.documentNumber||null,e.documentUuid||null,e.createdBy,e.subHubId||null,t||null],{moduleId:"com.hubbi.inventory"});let i=e.quantity;e.type==="OUT"||e.type==="TRANSFER_OUT"?i=-e.quantity:e.type==="ADJUST"&&(i=e.quantity),await T.db.execute(`
    INSERT INTO com_hubbi_inventory_stock(item_id, location_id, quantity)
            VALUES(?, ?, ?)
    ON CONFLICT(item_id, location_id) DO UPDATE SET quantity = quantity + ?
                `,[e.itemId,e.locationId,i,i],{moduleId:"com.hubbi.inventory"}),(e.type==="IN"||e.type==="TRANSFER_IN")&&e.unitCost&&await Ic(e.itemId,e.quantity,e.unitCost);const o=await T.db.query("SELECT quantity FROM com_hubbi_inventory_stock WHERE item_id = ? AND location_id = ? ",[e.itemId,e.locationId],{moduleId:"com.hubbi.inventory"}),s=o.length>0?o[0].quantity:0,u=e.type==="IN"||e.type==="TRANSFER_IN"||e.type==="ADJUST"&&e.quantity>0;return vt(u?"stock:increased":"stock:decreased",{itemId:e.itemId,locationId:e.locationId,quantity:e.quantity,reason:e.reason,movementId:r,newStock:s}),(h=T.audit)==null||h.call(T,{action:`stock_${e.type.toLowerCase()}`,entity:"inventory_movement",entityId:r,description:`${e.type==="IN"?"Entrada":"Salida"} de ${e.quantity} unidades - ${e.reason}`}),{success:!0,movementId:r,newStock:s}}async function Ic(e,t,r){const n=await T.db.query("SELECT weighted_average_cost FROM com_hubbi_inventory_items WHERE id = ? ",[e],{moduleId:"com.hubbi.inventory"}),i=await T.db.query("SELECT SUM(quantity) as total FROM com_hubbi_inventory_stock WHERE item_id = ? ",[e],{moduleId:"com.hubbi.inventory"}),o=n.length>0?n[0].weighted_average_cost:0,s=i.length>0?i[0].total-t:0,u=s*o,h=t*r,g=s+t,f=g>0?(u+h)/g:r;await T.db.execute("UPDATE com_hubbi_inventory_items SET weighted_average_cost = ?, last_cost = ? WHERE id = ? ",[f,r,e],{moduleId:"com.hubbi.inventory"})}async function kc(e){let t="SELECT * FROM com_hubbi_inventory_items WHERE ";const r=[];if(e.id)t+="id = ? ",r.push(e.id);else if(e.sku)t+="sku = ? ",r.push(e.sku);else return null;const n=await T.db.query(t,r,{moduleId:"com.hubbi.inventory"});return n.length>0?n[0]:null}async function $c(e){let t=`
    SELECT * FROM com_hubbi_inventory_items 
    WHERE is_active = TRUE AND is_internal_use_only = FALSE
                `;const r=[];return e!=null&&e.categoryId&&(t+=" AND category_id = ? ",r.push(e.categoryId)),e!=null&&e.search&&(t+=" AND(name LIKE ? OR sku LIKE ?)",r.push(`% ${e.search}% `,` % ${e.search}% `)),t+=" ORDER BY name LIMIT ? ",r.push((e==null?void 0:e.limit)||100),await T.db.query(t,r,{moduleId:"com.hubbi.inventory"})}async function Mc(e){return await T.db.query(`
    SELECT
            k.child_item_id as componentId,
                i.name as componentName,
                i.sku as componentSku,
                k.quantity
    FROM com_hubbi_inventory_kits k
    JOIN com_hubbi_inventory_items i ON k.child_item_id = i.id
    WHERE k.parent_item_id = ?
                `,[e],{moduleId:"com.hubbi.inventory"})}function vt(e,t){window.dispatchEvent(new CustomEvent(`inventory:${e} `,{detail:{moduleId:"com.hubbi.inventory",timestamp:new Date().toISOString(),...t}}))}function Nc(){var t,r;if(!((r=(t=window.hubbi)==null?void 0:t.modules)!=null&&r.expose))return;const e="com.hubbi.inventory";window.hubbi.modules.expose("getStock",Bo,e),window.hubbi.modules.expose("checkAvailability",ln,e),window.hubbi.modules.expose("getLowStockItems",Ec,e),window.hubbi.modules.expose("createReservation",wc,e),window.hubbi.modules.expose("consumeReservation",Tc,e),window.hubbi.modules.expose("cancelReservation",Oc,e),window.hubbi.modules.expose("recordMovement",Pc,e),window.hubbi.modules.expose("getItem",kc,e),window.hubbi.modules.expose("getSellableItems",$c,e),window.hubbi.modules.expose("getKitComponents",Mc,e),window.hubbi.modules.expose("getCurrentPeriod",Kr,e),window.hubbi.modules.expose("isPeriodEditable",Fi,e)}function Ac(){console.log("[Inventory] Setting up event listeners..."),window.addEventListener("billing:invoice_created",Dc)}async function Dc(e){var i;const t=e,{invoiceId:r,items:n}=t.detail;if(!(!n||!Array.isArray(n))){console.log(`[Inventory] Processing invoice #${r} with ${n.length} items.`);for(const o of n)if(!(!o.item_id||!o.quantity))try{const s=o.location_id||await Rc();await T.data.create({table:"com_hubbi_inventory_movements",data:{id:crypto.randomUUID(),item_id:o.item_id,location_id:s,type:"OUT",reason:"sale",quantity:o.quantity,document_type:"invoice",document_uuid:r,created_by:((i=T.getContext())==null?void 0:i.userId)||"system",created_at:new Date().toISOString()},options:{strategy:"online_first"}}),await T.db.execute(`UPDATE com_hubbi_inventory_stock 
                 SET quantity = quantity - $1, updated_at = NOW()
                 WHERE item_id = $2 AND location_id = $3`,[o.quantity,o.item_id,s],{moduleId:"com.hubbi.inventory"}),window.dispatchEvent(new CustomEvent("inventory:stock:decreased",{detail:{itemId:o.item_id,locationId:s,delta:o.quantity}}))}catch(s){console.error(`[Inventory] Failed to deduct stock for item ${o.item_id}:`,s),T.notify(`Error al descontar inventario: ${o.item_name||o.item_id}`,"error")}T.notify(`Inventario actualizado por Venta #${r}`,"info")}}async function Rc(){var t;const e=await T.db.query("SELECT id FROM com_hubbi_inventory_locations WHERE kind = 'warehouse' LIMIT 1",[],{moduleId:"com.hubbi.inventory"});return((t=e==null?void 0:e[0])==null?void 0:t.id)||"default_warehouse"}const Fc=()=>a.jsxs("div",{className:"inventory-settings p-4",children:[a.jsx("h2",{className:"text-lg font-bold",children:"ConfiguraciÃ³n de Inventario"}),a.jsx("p",{className:"text-gray-500",children:"PrÃ³ximamente: Ajustes de costos, prefijos y permisos."})]}),Lc=()=>a.jsx(Uo,{compact:!0}),jc=()=>{var r,n,i;if(!(((i=(n=(r=window.hubbi)==null?void 0:r.permissions)==null?void 0:n.has)==null?void 0:i.call(n,"inventory:access"))??!0))return null;const t=()=>{var o,s;return(s=(o=window.hubbi)==null?void 0:o.navigate)==null?void 0:s.call(o,"/inventory")};return a.jsxs("button",{onClick:t,className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-lg flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),a.jsx("span",{children:"Inventario"})]})},Go=async()=>{var e,t;(t=(e=window.hubbi)==null?void 0:e.widgets)!=null&&t.register&&(window.hubbi.widgets.register({slotName:"settings_tab",moduleId:"com.hubbi.inventory",component:Fc,priority:10}),window.hubbi.widgets.register({slotName:"dashboard_widget",moduleId:"com.hubbi.inventory",component:Lc,priority:20}),window.hubbi.widgets.register({slotName:"sidebar_item",moduleId:"com.hubbi.inventory",component:jc,priority:30})),Nc(),Vc(),Ac()};async function Vc(){var e,t,r;if(!(!((t=(e=window.hubbi)==null?void 0:e.db)!=null&&t.query)||!((r=window.hubbi)!=null&&r.sendNotification)))try{const n=await window.hubbi.db.query(`
      SELECT i.name, s.quantity, s.reorder_point, l.name as location_name
      FROM com_hubbi_inventory_stock s
      JOIN com_hubbi_inventory_items i ON s.item_id = i.id
      JOIN com_hubbi_inventory_locations l ON s.location_id = l.id
      WHERE s.quantity <= s.min_stock AND i.is_active = TRUE
      LIMIT 5
    `,[],{moduleId:"com.hubbi.inventory"});n.length>0&&await window.hubbi.sendNotification({title:"âš ï¸ Stock CrÃ­tico",message:`${n.length} productos requieren reabastecimiento urgente`,category:"inventory",severity:"warning",actionUrl:"/inventory/alerts"})}catch{}}const zc=({activeTab:e,onTabChange:t})=>{const r=[{id:"overview",label:"Resumen",icon:a.jsx(pl,{size:20})},{id:"products",label:"Productos",icon:a.jsx(pt,{size:20})},{id:"movements",label:"Movimientos",icon:a.jsx(Ei,{size:20})},{id:"transfers",label:"Transferencias",icon:a.jsx(Jr,{size:20})},{id:"alerts",label:"Alertas",icon:a.jsx(gt,{size:20})},{id:"audit",label:"AuditorÃ­a",icon:a.jsx(Wr,{size:20})},{id:"suppliers",label:"Proveedores",icon:a.jsx(Ri,{size:20})},{id:"barcodes",label:"CÃ³digos de Barra",icon:a.jsx(Oi,{size:20})},{id:"reports",label:"Reportes",icon:a.jsx(Ti,{size:20})}];return a.jsxs("aside",{className:"w-64 bg-hubbi-card border-r border-hubbi-border flex flex-col h-full transition-colors duration-200",children:[a.jsx("div",{className:"p-6 border-b border-hubbi-border/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-hubbi-primary/10 rounded-lg text-hubbi-primary",children:a.jsx(gl,{size:24})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold text-hubbi-text text-lg leading-tight",children:"Inventario"}),a.jsx("p",{className:"text-xs text-hubbi-text-dim",children:"GestiÃ³n WMS"})]})]})}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-1",children:r.map(n=>a.jsxs("button",{onClick:()=>t(n.id),className:`
                            w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 group
                            ${e===n.id?"bg-hubbi-primary text-white shadow-md shadow-hubbi-primary/25":"text-hubbi-text-dim hover:bg-hubbi-bg hover:text-hubbi-text"}
                        `,children:[a.jsx("span",{className:e===n.id?"text-white":"text-hubbi-text-dim group-hover:text-hubbi-primary transition-colors",children:n.icon}),n.label]},n.id))}),a.jsx("div",{className:"p-4 border-t border-hubbi-border/50",children:a.jsxs("div",{className:"p-3 bg-hubbi-bg rounded-lg border border-hubbi-border/50",children:[a.jsx("h3",{className:"text-xs font-semibold text-hubbi-text uppercase tracking-wider mb-2",children:"Estado"}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-hubbi-text-dim",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Sincronizado"]})]})})]})},Hc=({onClose:e,onImport:t})=>{const[r,n]=k.useState(!1),[i,o]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const f=(await T.db.query("SELECT count(*) as count FROM com_hubbi_inventory_items",[],{moduleId:"com.hubbi.inventory"}))[0].count,y=await T.settings.get("inventory_onboarding_dismissed");f===0&&!y&&n(!0)}catch(g){console.error("Error checking onboarding status:",g)}finally{o(!1)}})()},[]);const s=async()=>{n(!1),await T.settings.set("inventory_onboarding_dismissed",!0),e()},u=async()=>{n(!1),await T.settings.set("inventory_onboarding_dismissed",!0),t()};return i||!r?null:a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full border border-gray-100 dark:border-gray-700 overflow-hidden animate-in fade-in zoom-in duration-300",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 to-indigo-700 opacity-10"}),a.jsx("div",{className:"absolute -top-24 -right-24 w-64 h-64 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20"}),a.jsxs("div",{className:"relative p-8",children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:a.jsx(Lt,{size:20})}),a.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-2xl flex items-center justify-center mb-6 text-blue-600 dark:text-blue-400",children:a.jsx(pt,{size:32,strokeWidth:1.5})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-3",children:"Bienvenido a Inventario"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-8 max-w-md",children:"Tu espacio de trabajo estÃ¡ vacÃ­o. Vamos a configurar tus productos para empezar a gestionar tu stock."}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:u,className:"group relative overflow-hidden rounded-xl p-6 bg-white dark:bg-gray-700 border-2 border-blue-100 dark:border-blue-900/50 hover:border-blue-500 dark:hover:border-blue-400 transition-all text-left shadow-sm hover:shadow-md",children:[a.jsx("div",{className:"mb-4 w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform",children:a.jsx(Ft,{size:20})}),a.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1 flex items-center gap-2",children:["Importar Excel",a.jsx(wi,{size:16,className:"opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0"})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Carga masiva de productos y stock inicial desde un archivo."})]}),a.jsxs("button",{onClick:s,className:"group relative overflow-hidden rounded-xl p-6 bg-gray-50 dark:bg-gray-700/50 border-2 border-transparent hover:border-gray-300 dark:hover:border-gray-600 transition-all text-left",children:[a.jsx("div",{className:"mb-4 w-10 h-10 bg-gray-200 dark:bg-gray-600/50 rounded-lg flex items-center justify-center text-gray-600 dark:text-gray-300 group-hover:scale-110 transition-transform",children:a.jsx(ul,{size:20})}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Crear Manualmente"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"AÃ±ade productos uno por uno desde el formulario."})]})]})]})]})})})},Uc=()=>{const[e,t]=k.useState(!0),[r,n]=k.useState([]),[i,o]=k.useState([]),[s,u]=k.useState([]),[h,g]=k.useState(0);return k.useEffect(()=>{(async()=>{t(!0);try{const v=await T.db.query(`
                    SELECT 
                        m.item_id, 
                        i.name, 
                        i.sku, 
                        SUM(m.quantity) as total_quantity 
                    FROM com_hubbi_inventory_movements m
                    JOIN com_hubbi_inventory_items i ON m.item_id = i.id
                    WHERE m.type = 'OUT' AND m.reason = 'sale'
                    GROUP BY m.item_id, i.name, i.sku
                    ORDER BY total_quantity DESC
                `,[]);n(v.slice(0,5)),o([...v].reverse().slice(0,5));const p=await T.db.query(`
                    SELECT i.*, COALESCE(s.quantity, 0) as current_stock
                    FROM com_hubbi_inventory_items i
                    LEFT JOIN com_hubbi_inventory_stock s ON i.id = s.item_id
                    WHERE COALESCE(s.quantity, 0) <= i.min_stock
                    ORDER BY current_stock ASC
                    LIMIT 10
                `,[]);u(p);const x=await T.db.query(`
                    SELECT SUM(i.weighted_average_cost * s.quantity) as total_value
                    FROM com_hubbi_inventory_items i
                    JOIN com_hubbi_inventory_stock s ON i.id = s.item_id
                `,[]);g(x[0].total_value||0)}catch(y){console.error("Error fetching stats:",y),T.notify.error("Error al cargar estadÃ­sticas")}finally{t(!1)}})()},[]),e?a.jsxs("div",{className:"flex items-center justify-center h-full text-hubbi-text-dim animate-pulse",children:[a.jsx(Ti,{size:48,className:"mb-4"}),a.jsx("p",{children:"Calculando mÃ©tricas..."})]}):a.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto h-full text-hubbi-text",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-hubbi-card p-4 rounded-xl border border-hubbi-border shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-green-100 text-green-600 rounded-lg",children:a.jsx(Di,{size:24})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-hubbi-text-dim",children:"Valor Total Inventario"}),a.jsxs("h3",{className:"text-2xl font-bold",children:["$",h.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),a.jsxs("div",{className:"bg-hubbi-card p-4 rounded-xl border border-hubbi-border shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-blue-100 text-blue-600 rounded-lg",children:a.jsx(Sl,{size:24})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-hubbi-text-dim",children:"Productos MÃ¡s Vendidos"}),a.jsx("h3",{className:"text-2xl font-bold",children:r.length>0?r[0].name:"N/A"})]})]}),a.jsxs("div",{className:"bg-hubbi-card p-4 rounded-xl border border-hubbi-border shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-red-100 text-red-600 rounded-lg",children:a.jsx(gt,{size:24})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-hubbi-text-dim",children:"Alertas de Stock"}),a.jsxs("h3",{className:"text-2xl font-bold",children:[s.length," productos"]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-hubbi-card rounded-xl border border-hubbi-border shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-hubbi-border bg-hubbi-bg",children:a.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(Di,{size:18,className:"text-green-500"}),"MÃ¡s Vendidos"]})}),a.jsx("div",{className:"p-4",children:r.length===0?a.jsx("p",{className:"text-center text-hubbi-text-dim py-8",children:"No hay datos de ventas aÃºn."}):a.jsx("div",{className:"space-y-4",children:r.map((f,y)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-hubbi-bg rounded-full text-xs font-bold text-hubbi-dim",children:y+1}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:f.name}),a.jsx("p",{className:"text-xs text-hubbi-text-dim",children:f.sku})]})]}),a.jsxs("span",{className:"font-mono font-bold text-hubbi-primary",children:[f.total_quantity," un."]})]},f.item_id))})})]}),a.jsxs("div",{className:"bg-hubbi-card rounded-xl border border-hubbi-border shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-hubbi-border bg-hubbi-bg",children:a.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(gt,{size:18,className:"text-red-500"}),"Stock CrÃ­tico"]})}),a.jsx("div",{className:"p-4",children:s.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-green-500 gap-2",children:[a.jsx(pt,{size:32}),a.jsx("p",{className:"font-medium",children:"Todo en orden"})]}):a.jsx("div",{className:"space-y-3",children:s.map(f=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/20",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-red-900 dark:text-red-200",children:f.name}),a.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400",children:["Min: ",f.min_stock," | Actual: ",f.current_stock]})]})]}),a.jsx("button",{className:"text-xs bg-white dark:bg-gray-800 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-2 py-1 rounded hover:bg-red-50 transition-colors",children:"Reabastecer"})]},f.id))})})]}),a.jsxs("div",{className:"bg-hubbi-card rounded-xl border border-hubbi-border shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-hubbi-border bg-gray-50 dark:bg-gray-800/50",children:a.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[a.jsx(xl,{size:18,className:"text-orange-500"}),"Menos Vendidos (RotaciÃ³n Lenta)"]})}),a.jsx("div",{className:"p-4",children:i.length===0?a.jsx("p",{className:"text-center text-hubbi-text-dim py-8",children:"No hay datos suficientes."}):a.jsx("div",{className:"space-y-4",children:i.map((f,y)=>a.jsxs("div",{className:"flex items-center justify-between opacity-75",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-gray-100 rounded-full text-xs font-bold text-gray-500",children:y+1}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:f.name}),a.jsx("p",{className:"text-xs text-hubbi-text-dim",children:f.sku})]})]}),a.jsxs("span",{className:"font-mono text-gray-500",children:[f.total_quantity," un."]})]},f.item_id))})})]})]})]})},cn={name:"",contact_name:"",email:"",phone:"",address:"",notes:""},Bc=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),[i,o]=k.useState(""),[s,u]=k.useState(!1),[h,g]=k.useState(null),[f,y]=k.useState(cn),[v,p]=k.useState(!1),x=k.useCallback(async()=>{n(!0);const w=await T.db.query("SELECT * FROM com_hubbi_inventory_suppliers ORDER BY name ASC",[],{moduleId:"com.hubbi.inventory"});t(w),n(!1)},[]);k.useEffect(()=>{x()},[x]);const S=e.filter(w=>{var A,G;return w.name.toLowerCase().includes(i.toLowerCase())||((A=w.contact_name)==null?void 0:A.toLowerCase().includes(i.toLowerCase()))||((G=w.email)==null?void 0:G.toLowerCase().includes(i.toLowerCase()))}),P=w=>{w?(g(w.id),y({name:w.name,contact_name:w.contact_name||"",email:w.email||"",phone:w.phone||"",address:w.address||"",notes:w.notes||""})):(g(null),y(cn)),u(!0)},I=()=>{u(!1),g(null),y(cn)},N=async()=>{if(!f.name.trim()){T.notify("El nombre es requerido","warning");return}p(!0);const w=T.getContext();if(h)await T.db.execute(`UPDATE com_hubbi_inventory_suppliers SET 
                    name = $1, contact_name = $2, email = $3, phone = $4, address = $5, notes = $6
                 WHERE id = $7`,[f.name,f.contact_name||null,f.email||null,f.phone||null,f.address||null,f.notes||null,h],{moduleId:"com.hubbi.inventory"}),T.notify("Proveedor actualizado","success");else{const A=crypto.randomUUID();await T.db.execute(`INSERT INTO com_hubbi_inventory_suppliers (id, hub_id, name, contact_name, email, phone, address, notes)
                 VALUES ($1, $2, $3, $4, $5, $6, $7, $8)`,[A,(w==null?void 0:w.hubId)||1,f.name,f.contact_name||null,f.email||null,f.phone||null,f.address||null,f.notes||null],{moduleId:"com.hubbi.inventory"}),T.notify("Proveedor creado","success")}p(!1),I(),x()},M=async w=>{confirm("Â¿Eliminar este proveedor?")&&(await T.db.execute("DELETE FROM com_hubbi_inventory_suppliers WHERE id = $1",[w],{moduleId:"com.hubbi.inventory"}),T.notify("Proveedor eliminado","success"),x())};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-hubbi-text flex items-center gap-2",children:[a.jsx(Ri,{size:20,className:"text-hubbi-primary"}),"Proveedores"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Xr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-hubbi-dim",size:18}),a.jsx("input",{type:"text",value:i,onChange:w=>o(w.target.value),placeholder:"Buscar...",className:"pl-10 pr-4 py-2 border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text w-64"})]}),a.jsxs("button",{onClick:()=>P(),className:"flex items-center gap-2 px-4 py-2 bg-hubbi-primary text-hubbi-primary-fg rounded-lg hover:opacity-90",children:[a.jsx(Mi,{size:18}),"Nuevo Proveedor"]})]})]}),a.jsx("div",{className:"flex-1 bg-hubbi-card rounded-xl border border-hubbi-border overflow-hidden",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-hubbi-bg text-hubbi-dim text-sm",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 font-medium",children:"Nombre"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Contacto"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Email"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"TelÃ©fono"}),a.jsx("th",{className:"px-4 py-3 font-medium text-right",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-hubbi-border",children:r?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-8 text-hubbi-dim",children:"Cargando..."})}):S.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-8 text-hubbi-dim",children:"No hay proveedores"})}):S.map(w=>a.jsxs("tr",{className:"hover:bg-hubbi-bg/50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"font-medium text-hubbi-text",children:w.name})}),a.jsx("td",{className:"px-4 py-3 text-hubbi-dim",children:w.contact_name||"-"}),a.jsx("td",{className:"px-4 py-3",children:w.email?a.jsxs("a",{href:`mailto:${w.email}`,className:"text-hubbi-primary hover:underline flex items-center gap-1",children:[a.jsx(ml,{size:14})," ",w.email]}):"-"}),a.jsx("td",{className:"px-4 py-3",children:w.phone?a.jsxs("span",{className:"flex items-center gap-1 text-hubbi-dim",children:[a.jsx(vl,{size:14})," ",w.phone]}):"-"}),a.jsxs("td",{className:"px-4 py-3 text-right",children:[a.jsx("button",{onClick:()=>P(w),className:"p-1.5 hover:bg-hubbi-bg rounded text-hubbi-dim hover:text-hubbi-primary",children:a.jsx($i,{size:16})}),a.jsx("button",{onClick:()=>M(w.id),className:"p-1.5 hover:bg-hubbi-bg rounded text-hubbi-dim hover:text-hubbi-danger ml-1",children:a.jsx(Ai,{size:16})})]})]},w.id))})]})}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-hubbi-card rounded-xl shadow-2xl w-full max-w-lg mx-4 border border-hubbi-border",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-hubbi-border",children:[a.jsx("h3",{className:"text-lg font-semibold text-hubbi-text",children:h?"Editar Proveedor":"Nuevo Proveedor"}),a.jsx("button",{onClick:I,className:"p-1 hover:bg-hubbi-bg rounded",children:a.jsx(Lt,{size:20,className:"text-hubbi-dim"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-hubbi-dim mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",value:f.name,onChange:w=>y({...f,name:w.target.value}),className:"w-full px-3 py-2 border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-hubbi-dim mb-1",children:"Nombre de Contacto"}),a.jsx("input",{type:"text",value:f.contact_name,onChange:w=>y({...f,contact_name:w.target.value}),className:"w-full px-3 py-2 border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-hubbi-dim mb-1",children:"Email"}),a.jsx("input",{type:"email",value:f.email,onChange:w=>y({...f,email:w.target.value}),className:"w-full px-3 py-2 border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-hubbi-dim mb-1",children:"TelÃ©fono"}),a.jsx("input",{type:"tel",value:f.phone,onChange:w=>y({...f,phone:w.target.value}),className:"w-full px-3 py-2 border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-hubbi-dim mb-1",children:"DirecciÃ³n"}),a.jsx("input",{type:"text",value:f.address,onChange:w=>y({...f,address:w.target.value}),className:"w-full px-3 py-2 border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-hubbi-dim mb-1",children:"Notas"}),a.jsx("textarea",{value:f.notes,onChange:w=>y({...f,notes:w.target.value}),rows:2,className:"w-full px-3 py-2 border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text resize-none"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-hubbi-border bg-hubbi-bg rounded-b-xl",children:[a.jsx("button",{onClick:I,className:"px-4 py-2 text-hubbi-text hover:bg-hubbi-border rounded-lg",children:"Cancelar"}),a.jsxs("button",{onClick:N,disabled:v,className:"flex items-center gap-2 px-4 py-2 bg-hubbi-primary text-hubbi-primary-fg rounded-lg hover:opacity-90 disabled:opacity-50",children:[a.jsx(Ni,{size:16}),v?"Guardando...":"Guardar"]})]})]})})]})};var un={},Jt={},se={};Object.defineProperty(se,"__esModule",{value:!0});function Gc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var qc=function e(t,r){Gc(this,e),this.data=t,this.text=r.text||t,this.options=r};se.default=qc,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.CODE39=void 0;var Wc=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Xc=se,Jc=Kc(Xc);function Kc(e){return e&&e.__esModule?e:{default:e}}function Yc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Zc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var eu=function(e){Zc(t,e);function t(r,n){return Yc(this,t),r=r.toUpperCase(),n.mod43&&(r+=nu(iu(r))),Qc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return Wc(t,[{key:"encode",value:function(){for(var n=dn("*"),i=0;i<this.data.length;i++)n+=dn(this.data[i])+"0";return n+=dn("*"),{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),t}(Jc.default),qo=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],tu=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function dn(e){return ru(Wo(e))}function ru(e){return tu[e].toString(2)}function nu(e){return qo[e]}function Wo(e){return qo.indexOf(e)}function iu(e){for(var t=0,r=0;r<e.length;r++)t+=Wo(e[r]);return t=t%43,t}Jt.CODE39=eu;var Se={},fn={},et={},J={};Object.defineProperty(J,"__esModule",{value:!0});var yt;function hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xo=J.SET_A=0,Jo=J.SET_B=1,Ko=J.SET_C=2;J.SHIFT=98;var ou=J.START_A=103,au=J.START_B=104,su=J.START_C=105;J.MODULO=103,J.STOP=106,J.FNC1=207,J.SET_BY_CODE=(yt={},hn(yt,ou,Xo),hn(yt,au,Jo),hn(yt,su,Ko),yt),J.SWAP={101:Xo,100:Jo,99:Ko},J.A_START_CHAR="Ã",J.B_START_CHAR="Ã‘",J.C_START_CHAR="Ã’",J.A_CHARS="[\0-_Ãˆ-Ã]",J.B_CHARS="[ -Ãˆ-Ã]",J.C_CHARS="(Ã*[0-9]{2}Ã*)",J.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Object.defineProperty(et,"__esModule",{value:!0});var lu=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),cu=se,uu=du(cu),ge=J;function du(e){return e&&e.__esModule?e:{default:e}}function fu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function gu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var pu=function(e){gu(t,e);function t(r,n){fu(this,t);var i=hu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r.substring(1),n));return i.bytes=r.split("").map(function(o){return o.charCodeAt(0)}),i}return lu(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.bytes,i=n.shift()-105,o=ge.SET_BY_CODE[i];if(o===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&n.unshift(ge.FNC1);var s=t.next(n,1,o);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(i)+s.result+t.getBar((s.checksum+i)%ge.MODULO)+t.getBar(ge.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var n=this.options.ean128||!1;return typeof n=="string"&&(n=n.toLowerCase()==="true"),n}}],[{key:"getBar",value:function(n){return ge.BARS[n]?ge.BARS[n].toString():""}},{key:"correctIndex",value:function(n,i){if(i===ge.SET_A){var o=n.shift();return o<32?o+64:o-32}else return i===ge.SET_B?n.shift()-32:(n.shift()-48)*10+n.shift()-48}},{key:"next",value:function(n,i,o){if(!n.length)return{result:"",checksum:0};var s=void 0,u=void 0;if(n[0]>=200){u=n.shift()-105;var h=ge.SWAP[u];h!==void 0?s=t.next(n,i+1,h):((o===ge.SET_A||o===ge.SET_B)&&u===ge.SHIFT&&(n[0]=o===ge.SET_A?n[0]>95?n[0]-96:n[0]:n[0]<32?n[0]+96:n[0]),s=t.next(n,i+1,o))}else u=t.correctIndex(n,o),s=t.next(n,i+1,o);var g=t.getBar(u),f=u*i;return{result:g+s.result,checksum:f+s.checksum}}}]),t}(uu.default);et.default=pu;var gn={};Object.defineProperty(gn,"__esModule",{value:!0});var Me=J,Yo=function(t){return t.match(new RegExp("^"+Me.A_CHARS+"*"))[0].length},Qo=function(t){return t.match(new RegExp("^"+Me.B_CHARS+"*"))[0].length},Zo=function(t){return t.match(new RegExp("^"+Me.C_CHARS+"*"))[0]};function pn(e,t){var r=t?Me.A_CHARS:Me.B_CHARS,n=e.match(new RegExp("^("+r+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+"ÃŒ"+ea(e.substring(n[1].length));var i=e.match(new RegExp("^"+r+"+"))[0];return i.length===e.length?e:i+String.fromCharCode(t?205:206)+pn(e.substring(i.length),!t)}function ea(e){var t=Zo(e),r=t.length;if(r===e.length)return e;e=e.substring(r);var n=Yo(e)>=Qo(e);return t+String.fromCharCode(n?206:205)+pn(e,n)}gn.default=function(e){var t=void 0,r=Zo(e).length;if(r>=2)t=Me.C_START_CHAR+ea(e);else{var n=Yo(e)>Qo(e);t=(n?Me.A_START_CHAR:Me.B_START_CHAR)+pn(e,n)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(i,o){return"Ã‹"+o})},Object.defineProperty(fn,"__esModule",{value:!0});var mu=et,vu=ta(mu),yu=gn,bu=ta(yu);function ta(e){return e&&e.__esModule?e:{default:e}}function _u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Su(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xu=function(e){Su(t,e);function t(r,n){if(_u(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(r))var i=mn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,bu.default)(r),n));else var i=mn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return mn(i)}return t}(vu.default);fn.default=xu;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});var Cu=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Eu=et,wu=Tu(Eu),ra=J;function Tu(e){return e&&e.__esModule?e:{default:e}}function Ou(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Iu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ku=function(e){Iu(t,e);function t(r,n){return Ou(this,t),Pu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ra.A_START_CHAR+r,n))}return Cu(t,[{key:"valid",value:function(){return new RegExp("^"+ra.A_CHARS+"+$").test(this.data)}}]),t}(wu.default);vn.default=ku;var yn={};Object.defineProperty(yn,"__esModule",{value:!0});var $u=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Mu=et,Nu=Au(Mu),na=J;function Au(e){return e&&e.__esModule?e:{default:e}}function Du(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ru(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Fu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Lu=function(e){Fu(t,e);function t(r,n){return Du(this,t),Ru(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,na.B_START_CHAR+r,n))}return $u(t,[{key:"valid",value:function(){return new RegExp("^"+na.B_CHARS+"+$").test(this.data)}}]),t}(Nu.default);yn.default=Lu;var bn={};Object.defineProperty(bn,"__esModule",{value:!0});var ju=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Vu=et,zu=Hu(Vu),ia=J;function Hu(e){return e&&e.__esModule?e:{default:e}}function Uu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Gu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var qu=function(e){Gu(t,e);function t(r,n){return Uu(this,t),Bu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,ia.C_START_CHAR+r,n))}return ju(t,[{key:"valid",value:function(){return new RegExp("^"+ia.C_CHARS+"+$").test(this.data)}}]),t}(zu.default);bn.default=qu,Object.defineProperty(Se,"__esModule",{value:!0}),Se.CODE128C=Se.CODE128B=Se.CODE128A=Se.CODE128=void 0;var Wu=fn,Xu=Kt(Wu),Ju=vn,Ku=Kt(Ju),Yu=yn,Qu=Kt(Yu),Zu=bn,ed=Kt(Zu);function Kt(e){return e&&e.__esModule?e:{default:e}}Se.CODE128=Xu.default,Se.CODE128A=Ku.default,Se.CODE128B=Qu.default,Se.CODE128C=ed.default;var de={},_n={},ve={};Object.defineProperty(ve,"__esModule",{value:!0}),ve.SIDE_BIN="101",ve.MIDDLE_BIN="01010",ve.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},ve.EAN2_STRUCTURE=["LL","LG","GL","GG"],ve.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],ve.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Yt={},Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});var td=ve,rd=function(t,r,n){var i=t.split("").map(function(s,u){return td.BINARIES[r[u]]}).map(function(s,u){return s?s[t[u]]:""});if(n){var o=t.length-1;i=i.map(function(s,u){return u<o?s+n:s})}return i.join("")};Ve.default=rd,Object.defineProperty(Yt,"__esModule",{value:!0});var nd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),tt=ve,id=Ve,oa=aa(id),od=se,ad=aa(od);function aa(e){return e&&e.__esModule?e:{default:e}}function sd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ld(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function cd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ud=function(e){cd(t,e);function t(r,n){sd(this,t);var i=ld(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return i.fontSize=!n.flat&&n.fontSize>n.width*10?n.width*10:n.fontSize,i.guardHeight=n.height+i.fontSize/2+n.textMargin,i}return nd(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(n,i){return this.text.substr(n,i)}},{key:"leftEncode",value:function(n,i){return(0,oa.default)(n,i)}},{key:"rightText",value:function(n,i){return this.text.substr(n,i)}},{key:"rightEncode",value:function(n,i){return(0,oa.default)(n,i)}},{key:"encodeGuarded",value:function(){var n={fontSize:this.fontSize},i={height:this.guardHeight};return[{data:tt.SIDE_BIN,options:i},{data:this.leftEncode(),text:this.leftText(),options:n},{data:tt.MIDDLE_BIN,options:i},{data:this.rightEncode(),text:this.rightText(),options:n},{data:tt.SIDE_BIN,options:i}]}},{key:"encodeFlat",value:function(){var n=[tt.SIDE_BIN,this.leftEncode(),tt.MIDDLE_BIN,this.rightEncode(),tt.SIDE_BIN];return{data:n.join(""),text:this.text}}}]),t}(ad.default);Yt.default=ud,Object.defineProperty(_n,"__esModule",{value:!0});var dd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),bt=function e(t,r,n){t===null&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===void 0){var o=Object.getPrototypeOf(t);return o===null?void 0:e(o,r,n)}else{if("value"in i)return i.value;var s=i.get;return s===void 0?void 0:s.call(n)}},fd=ve,hd=Yt,gd=pd(hd);function pd(e){return e&&e.__esModule?e:{default:e}}function md(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var sa=function(t){var r=t.substr(0,12).split("").map(function(n){return+n}).reduce(function(n,i,o){return o%2?n+i*3:n+i},0);return(10-r%10)%10},bd=function(e){yd(t,e);function t(r,n){md(this,t),r.search(/^[0-9]{12}$/)!==-1&&(r+=sa(r));var i=vd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return i.lastChar=n.lastChar,i}return dd(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===sa(this.data)}},{key:"leftText",value:function(){return bt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var n=this.data.substr(1,6),i=fd.EAN13_STRUCTURE[this.data[0]];return bt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,n,i)}},{key:"rightText",value:function(){return bt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var n=this.data.substr(7,6);return bt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,n,"RRRRRR")}},{key:"encodeGuarded",value:function(){var n=bt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(n.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(n.push({data:"00"}),n.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),n}}]),t}(gd.default);_n.default=bd;var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});var _d=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Qt=function e(t,r,n){t===null&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===void 0){var o=Object.getPrototypeOf(t);return o===null?void 0:e(o,r,n)}else{if("value"in i)return i.value;var s=i.get;return s===void 0?void 0:s.call(n)}},Sd=Yt,xd=Cd(Sd);function Cd(e){return e&&e.__esModule?e:{default:e}}function Ed(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Td(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var la=function(t){var r=t.substr(0,7).split("").map(function(n){return+n}).reduce(function(n,i,o){return o%2?n+i:n+i*3},0);return(10-r%10)%10},Od=function(e){Td(t,e);function t(r,n){return Ed(this,t),r.search(/^[0-9]{7}$/)!==-1&&(r+=la(r)),wd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return _d(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===la(this.data)}},{key:"leftText",value:function(){return Qt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var n=this.data.substr(0,4);return Qt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,n,"LLLL")}},{key:"rightText",value:function(){return Qt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var n=this.data.substr(4,4);return Qt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,n,"RRRR")}}]),t}(xd.default);Sn.default=Od;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});var Pd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Id=ve,kd=Ve,$d=ca(kd),Md=se,Nd=ca(Md);function ca(e){return e&&e.__esModule?e:{default:e}}function Ad(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Rd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Fd=function(t){var r=t.split("").map(function(n){return+n}).reduce(function(n,i,o){return o%2?n+i*9:n+i*3},0);return r%10},Ld=function(e){Rd(t,e);function t(r,n){return Ad(this,t),Dd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return Pd(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var n=Id.EAN5_STRUCTURE[Fd(this.data)];return{data:"1011"+(0,$d.default)(this.data,n,"01"),text:this.text}}}]),t}(Nd.default);xn.default=Ld;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});var jd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Vd=ve,zd=Ve,Hd=ua(zd),Ud=se,Bd=ua(Ud);function ua(e){return e&&e.__esModule?e:{default:e}}function Gd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Wd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Xd=function(e){Wd(t,e);function t(r,n){return Gd(this,t),qd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return jd(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var n=Vd.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,Hd.default)(this.data,n,"01"),text:this.text}}}]),t}(Bd.default);Cn.default=Xd;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});var Jd=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();_t.checksum=En;var Kd=Ve,rt=da(Kd),Yd=se,Qd=da(Yd);function da(e){return e&&e.__esModule?e:{default:e}}function Zd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ef(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function tf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var rf=function(e){tf(t,e);function t(r,n){Zd(this,t),r.search(/^[0-9]{11}$/)!==-1&&(r+=En(r));var i=ef(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return i.displayValue=n.displayValue,n.fontSize>n.width*10?i.fontSize=n.width*10:i.fontSize=n.fontSize,i.guardHeight=n.height+i.fontSize/2+n.textMargin,i}return Jd(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==En(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=(0,rt.default)(this.data.substr(0,6),"LLLLLL"),n+="01010",n+=(0,rt.default)(this.data.substr(6,6),"RRRRRR"),n+="101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101"+(0,rt.default)(this.data[0],"L"),options:{height:this.guardHeight}}),n.push({data:(0,rt.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),n.push({data:"01010",options:{height:this.guardHeight}}),n.push({data:(0,rt.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),n.push({data:(0,rt.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),n}}]),t}(Qd.default);function En(e){var t=0,r;for(r=1;r<11;r+=2)t+=parseInt(e[r]);for(r=0;r<11;r+=2)t+=parseInt(e[r])*3;return(10-t%10)%10}_t.default=rf;var wn={};Object.defineProperty(wn,"__esModule",{value:!0});var nf=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),of=Ve,af=fa(of),sf=se,lf=fa(sf),cf=_t;function fa(e){return e&&e.__esModule?e:{default:e}}function uf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function df(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ff=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],hf=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],gf=function(e){df(t,e);function t(r,n){uf(this,t);var i=Tn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));if(i.isValid=!1,r.search(/^[0-9]{6}$/)!==-1)i.middleDigits=r,i.upcA=ha(r,"0"),i.text=n.text||""+i.upcA[0]+r+i.upcA[i.upcA.length-1],i.isValid=!0;else if(r.search(/^[01][0-9]{7}$/)!==-1)if(i.middleDigits=r.substring(1,r.length-1),i.upcA=ha(i.middleDigits,r[0]),i.upcA[i.upcA.length-1]===r[r.length-1])i.isValid=!0;else return Tn(i);else return Tn(i);return i.displayValue=n.displayValue,n.fontSize>n.width*10?i.fontSize=n.width*10:i.fontSize=n.fontSize,i.guardHeight=n.height+i.fontSize/2+n.textMargin,i}return nf(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=this.encodeMiddleDigits(),n+="010101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101",options:{height:this.guardHeight}}),n.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),n.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),n}},{key:"encodeMiddleDigits",value:function(){var n=this.upcA[0],i=this.upcA[this.upcA.length-1],o=hf[parseInt(i)][parseInt(n)];return(0,af.default)(this.middleDigits,o)}}]),t}(lf.default);function ha(e,t){for(var r=parseInt(e[e.length-1]),n=ff[r],i="",o=0,s=0;s<n.length;s++){var u=n[s];u==="X"?i+=e[o++]:i+=u}return i=""+t+i,""+i+(0,cf.checksum)(i)}wn.default=gf,Object.defineProperty(de,"__esModule",{value:!0}),de.UPCE=de.UPC=de.EAN2=de.EAN5=de.EAN8=de.EAN13=void 0;var pf=_n,mf=nt(pf),vf=Sn,yf=nt(vf),bf=xn,_f=nt(bf),Sf=Cn,xf=nt(Sf),Cf=_t,Ef=nt(Cf),wf=wn,Tf=nt(wf);function nt(e){return e&&e.__esModule?e:{default:e}}de.EAN13=mf.default,de.EAN8=yf.default,de.EAN5=_f.default,de.EAN2=xf.default,de.UPC=Ef.default,de.UPCE=Tf.default;var it={},Zt={},St={};Object.defineProperty(St,"__esModule",{value:!0}),St.START_BIN="1010",St.END_BIN="11101",St.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],Object.defineProperty(Zt,"__esModule",{value:!0});var Of=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),er=St,Pf=se,If=kf(Pf);function kf(e){return e&&e.__esModule?e:{default:e}}function $f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Nf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Af=function(e){Nf(t,e);function t(){return $f(this,t),Mf(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Of(t,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var n=this,i=this.data.match(/.{2}/g).map(function(o){return n.encodePair(o)}).join("");return{data:er.START_BIN+i+er.END_BIN,text:this.text}}},{key:"encodePair",value:function(n){var i=er.BINARIES[n[1]];return er.BINARIES[n[0]].split("").map(function(o,s){return(o==="1"?"111":"1")+(i[s]==="1"?"000":"0")}).join("")}}]),t}(If.default);Zt.default=Af;var On={};Object.defineProperty(On,"__esModule",{value:!0});var Df=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Rf=Zt,Ff=Lf(Rf);function Lf(e){return e&&e.__esModule?e:{default:e}}function jf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function zf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ga=function(t){var r=t.substr(0,13).split("").map(function(n){return parseInt(n,10)}).reduce(function(n,i,o){return n+i*(3-o%2*2)},0);return Math.ceil(r/10)*10-r},Hf=function(e){zf(t,e);function t(r,n){return jf(this,t),r.search(/^[0-9]{13}$/)!==-1&&(r+=ga(r)),Vf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return Df(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===ga(this.data)}}]),t}(Ff.default);On.default=Hf,Object.defineProperty(it,"__esModule",{value:!0}),it.ITF14=it.ITF=void 0;var Uf=Zt,Bf=pa(Uf),Gf=On,qf=pa(Gf);function pa(e){return e&&e.__esModule?e:{default:e}}it.ITF=Bf.default,it.ITF14=qf.default;var ye={},ze={};Object.defineProperty(ze,"__esModule",{value:!0});var Wf=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Xf=se,Jf=Kf(Xf);function Kf(e){return e&&e.__esModule?e:{default:e}}function Yf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Zf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var eh=function(e){Zf(t,e);function t(r,n){return Yf(this,t),Qf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return Wf(t,[{key:"encode",value:function(){for(var n="110",i=0;i<this.data.length;i++){var o=parseInt(this.data[i]),s=o.toString(2);s=th(s,4-s.length);for(var u=0;u<s.length;u++)n+=s[u]=="0"?"100":"110"}return n+="1001",{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),t}(Jf.default);function th(e,t){for(var r=0;r<t;r++)e="0"+e;return e}ze.default=eh;var Pn={},He={};Object.defineProperty(He,"__esModule",{value:!0}),He.mod10=rh,He.mod11=nh;function rh(e){for(var t=0,r=0;r<e.length;r++){var n=parseInt(e[r]);(r+e.length)%2===0?t+=n:t+=n*2%10+Math.floor(n*2/10)}return(10-t%10)%10}function nh(e){for(var t=0,r=[2,3,4,5,6,7],n=0;n<e.length;n++){var i=parseInt(e[e.length-1-n]);t+=r[n%r.length]*i}return(11-t%11)%11}Object.defineProperty(Pn,"__esModule",{value:!0});var ih=ze,oh=sh(ih),ah=He;function sh(e){return e&&e.__esModule?e:{default:e}}function lh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ch(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function uh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var dh=function(e){uh(t,e);function t(r,n){return lh(this,t),ch(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r+(0,ah.mod10)(r),n))}return t}(oh.default);Pn.default=dh;var In={};Object.defineProperty(In,"__esModule",{value:!0});var fh=ze,hh=ph(fh),gh=He;function ph(e){return e&&e.__esModule?e:{default:e}}function mh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bh=function(e){yh(t,e);function t(r,n){return mh(this,t),vh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r+(0,gh.mod11)(r),n))}return t}(hh.default);In.default=bh;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});var _h=ze,Sh=xh(_h),ma=He;function xh(e){return e&&e.__esModule?e:{default:e}}function Ch(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function wh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Th=function(e){wh(t,e);function t(r,n){return Ch(this,t),r+=(0,ma.mod10)(r),r+=(0,ma.mod10)(r),Eh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return t}(Sh.default);kn.default=Th;var $n={};Object.defineProperty($n,"__esModule",{value:!0});var Oh=ze,Ph=Ih(Oh),va=He;function Ih(e){return e&&e.__esModule?e:{default:e}}function kh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Mh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Nh=function(e){Mh(t,e);function t(r,n){return kh(this,t),r+=(0,va.mod11)(r),r+=(0,va.mod10)(r),$h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return t}(Ph.default);$n.default=Nh,Object.defineProperty(ye,"__esModule",{value:!0}),ye.MSI1110=ye.MSI1010=ye.MSI11=ye.MSI10=ye.MSI=void 0;var Ah=ze,Dh=xt(Ah),Rh=Pn,Fh=xt(Rh),Lh=In,jh=xt(Lh),Vh=kn,zh=xt(Vh),Hh=$n,Uh=xt(Hh);function xt(e){return e&&e.__esModule?e:{default:e}}ye.MSI=Dh.default,ye.MSI10=Fh.default,ye.MSI11=jh.default,ye.MSI1010=zh.default,ye.MSI1110=Uh.default;var tr={};Object.defineProperty(tr,"__esModule",{value:!0}),tr.pharmacode=void 0;var Bh=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Gh=se,qh=Wh(Gh);function Wh(e){return e&&e.__esModule?e:{default:e}}function Xh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Kh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Yh=function(e){Kh(t,e);function t(r,n){Xh(this,t);var i=Jh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return i.number=parseInt(r,10),i}return Bh(t,[{key:"encode",value:function(){for(var n=this.number,i="";!isNaN(n)&&n!=0;)n%2===0?(i="11100"+i,n=(n-2)/2):(i="100"+i,n=(n-1)/2);return i=i.slice(0,-2),{data:i,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}(qh.default);tr.pharmacode=Yh;var rr={};Object.defineProperty(rr,"__esModule",{value:!0}),rr.codabar=void 0;var Qh=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Zh=se,eg=tg(Zh);function tg(e){return e&&e.__esModule?e:{default:e}}function rg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ng(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ig(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var og=function(e){ig(t,e);function t(r,n){rg(this,t),r.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(r="A"+r+"A");var i=ng(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r.toUpperCase(),n));return i.text=i.options.text||i.text.replace(/[A-D]/g,""),i}return Qh(t,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var n=[],i=this.getEncodings(),o=0;o<this.data.length;o++)n.push(i[this.data.charAt(o)]),o!==this.data.length-1&&n.push("0");return{text:this.text,data:n.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}(eg.default);rr.codabar=og;var ot={},nr={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","Ã¿"],Ct.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],Ct.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]},Object.defineProperty(nr,"__esModule",{value:!0});var ag=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ir=Ct,sg=se,lg=cg(sg);function cg(e){return e&&e.__esModule?e:{default:e}}function ug(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dg(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function fg(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var hg=function(e){fg(t,e);function t(r,n){return ug(this,t),dg(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return ag(t,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.data.split("").flatMap(function(u){return ir.MULTI_SYMBOLS[u]||u}),i=n.map(function(u){return t.getEncoding(u)}).join(""),o=t.checksum(n,20),s=t.checksum(n.concat(o),15);return{text:this.text,data:t.getEncoding("Ã¿")+i+t.getEncoding(o)+t.getEncoding(s)+t.getEncoding("Ã¿")+"1"}}}],[{key:"getEncoding",value:function(n){return ir.BINARIES[t.symbolValue(n)]}},{key:"getSymbol",value:function(n){return ir.SYMBOLS[n]}},{key:"symbolValue",value:function(n){return ir.SYMBOLS.indexOf(n)}},{key:"checksum",value:function(n,i){var o=n.slice().reverse().reduce(function(s,u,h){var g=h%i+1;return s+t.symbolValue(u)*g},0);return t.getSymbol(o%47)}}]),t}(lg.default);nr.default=hg;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});var gg=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),pg=nr,mg=vg(pg);function vg(e){return e&&e.__esModule?e:{default:e}}function yg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bg(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function _g(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Sg=function(e){_g(t,e);function t(r,n){return yg(this,t),bg(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return gg(t,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),t}(mg.default);Mn.default=Sg,Object.defineProperty(ot,"__esModule",{value:!0}),ot.CODE93FullASCII=ot.CODE93=void 0;var xg=nr,Cg=ya(xg),Eg=Mn,wg=ya(Eg);function ya(e){return e&&e.__esModule?e:{default:e}}ot.CODE93=Cg.default,ot.CODE93FullASCII=wg.default;var or={};Object.defineProperty(or,"__esModule",{value:!0}),or.GenericBarcode=void 0;var Tg=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Og=se,Pg=Ig(Og);function Ig(e){return e&&e.__esModule?e:{default:e}}function kg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Mg(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ng=function(e){Mg(t,e);function t(r,n){return kg(this,t),$g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return Tg(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}(Pg.default);or.GenericBarcode=Ng,Object.defineProperty(un,"__esModule",{value:!0});var Ag=Jt,ar=Se,at=de,ba=it,Et=ye,Dg=tr,Rg=rr,_a=ot,Fg=or;un.default={CODE39:Ag.CODE39,CODE128:ar.CODE128,CODE128A:ar.CODE128A,CODE128B:ar.CODE128B,CODE128C:ar.CODE128C,EAN13:at.EAN13,EAN8:at.EAN8,EAN5:at.EAN5,EAN2:at.EAN2,UPC:at.UPC,UPCE:at.UPCE,ITF14:ba.ITF14,ITF:ba.ITF,MSI:Et.MSI,MSI10:Et.MSI10,MSI11:Et.MSI11,MSI1010:Et.MSI1010,MSI1110:Et.MSI1110,pharmacode:Dg.pharmacode,codabar:Rg.codabar,CODE93:_a.CODE93,CODE93FullASCII:_a.CODE93FullASCII,GenericBarcode:Fg.GenericBarcode};var st={};Object.defineProperty(st,"__esModule",{value:!0});var Lg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};st.default=function(e,t){return Lg({},e,t)};var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.default=jg;function jg(e){var t=[];function r(n){if(Array.isArray(n))for(var i=0;i<n.length;i++)r(n[i]);else n.text=n.text||"",n.data=n.data||"",t.push(n)}return r(e),t}var An={};Object.defineProperty(An,"__esModule",{value:!0}),An.default=Vg;function Vg(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}var Dn={},Rn={},sr={};Object.defineProperty(sr,"__esModule",{value:!0}),sr.default=zg;function zg(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in t)t.hasOwnProperty(r)&&(r=t[r],typeof e[r]=="string"&&(e[r]=parseInt(e[r],10)));return typeof e.displayValue=="string"&&(e.displayValue=e.displayValue!="false"),e}var lr={};Object.defineProperty(lr,"__esModule",{value:!0});var Hg={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};lr.default=Hg,Object.defineProperty(Rn,"__esModule",{value:!0});var Ug=sr,Bg=xa(Ug),Gg=lr,Sa=xa(Gg);function xa(e){return e&&e.__esModule?e:{default:e}}function qg(e){var t={};for(var r in Sa.default)Sa.default.hasOwnProperty(r)&&(e.hasAttribute("jsbarcode-"+r.toLowerCase())&&(t[r]=e.getAttribute("jsbarcode-"+r.toLowerCase())),e.hasAttribute("data-"+r.toLowerCase())&&(t[r]=e.getAttribute("data-"+r.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,Bg.default)(t),t}Rn.default=qg;var Fn={},Ln={},pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.getTotalWidthOfEncodings=pe.calculateEncodingAttributes=pe.getBarcodePadding=pe.getEncodingHeight=pe.getMaximumHeightOfEncodings=void 0;var Wg=st,Xg=Jg(Wg);function Jg(e){return e&&e.__esModule?e:{default:e}}function Ca(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function Ea(e,t,r){if(r.displayValue&&t<e){if(r.textAlign=="center")return Math.floor((e-t)/2);if(r.textAlign=="left")return 0;if(r.textAlign=="right")return Math.floor(e-t)}return 0}function Kg(e,t,r){for(var n=0;n<e.length;n++){var i=e[n],o=(0,Xg.default)(t,i.options),s;o.displayValue?s=Zg(i.text,o,r):s=0;var u=i.data.length*o.width;i.width=Math.ceil(Math.max(s,u)),i.height=Ca(i,o),i.barcodePadding=Ea(s,u,o)}}function Yg(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].width;return t}function Qg(e){for(var t=0,r=0;r<e.length;r++)e[r].height>t&&(t=e[r].height);return t}function Zg(e,t,r){var n;if(r)n=r;else if(typeof document<"u")n=document.createElement("canvas").getContext("2d");else return 0;n.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var i=n.measureText(e);if(!i)return 0;var o=i.width;return o}pe.getMaximumHeightOfEncodings=Qg,pe.getEncodingHeight=Ca,pe.getBarcodePadding=Ea,pe.calculateEncodingAttributes=Kg,pe.getTotalWidthOfEncodings=Yg,Object.defineProperty(Ln,"__esModule",{value:!0});var ep=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),tp=st,rp=np(tp),jn=pe;function np(e){return e&&e.__esModule?e:{default:e}}function ip(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var op=function(){function e(t,r,n){ip(this,e),this.canvas=t,this.encodings=r,this.options=n}return ep(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var r=0;r<this.encodings.length;r++){var n=(0,rp.default)(this.options,this.encodings[r].options);this.drawCanvasBarcode(n,this.encodings[r]),this.drawCanvasText(n,this.encodings[r]),this.moveCanvasDrawing(this.encodings[r])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var r=this.canvas.getContext("2d");r.save(),(0,jn.calculateEncodingAttributes)(this.encodings,this.options,r);var n=(0,jn.getTotalWidthOfEncodings)(this.encodings),i=(0,jn.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,r.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(r.fillStyle=this.options.background,r.fillRect(0,0,this.canvas.width,this.canvas.height)),r.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(r,n){var i=this.canvas.getContext("2d"),o=n.data,s;r.textPosition=="top"?s=r.marginTop+r.fontSize+r.textMargin:s=r.marginTop,i.fillStyle=r.lineColor;for(var u=0;u<o.length;u++){var h=u*r.width+n.barcodePadding;o[u]==="1"?i.fillRect(h,s,r.width,r.height):o[u]&&i.fillRect(h,s,r.width,r.height*o[u])}}},{key:"drawCanvasText",value:function(r,n){var i=this.canvas.getContext("2d"),o=r.fontOptions+" "+r.fontSize+"px "+r.font;if(r.displayValue){var s,u;r.textPosition=="top"?u=r.marginTop+r.fontSize-r.textMargin:u=r.height+r.textMargin+r.marginTop+r.fontSize,i.font=o,r.textAlign=="left"||n.barcodePadding>0?(s=0,i.textAlign="left"):r.textAlign=="right"?(s=n.width-1,i.textAlign="right"):(s=n.width/2,i.textAlign="center"),i.fillText(n.text,s,u)}}},{key:"moveCanvasDrawing",value:function(r){var n=this.canvas.getContext("2d");n.translate(r.width,0)}},{key:"restoreCanvas",value:function(){var r=this.canvas.getContext("2d");r.restore()}}]),e}();Ln.default=op;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});var ap=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),sp=st,lp=cp(sp),zn=pe;function cp(e){return e&&e.__esModule?e:{default:e}}function up(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cr="http://www.w3.org/2000/svg",dp=function(){function e(t,r,n){up(this,e),this.svg=t,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return ap(e,[{key:"render",value:function(){var r=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var i=this.encodings[n],o=(0,lp.default)(this.options,i.options),s=this.createGroup(r,o.marginTop,this.svg);this.setGroupOptions(s,o),this.drawSvgBarcode(s,o,i),this.drawSVGText(s,o,i),r+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,zn.calculateEncodingAttributes)(this.encodings,this.options);var r=(0,zn.getTotalWidthOfEncodings)(this.encodings),n=(0,zn.getMaximumHeightOfEncodings)(this.encodings),i=r+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,n),this.options.background&&this.drawRect(0,0,i,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(r,n,i){var o=i.data,s;n.textPosition=="top"?s=n.fontSize+n.textMargin:s=0;for(var u=0,h=0,g=0;g<o.length;g++)h=g*n.width+i.barcodePadding,o[g]==="1"?u++:u>0&&(this.drawRect(h-n.width*u,s,n.width*u,n.height,r),u=0);u>0&&this.drawRect(h-n.width*(u-1),s,n.width*u,n.height,r)}},{key:"drawSVGText",value:function(r,n,i){var o=this.document.createElementNS(cr,"text");if(n.displayValue){var s,u;o.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font),n.textPosition=="top"?u=n.fontSize-n.textMargin:u=n.height+n.textMargin+n.fontSize,n.textAlign=="left"||i.barcodePadding>0?(s=0,o.setAttribute("text-anchor","start")):n.textAlign=="right"?(s=i.width-1,o.setAttribute("text-anchor","end")):(s=i.width/2,o.setAttribute("text-anchor","middle")),o.setAttribute("x",s),o.setAttribute("y",u),o.appendChild(this.document.createTextNode(i.text)),r.appendChild(o)}}},{key:"setSvgAttributes",value:function(r,n){var i=this.svg;i.setAttribute("width",r+"px"),i.setAttribute("height",n+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+r+" "+n),i.setAttribute("xmlns",cr),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(r,n,i){var o=this.document.createElementNS(cr,"g");return o.setAttribute("transform","translate("+r+", "+n+")"),i.appendChild(o),o}},{key:"setGroupOptions",value:function(r,n){r.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function(r,n,i,o,s){var u=this.document.createElementNS(cr,"rect");return u.setAttribute("x",r),u.setAttribute("y",n),u.setAttribute("width",i),u.setAttribute("height",o),s.appendChild(u),u}}]),e}();Vn.default=dp;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});var fp=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function hp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var gp=function(){function e(t,r,n){hp(this,e),this.object=t,this.encodings=r,this.options=n}return fp(e,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),e}();Hn.default=gp,Object.defineProperty(Fn,"__esModule",{value:!0});var pp=Ln,mp=Un(pp),vp=Vn,yp=Un(vp),bp=Hn,_p=Un(bp);function Un(e){return e&&e.__esModule?e:{default:e}}Fn.default={CanvasRenderer:mp.default,SVGRenderer:yp.default,ObjectRenderer:_p.default};var lt={};Object.defineProperty(lt,"__esModule",{value:!0});function Bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function qn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Sp=function(e){qn(t,e);function t(r,n){Bn(this,t);var i=Gn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.name="InvalidInputException",i.symbology=r,i.input=n,i.message='"'+i.input+'" is not a valid input for '+i.symbology,i}return t}(Error),xp=function(e){qn(t,e);function t(){Bn(this,t);var r=Gn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return t}(Error),Cp=function(e){qn(t,e);function t(){Bn(this,t);var r=Gn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name="NoElementException",r.message="No element to render on.",r}return t}(Error);lt.InvalidInputException=Sp,lt.InvalidElementException=xp,lt.NoElementException=Cp,Object.defineProperty(Dn,"__esModule",{value:!0});var Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp=Rn,Wn=wa(wp),Tp=Fn,wt=wa(Tp),Op=lt;function wa(e){return e&&e.__esModule?e:{default:e}}function Xn(e){if(typeof e=="string")return Pp(e);if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(Xn(e[r]));return t}else{if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLImageElement)return Ip(e);if(e&&e.nodeName&&e.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&e instanceof SVGElement)return{element:e,options:(0,Wn.default)(e),renderer:wt.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement)return{element:e,options:(0,Wn.default)(e),renderer:wt.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:wt.default.CanvasRenderer};if(e&&(typeof e>"u"?"undefined":Ep(e))==="object"&&!e.nodeName)return{element:e,renderer:wt.default.ObjectRenderer};throw new Op.InvalidElementException}}function Pp(e){var t=document.querySelectorAll(e);if(t.length!==0){for(var r=[],n=0;n<t.length;n++)r.push(Xn(t[n]));return r}}function Ip(e){var t=document.createElement("canvas");return{element:t,options:(0,Wn.default)(e),renderer:wt.default.CanvasRenderer,afterRender:function(){e.setAttribute("src",t.toDataURL())}}}Dn.default=Xn;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});var kp=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function $p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Mp=function(){function e(t){$p(this,e),this.api=t}return kp(e,[{key:"handleCatch",value:function(r){if(r.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw r.message;else throw r;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(r){try{var n=r.apply(void 0,arguments);return this.api._options.valid(!0),n}catch(i){return this.handleCatch(i),this.api}}}]),e}();Jn.default=Mp;var Np=un,Ue=Ne(Np),Ap=st,Tt=Ne(Ap),Dp=Nn,Ta=Ne(Dp),Rp=An,Oa=Ne(Rp),Fp=Dn,Lp=Ne(Fp),jp=sr,Vp=Ne(jp),zp=Jn,Hp=Ne(zp),Pa=lt,Up=lr,Ia=Ne(Up);function Ne(e){return e&&e.__esModule?e:{default:e}}var Oe=function(){},ur=function(t,r,n){var i=new Oe;if(typeof t>"u")throw Error("No element to render on was provided.");return i._renderProperties=(0,Lp.default)(t),i._encodings=[],i._options=Ia.default,i._errorHandler=new Hp.default(i),typeof r<"u"&&(n=n||{},n.format||(n.format=Ma()),i.options(n)[n.format](r,n).render()),i};ur.getModule=function(e){return Ue.default[e]};for(var ka in Ue.default)Ue.default.hasOwnProperty(ka)&&Bp(Ue.default,ka);function Bp(e,t){Oe.prototype[t]=Oe.prototype[t.toUpperCase()]=Oe.prototype[t.toLowerCase()]=function(r,n){var i=this;return i._errorHandler.wrapBarcodeCall(function(){n.text=typeof n.text>"u"?void 0:""+n.text;var o=(0,Tt.default)(i._options,n);o=(0,Vp.default)(o);var s=e[t],u=$a(r,s,o);return i._encodings.push(u),i})}}function $a(e,t,r){e=""+e;var n=new t(e,r);if(!n.valid())throw new Pa.InvalidInputException(n.constructor.name,e);var i=n.encode();i=(0,Ta.default)(i);for(var o=0;o<i.length;o++)i[o].options=(0,Tt.default)(r,i[o].options);return i}function Ma(){return Ue.default.CODE128?"CODE128":Object.keys(Ue.default)[0]}Oe.prototype.options=function(e){return this._options=(0,Tt.default)(this._options,e),this},Oe.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this},Oe.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var e;for(var t in this._renderProperties){e=this._renderProperties[t];var r=(0,Tt.default)(this._options,e.options);r.format=="auto"&&(r.format=Ma()),this._errorHandler.wrapBarcodeCall(function(){var n=r.value,i=Ue.default[r.format.toUpperCase()],o=$a(n,i,r);Kn(e,o,r)})}}},Oe.prototype.render=function(){if(!this._renderProperties)throw new Pa.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)Kn(this._renderProperties[e],this._encodings,this._options);else Kn(this._renderProperties,this._encodings,this._options);return this},Oe.prototype._defaults=Ia.default;function Kn(e,t,r){t=(0,Ta.default)(t);for(var n=0;n<t.length;n++)t[n].options=(0,Tt.default)(r,t[n].options),(0,Oa.default)(t[n].options);(0,Oa.default)(r);var i=e.renderer,o=new i(e.element,t,r);o.render(),e.afterRender&&e.afterRender()}typeof window<"u"&&(window.JsBarcode=ur),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(e,t){var r=[];return jQuery(this).each(function(){r.push(this)}),ur(r,e,t)});var Gp=ur;const qp=Vo(Gp),Wp=({item:e,onClose:t})=>{const[r,n]=k.useState(e||null),[i,o]=k.useState((e==null?void 0:e.name)||""),[s,u]=k.useState([]),[h,g]=k.useState("CODE128"),[f,y]=k.useState((e==null?void 0:e.sku)||""),[v,p]=k.useState(!1),x=k.useRef(null);k.useEffect(()=>{if(x.current&&f)try{qp(x.current,f,{format:h,displayValue:!0,fontSize:14,height:80,margin:10,background:"#ffffff",lineColor:"#000000"})}catch(w){console.error("Barcode generation error:",w)}},[f,h]);const S=async()=>{if(!i.trim())return;const w=await T.db.query("SELECT * FROM com_hubbi_inventory_items WHERE name LIKE $1 OR sku LIKE $1 LIMIT 10",[`%${i}%`],{moduleId:"com.hubbi.inventory"});u(w)},P=w=>{n(w),y(w.sku||w.id.substring(0,12)),o(w.name),u([])},I=async()=>{if(x.current){const w=new XMLSerializer().serializeToString(x.current),A=new Blob([w],{type:"image/svg+xml"});await navigator.clipboard.write([new ClipboardItem({"image/svg+xml":A})]).catch(()=>{navigator.clipboard.writeText(f)}),p(!0),setTimeout(()=>p(!1),2e3)}},N=()=>{if(x.current){const w=new XMLSerializer().serializeToString(x.current),A=new Blob([w],{type:"image/svg+xml"}),G=URL.createObjectURL(A),Q=document.createElement("a");Q.href=G,Q.download=`barcode-${f}.svg`,Q.click(),URL.revokeObjectURL(G)}},M=()=>{const w=window.open("","_blank");w&&x.current&&(w.document.write(`
                <html>
                <head><title>Barcode - ${f}</title></head>
                <body style="display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;">
                    ${x.current.outerHTML}
                </body>
                </html>
            `),w.document.close(),w.print())};return a.jsxs("div",{className:"bg-hubbi-card rounded-xl border border-hubbi-border shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-hubbi-text flex items-center gap-2",children:[a.jsx(Oi,{size:20,className:"text-hubbi-primary"}),"Generador de CÃ³digos de Barra"]}),t&&a.jsx("button",{onClick:t,className:"text-hubbi-dim hover:text-hubbi-text",children:"âœ•"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-hubbi-dim mb-1",children:"Producto"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:i,onChange:w=>o(w.target.value),onKeyDown:w=>w.key==="Enter"&&S(),placeholder:"Buscar producto...",className:"w-full px-3 py-2 border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text"}),s.length>0&&a.jsx("div",{className:"absolute z-10 mt-1 w-full bg-hubbi-card border border-hubbi-border rounded-lg shadow-lg max-h-48 overflow-auto",children:s.map(w=>a.jsxs("button",{onClick:()=>P(w),className:"w-full text-left px-4 py-2 hover:bg-hubbi-bg border-b border-hubbi-border last:border-0",children:[a.jsx("div",{className:"font-medium text-hubbi-text",children:w.name}),a.jsxs("div",{className:"text-xs text-hubbi-dim",children:["SKU: ",w.sku]})]},w.id))})]})]}),r&&a.jsxs("div",{className:"mb-4 p-3 bg-hubbi-primary/10 rounded-lg flex items-center gap-3",children:[a.jsx(pt,{size:20,className:"text-hubbi-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-hubbi-text",children:r.name}),a.jsxs("div",{className:"text-xs text-hubbi-dim",children:["SKU: ",r.sku]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-hubbi-dim mb-1",children:"Texto del CÃ³digo"}),a.jsx("input",{type:"text",value:f,onChange:w=>y(w.target.value),placeholder:"Ingresa el cÃ³digo...",className:"w-full px-3 py-2 border border-hubbi-border rounded-lg bg-hubbi-input text-hubbi-text font-mono"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-hubbi-dim mb-1",children:"Formato"}),a.jsx("div",{className:"flex gap-2",children:["CODE128","EAN13","UPC","CODE39"].map(w=>a.jsx("button",{onClick:()=>g(w),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${h===w?"bg-hubbi-primary text-hubbi-primary-fg":"bg-hubbi-bg text-hubbi-dim hover:text-hubbi-text"}`,children:w},w))})]}),a.jsx("div",{className:"mb-6 p-4 bg-white rounded-lg flex justify-center border border-hubbi-border",children:f?a.jsx("svg",{ref:x}):a.jsx("div",{className:"text-gray-400 py-8",children:"Ingresa un texto para generar el cÃ³digo"})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:I,disabled:!f,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-hubbi-bg border border-hubbi-border rounded-lg text-hubbi-text hover:bg-hubbi-border disabled:opacity-50",children:[v?a.jsx(Rt,{size:18}):a.jsx(cl,{size:18}),v?"Copiado!":"Copiar"]}),a.jsxs("button",{onClick:N,disabled:!f,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-hubbi-bg border border-hubbi-border rounded-lg text-hubbi-text hover:bg-hubbi-border disabled:opacity-50",children:[a.jsx(ki,{size:18}),"Descargar"]}),a.jsxs("button",{onClick:M,disabled:!f,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-hubbi-primary text-hubbi-primary-fg rounded-lg hover:opacity-90 disabled:opacity-50",children:[a.jsx(yl,{size:18}),"Imprimir"]})]})]})},Na=()=>{const[e,t]=k.useState("overview"),[r,n]=k.useState(!1),i=()=>{switch(e){case"overview":return a.jsx(Uc,{});case"products":return a.jsx(ji,{});case"movements":return a.jsx(Pl,{});case"transfers":return a.jsx(Il,{});case"alerts":return a.jsx(Uo,{});case"audit":return a.jsx(xc,{});case"suppliers":return a.jsx(Bc,{});case"barcodes":return a.jsx(Wp,{});case"reports":return a.jsx("div",{className:"flex flex-col gap-6",children:a.jsxs("div",{className:"bg-hubbi-card border border-hubbi-border rounded-xl p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-hubbi-text mb-4",children:"Exportar Datos"}),a.jsx("p",{className:"text-hubbi-text-dim mb-6",children:"Descarga reportes de inventario en formato Excel."}),a.jsx("button",{className:"px-4 py-2 bg-hubbi-primary text-white rounded-lg opacity-50 cursor-not-allowed",children:"Reportes avanzados (WIP)"})]})});default:return a.jsx(ji,{})}};return a.jsxs("div",{className:"flex h-screen w-full bg-hubbi-bg overflow-hidden text-hubbi-text",children:[a.jsx(zc,{activeTab:e,onTabChange:t}),a.jsx("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden relative",children:a.jsx("div",{className:"flex-1 overflow-auto p-6 scrollbar-thin scrollbar-thumb-hubbi-border scrollbar-track-transparent",children:a.jsx("div",{className:"max-w-7xl mx-auto h-full flex flex-col",children:i()})})}),a.jsx(Hc,{onClose:()=>{},onImport:()=>n(!0)}),r&&a.jsx(Li,{onClose:()=>n(!1),onSuccess:o=>{console.log(`Imported ${o} items`)}})]})};function Xp(){const e="com.hubbi.inventory";typeof window<"u"&&window.hubbi&&typeof window.hubbi.register=="function"?(window.hubbi.register(e,Na),typeof Go=="function"&&Go().catch(t=>{console.error("[Inventory Module] Activation error:",t)}),console.log(`[PluginEntry] Plugin '${e}' registered successfully`)):console.error("[PluginEntry] window.hubbi.register not found. Cannot register plugin.")}return Xp(),Na});
